let e,t,n;function r(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var i,s,a,o,l,u,c,h,d,f,p,g,m,y,w,E,v,C,S,_,b,I,A,T,N,R,D,O,M,k,P,x,L,B,F,U,V,z,j,H,W,G,Y,q,X,$,Q=globalThis,K={},Z={},J=Q.parcelRequire9f3b;null==J&&((J=function(e){if(e in K)return K[e].exports;if(e in Z){var t=Z[e];delete Z[e];var n={id:e,exports:{}};return K[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){Z[e]=t},Q.parcelRequire9f3b=J);var ee=J.register;ee("8rWe0",function(e,t){r(e.exports,"Fragment",()=>n,e=>n=e),r(e.exports,"jsx",()=>i,e=>i=e),r(e.exports,"jsxs",()=>s,e=>s=e);var n,i,s,a=Symbol.for("react.transitional.element");function o(e,t,n){var r=null;if(void 0!==n&&(r=""+n),void 0!==t.key&&(r=""+t.key),"key"in t)for(var i in n={},t)"key"!==i&&(n[i]=t[i]);else n=t;return{$$typeof:a,type:e,key:r,ref:void 0!==(t=n.ref)?t:null,props:n}}n=Symbol.for("react.fragment"),i=o,s=o}),ee("9Qu0I",function(e,t){r(e.exports,"Children",()=>n,e=>n=e),r(e.exports,"Component",()=>i,e=>i=e),r(e.exports,"Fragment",()=>s,e=>s=e),r(e.exports,"Profiler",()=>a,e=>a=e),r(e.exports,"PureComponent",()=>o,e=>o=e),r(e.exports,"StrictMode",()=>l,e=>l=e),r(e.exports,"Suspense",()=>u,e=>u=e),r(e.exports,"__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE",()=>c,e=>c=e),r(e.exports,"__COMPILER_RUNTIME",()=>h,e=>h=e),r(e.exports,"cache",()=>d,e=>d=e),r(e.exports,"cloneElement",()=>f,e=>f=e),r(e.exports,"createContext",()=>p,e=>p=e),r(e.exports,"createElement",()=>g,e=>g=e),r(e.exports,"createRef",()=>m,e=>m=e),r(e.exports,"forwardRef",()=>y,e=>y=e),r(e.exports,"isValidElement",()=>w,e=>w=e),r(e.exports,"lazy",()=>E,e=>E=e),r(e.exports,"memo",()=>v,e=>v=e),r(e.exports,"startTransition",()=>C,e=>C=e),r(e.exports,"unstable_useCacheRefresh",()=>S,e=>S=e),r(e.exports,"use",()=>_,e=>_=e),r(e.exports,"useActionState",()=>b,e=>b=e),r(e.exports,"useCallback",()=>I,e=>I=e),r(e.exports,"useContext",()=>A,e=>A=e),r(e.exports,"useDebugValue",()=>T,e=>T=e),r(e.exports,"useDeferredValue",()=>N,e=>N=e),r(e.exports,"useEffect",()=>R,e=>R=e),r(e.exports,"useId",()=>D,e=>D=e),r(e.exports,"useImperativeHandle",()=>O,e=>O=e),r(e.exports,"useInsertionEffect",()=>M,e=>M=e),r(e.exports,"useLayoutEffect",()=>k,e=>k=e),r(e.exports,"useMemo",()=>P,e=>P=e),r(e.exports,"useOptimistic",()=>x,e=>x=e),r(e.exports,"useReducer",()=>L,e=>L=e),r(e.exports,"useRef",()=>B,e=>B=e),r(e.exports,"useState",()=>F,e=>F=e),r(e.exports,"useSyncExternalStore",()=>U,e=>U=e),r(e.exports,"useTransition",()=>V,e=>V=e),r(e.exports,"version",()=>z,e=>z=e);var n,i,s,a,o,l,u,c,h,d,f,p,g,m,y,w,E,v,C,S,_,b,I,A,T,N,R,D,O,M,k,P,x,L,B,F,U,V,z,j=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),X=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),K=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),J=Symbol.iterator,ee={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},et=Object.assign,en={};function er(e,t,n){this.props=e,this.context=t,this.refs=en,this.updater=n||ee}function ei(){}function es(e,t,n){this.props=e,this.context=t,this.refs=en,this.updater=n||ee}er.prototype.isReactComponent={},er.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},er.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},ei.prototype=er.prototype;var ea=es.prototype=new ei;ea.constructor=es,et(ea,er.prototype),ea.isPureReactComponent=!0;var eo=Array.isArray,el={H:null,A:null,T:null,S:null,V:null},eu=Object.prototype.hasOwnProperty;function ec(e,t,n,r,i,s){return{$$typeof:j,type:e,key:t,ref:void 0!==(n=s.ref)?n:null,props:s}}function eh(e){return"object"==typeof e&&null!==e&&e.$$typeof===j}var ed=/\/+/g;function ef(e,t){var n,r;return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36)}function ep(){}function eg(e,t,n){if(null==e)return e;var r=[],i=0;return!function e(t,n,r,i,s){var a,o,l,u=typeof t;("undefined"===u||"boolean"===u)&&(t=null);var c=!1;if(null===t)c=!0;else switch(u){case"bigint":case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case j:case H:c=!0;break;case Z:return e((c=t._init)(t._payload),n,r,i,s)}}if(c)return s=s(t),c=""===i?"."+ef(t,0):i,eo(s)?(r="",null!=c&&(r=c.replace(ed,"$&/")+"/"),e(s,n,r,"",function(e){return e})):null!=s&&(eh(s)&&(a=s,o=r+(null==s.key||t&&t.key===s.key?"":(""+s.key).replace(ed,"$&/")+"/")+c,s=ec(a.type,o,void 0,void 0,void 0,a.props)),n.push(s)),1;c=0;var h=""===i?".":i+":";if(eo(t))for(var d=0;d<t.length;d++)u=h+ef(i=t[d],d),c+=e(i,n,r,u,s);else if("function"==typeof(d=null===(l=t)||"object"!=typeof l?null:"function"==typeof(l=J&&l[J]||l["@@iterator"])?l:null))for(t=d.call(t),d=0;!(i=t.next()).done;)u=h+ef(i=i.value,d++),c+=e(i,n,r,u,s);else if("object"===u){if("function"==typeof t.then)return e(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(ep,ep):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(t),n,r,i,s);throw Error("Objects are not valid as a React child (found: "+("[object Object]"===(n=String(t))?"object with keys {"+Object.keys(t).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.")}return c}(e,r,"","",function(e){return t.call(n,e,i++)}),r}function em(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var ey="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}console.error(e)};function ew(){}n={map:eg,forEach:function(e,t,n){eg(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return eg(e,function(){t++}),t},toArray:function(e){return eg(e,function(e){return e})||[]},only:function(e){if(!eh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},i=er,s=W,a=Y,o=es,l=G,u=Q,c=el,h={__proto__:null,c:function(e){return el.H.useMemoCache(e)}},d=function(e){return function(){return e.apply(null,arguments)}},f=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=et({},e.props),i=e.key,s=void 0;if(null!=t)for(a in void 0!==t.ref&&(s=void 0),void 0!==t.key&&(i=""+t.key),t)eu.call(t,a)&&"key"!==a&&"__self"!==a&&"__source"!==a&&("ref"!==a||void 0!==t.ref)&&(r[a]=t[a]);var a=arguments.length-2;if(1===a)r.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];r.children=o}return ec(e.type,i,void 0,void 0,s,r)},p=function(e){return(e={$$typeof:X,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:q,_context:e},e},g=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)eu.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];i.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return ec(e,s,void 0,void 0,null,i)},m=function(){return{current:null}},y=function(e){return{$$typeof:$,render:e}},w=eh,E=function(e){return{$$typeof:Z,_payload:{_status:-1,_result:e},_init:em}},v=function(e,t){return{$$typeof:K,type:e,compare:void 0===t?null:t}},C=function(e){var t=el.T,n={};el.T=n;try{var r=e(),i=el.S;null!==i&&i(n,r),"object"==typeof r&&null!==r&&"function"==typeof r.then&&r.then(ew,ey)}catch(e){ey(e)}finally{el.T=t}},S=function(){return el.H.useCacheRefresh()},_=function(e){return el.H.use(e)},b=function(e,t,n){return el.H.useActionState(e,t,n)},I=function(e,t){return el.H.useCallback(e,t)},A=function(e){return el.H.useContext(e)},T=function(){},N=function(e,t){return el.H.useDeferredValue(e,t)},R=function(e,t,n){var r=el.H;if("function"==typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},D=function(){return el.H.useId()},O=function(e,t,n){return el.H.useImperativeHandle(e,t,n)},M=function(e,t){return el.H.useInsertionEffect(e,t)},k=function(e,t){return el.H.useLayoutEffect(e,t)},P=function(e,t){return el.H.useMemo(e,t)},x=function(e,t){return el.H.useOptimistic(e,t)},L=function(e,t,n){return el.H.useReducer(e,t,n)},B=function(e){return el.H.useRef(e)},F=function(e){return el.H.useState(e)},U=function(e,t,n){return el.H.useSyncExternalStore(e,t,n)},V=function(){return el.H.useTransition()},z="19.1.0"}),ee("5R2tS",function(e,t){r(e.exports,"__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE",()=>n,e=>n=e),r(e.exports,"createPortal",()=>i,e=>i=e),r(e.exports,"flushSync",()=>s,e=>s=e),r(e.exports,"preconnect",()=>a,e=>a=e),r(e.exports,"prefetchDNS",()=>o,e=>o=e),r(e.exports,"preinit",()=>l,e=>l=e),r(e.exports,"preinitModule",()=>u,e=>u=e),r(e.exports,"preload",()=>c,e=>c=e),r(e.exports,"preloadModule",()=>h,e=>h=e),r(e.exports,"requestFormReset",()=>d,e=>d=e),r(e.exports,"unstable_batchedUpdates",()=>f,e=>f=e),r(e.exports,"useFormState",()=>p,e=>p=e),r(e.exports,"useFormStatus",()=>g,e=>g=e),r(e.exports,"version",()=>m,e=>m=e);var n,i,s,a,o,l,u,c,h,d,f,p,g,m,y=J("acw62");function w(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function E(){}var v={d:{f:E,r:function(){throw Error(w(522))},D:E,C:E,L:E,m:E,X:E,S:E,M:E},p:0,findDOMNode:null},C=Symbol.for("react.portal"),S=y.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function _(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}n=v,i=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(w(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:C,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},s=function(e){var t=S.T,n=v.p;try{if(S.T=null,v.p=2,e)return e()}finally{S.T=t,v.p=n,v.d.f()}},a=function(e,t){"string"==typeof e&&(t=t?"string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:null,v.d.C(e,t))},o=function(e){"string"==typeof e&&v.d.D(e)},l=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,r=_(n,t.crossOrigin),i="string"==typeof t.integrity?t.integrity:void 0,s="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?v.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&v.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},u=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=_(t.as,t.crossOrigin);v.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&v.d.M(e)},c=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,r=_(n,t.crossOrigin);v.d.L(e,n,{crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},h=function(e,t){if("string"==typeof e)if(t){var n=_(t.as,t.crossOrigin);v.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else v.d.m(e)},d=function(e){v.d.r(e)},f=function(e,t){return e(t)},p=function(e,t,n){return S.H.useFormState(e,t,n)},g=function(){return S.H.useHostTransitionStatus()},m="19.1.0"}),ee("acw62",function(e,t){e.exports=J("9Qu0I")}),ee("iWoMt",function(e,t){r(e.exports,"createRoot",()=>tx,e=>tx=e),r(e.exports,"hydrateRoot",()=>tL,e=>tL=e),r(e.exports,"version",()=>tB,e=>tB=e);var n,i=J("fO90s"),s=J("acw62"),a=J("1u0KT");function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function u(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do 0!=(4098&(t=e).flags)&&(n=t.return),e=t.return;while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function h(e){if(u(e)!==e)throw Error(o(188))}var d=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),C=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope");var T=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var N=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var R=Symbol.iterator;function D(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=R&&e[R]||e["@@iterator"])?e:null}var O=Symbol.for("react.client.reference"),M=Array.isArray,k=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,x={pending:!1,data:null,method:null,action:null},L=[],B=-1;function F(e){return{current:e}}function U(e){0>B||(e.current=L[B],L[B]=null,B--)}function V(e,t){L[++B]=e.current,e.current=t}var z=F(null),j=F(null),H=F(null),W=F(null);function G(e,t){switch(V(H,t),V(j,e),V(z,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?uc(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=uh(t=uc(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(z),V(z,e)}function Y(){U(z),U(j),U(H)}function q(e){null!==e.memoizedState&&V(W,e);var t=z.current,n=uh(t,e.type);t!==n&&(V(j,e),V(z,n))}function X(e){j.current===e&&(U(z),U(j)),W.current===e&&(U(W),u1._currentValue=x)}var $=Object.prototype.hasOwnProperty,Q=i.unstable_scheduleCallback,K=i.unstable_cancelCallback,Z=i.unstable_shouldYield,ee=i.unstable_requestPaint,et=i.unstable_now,en=i.unstable_getCurrentPriorityLevel,er=i.unstable_ImmediatePriority,ei=i.unstable_UserBlockingPriority,es=i.unstable_NormalPriority,ea=i.unstable_LowPriority,eo=i.unstable_IdlePriority,el=i.log,eu=i.unstable_setDisableYieldValue,ec=null,eh=null;function ed(e){if("function"==typeof el&&eu(e),eh&&"function"==typeof eh.setStrictMode)try{eh.setStrictMode(ec,e)}catch(e){}}var ef=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(ep(e)/eg|0)|0},ep=Math.log,eg=Math.LN2,em=256,ey=4194304;function ew(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 0x1000000:case 0x2000000:return 0x3c00000&e;case 0x4000000:return 0x4000000;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0;default:return e}}function eE(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=0x7ffffff&r;return 0!==o?0!=(r=o&~s)?i=ew(r):0!=(a&=o)?i=ew(a):n||0!=(n=o&~e)&&(i=ew(n)):0!=(o=r&~s)?i=ew(o):0!==a?i=ew(a):n||0!=(n=r&~e)&&(i=ew(n)),0===i?0:0!==t&&t!==i&&0==(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&0!=(4194048&n))?t:i}function ev(e,t){return 0==(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function eC(){var e=em;return 0==(4194048&(em<<=1))&&(em=256),e}function eS(){var e=ey;return 0==(0x3c00000&(ey<<=1))&&(ey=4194304),e}function e_(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function eb(e,t){e.pendingLanes|=t,0x10000000!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function eI(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-ef(t);e.entangledLanes|=t,e.entanglements[r]=0x40000000|e.entanglements[r]|4194090&n}function eA(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ef(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function eT(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:e=128;break;case 0x10000000:e=0x8000000;break;default:e=0}return e}function eN(e){return 2<(e&=-e)?8<e?0!=(0x7ffffff&e)?32:0x10000000:8:2}function eR(){var e=P.p;return 0!==e?e:void 0===(e=window.event)?32:ci(e.type)}var eD=Math.random().toString(36).slice(2),eO="__reactFiber$"+eD,eM="__reactProps$"+eD,ek="__reactContainer$"+eD,eP="__reactEvents$"+eD,ex="__reactListeners$"+eD,eL="__reactHandles$"+eD,eB="__reactResources$"+eD,eF="__reactMarker$"+eD;function eU(e){delete e[eO],delete e[eM],delete e[eP],delete e[ex],delete e[eL]}function eV(e){var t=e[eO];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ek]||n[eO]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uI(e);null!==e;){if(n=e[eO])return n;e=uI(e)}return t}n=(e=n).parentNode}return null}function ez(e){if(e=e[eO]||e[ek]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function ej(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function eH(e){var t=e[eB];return t||(t=e[eB]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function eW(e){e[eF]=!0}var eG=new Set,eY={};function eq(e,t){eX(e,t),eX(e+"Capture",t)}function eX(e,t){for(eY[e]=t,e=0;e<t.length;e++)eG.add(t[e])}var e$=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),eQ={},eK={};function eZ(e,t,n){if($.call(eK,t)||!$.call(eQ,t)&&(e$.test(t)?eK[t]=!0:(eQ[t]=!0,!1)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function eJ(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function e1(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+r)}}function e0(e){if(void 0===tF)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);tF=t&&t[1]||"",tU=-1<e.stack.indexOf("\n    at")?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+tF+e+tU}var e2=!1;function e3(e,t){if(!e||e2)return"";e2=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(e){if(e&&r&&"string"==typeof e.stack)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split("\n"),u=o.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===u.length)for(r=l.length-1,i=u.length-1;1<=r&&0<=i&&l[r]!==u[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==u[i]){if(1!==r||1!==i)do if(r--,i--,0>i||l[r]!==u[i]){var c="\n"+l[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=r&&0<=i)break}}}finally{e2=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?e0(n):""}function e4(e){try{var t="";do t+=function(e){switch(e.tag){case 26:case 27:case 5:return e0(e.type);case 16:return e0("Lazy");case 13:return e0("Suspense");case 19:return e0("SuspenseList");case 0:case 15:return e3(e.type,!1);case 11:return e3(e.type.render,!1);case 1:return e3(e.type,!0);case 31:return e0("Activity");default:return""}}(e),e=e.return;while(e)return t}catch(e){return"\nError generating stack: "+e.message+"\n"+e.stack}}function e6(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function e8(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function e5(e){e._valueTracker||(e._valueTracker=function(e){var t=e8(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function e7(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=e8(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function e9(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var te=/[\n"\\]/g;function tt(e){return e.replace(te,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function tn(e,t,n,r,i,s,a,o){e.name="",null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+e6(t)):e.value!==""+e6(t)&&(e.value=""+e6(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?ti(e,a,e6(t)):null!=n?ti(e,a,e6(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!=typeof i&&"symbol"!=typeof i),null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.name=""+e6(o):e.removeAttribute("name")}function tr(e,t,n,r,i,s,a,o){if(null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s&&(e.type=s),null!=t||null!=n){if(("submit"===s||"reset"===s)&&null==t)return;n=null!=n?""+e6(n):"",t=null!=t?""+e6(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:i)&&"symbol"!=typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a&&(e.name=a)}function ti(e,t,n){"number"===t&&e9(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ts(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(i=0,n=""+e6(n),t=null;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ta(e,t,n){if(null!=t&&((t=""+e6(t))!==e.value&&(e.value=t),null==n)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=null!=n?""+e6(n):""}function to(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if(M(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}e.defaultValue=n=e6(t),(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function tl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType){n.nodeValue=t;return}}e.textContent=t}var tu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tc(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||tu.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function th(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&tc(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&tc(e,s,t[s])}function td(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tg(e){return tp.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var tm=null;function ty(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var tw=null,tE=null;function tv(e){var t=ez(e);if(t&&(e=t.stateNode)){var n=e[eM]||null;switch(e=t.stateNode,t.type){case"input":if(tn(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+tt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[eM]||null;if(!i)throw Error(o(90));tn(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&e7(r)}break;case"textarea":ta(e,n.value,n.defaultValue);break;case"select":null!=(t=n.value)&&ts(e,!!n.multiple,t,!1)}}}var tC=!1;function tS(e,t,n){if(tC)return e(t,n);tC=!0;try{return e(t)}finally{if(tC=!1,(null!==tw||null!==tE)&&(ls(),tw&&(t=tw,e=tE,tE=tw=null,tv(t),e)))for(t=0;t<e.length;t++)tv(e[t])}}function t_(e,t){var n=e.stateNode;if(null===n)return null;var r=n[eM]||null;if(null===r)return null;switch(n=r[t],t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r="button"!==(e=e.type)&&"input"!==e&&"select"!==e&&"textarea"!==e),e=!r;break;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(o(231,t,typeof n));return n}var tb="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,tI=!1;if(tb)try{var tA={};Object.defineProperty(tA,"passive",{get:function(){tI=!0}}),window.addEventListener("test",tA,tA),window.removeEventListener("test",tA,tA)}catch(e){tI=!1}var tT=null,tN=null,tR=null;function tD(){if(tR)return tR;var e,t,n=tN,r=n.length,i="value"in tT?tT.value:tT.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return tR=i.slice(e,1<t?1-t:void 0)}function tO(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tM(){return!0}function tk(){return!1}function tP(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?tM:tk,this.isPropagationStopped=tk,this}return d(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tM)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tM)},persist:function(){},isPersistent:tM}),t}var tx,tL,tB,tF,tU,tV,tz,tj,tH={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tW=tP(tH),tG=d({},tH,{view:0,detail:0}),tY=tP(tG),tq=d({},tG,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:t4,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==tj&&(tj&&"mousemove"===e.type?(tV=e.screenX-tj.screenX,tz=e.screenY-tj.screenY):tz=tV=0,tj=e),tV)},movementY:function(e){return"movementY"in e?e.movementY:tz}}),tX=tP(tq),t$=tP(d({},tq,{dataTransfer:0})),tQ=tP(d({},tG,{relatedTarget:0})),tK=tP(d({},tH,{animationName:0,elapsedTime:0,pseudoElement:0})),tZ=tP(d({},tH,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),tJ=tP(d({},tH,{data:0})),t1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=t2[e])&&!!t[e]}function t4(){return t3}var t6=tP(d({},tG,{key:function(e){if(e.key){var t=t1[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tO(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?t0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:t4,charCode:function(e){return"keypress"===e.type?tO(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tO(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),t8=tP(d({},tq,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),t5=tP(d({},tG,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:t4})),t7=tP(d({},tH,{propertyName:0,elapsedTime:0,pseudoElement:0})),t9=tP(d({},tq,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),ne=tP(d({},tH,{newState:0,oldState:0})),nt=[9,13,27,32],nn=tb&&"CompositionEvent"in window,nr=null;tb&&"documentMode"in document&&(nr=document.documentMode);var ni=tb&&"TextEvent"in window&&!nr,ns=tb&&(!nn||nr&&8<nr&&11>=nr),na=!1;function no(e,t){switch(e){case"keyup":return -1!==nt.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nl(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var nu=!1,nc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!nc[e.type]:"textarea"===t}function nd(e,t,n,r){tw?tE?tE.push(r):tE=[r]:tw=r,0<(t=l8(t,"onChange")).length&&(n=new tW("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var nf=null,np=null;function ng(e){lZ(e,0)}function nm(e){if(e7(ej(e)))return e}function ny(e,t){if("change"===e)return t}var nw=!1;if(tb){if(tb){var nE="oninput"in document;if(!nE){var nv=document.createElement("div");nv.setAttribute("oninput","return;"),nE="function"==typeof nv.oninput}n=nE}else n=!1;nw=n&&(!document.documentMode||9<document.documentMode)}function nC(){nf&&(nf.detachEvent("onpropertychange",nS),np=nf=null)}function nS(e){if("value"===e.propertyName&&nm(np)){var t=[];nd(t,np,e,ty(e)),tS(ng,t)}}function n_(e,t,n){"focusin"===e?(nC(),nf=t,np=n,nf.attachEvent("onpropertychange",nS)):"focusout"===e&&nC()}function nb(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return nm(np)}function nI(e,t){if("click"===e)return nm(t)}function nA(e,t){if("input"===e||"change"===e)return nm(t)}var nT="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function nN(e,t){if(nT(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!$.call(t,i)||!nT(e[i],t[i]))return!1}return!0}function nR(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nD(e,t){var n,r=nR(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=nR(r)}}function nO(e){e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;for(var t=e9(e.document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(n)e=t.contentWindow;else break;t=e9(e.document)}return t}function nM(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nk=tb&&"documentMode"in document&&11>=document.documentMode,nP=null,nx=null,nL=null,nB=!1;function nF(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;nB||null==nP||nP!==e9(r)||(r="selectionStart"in(r=nP)&&nM(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},nL&&nN(nL,r)||(nL=r,0<(r=l8(nx,"onSelect")).length&&(t=new tW("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=nP)))}function nU(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var nV={animationend:nU("Animation","AnimationEnd"),animationiteration:nU("Animation","AnimationIteration"),animationstart:nU("Animation","AnimationStart"),transitionrun:nU("Transition","TransitionRun"),transitionstart:nU("Transition","TransitionStart"),transitioncancel:nU("Transition","TransitionCancel"),transitionend:nU("Transition","TransitionEnd")},nz={},nj={};function nH(e){if(nz[e])return nz[e];if(!nV[e])return e;var t,n=nV[e];for(t in n)if(n.hasOwnProperty(t)&&t in nj)return nz[e]=n[t];return e}tb&&(nj=document.createElement("div").style,"AnimationEvent"in window||(delete nV.animationend.animation,delete nV.animationiteration.animation,delete nV.animationstart.animation),"TransitionEvent"in window||delete nV.transitionend.transition);var nW=nH("animationend"),nG=nH("animationiteration"),nY=nH("animationstart"),nq=nH("transitionrun"),nX=nH("transitionstart"),n$=nH("transitioncancel"),nQ=nH("transitionend"),nK=new Map,nZ="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nJ(e,t){nK.set(e,t),eq(t,[e])}nZ.push("scrollEnd");var n1=new WeakMap;function n0(e,t){if("object"==typeof e&&null!==e){var n=n1.get(e);return void 0!==n?n:(t={value:e,source:t,stack:e4(t)},n1.set(e,t),t)}return{value:e,source:t,stack:e4(t)}}var n2=[],n3=0,n4=0;function n6(){for(var e=n3,t=n4=n3=0;t<e;){var n=n2[t];n2[t++]=null;var r=n2[t];n2[t++]=null;var i=n2[t];n2[t++]=null;var s=n2[t];if(n2[t++]=null,null!==r&&null!==i){var a=r.pending;null===a?i.next=i:(i.next=a.next,a.next=i),r.pending=i}0!==s&&n9(n,i,s)}}function n8(e,t,n,r){n2[n3++]=e,n2[n3++]=t,n2[n3++]=n,n2[n3++]=r,n4|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function n5(e,t,n,r){return n8(e,t,n,r),re(e)}function n7(e,t){return n8(e,null,null,t),re(e)}function n9(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-ef(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=0x20000000|n),s):null}function re(e){if(50<o5)throw o5=0,o7=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var rt={};function rn(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(e,t,n,r){return new rn(e,t,n,r)}function ri(e){return!(!(e=e.prototype)||!e.isReactComponent)}function rs(e,t){var n=e.alternate;return null===n?((n=rr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=0x3e00000&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function ra(e,t){e.flags&=0x3e00002;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,e.dependencies=null===(t=n.dependencies)?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ro(e,t,n,r,i,s){var a=0;if(r=e,"function"==typeof e)ri(e)&&(a=1);else if("string"==typeof e)a=!function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;if("stylesheet"===t.rel)return e=t.disabled,"string"==typeof t.precedence&&null==e;return!0;case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,z.current)?"html"===e||"head"===e||"body"===e?27:5:26;else e:switch(e){case T:return(e=rr(31,n,t,i)).elementType=T,e.lanes=s,e;case m:return rl(n.children,i,s,t);case y:a=8,i|=24;break;case w:return(e=rr(12,n,t,2|i)).elementType=w,e.lanes=s,e;case _:return(e=rr(13,n,t,i)).elementType=_,e.lanes=s,e;case b:return(e=rr(19,n,t,i)).elementType=b,e.lanes=s,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case E:case C:a=10;break e;case v:a=9;break e;case S:a=11;break e;case I:a=14;break e;case A:a=16,r=null;break e}a=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=rr(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function rl(e,t,n,r){return(e=rr(7,e,r,t)).lanes=n,e}function ru(e,t,n){return(e=rr(6,e,null,t)).lanes=n,e}function rc(e,t,n){return(t=rr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var rh=[],rd=0,rf=null,rp=0,rg=[],rm=0,ry=null,rw=1,rE="";function rv(e,t){rh[rd++]=rp,rh[rd++]=rf,rf=e,rp=t}function rC(e,t,n){rg[rm++]=rw,rg[rm++]=rE,rg[rm++]=ry,ry=e;var r=rw;e=rE;var i=32-ef(r)-1;r&=~(1<<i),n+=1;var s=32-ef(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,rw=1<<32-ef(t)+i|n<<i|r,rE=s+e}else rw=1<<s|n<<i|r,rE=e}function rS(e){null!==e.return&&(rv(e,1),rC(e,1,0))}function r_(e){for(;e===rf;)rf=rh[--rd],rh[rd]=null,rp=rh[--rd],rh[rd]=null;for(;e===ry;)ry=rg[--rm],rg[rm]=null,rE=rg[--rm],rg[rm]=null,rw=rg[--rm],rg[rm]=null}var rb=null,rI=null,rA=!1,rT=null,rN=!1,rR=Error(o(519));function rD(e){throw rL(n0(Error(o(418,"")),e)),rR}function rO(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[eO]=e,t[eM]=r,n){case"dialog":lJ("cancel",t),lJ("close",t);break;case"iframe":case"object":case"embed":lJ("load",t);break;case"video":case"audio":for(n=0;n<lQ.length;n++)lJ(lQ[n],t);break;case"source":lJ("error",t);break;case"img":case"image":case"link":lJ("error",t),lJ("load",t);break;case"details":lJ("toggle",t);break;case"input":lJ("invalid",t),tr(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),e5(t);break;case"select":lJ("invalid",t);break;case"textarea":lJ("invalid",t),to(t,r.value,r.defaultValue,r.children),e5(t)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||un(t.textContent,n)?(null!=r.popover&&(lJ("beforetoggle",t),lJ("toggle",t)),null!=r.onScroll&&lJ("scroll",t),null!=r.onScrollEnd&&lJ("scrollend",t),null!=r.onClick&&(t.onclick=ur),t=!0):t=!1,t||rD(e)}function rM(e){for(rb=e.return;rb;)switch(rb.tag){case 5:case 13:rN=!1;return;case 27:case 3:rN=!0;return;default:rb=rb.return}}function rk(e){if(e!==rb)return!1;if(!rA)return rM(e),rA=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t="form"===(t=e.type)||"button"===t||ud(e.type,e.memoizedProps)),t=!t),t&&rI&&rD(e),rM(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(n=0,e=e.nextSibling;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){rI=u_(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}rI=null}}else 27===n?(n=rI,uE(e.type)?(e=ub,ub=null,rI=e):rI=n):rI=rb?u_(e.stateNode.nextSibling):null;return!0}function rP(){rI=rb=null,rA=!1}function rx(){var e=rT;return null!==e&&(null===oX?oX=e:oX.push.apply(oX,e),rT=null),e}function rL(e){null===rT?rT=[e]:rT.push(e)}var rB=F(null),rF=null,rU=null;function rV(e,t,n){V(rB,t._currentValue),t._currentValue=n}function rz(e){e._currentValue=rB.current,U(rB)}function rj(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function rH(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var a=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var u=0;u<t.length;u++)if(l.context===t[u]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),rj(s.return,n,e),r||(a=null);break e}s=l.next}}else if(18===i.tag){if(null===(a=i.return))throw Error(o(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),rj(a,n,e),a=null}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}function rW(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s){if(0!=(524288&i.flags))s=!0;else if(0!=(262144&i.flags))break}if(10===i.tag){var a=i.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var l=i.type;nT(i.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(i===W.current){if(null===(a=i.alternate))throw Error(o(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(u1):e=[u1])}i=i.return}null!==e&&rH(t,e,n,r),t.flags|=262144}function rG(e){for(e=e.firstContext;null!==e;){if(!nT(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function rY(e){rF=e,rU=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function rq(e){return r$(rF,e)}function rX(e,t){return null===rF&&rY(e),r$(e,t)}function r$(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===rU){if(null===e)throw Error(o(308));rU=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else rU=rU.next=t;return n}var rQ="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},rK=i.unstable_scheduleCallback,rZ=i.unstable_NormalPriority,rJ={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function r1(){return{controller:new rQ,data:new Map,refCount:0}}function r0(e){e.refCount--,0===e.refCount&&rK(rZ,function(){e.controller.abort()})}var r2=null,r3=0,r4=0,r6=null;function r8(){if(0==--r3&&null!==r2){null!==r6&&(r6.status="fulfilled");var e=r2;r2=null,r4=0,r6=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var r5=k.S;k.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===r2){var n=r2=[];r3=0,r4=lG(),r6={status:"pending",value:void 0,then:function(e){n.push(e)}}}r3++,t.then(r8,r8)}(0,t),null!==r5&&r5(e,t)};var r7=F(null);function r9(){var e=r7.current;return null!==e?e:oM.pooledCache}function ie(e,t){null===t?V(r7,r7.current):V(r7,t.pool)}function it(){var e=r9();return null===e?null:{parent:rJ._currentValue,pool:e}}var ir=Error(o(460)),ii=Error(o(474)),is=Error(o(542)),ia={then:function(){}};function io(e){return"fulfilled"===(e=e.status)||"rejected"===e}function il(){}function iu(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(il,il),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw id(e=t.reason),e;default:if("string"==typeof t.status)t.then(il,il);else{if(null!==(e=oM)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw id(e=t.reason),e}throw ic=t,ir}}var ic=null;function ih(){if(null===ic)throw Error(o(459));var e=ic;return ic=null,e}function id(e){if(e===ir||e===is)throw Error(o(483))}var ip=!1;function ig(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function im(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function iy(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function iw(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&oO)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=re(e),n9(e,null,n),t}return n8(e,r,t,n),re(e)}function iE(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194048&n))){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,eA(e,n)}}function iv(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n)null===s?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var iC=!1;function iS(){if(iC){var e=r6;if(null!==e)throw e}}function i_(e,t,n,r){iC=!1;var i=e.updateQueue;ip=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,u=l.next;l.next=null,null===a?s=u:a.next=u,a=l;var c=e.alternate;null!==c&&(o=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===o?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l)}if(null!==s){var h=i.baseState;for(a=0,c=u=l=null,o=s;;){var f=-0x20000001&o.lane,p=f!==o.lane;if(p?(oP&f)===f:(r&f)===f){0!==f&&f===r4&&(iC=!0),null!==c&&(c=c.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var g=e,m=o;switch(f=t,m.tag){case 1:if("function"==typeof(g=m.payload)){h=g.call(n,h,f);break e}h=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null==(f="function"==typeof(g=m.payload)?g.call(n,h,f):g))break e;h=d({},h,f);break e;case 2:ip=!0}}null!==(f=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(u=c=p,l=h):c=c.next=p,a|=f;if(null===(o=o.next))if(null===(o=i.shared.pending))break;else o=(p=o).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null===s&&(i.shared.lanes=0),oj|=a,e.lanes=a,e.memoizedState=h}}function ib(e,t){if("function"!=typeof e)throw Error(o(191,e));e.call(t)}function iI(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ib(n[e],t)}var iA=F(null),iT=F(0);function iN(e,t){V(iT,e=oV),V(iA,t),oV=e|t.baseLanes}function iR(){V(iT,oV),V(iA,iA.current)}function iD(){oV=iT.current,U(iA),U(iT)}var iO=0,iM=null,ik=null,iP=null,ix=!1,iL=!1,iB=!1,iF=0,iU=0,iV=null,iz=0;function ij(){throw Error(o(321))}function iH(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!nT(e[n],t[n]))return!1;return!0}function iW(e,t,n,r,i,s){return iO=s,iM=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,k.H=null===e||null===e.memoizedState?sQ:sK,iB=!1,s=n(r,i),iB=!1,iL&&(s=iY(t,n,r,i)),iG(e),s}function iG(e){k.H=s$;var t=null!==ik&&null!==ik.next;if(iO=0,iP=ik=iM=null,ix=!1,iU=0,iV=null,t)throw Error(o(300));null===e||aC||null!==(e=e.dependencies)&&rG(e)&&(aC=!0)}function iY(e,t,n,r){iM=e;var i=0;do{if(iL&&(iV=null),iU=0,iL=!1,25<=i)throw Error(o(301));if(i+=1,iP=ik=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}k.H=sZ,s=t(n,r)}while(iL)return s}function iq(){var e=k.H,t=e.useState()[0];return t="function"==typeof t.then?i1(t):t,e=e.useState()[0],(null!==ik?ik.memoizedState:null)!==e&&(iM.flags|=1024),t}function iX(){var e=0!==iF;return iF=0,e}function i$(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function iQ(e){if(ix){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ix=!1}iO=0,iP=ik=iM=null,iL=!1,iU=iF=0,iV=null}function iK(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===iP?iM.memoizedState=iP=e:iP=iP.next=e,iP}function iZ(){if(null===ik){var e=iM.alternate;e=null!==e?e.memoizedState:null}else e=ik.next;var t=null===iP?iM.memoizedState:iP.next;if(null!==t)iP=t,ik=e;else{if(null===e){if(null===iM.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(ik=e).memoizedState,baseState:ik.baseState,baseQueue:ik.baseQueue,queue:ik.queue,next:null},null===iP?iM.memoizedState=iP=e:iP=iP.next=e}return iP}function iJ(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function i1(e){var t=iU;return iU+=1,null===iV&&(iV=[]),e=iu(iV,e,t),t=iM,null===(null===iP?t.memoizedState:iP.next)&&(k.H=null===(t=t.alternate)||null===t.memoizedState?sQ:sK),e}function i0(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return i1(e);if(e.$$typeof===C)return rq(e)}throw Error(o(438,String(e)))}function i2(e){var t=null,n=iM.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=iM.alternate;null!==r&&null!==(r=r.updateQueue)&&null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})}if(null==t&&(t={data:[],index:0}),null===n&&(n=iJ(),iM.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=N;return t.index++,n}function i3(e,t){return"function"==typeof t?t(e):t}function i4(e){return i6(iZ(),ik,e)}function i6(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{t=i.next;var l=a=null,u=null,c=t,h=!1;do{var d=-0x20000001&c.lane;if(d!==c.lane?(oP&d)===d:(iO&d)===d){var f=c.revertLane;if(0===f)null!==u&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===r4&&(h=!0);else if((iO&f)===f){c=c.next,f===r4&&(h=!0);continue}else d={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=d,a=s):u=u.next=d,iM.lanes|=f,oj|=f;d=c.action,iB&&n(s,d),s=c.hasEagerState?c.eagerState:n(s,d)}else f={lane:d,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=f,a=s):u=u.next=f,iM.lanes|=d,oj|=d;c=c.next}while(null!==c&&c!==t)if(null===u?a=s:u.next=l,!nT(s,e.memoizedState)&&(aC=!0,h&&null!==(n=r6)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=u,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function i8(e){var t=iZ(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i)nT(s,t.memoizedState)||(aC=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function i5(e,t,n){var r=iM,i=iZ(),s=rA;if(s){if(void 0===n)throw Error(o(407));n=n()}else n=t();var a=!nT((ik||i).memoizedState,n);if(a&&(i.memoizedState=n,aC=!0),i=i.queue,sC(2048,8,se.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||null!==iP&&1&iP.memoizedState.tag){if(r.flags|=2048,sy(9,sw(),i9.bind(null,r,i,n,t),null),null===oM)throw Error(o(349));s||0!=(124&iO)||i7(r,t,n)}return n}function i7(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=iM.updateQueue)?(t=iJ(),iM.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function i9(e,t,n,r){t.value=n,t.getSnapshot=r,st(t)&&sn(e)}function se(e,t,n){return n(function(){st(t)&&sn(e)})}function st(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!nT(e,n)}catch(e){return!0}}function sn(e){var t=n7(e,2);null!==t&&lt(t,e,2)}function sr(e){var t=iK();if("function"==typeof e){var n=e;if(e=n(),iB){ed(!0);try{n()}finally{ed(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i3,lastRenderedState:e},t}function si(e,t,n,r){return e.baseState=n,i6(e,ik,"function"==typeof r?r:i3)}function ss(e,t,n,r,i){if(sY(e))throw Error(o(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==k.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,sa(t,s)):(s.next=n.next,t.pending=n.next=s)}}function sa(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=k.T,a={};k.T=a;try{var o=n(i,r),l=k.S;null!==l&&l(a,o),so(e,t,o)}catch(n){su(e,t,n)}finally{k.T=s}}else try{s=n(i,r),so(e,t,s)}catch(n){su(e,t,n)}}function so(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){sl(e,t,n)},function(n){return su(e,t,n)}):sl(e,t,n)}function sl(e,t,n){t.status="fulfilled",t.value=n,sc(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,sa(e,n)))}function su(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do t.status="rejected",t.reason=n,sc(t),t=t.next;while(t!==r)}e.action=null}function sc(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function sh(e,t){return t}function sd(e,t){if(rA){var n=oM.formState;if(null!==n){e:{var r=iM;if(rA){if(rI){t:{for(var i=rI,s=rN;8!==i.nodeType;)if(!s||null===(i=u_(i.nextSibling))){i=null;break t}i="F!"===(s=i.data)||"F"===s?i:null}if(i){rI=u_(i.nextSibling),r="F!"===i.data;break e}}rD(r)}r=!1}r&&(t=n[0])}}return(n=iK()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sh,lastRenderedState:t},n.queue=r,n=sH.bind(null,iM,r),r.dispatch=n,r=sr(!1),s=sG.bind(null,iM,!1,r.queue),r=iK(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=ss.bind(null,iM,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function sf(e){return sp(iZ(),ik,e)}function sp(e,t,n){if(t=i6(e,t,sh)[0],e=i4(i3)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=i1(t)}catch(e){if(e===ir)throw is;throw e}else r=t;var i=(t=iZ()).queue,s=i.dispatch;return n!==t.memoizedState&&(iM.flags|=2048,sy(9,sw(),sg.bind(null,i,n),null)),[r,s,e]}function sg(e,t){e.action=t}function sm(e){var t=iZ(),n=ik;if(null!==n)return sp(t,n,e);iZ(),t=t.memoizedState;var r=(n=iZ()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function sy(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=iM.updateQueue)&&(t=iJ(),iM.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function sw(){return{destroy:void 0,resource:void 0}}function sE(){return iZ().memoizedState}function sv(e,t,n,r){var i=iK();r=void 0===r?null:r,iM.flags|=e,i.memoizedState=sy(1|t,sw(),n,r)}function sC(e,t,n,r){var i=iZ();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==ik&&null!==r&&iH(r,ik.memoizedState.deps)?i.memoizedState=sy(t,s,n,r):(iM.flags|=e,i.memoizedState=sy(1|t,s,n,r))}function sS(e,t){sv(8390656,8,e,t)}function s_(e,t){sC(2048,8,e,t)}function sb(e,t){return sC(4,2,e,t)}function sI(e,t){return sC(4,4,e,t)}function sA(e,t){if("function"==typeof t){var n=t(e=e());return function(){"function"==typeof n?n():t(null)}}if(null!=t)return t.current=e=e(),function(){t.current=null}}function sT(e,t,n){n=null!=n?n.concat([e]):null,sC(4,4,sA.bind(null,t,e),n)}function sN(){}function sR(e,t){var n=iZ();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&iH(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function sD(e,t){var n=iZ();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&iH(t,r[1]))return r[0];if(r=e(),iB){ed(!0);try{e()}finally{ed(!1)}}return n.memoizedState=[r,t],r}function sO(e,t,n){return void 0===n||0!=(0x40000000&iO)?e.memoizedState=t:(e.memoizedState=n,e=le(),iM.lanes|=e,oj|=e,n)}function sM(e,t,n,r){return nT(n,t)?n:null!==iA.current?(nT(e=sO(e,n,r),t)||(aC=!0),e):0==(42&iO)?(aC=!0,e.memoizedState=n):(e=le(),iM.lanes|=e,oj|=e,t)}function sk(e,t,n,r,i){var s=P.p;P.p=0!==s&&8>s?s:8;var a=k.T,o={};k.T=o,sG(e,!1,t,n);try{var l=i(),u=k.S;if(null!==u&&u(o,l),null!==l&&"object"==typeof l&&"function"==typeof l.then){var c,h,d=(c=[],h={status:"pending",value:null,reason:null,then:function(e){c.push(e)}},l.then(function(){h.status="fulfilled",h.value=r;for(var e=0;e<c.length;e++)(0,c[e])(r)},function(e){for(h.status="rejected",h.reason=e,e=0;e<c.length;e++)(0,c[e])(void 0)}),h);sW(e,t,d,o9(e))}else sW(e,t,r,o9(e))}catch(n){sW(e,t,{then:function(){},status:"rejected",reason:n},o9())}finally{P.p=s,k.T=a}}function sP(){}function sx(e,t,n,r){if(5!==e.tag)throw Error(o(476));var i=sL(e).queue;sk(e,i,t,x,null===n?sP:function(){return sB(e),n(r)})}function sL(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:i3,lastRenderedState:x},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:i3,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function sB(e){var t=sL(e).next.queue;sW(e,t,{},o9())}function sF(){return rq(u1)}function sU(){return iZ().memoizedState}function sV(){return iZ().memoizedState}function sz(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=o9(),r=iw(t,e=iy(n),n);null!==r&&(lt(r,t,n),iE(r,t,n)),t={cache:r1()},e.payload=t;return}t=t.return}}function sj(e,t,n){var r=o9();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},sY(e)?sq(t,n):null!==(n=n5(e,t,n,r))&&(lt(n,e,r),sX(n,t,r))}function sH(e,t,n){sW(e,t,n,o9())}function sW(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(sY(e))sq(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,nT(o,a))return n8(e,t,i,0),null===oM&&n6(),!1}catch(e){}finally{}if(null!==(n=n5(e,t,i,r)))return lt(n,e,r),sX(n,t,r),!0}return!1}function sG(e,t,n,r){if(r={lane:2,revertLane:lG(),action:r,hasEagerState:!1,eagerState:null,next:null},sY(e)){if(t)throw Error(o(479))}else null!==(t=n5(e,n,r,2))&&lt(t,e,2)}function sY(e){var t=e.alternate;return e===iM||null!==t&&t===iM}function sq(e,t){iL=ix=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sX(e,t,n){if(0!=(4194048&n)){var r=t.lanes;r&=e.pendingLanes,t.lanes=n|=r,eA(e,n)}}var s$={readContext:rq,use:i0,useCallback:ij,useContext:ij,useEffect:ij,useImperativeHandle:ij,useLayoutEffect:ij,useInsertionEffect:ij,useMemo:ij,useReducer:ij,useRef:ij,useState:ij,useDebugValue:ij,useDeferredValue:ij,useTransition:ij,useSyncExternalStore:ij,useId:ij,useHostTransitionStatus:ij,useFormState:ij,useActionState:ij,useOptimistic:ij,useMemoCache:ij,useCacheRefresh:ij},sQ={readContext:rq,use:i0,useCallback:function(e,t){return iK().memoizedState=[e,void 0===t?null:t],e},useContext:rq,useEffect:sS,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,sv(4194308,4,sA.bind(null,t,e),n)},useLayoutEffect:function(e,t){return sv(4194308,4,e,t)},useInsertionEffect:function(e,t){sv(4,2,e,t)},useMemo:function(e,t){var n=iK();t=void 0===t?null:t;var r=e();if(iB){ed(!0);try{e()}finally{ed(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=iK();if(void 0!==n){var i=n(t);if(iB){ed(!0);try{n(t)}finally{ed(!1)}}}else i=t;return r.memoizedState=r.baseState=i,r.queue=e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},e=e.dispatch=sj.bind(null,iM,e),[r.memoizedState,e]},useRef:function(e){return iK().memoizedState=e={current:e}},useState:function(e){var t=(e=sr(e)).queue,n=sH.bind(null,iM,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:sN,useDeferredValue:function(e,t){return sO(iK(),e,t)},useTransition:function(){var e=sr(!1);return e=sk.bind(null,iM,e.queue,!0,!1),iK().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=iM,i=iK();if(rA){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===oM)throw Error(o(349));0!=(124&oP)||i7(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,sS(se.bind(null,r,s,e),[e]),r.flags|=2048,sy(9,sw(),i9.bind(null,r,s,n,t),null),n},useId:function(){var e=iK(),t=oM.identifierPrefix;if(rA){var n=rE,r=rw;t="«"+t+"R"+(n=(r&~(1<<32-ef(r)-1)).toString(32)+n),0<(n=iF++)&&(t+="H"+n.toString(32)),t+="»"}else t="«"+t+"r"+(n=iz++).toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:sF,useFormState:sd,useActionState:sd,useOptimistic:function(e){var t=iK();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=sG.bind(null,iM,!0,n),n.dispatch=t,[e,t]},useMemoCache:i2,useCacheRefresh:function(){return iK().memoizedState=sz.bind(null,iM)}},sK={readContext:rq,use:i0,useCallback:sR,useContext:rq,useEffect:s_,useImperativeHandle:sT,useInsertionEffect:sb,useLayoutEffect:sI,useMemo:sD,useReducer:i4,useRef:sE,useState:function(){return i4(i3)},useDebugValue:sN,useDeferredValue:function(e,t){return sM(iZ(),ik.memoizedState,e,t)},useTransition:function(){var e=i4(i3)[0],t=iZ().memoizedState;return["boolean"==typeof e?e:i1(e),t]},useSyncExternalStore:i5,useId:sU,useHostTransitionStatus:sF,useFormState:sf,useActionState:sf,useOptimistic:function(e,t){return si(iZ(),ik,e,t)},useMemoCache:i2,useCacheRefresh:sV},sZ={readContext:rq,use:i0,useCallback:sR,useContext:rq,useEffect:s_,useImperativeHandle:sT,useInsertionEffect:sb,useLayoutEffect:sI,useMemo:sD,useReducer:i8,useRef:sE,useState:function(){return i8(i3)},useDebugValue:sN,useDeferredValue:function(e,t){var n=iZ();return null===ik?sO(n,e,t):sM(n,ik.memoizedState,e,t)},useTransition:function(){var e=i8(i3)[0],t=iZ().memoizedState;return["boolean"==typeof e?e:i1(e),t]},useSyncExternalStore:i5,useId:sU,useHostTransitionStatus:sF,useFormState:sm,useActionState:sm,useOptimistic:function(e,t){var n=iZ();return null!==ik?si(n,ik,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:i2,useCacheRefresh:sV},sJ=null,s1=0;function s0(e){var t=s1;return s1+=1,null===sJ&&(sJ=[]),iu(sJ,e,t)}function s2(e,t){e.ref=void 0!==(t=t.props.ref)?t:null}function s3(e,t){if(t.$$typeof===f)throw Error(o(525));throw Error(o(31,"[object Object]"===(e=Object.prototype.toString.call(t))?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function s4(e){return(0,e._init)(e._payload)}function s6(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=rs(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return(t.index=r,e)?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=0x4000002,n):r:(t.flags|=0x4000002,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=0x4000002),t}function l(e,t,n,r){return null===t||6!==t.tag?(t=ru(n,e.mode,r)).return=e:(t=i(t,n)).return=e,t}function u(e,t,n,r){var s=n.type;return s===m?h(e,t,n.props.children,r,n.key):(null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===A&&s4(s)===t.type)?s2(t=i(t,n.props),n):s2(t=ro(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=rc(n,e.mode,r)).return=e:(t=i(t,n.children||[])).return=e,t}function h(e,t,n,r,s){return null===t||7!==t.tag?(t=rl(n,e.mode,r,s)).return=e:(t=i(t,n)).return=e,t}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=ru(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case p:return s2(n=ro(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=rc(t,e.mode,n)).return=e,t;case A:return d(e,t=(0,t._init)(t._payload),n)}if(M(t)||D(t))return(t=rl(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return d(e,s0(t),n);if(t.$$typeof===C)return d(e,rX(e,t),n);s3(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?u(e,t,n,r):null;case g:return n.key===i?c(e,t,n,r):null;case A:return f(e,t,n=(i=n._init)(n._payload),r)}if(M(n)||D(n))return null!==i?null:h(e,t,n,r,null);if("function"==typeof n.then)return f(e,t,s0(n),r);if(n.$$typeof===C)return f(e,t,rX(e,n),r);s3(e,n)}return null}function y(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case p:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case g:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return y(e,t,n,r=(0,r._init)(r._payload),i)}if(M(r)||D(r))return h(t,e=e.get(n)||null,r,i,null);if("function"==typeof r.then)return y(e,t,n,s0(r),i);if(r.$$typeof===C)return y(e,t,n,rX(t,r),i);s3(t,r)}return null}return function(l,u,c,h){try{s1=0;var w=function l(u,c,h,w){if("object"==typeof h&&null!==h&&h.type===m&&null===h.key&&(h=h.props.children),"object"==typeof h&&null!==h){switch(h.$$typeof){case p:e:{for(var E=h.key;null!==c;){if(c.key===E){if((E=h.type)===m){if(7===c.tag){n(u,c.sibling),(w=i(c,h.props.children)).return=u,u=w;break e}}else if(c.elementType===E||"object"==typeof E&&null!==E&&E.$$typeof===A&&s4(E)===c.type){n(u,c.sibling),s2(w=i(c,h.props),h),w.return=u,u=w;break e}n(u,c);break}t(u,c),c=c.sibling}h.type===m?(w=rl(h.props.children,u.mode,w,h.key)).return=u:(s2(w=ro(h.type,h.key,h.props,null,u.mode,w),h),w.return=u),u=w}return a(u);case g:e:{for(E=h.key;null!==c;){if(c.key===E)if(4===c.tag&&c.stateNode.containerInfo===h.containerInfo&&c.stateNode.implementation===h.implementation){n(u,c.sibling),(w=i(c,h.children||[])).return=u,u=w;break e}else{n(u,c);break}t(u,c),c=c.sibling}(w=rc(h,u.mode,w)).return=u,u=w}return a(u);case A:return l(u,c,h=(E=h._init)(h._payload),w)}if(M(h))return function(i,a,o,l){for(var u=null,c=null,h=a,p=a=0,g=null;null!==h&&p<o.length;p++){h.index>p?(g=h,h=null):g=h.sibling;var m=f(i,h,o[p],l);if(null===m){null===h&&(h=g);break}e&&h&&null===m.alternate&&t(i,h),a=s(m,a,p),null===c?u=m:c.sibling=m,c=m,h=g}if(p===o.length)return n(i,h),rA&&rv(i,p),u;if(null===h){for(;p<o.length;p++)null!==(h=d(i,o[p],l))&&(a=s(h,a,p),null===c?u=h:c.sibling=h,c=h);return rA&&rv(i,p),u}for(h=r(h);p<o.length;p++)null!==(g=y(h,i,p,o[p],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?p:g.key),a=s(g,a,p),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach(function(e){return t(i,e)}),rA&&rv(i,p),u}(u,c,h,w);if(D(h)){if("function"!=typeof(E=D(h)))throw Error(o(150));return function(i,a,l,u){if(null==l)throw Error(o(151));for(var c=null,h=null,p=a,g=a=0,m=null,w=l.next();null!==p&&!w.done;g++,w=l.next()){p.index>g?(m=p,p=null):m=p.sibling;var E=f(i,p,w.value,u);if(null===E){null===p&&(p=m);break}e&&p&&null===E.alternate&&t(i,p),a=s(E,a,g),null===h?c=E:h.sibling=E,h=E,p=m}if(w.done)return n(i,p),rA&&rv(i,g),c;if(null===p){for(;!w.done;g++,w=l.next())null!==(w=d(i,w.value,u))&&(a=s(w,a,g),null===h?c=w:h.sibling=w,h=w);return rA&&rv(i,g),c}for(p=r(p);!w.done;g++,w=l.next())null!==(w=y(p,i,g,w.value,u))&&(e&&null!==w.alternate&&p.delete(null===w.key?g:w.key),a=s(w,a,g),null===h?c=w:h.sibling=w,h=w);return e&&p.forEach(function(e){return t(i,e)}),rA&&rv(i,g),c}(u,c,h=E.call(h),w)}if("function"==typeof h.then)return l(u,c,s0(h),w);if(h.$$typeof===C)return l(u,c,rX(u,h),w);s3(u,h)}return"string"==typeof h&&""!==h||"number"==typeof h||"bigint"==typeof h?(h=""+h,null!==c&&6===c.tag?(n(u,c.sibling),(w=i(c,h)).return=u):(n(u,c),(w=ru(h,u.mode,w)).return=u),a(u=w)):n(u,c)}(l,u,c,h);return sJ=null,w}catch(e){if(e===ir||e===is)throw e;var E=rr(29,e,null,l.mode);return E.lanes=h,E.return=l,E}finally{}}}var s8=s6(!0),s5=s6(!1),s7=F(null),s9=null;function ae(e){var t=e.alternate;V(ai,1&ai.current),V(s7,e),null===s9&&(null===t||null!==iA.current?s9=e:null!==t.memoizedState&&(s9=e))}function at(e){if(22===e.tag){if(V(ai,ai.current),V(s7,e),null===s9){var t=e.alternate;null!==t&&null!==t.memoizedState&&(s9=e)}}else an(e)}function an(){V(ai,ai.current),V(s7,s7.current)}function ar(e){U(s7),s9===e&&(s9=null),U(ai)}var ai=F(0);function as(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||uS(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function aa(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:d({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ao={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=o9(),i=iy(r);i.payload=t,null!=n&&(i.callback=n),null!==(t=iw(e,i,r))&&(lt(t,e,r),iE(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=o9(),i=iy(r);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=iw(e,i,r))&&(lt(t,e,r),iE(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=o9(),r=iy(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=iw(e,r,n))&&(lt(t,e,n),iE(t,e,n))}};function al(e,t,n,r,i,s,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||!nN(n,r)||!nN(i,s)}function au(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ao.enqueueReplaceState(t,t.state,null)}function ac(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=d({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var ah="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}console.error(e)};function ad(e){ah(e)}function af(e){console.error(e)}function ap(e){ah(e)}function ag(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function am(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function ay(e,t,n){return(n=iy(n)).tag=3,n.payload={element:null},n.callback=function(){ag(e,t)},n}function aw(e){return(e=iy(e)).tag=3,e}function aE(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"==typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){am(t,n,r)}}var a=n.stateNode;null!==a&&"function"==typeof a.componentDidCatch&&(e.callback=function(){am(t,n,r),"function"!=typeof i&&(null===oJ?oJ=new Set([this]):oJ.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var av=Error(o(461)),aC=!1;function aS(e,t,n,r){t.child=null===e?s5(t,null,n,r):s8(t,e.child,n,r)}function a_(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return(rY(t),r=iW(e,t,n,a,s,i),o=iX(),null===e||aC)?(rA&&o&&rS(t),t.flags|=1,aS(e,t,r,i),t.child):(i$(e,t,i),aH(e,t,i))}function ab(e,t,n,r,i){if(null===e){var s=n.type;return"function"!=typeof s||ri(s)||void 0!==s.defaultProps||null!==n.compare?((e=ro(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,aI(e,t,s,r,i))}if(s=e.child,!aW(e,i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:nN)(a,r)&&e.ref===t.ref)return aH(e,t,i)}return t.flags|=1,(e=rs(s,r)).ref=t.ref,e.return=t,t.child=e}function aI(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(nN(s,r)&&e.ref===t.ref)if(aC=!1,t.pendingProps=r=s,!aW(e,i))return t.lanes=e.lanes,aH(e,t,i);else 0!=(131072&e.flags)&&(aC=!0)}return aR(e,t,n,r,i)}function aA(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!=(128&t.flags)){if(r=null!==s?s.baseLanes|n:n,null!==e){for(s=0,i=t.child=e.child;null!==i;)s=s|i.lanes|i.childLanes,i=i.sibling;t.childLanes=s&~r}else t.childLanes=0,t.child=null;return aT(e,t,r,n)}if(0==(0x20000000&n))return t.lanes=t.childLanes=0x20000000,aT(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&ie(t,null!==s?s.cachePool:null),null!==s?iN(t,s):iR(),at(t)}else null!==s?(ie(t,s.cachePool),iN(t,s),an(t),t.memoizedState=null):(null!==e&&ie(t,null),iR(),an(t));return aS(e,t,i,n),t.child}function aT(e,t,n,r){var i=r9();return t.memoizedState={baseLanes:n,cachePool:i=null===i?null:{parent:rJ._currentValue,pool:i}},null!==e&&ie(t,null),iR(),at(t),null!==e&&rW(e,t,r,!0),null}function aN(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(o(284));(null===e||e.ref!==n)&&(t.flags|=4194816)}}function aR(e,t,n,r,i){return(rY(t),n=iW(e,t,n,r,void 0,i),r=iX(),null===e||aC)?(rA&&r&&rS(t),t.flags|=1,aS(e,t,n,i),t.child):(i$(e,t,i),aH(e,t,i))}function aD(e,t,n,r,i,s){return(rY(t),t.updateQueue=null,n=iY(t,r,n,i),iG(e),r=iX(),null===e||aC)?(rA&&r&&rS(t),t.flags|=1,aS(e,t,n,s),t.child):(i$(e,t,s),aH(e,t,s))}function aO(e,t,n,r,i){if(rY(t),null===t.stateNode){var s=rt,a=n.contextType;"object"==typeof a&&null!==a&&(s=rq(a)),t.memoizedState=null!==(s=new n(r,s)).state&&void 0!==s.state?s.state:null,s.updater=ao,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},ig(t),a=n.contextType,s.context="object"==typeof a&&null!==a?rq(a):rt,s.state=t.memoizedState,"function"==typeof(a=n.getDerivedStateFromProps)&&(aa(t,n,a,r),s.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof s.getSnapshotBeforeUpdate||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||(a=s.state,"function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),a!==s.state&&ao.enqueueReplaceState(s,s.state,null),i_(t,r,s,i),iS(),s.state=t.memoizedState),"function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var o=t.memoizedProps,l=ac(n,o);s.props=l;var u=s.context,c=n.contextType;a=rt,"object"==typeof c&&null!==c&&(a=rq(c));var h=n.getDerivedStateFromProps;c="function"==typeof h||"function"==typeof s.getSnapshotBeforeUpdate,o=t.pendingProps!==o,c||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o||u!==a)&&au(t,s,r,a),ip=!1;var d=t.memoizedState;s.state=d,i_(t,r,s,i),iS(),u=t.memoizedState,o||d!==u||ip?("function"==typeof h&&(aa(t,n,h,r),u=t.memoizedState),(l=ip||al(t,n,l,r,d,u,a))?(c||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),s.props=r,s.state=u,s.context=a,r=l):("function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,im(e,t),c=ac(n,a=t.memoizedProps),s.props=c,h=t.pendingProps,d=s.context,u=n.contextType,l=rt,"object"==typeof u&&null!==u&&(l=rq(u)),(u="function"==typeof(o=n.getDerivedStateFromProps)||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==h||d!==l)&&au(t,s,r,l),ip=!1,d=t.memoizedState,s.state=d,i_(t,r,s,i),iS();var f=t.memoizedState;a!==h||d!==f||ip||null!==e&&null!==e.dependencies&&rG(e.dependencies)?("function"==typeof o&&(aa(t,n,o,r),f=t.memoizedState),(c=ip||al(t,n,c,r,d,f,l)||null!==e&&null!==e.dependencies&&rG(e.dependencies))?(u||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=c):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,aN(e,t),r=0!=(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=s8(t,e.child,null,i),t.child=s8(t,null,n,i)):aS(e,t,n,i),t.memoizedState=s.state,e=t.child):e=aH(e,t,i),e}function aM(e,t,n,r){return rP(),t.flags|=256,aS(e,t,n,r),t.child}var ak={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function aP(e){return{baseLanes:e,cachePool:it()}}function ax(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=oG),e}function aL(e,t,n){var r,i=t.pendingProps,s=!1,a=0!=(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!=(2&ai.current)),r&&(s=!0,t.flags&=-129),r=0!=(32&t.flags),t.flags&=-33,null===e){if(rA){if(s?ae(t):an(t),rA){var l,u=rI;if(l=u){n:{for(l=u,u=rN;8!==l.nodeType;)if(!u||null===(l=u_(l.nextSibling))){u=null;break n}u=l}null!==u?(t.memoizedState={dehydrated:u,treeContext:null!==ry?{id:rw,overflow:rE}:null,retryLane:0x20000000,hydrationErrors:null},(l=rr(18,null,null,0)).stateNode=u,l.return=t,t.child=l,rb=t,rI=null,l=!0):l=!1}l||rD(t)}if(null!==(u=t.memoizedState)&&null!==(u=u.dehydrated))return uS(u)?t.lanes=32:t.lanes=0x20000000,null;ar(t)}return(u=i.children,i=i.fallback,s)?(an(t),u=aF({mode:"hidden",children:u},s=t.mode),i=rl(i,s,n,null),u.return=t,i.return=t,u.sibling=i,t.child=u,(s=t.child).memoizedState=aP(n),s.childLanes=ax(e,r,n),t.memoizedState=ak,i):(ae(t),aB(t,u))}if(null!==(l=e.memoizedState)&&null!==(u=l.dehydrated)){if(a)256&t.flags?(ae(t),t.flags&=-257,t=aU(e,t,n)):null!==t.memoizedState?(an(t),t.child=e.child,t.flags|=128,t=null):(an(t),s=i.fallback,u=t.mode,i=aF({mode:"visible",children:i.children},u),s=rl(s,u,n,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,s8(t,e.child,null,n),(i=t.child).memoizedState=aP(n),i.childLanes=ax(e,r,n),t.memoizedState=ak,t=s);else if(ae(t),uS(u)){if(r=u.nextSibling&&u.nextSibling.dataset)var c=r.dgst;r=c,(i=Error(o(419))).stack="",i.digest=r,rL({value:i,source:null,stack:null}),t=aU(e,t,n)}else if(aC||rW(e,t,n,!1),r=0!=(n&e.childLanes),aC||r){if(null!==(r=oM)&&0!==(i=0!=((i=0!=(42&(i=n&-n))?1:eT(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane)throw l.retryLane=i,n7(e,i),lt(r,e,i),av;"$?"===u.data||lh(),t=aU(e,t,n)}else"$?"===u.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,rI=u_(u.nextSibling),rb=t,rA=!0,rT=null,rN=!1,null!==e&&(rg[rm++]=rw,rg[rm++]=rE,rg[rm++]=ry,rw=e.id,rE=e.overflow,ry=t),t=aB(t,i.children),t.flags|=4096);return t}return s?(an(t),s=i.fallback,u=t.mode,c=(l=e.child).sibling,(i=rs(l,{mode:"hidden",children:i.children})).subtreeFlags=0x3e00000&l.subtreeFlags,null!==c?s=rs(c,s):(s=rl(s,u,n,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,null===(u=e.child.memoizedState)?u=aP(n):(null!==(l=u.cachePool)?(c=rJ._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=it(),u={baseLanes:u.baseLanes|n,cachePool:l}),s.memoizedState=u,s.childLanes=ax(e,r,n),t.memoizedState=ak,i):(ae(t),e=(n=e.child).sibling,(n=rs(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function aB(e,t){return(t=aF({mode:"visible",children:t},e.mode)).return=e,e.child=t}function aF(e,t){return(e=rr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function aU(e,t,n){return s8(t,e.child,null,n),e=aB(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function aV(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),rj(e.return,t,n)}function az(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function aj(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(aS(e,t,r.children,n),0!=(2&(r=ai.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&aV(e,n,t);else if(19===e.tag)aV(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(V(ai,r),i){case"forwards":for(i=null,n=t.child;null!==n;)null!==(e=n.alternate)&&null===as(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),az(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===as(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}az(t,!0,n,null,s);break;case"together":az(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function aH(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),oj|=t.lanes,0==(n&t.childLanes)){if(null===e)return null;else if(rW(e,t,n,!1),0==(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=rs(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=rs(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function aW(e,t){return 0!=(e.lanes&t)||!!(null!==(e=e.dependencies)&&rG(e))}function aG(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)aC=!0;else{if(!aW(e,n)&&0==(128&t.flags))return aC=!1,function(e,t,n){switch(t.tag){case 3:G(t,t.stateNode.containerInfo),rV(t,rJ,e.memoizedState.cache),rP();break;case 27:case 5:q(t);break;case 4:G(t,t.stateNode.containerInfo);break;case 10:rV(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r){if(null!==r.dehydrated)return ae(t),t.flags|=128,null;if(0!=(n&t.child.childLanes))return aL(e,t,n);return ae(t),null!==(e=aH(e,t,n))?e.sibling:null}ae(t);break;case 19:var i=0!=(128&e.flags);if((r=0!=(n&t.childLanes))||(rW(e,t,n,!1),r=0!=(n&t.childLanes)),i){if(r)return aj(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),V(ai,ai.current),!r)return null;break;case 22:case 23:return t.lanes=0,aA(e,t,n);case 24:rV(t,rJ,e.memoizedState.cache)}return aH(e,t,n)}(e,t,n);aC=0!=(131072&e.flags)}else aC=!1,rA&&0!=(1048576&t.flags)&&rC(t,rp,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"==typeof r)ri(r)?(e=ac(r,e),t.tag=1,t=aO(null,t,r,e,n)):(t.tag=0,t=aR(null,t,r,e,n));else{if(null!=r){if((i=r.$$typeof)===S){t.tag=11,t=a_(null,t,r,e,n);break e}else if(i===I){t.tag=14,t=ab(null,t,r,e,n);break e}}throw Error(o(306,t=function e(t){if(null==t)return null;if("function"==typeof t)return t.$$typeof===O?null:t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case m:return"Fragment";case w:return"Profiler";case y:return"StrictMode";case _:return"Suspense";case b:return"SuspenseList";case T:return"Activity"}if("object"==typeof t)switch(t.$$typeof){case g:return"Portal";case C:return(t.displayName||"Context")+".Provider";case v:return(t._context.displayName||"Context")+".Consumer";case S:var n=t.render;return(t=t.displayName)||(t=""!==(t=n.displayName||n.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case I:return null!==(n=t.displayName||null)?n:e(t.type)||"Memo";case A:n=t._payload,t=t._init;try{return e(t(n))}catch(e){}}return null}(r)||r,""))}}return t;case 0:return aR(e,t,t.type,t.pendingProps,n);case 1:return i=ac(r=t.type,t.pendingProps),aO(e,t,r,i,n);case 3:e:{if(G(t,t.stateNode.containerInfo),null===e)throw Error(o(387));r=t.pendingProps;var s=t.memoizedState;i=s.element,im(e,t),i_(t,r,null,n);var a=t.memoizedState;if(rV(t,rJ,r=a.cache),r!==s.cache&&rH(t,[rJ],n,!0),iS(),r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=aM(e,t,r,n);break e}else if(r!==i){rL(i=n0(Error(o(424)),t)),t=aM(e,t,r,n);break e}else for(rI=u_((e=9===(e=t.stateNode.containerInfo).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e).firstChild),rb=t,rA=!0,rT=null,rN=!0,n=s5(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling;else{if(rP(),r===i){t=aH(e,t,n);break e}aS(e,t,r,n)}t=t.child}return t;case 26:return aN(e,t),null===e?(n=uP(t.type,null,t.pendingProps,null))?t.memoizedState=n:rA||(n=t.type,e=t.pendingProps,(r=uu(H.current).createElement(n))[eO]=t,r[eM]=e,ua(r,n,e),eW(r),t.stateNode=r):t.memoizedState=uP(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return q(t),null===e&&rA&&(r=t.stateNode=uA(t.type,t.pendingProps,H.current),rb=t,rN=!0,i=rI,uE(t.type)?(ub=i,rI=u_(r.firstChild)):rI=i),aS(e,t,t.pendingProps.children,n),aN(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&rA&&((i=r=rI)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[eF])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence")||i!==n.rel||e.getAttribute("href")!==(null==n.href||""===n.href?null:n.href)||e.getAttribute("crossorigin")!==(null==n.crossOrigin?null:n.crossOrigin)||e.getAttribute("title")!==(null==n.title?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==n.src?null:n.src)||e.getAttribute("type")!==(null==n.type?null:n.type)||e.getAttribute("crossorigin")!==(null==n.crossOrigin?null:n.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==n.name?null:""+n.name;if("hidden"===n.type&&e.getAttribute("name")===i)return e}if(null===(e=u_(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,rN))?(t.stateNode=r,rb=t,rI=u_(r.firstChild),rN=!1,i=!0):i=!1),i||rD(t)),q(t),i=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,r=s.children,ud(i,s)?r=null:null!==a&&ud(i,a)&&(t.flags|=32),null!==t.memoizedState&&(u1._currentValue=i=iW(e,t,iq,null,null,n)),aN(e,t),aS(e,t,r,n),t.child;case 6:return null===e&&rA&&((e=n=rI)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;)if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n||null===(e=u_(e.nextSibling)))return null;return e}(n,t.pendingProps,rN))?(t.stateNode=n,rb=t,rI=null,e=!0):e=!1),e||rD(t)),null;case 13:return aL(e,t,n);case 4:return G(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=s8(t,null,r,n):aS(e,t,r,n),t.child;case 11:return a_(e,t,t.type,t.pendingProps,n);case 7:return aS(e,t,t.pendingProps,n),t.child;case 8:case 12:return aS(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,rV(t,t.type,r.value),aS(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,rY(t),r=r(i=rq(i)),t.flags|=1,aS(e,t,r,n),t.child;case 14:return ab(e,t,t.type,t.pendingProps,n);case 15:return aI(e,t,t.type,t.pendingProps,n);case 19:return aj(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?(n=aF(r,n)).ref=t.ref:(n=rs(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n;case 22:return aA(e,t,n);case 24:return rY(t),r=rq(rJ),null===e?(null===(i=r9())&&(i=oM,s=r1(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},ig(t),rV(t,rJ,i)):(0!=(e.lanes&n)&&(im(e,t),i_(t,null,null,n),iS()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),rV(t,rJ,r)):(rV(t,rJ,r=s.cache),r!==i.cache&&rH(t,[rJ],n,!0))),aS(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function aY(e){e.flags|=4}function aq(e,t){if("stylesheet"!==t.type||0!=(4&t.state.loading))e.flags&=-0x1000001;else if(e.flags|=0x1000000,!uq(t)){if(null!==(t=s7.current)&&((4194048&oP)===oP?null!==s9:(0x3c00000&oP)!==oP&&0==(0x20000000&oP)||t!==s9))throw ic=ia,ii;e.flags|=8192}}function aX(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?eS():0x20000000,e.lanes|=t,oY|=t)}function a$(e,t){if(!rA)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function aQ(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=0x3e00000&i.subtreeFlags,r|=0x3e00000&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function aK(e,t){switch(r_(t),t.tag){case 3:rz(rJ),Y();break;case 26:case 27:case 5:X(t);break;case 4:Y();break;case 13:ar(t);break;case 19:U(ai);break;case 10:rz(t.type);break;case 22:case 23:ar(t),iD(),null!==e&&U(r7);break;case 24:rz(rJ)}}function aZ(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create;n.inst.destroy=r=s()}n=n.next}while(n!==i)}}catch(e){lA(t,t.return,e)}}function aJ(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,i=t;try{o()}catch(e){lA(i,n,e)}}}r=r.next}while(r!==s)}}catch(e){lA(t,t.return,e)}}function a1(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{iI(t,n)}catch(t){lA(e,e.return,t)}}}function a0(e,t,n){n.props=ac(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){lA(e,t,n)}}function a2(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"==typeof n?e.refCleanup=n(r):n.current=r}}catch(n){lA(e,t,n)}}function a3(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(n){lA(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(n){lA(e,t,n)}else n.current=null}function a4(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){lA(e,e.return,t)}}function a6(e,t,n){try{var r=e.stateNode;(function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,a=null,l=null,u=null,c=null,h=null;for(p in n){var d=n[p];if(n.hasOwnProperty(p)&&null!=d)switch(p){case"checked":case"value":break;case"defaultValue":u=d;default:r.hasOwnProperty(p)||ui(e,t,p,null,r,d)}}for(var f in r){var p=r[f];if(d=n[f],r.hasOwnProperty(f)&&(null!=p||null!=d))switch(f){case"type":s=p;break;case"name":i=p;break;case"checked":c=p;break;case"defaultChecked":h=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:p!==d&&ui(e,t,f,p,r,d)}}tn(e,a,l,u,c,h,s,i);return;case"select":for(s in p=a=l=f=null,n)if(u=n[s],n.hasOwnProperty(s)&&null!=u)switch(s){case"value":break;case"multiple":p=u;default:r.hasOwnProperty(s)||ui(e,t,s,null,r,u)}for(i in r)if(s=r[i],u=n[i],r.hasOwnProperty(i)&&(null!=s||null!=u))switch(i){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==u&&ui(e,t,i,s,r,u)}t=l,n=a,r=p,null!=f?ts(e,!!n,f,!1):!!r!=!!n&&(null!=t?ts(e,!!n,t,!0):ts(e,!!n,n?[]:"",!1));return;case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:ui(e,t,l,null,r,i)}for(a in r)if(i=r[a],s=n[a],r.hasOwnProperty(a)&&(null!=i||null!=s))switch(a){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(o(91));break;default:i!==s&&ui(e,t,a,i,r,s)}ta(e,f,p);return;case"option":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&("selected"===g?e.selected=!1:ui(e,t,g,null,r,f));for(u in r)f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p)&&("selected"===u?e.selected=f&&"function"!=typeof f&&"symbol"!=typeof f:ui(e,t,u,f,r,p));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m)&&ui(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:ui(e,t,c,f,r,p)}return;default:if(td(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&us(e,t,y,void 0,r,f);for(h in r)f=r[h],p=n[h],r.hasOwnProperty(h)&&f!==p&&(void 0!==f||void 0!==p)&&us(e,t,h,f,r,p);return}}for(var w in n)f=n[w],n.hasOwnProperty(w)&&null!=f&&!r.hasOwnProperty(w)&&ui(e,t,w,null,r,f);for(d in r)f=r[d],p=n[d],r.hasOwnProperty(d)&&f!==p&&(null!=f||null!=p)&&ui(e,t,d,f,r,p)})(r,e.type,n,t),r[eM]=t}catch(t){lA(e,e.return,t)}}function a8(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&uE(e.type)||4===e.tag}function a5(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||a8(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&uE(e.type)||2&e.flags||null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function a7(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&uE(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(a7(e,t,n),e=e.sibling;null!==e;)a7(e,t,n),e=e.sibling}function a9(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ua(t,r,n),t[eO]=e,t[eM]=n}catch(t){lA(e,e.return,t)}}var oe=!1,ot=!1,on=!1,or="function"==typeof WeakSet?WeakSet:Set,oi=null;function os(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:om(e,n),4&r&&aZ(5,n);break;case 1:if(om(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(e){lA(n,n.return,e)}else{var i=ac(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){lA(n,n.return,e)}}64&r&&a1(n),512&r&&a2(n,n.return);break;case 3:if(om(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{iI(e,t)}catch(e){lA(n,n.return,e)}}break;case 27:null===t&&4&r&&a9(n);case 26:case 5:om(e,n),null===t&&4&r&&a4(n),512&r&&a2(n,n.return);break;case 12:default:om(e,n);break;case 13:om(e,n),4&r&&oc(e,n),64&r&&null!==(e=n.memoizedState)&&null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=lD.bind(null,n));break;case 22:if(!(r=null!==n.memoizedState||oe)){t=null!==t&&null!==t.memoizedState||ot,i=oe;var s=ot;oe=r,(ot=t)&&!s?function e(t,n,r){for(r=r&&0!=(8772&n.subtreeFlags),n=n.child;null!==n;){var i=n.alternate,s=t,a=n,o=a.flags;switch(a.tag){case 0:case 11:case 15:e(s,a,r),aZ(4,a);break;case 1:if(e(s,a,r),"function"==typeof(s=(i=a).stateNode).componentDidMount)try{s.componentDidMount()}catch(e){lA(i,i.return,e)}if(null!==(s=(i=a).updateQueue)){var l=i.stateNode;try{var u=s.shared.hiddenCallbacks;if(null!==u)for(s.shared.hiddenCallbacks=null,s=0;s<u.length;s++)ib(u[s],l)}catch(e){lA(i,i.return,e)}}r&&64&o&&a1(a),a2(a,a.return);break;case 27:a9(a);case 26:case 5:e(s,a,r),r&&null===i&&4&o&&a4(a),a2(a,a.return);break;case 12:default:e(s,a,r);break;case 13:e(s,a,r),r&&4&o&&oc(s,a);break;case 22:null===a.memoizedState&&e(s,a,r),a2(a,a.return);case 30:}n=n.sibling}}(e,n,0!=(8772&n.subtreeFlags)):om(e,n),oe=i,ot=s}case 30:}}var oa=null,oo=!1;function ol(e,t,n){for(n=n.child;null!==n;)ou(e,t,n),n=n.sibling}function ou(e,t,n){if(eh&&"function"==typeof eh.onCommitFiberUnmount)try{eh.onCommitFiberUnmount(ec,n)}catch(e){}switch(n.tag){case 26:ot||a3(n,t),ol(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:ot||a3(n,t);var r=oa,i=oo;uE(n.type)&&(oa=n.stateNode,oo=!1),ol(e,t,n),uT(n.stateNode),oa=r,oo=i;break;case 5:ot||a3(n,t);case 6:if(r=oa,i=oo,oa=null,ol(e,t,n),oa=r,oo=i,null!==oa)if(oo)try{(9===oa.nodeType?oa.body:"HTML"===oa.nodeName?oa.ownerDocument.body:oa).removeChild(n.stateNode)}catch(e){lA(n,t,e)}else try{oa.removeChild(n.stateNode)}catch(e){lA(n,t,e)}break;case 18:null!==oa&&(oo?(uv(9===(e=oa).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),cS(e)):uv(oa,n.stateNode));break;case 4:r=oa,i=oo,oa=n.stateNode.containerInfo,oo=!0,ol(e,t,n),oa=r,oo=i;break;case 0:case 11:case 14:case 15:ot||aJ(2,n,t),ot||aJ(4,n,t),ol(e,t,n);break;case 1:ot||(a3(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&a0(n,t,r)),ol(e,t,n);break;case 21:default:ol(e,t,n);break;case 22:ot=(r=ot)||null!==n.memoizedState,ol(e,t,n),ot=r}}function oc(e,t){if(null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))try{cS(e)}catch(e){lA(t,t.return,e)}}function oh(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new or),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new or),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){var r=lO.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function od(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(uE(l.type)){oa=l.stateNode,oo=!1;break e}break;case 5:oa=l.stateNode,oo=!1;break e;case 3:case 4:oa=l.stateNode.containerInfo,oo=!0;break e}l=l.return}if(null===oa)throw Error(o(160));ou(s,a,i),oa=null,oo=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)op(t,e),t=t.sibling}var of=null;function op(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:od(t,e),og(e),4&r&&(aJ(3,e,e.return),aZ(3,e),aJ(5,e,e.return));break;case 1:od(t,e),og(e),512&r&&(ot||null===n||a3(n,n.return)),64&r&&oe&&null!==(e=e.updateQueue)&&null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r));break;case 26:var i=of;if(od(t,e),og(e),512&r&&(ot||null===n||a3(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[eF]||s[eO]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),ua(s,r,n),s[eO]=e,eW(s),r=s;break e;case"link":var a=uG("link","href",i).get(r+(n.href||""));if(a){for(var l=0;l<a.length;l++)if((s=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}}ua(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(a=uG("meta","content",i).get(r+(n.content||""))){for(l=0;l<a.length;l++)if((s=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}}ua(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(o(468,r))}s[eO]=e,eW(s),r=s}e.stateNode=r}else uY(i,e.type,e.stateNode);else e.stateNode=uV(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?uY(i,e.type,e.stateNode):uV(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&a6(e,e.memoizedProps,n.memoizedProps)}break;case 27:od(t,e),og(e),512&r&&(ot||null===n||a3(n,n.return)),null!==n&&4&r&&a6(e,e.memoizedProps,n.memoizedProps);break;case 5:if(od(t,e),og(e),512&r&&(ot||null===n||a3(n,n.return)),32&e.flags){i=e.stateNode;try{tl(i,"")}catch(t){lA(e,e.return,t)}}4&r&&null!=e.stateNode&&(i=e.memoizedProps,a6(e,i,null!==n?n.memoizedProps:i)),1024&r&&(on=!0);break;case 6:if(od(t,e),og(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){lA(e,e.return,t)}}break;case 3:if(uW=null,i=of,of=uD(t.containerInfo),od(t,e),of=i,og(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{cS(t.containerInfo)}catch(t){lA(e,e.return,t)}on&&(on=!1,function e(t){if(1024&t.subtreeFlags)for(t=t.child;null!==t;){var n=t;e(n),5===n.tag&&1024&n.flags&&n.stateNode.reset(),t=t.sibling}}(e));break;case 4:r=of,of=uD(e.stateNode.containerInfo),od(t,e),og(e),of=r;break;case 12:default:od(t,e),og(e);break;case 13:od(t,e),og(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(oQ=et()),4&r&&null!==(r=e.updateQueue)&&(e.updateQueue=null,oh(e,r));break;case 22:i=null!==e.memoizedState;var u=null!==n&&null!==n.memoizedState,c=oe,h=ot;if(oe=c||i,ot=h||u,od(t,e),ot=h,oe=c,og(e),8192&r)e:for((t=e.stateNode)._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||u||oe||ot||function e(t){for(t=t.child;null!==t;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:aJ(4,n,n.return),e(n);break;case 1:a3(n,n.return);var r=n.stateNode;"function"==typeof r.componentWillUnmount&&a0(n,n.return,r),e(n);break;case 27:uT(n.stateNode);case 26:case 5:a3(n,n.return),e(n);break;case 22:null===n.memoizedState&&e(n);break;default:e(n)}t=t.sibling}}(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){u=n=t;try{if(s=u.stateNode,i)a=s.style,"function"==typeof a.setProperty?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var d=u.memoizedProps.style,f=null!=d&&d.hasOwnProperty("display")?d.display:null;l.style.display=null==f||"boolean"==typeof f?"":(""+f).trim()}}catch(e){lA(u,u.return,e)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=i?"":u.memoizedProps}catch(e){lA(u,u.return,e)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&null!==(r=e.updateQueue)&&null!==(n=r.retryQueue)&&(r.retryQueue=null,oh(e,n));break;case 19:od(t,e),og(e),4&r&&null!==(r=e.updateQueue)&&(e.updateQueue=null,oh(e,r));case 30:case 21:}}function og(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(a8(r)){n=r;break}r=r.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var i=n.stateNode,s=a5(e);a7(e,s,i);break;case 5:var a=n.stateNode;32&n.flags&&(tl(a,""),n.flags&=-33);var l=a5(e);a7(e,l,a);break;case 3:case 4:var u=n.stateNode.containerInfo,c=a5(e);!function e(t,n,r){var i=t.tag;if(5===i||6===i)t=t.stateNode,n?(9===r.nodeType?r.body:"HTML"===r.nodeName?r.ownerDocument.body:r).insertBefore(t,n):((n=9===r.nodeType?r.body:"HTML"===r.nodeName?r.ownerDocument.body:r).appendChild(t),null!=(r=r._reactRootContainer)||null!==n.onclick||(n.onclick=ur));else if(4!==i&&(27===i&&uE(t.type)&&(r=t.stateNode,n=null),null!==(t=t.child)))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,c,u);break;default:throw Error(o(161))}}catch(t){lA(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function om(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)os(e,t.alternate,t),t=t.sibling}function oy(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&r0(n))}function ow(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&r0(e))}function oE(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ov(e,t,n,r),t=t.sibling}function ov(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:oE(e,t,n,r),2048&i&&aZ(9,t);break;case 1:case 13:default:oE(e,t,n,r);break;case 3:oE(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&r0(e)));break;case 12:if(2048&i){oE(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,o=s.onPostCommit;"function"==typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(e){lA(t,t.return,e)}}else oE(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,null!==t.memoizedState?2&s._visibility?oE(e,t,n,r):oC(e,t):2&s._visibility?oE(e,t,n,r):(s._visibility|=2,function e(t,n,r,i,s){for(s=s&&0!=(10256&n.subtreeFlags),n=n.child;null!==n;){var a=n,o=a.flags;switch(a.tag){case 0:case 11:case 15:e(t,a,r,i,s),aZ(8,a);break;case 23:break;case 22:var l=a.stateNode;null!==a.memoizedState?2&l._visibility?e(t,a,r,i,s):oC(t,a):(l._visibility|=2,e(t,a,r,i,s)),s&&2048&o&&oy(a.alternate,a);break;case 24:e(t,a,r,i,s),s&&2048&o&&ow(a.alternate,a);break;default:e(t,a,r,i,s)}n=n.sibling}}(e,t,n,r,0!=(10256&t.subtreeFlags))),2048&i&&oy(a,t);break;case 24:oE(e,t,n,r),2048&i&&ow(t.alternate,t)}}function oC(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=t,r=n.flags;switch(n.tag){case 22:oC(e,n),2048&r&&oy(n.alternate,n);break;case 24:oC(e,n),2048&r&&ow(n.alternate,n);break;default:oC(e,n)}t=t.sibling}}var oS=8192;function o_(e){if(e.subtreeFlags&oS)for(e=e.child;null!==e;)ob(e),e=e.sibling}function ob(e){switch(e.tag){case 26:o_(e),e.flags&oS&&null!==e.memoizedState&&function(e,t,n){if(null===uX)throw Error(o(475));var r=uX;if("stylesheet"===t.type&&("string"!=typeof n.media||!1!==matchMedia(n.media).matches)&&0==(4&t.state.loading)){if(null===t.instance){var i=ux(n.href),s=e.querySelector(uL(i));if(s){null!==(e=s._p)&&"object"==typeof e&&"function"==typeof e.then&&(r.count++,r=uQ.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=s,eW(s);return}s=e.ownerDocument||e,n=uB(n),(i=uN.get(i))&&uj(n,i),eW(s=s.createElement("link"));var a=s;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),ua(s,"link",n),t.instance=s}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0==(3&t.state.loading)&&(r.count++,t=uQ.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(of,e.memoizedState,e.memoizedProps);break;case 5:default:o_(e);break;case 3:case 4:var t=of;of=uD(e.stateNode.containerInfo),o_(e),of=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=oS,oS=0x1000000,o_(e),oS=t):o_(e))}}function oI(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(null!==e)}}function oA(e){var t=e.deletions;if(0!=(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];oi=r,oN(r,e)}oI(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)oT(e),e=e.sibling}function oT(e){switch(e.tag){case 0:case 11:case 15:oA(e),2048&e.flags&&aJ(9,e,e.return);break;case 3:case 12:default:oA(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,function e(t){var n=t.deletions;if(0!=(16&t.flags)){if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];oi=i,oN(i,t)}oI(t)}for(t=t.child;null!==t;){switch((n=t).tag){case 0:case 11:case 15:aJ(8,n,n.return),e(n);break;case 22:2&(r=n.stateNode)._visibility&&(r._visibility&=-3,e(n));break;default:e(n)}t=t.sibling}}(e)):oA(e)}}function oN(e,t){for(;null!==oi;){var n=oi;switch(n.tag){case 0:case 11:case 15:aJ(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:r0(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,oi=r;else for(n=e;null!==oi;){var i=(r=oi).sibling,s=r.return;if(!function e(t){var n=t.alternate;null!==n&&(t.alternate=null,e(n)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&null!==(n=t.stateNode)&&eU(n),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}(r),r===n){oi=null;break}if(null!==i){i.return=s,oi=i;break}oi=s}}}var oR={getCacheForType:function(e){var t=rq(rJ),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},oD="function"==typeof WeakMap?WeakMap:Map,oO=0,oM=null,ok=null,oP=0,ox=0,oL=null,oB=!1,oF=!1,oU=!1,oV=0,oz=0,oj=0,oH=0,oW=0,oG=0,oY=0,oq=null,oX=null,o$=!1,oQ=0,oK=1/0,oZ=null,oJ=null,o1=0,o0=null,o2=null,o3=0,o4=0,o6=null,o8=null,o5=0,o7=null;function o9(){if(0!=(2&oO)&&0!==oP)return oP&-oP;if(null!==k.T){var e=r4;return 0!==e?e:lG()}return eR()}function le(){0===oG&&(oG=0==(0x20000000&oP)||rA?eC():0x20000000);var e=s7.current;return null!==e&&(e.flags|=32),oG}function lt(e,t,n){(e===oM&&(2===ox||9===ox)||null!==e.cancelPendingCommit)&&(lo(e,0),li(e,oP,oG,!1)),eb(e,n),(0==(2&oO)||e!==oM)&&(e===oM&&(0==(2&oO)&&(oH|=n),4===oz&&li(e,oP,oG,!1)),lF(e))}function ln(e,t,n){if(0!=(6&oO))throw Error(o(327));for(var r=!n&&0==(124&t)&&0==(t&e.expiredLanes)||ev(e,t),i=r?function(e,t){var n=oO;oO|=2;var r=lu(),i=lc();oM!==e||oP!==t?(oZ=null,oK=et()+500,lo(e,t)):oF=ev(e,t);e:for(;;)try{if(0!==ox&&null!==ok){t=ok;var s=oL;t:switch(ox){case 1:ox=0,oL=null,lg(e,t,s,1);break;case 2:case 9:if(io(s)){ox=0,oL=null,lp(t);break}t=function(){2!==ox&&9!==ox||oM!==e||(ox=7),lF(e)},s.then(t,t);break e;case 3:ox=7;break e;case 4:ox=5;break e;case 7:io(s)?(ox=0,oL=null,lp(t)):(ox=0,oL=null,lg(e,t,s,7));break;case 5:var a=null;switch(ok.tag){case 26:a=ok.memoizedState;case 5:case 27:var l=ok;if(a?uq(a):1){ox=0,oL=null;var u=l.sibling;if(null!==u)ok=u;else{var c=l.return;null!==c?(ok=c,lm(c)):ok=null}break t}}ox=0,oL=null,lg(e,t,s,5);break;case 6:ox=0,oL=null,lg(e,t,s,6);break;case 8:la(),oz=6;break e;default:throw Error(o(462))}}for(;null!==ok&&!Z();)lf(ok);break}catch(t){ll(e,t)}return(rU=rF=null,k.H=r,k.A=i,oO=n,null!==ok)?0:(oM=null,oP=0,n6(),oz)}(e,t):ld(e,t,!0),s=r;;){if(0===i)oF&&!r&&li(e,t,0,!1);else{if(n=e.current.alternate,s&&!function(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&null!==(n=t.updateQueue)&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!nT(s(),i))return!1}catch(e){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(n)){i=ld(e,t,!1),s=!1;continue}if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=0!=(a=-0x20000001&e.pendingLanes)?a:0x20000000&a?0x20000000:0;if(0!==a){t=a;e:{i=oq;var l=e.current.memoizedState.isDehydrated;if(l&&(lo(e,a).flags|=256),2!==(a=ld(e,a,!1))){if(oU&&!l){e.errorRecoveryDisabledLanes|=s,oH|=s,i=4;break e}s=oX,oX=i,null!==s&&(null===oX?oX=s:oX.push.apply(oX,s))}i=a}if(s=!1,2!==i)continue}}if(1===i){lo(e,0),li(e,t,0,!0);break}e:{switch(r=e,s=i){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:li(r,t,oG,!oB);break e;case 2:oX=null;break;case 3:case 5:break;default:throw Error(o(329))}if((0x3c00000&t)===t&&10<(i=oQ+300-et())){if(li(r,t,oG,!oB),0!==eE(r,0,!0))break e;r.timeoutHandle=up(lr.bind(null,r,n,oX,oZ,o$,t,oG,oH,oY,oB,s,2,-0,0),i);break e}lr(r,n,oX,oZ,o$,t,oG,oH,oY,oB,s,0,-0,0)}}break}lF(e)}function lr(e,t,n,r,i,s,a,l,u,c,h,d,f,p){if(e.timeoutHandle=-1,(8192&(d=t.subtreeFlags)||0x1002000==(0x1002000&d))&&(uX={stylesheets:null,count:0,unsuspend:u$},ob(t),null!==(d=function(){if(null===uX)throw Error(o(475));var e=uX;return e.stylesheets&&0===e.count&&uZ(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&uZ(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}()))){e.cancelPendingCommit=d(lw.bind(null,e,t,s,n,r,i,a,l,u,h,1,f,p)),li(e,s,a,!c);return}lw(e,t,s,n,r,i,a,l,u)}function li(e,t,n,r){t&=~oW,t&=~oH,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-ef(i),a=1<<s;r[s]=-1,i&=~a}0!==n&&eI(e,n,t)}function ls(){return 0!=(6&oO)||(lU(0,!1),!1)}function la(){if(null!==ok){if(0===ox)var e=ok.return;else e=ok,rU=rF=null,iQ(e),sJ=null,s1=0,e=ok;for(;null!==e;)aK(e.alternate,e),e=e.return;ok=null}}function lo(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ug(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),la(),oM=e,ok=n=rs(e.current,null),oP=t,ox=0,oL=null,oB=!1,oF=ev(e,t),oU=!1,oY=oG=oW=oH=oj=oz=0,oX=oq=null,o$=!1,0!=(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-ef(r),s=1<<i;t|=e[i],r&=~s}return oV=t,n6(),n}function ll(e,t){iM=null,k.H=s$,t===ir||t===is?(t=ih(),ox=3):t===ii?(t=ih(),ox=4):ox=t===av?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,oL=t,null===ok&&(oz=1,ag(e,n0(t,e.current)))}function lu(){var e=k.H;return k.H=s$,null===e?s$:e}function lc(){var e=k.A;return k.A=oR,e}function lh(){oz=4,oB||(4194048&oP)!==oP&&null!==s7.current||(oF=!0),0==(0x7ffffff&oj)&&0==(0x7ffffff&oH)||null===oM||li(oM,oP,oG,!1)}function ld(e,t,n){var r=oO;oO|=2;var i=lu(),s=lc();(oM!==e||oP!==t)&&(oZ=null,lo(e,t)),t=!1;var a=oz;e:for(;;)try{if(0!==ox&&null!==ok){var o=ok,l=oL;switch(ox){case 8:la(),a=6;break e;case 3:case 2:case 9:case 6:null===s7.current&&(t=!0);var u=ox;if(ox=0,oL=null,lg(e,o,l,u),n&&oF){a=0;break e}break;default:u=ox,ox=0,oL=null,lg(e,o,l,u)}}(function(){for(;null!==ok;)lf(ok)})(),a=oz;break}catch(t){ll(e,t)}return t&&e.shellSuspendCounter++,rU=rF=null,oO=r,k.H=i,k.A=s,null===ok&&(oM=null,oP=0,n6()),a}function lf(e){var t=aG(e.alternate,e,oV);e.memoizedProps=e.pendingProps,null===t?lm(e):ok=t}function lp(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=aD(n,t,t.pendingProps,t.type,void 0,oP);break;case 11:t=aD(n,t,t.pendingProps,t.type.render,t.ref,oP);break;case 5:iQ(t);default:aK(n,t),t=aG(n,t=ok=ra(t,oV),oV)}e.memoizedProps=e.pendingProps,null===t?lm(e):ok=t}function lg(e,t,n,r){rU=rF=null,iQ(t),sJ=null,s1=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"==typeof r&&"function"==typeof r.then){if(null!==(t=n.alternate)&&rW(t,n,i,!0),null!==(n=s7.current)){switch(n.tag){case 13:return null===s9?lh():null===n.alternate&&0===oz&&(oz=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===ia?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),lT(e,r,i)),!1;case 22:return n.flags|=65536,r===ia?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),lT(e,r,i)),!1}throw Error(o(435,n.tag))}return lT(e,r,i),lh(),!1}if(rA)return null!==(t=s7.current)?(0==(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==rR&&rL(n0(e=Error(o(422),{cause:r}),n))):(r!==rR&&rL(n0(t=Error(o(423),{cause:r}),n)),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,r=n0(r,n),i=ay(e.stateNode,r,i),iv(e,i),4!==oz&&(oz=2)),!1;var s=Error(o(520),{cause:r});if(s=n0(s,n),null===oq?oq=[s]:oq.push(s),4!==oz&&(oz=2),null===t)return!0;r=n0(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,e=ay(n.stateNode,r,e),iv(n,e),!1;case 1:if(t=n.type,s=n.stateNode,0==(128&n.flags)&&("function"==typeof t.getDerivedStateFromError||null!==s&&"function"==typeof s.componentDidCatch&&(null===oJ||!oJ.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,aE(i=aw(i),e,n,r),iv(n,i),!1}n=n.return}while(null!==n)return!1}(e,i,t,n,oP)){oz=1,ag(e,n0(n,e.current)),ok=null;return}}catch(t){if(null!==i)throw ok=i,t;oz=1,ag(e,n0(n,e.current)),ok=null;return}32768&t.flags?(rA||1===r?e=!0:oF||0!=(0x20000000&oP)?e=!1:(oB=e=!0,(2===r||9===r||3===r||6===r)&&null!==(r=s7.current)&&13===r.tag&&(r.flags|=16384)),ly(t,e)):lm(t)}function lm(e){var t=e;do{if(0!=(32768&t.flags))return void ly(t,oB);e=t.return;var n=function(e,t,n){var r=t.pendingProps;switch(r_(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return aQ(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),rz(rJ),Y(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(null===e||null===e.child)&&(rk(t)?aY(t):null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,rx())),aQ(t),null;case 26:return n=t.memoizedState,null===e?(aY(t),null!==n?(aQ(t),aq(t,n)):(aQ(t),t.flags&=-0x1000001)):n?n!==e.memoizedState?(aY(t),aQ(t),aq(t,n)):(aQ(t),t.flags&=-0x1000001):(e.memoizedProps!==r&&aY(t),aQ(t),t.flags&=-0x1000001),null;case 27:X(t),n=H.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&aY(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return aQ(t),null}e=z.current,rk(t)?rO(t,e):(e=uA(i,r,n),t.stateNode=e,aY(t))}return aQ(t),null;case 5:if(X(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&aY(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return aQ(t),null}if(e=z.current,rk(t))rO(t,e);else{switch(i=uu(H.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"==typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[eO]=t,e[eM]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(t.stateNode=e,ua(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break;case"img":e=!0;break;default:e=!1}e&&aY(t)}}return aQ(t),t.flags&=-0x1000001,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&aY(t);else{if("string"!=typeof r&&null===t.stateNode)throw Error(o(166));if(e=H.current,rk(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=rb))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[eO]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||un(e.nodeValue,n)))||rD(t)}else(e=uu(e).createTextNode(r))[eO]=t,t.stateNode=e}return aQ(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=rk(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[eO]=t}else rP(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;aQ(t),i=!1}else i=rx(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i){if(256&t.flags)return ar(t),t;return ar(t),null}}if(ar(t),0!=(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){r=t.child,i=null,null!==r.alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var s=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),aX(t,t.updateQueue),aQ(t),null;case 4:return Y(),null===e&&l2(t.stateNode.containerInfo),aQ(t),null;case 10:return rz(t.type),aQ(t),null;case 19:if(U(ai),null===(i=t.memoizedState))return aQ(t),null;if(r=0!=(128&t.flags),null===(s=i.rendering))if(r)a$(i,!1);else{if(0!==oz||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=as(e))){for(t.flags|=128,a$(i,!1),e=s.updateQueue,t.updateQueue=e,aX(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)ra(n,e),n=n.sibling;return V(ai,1&ai.current|2),t.child}e=e.sibling}null!==i.tail&&et()>oK&&(t.flags|=128,r=!0,a$(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=as(s))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,aX(t,e),a$(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!rA)return aQ(t),null}else 2*et()-i.renderingStartTime>oK&&0x20000000!==n&&(t.flags|=128,r=!0,a$(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=i.last)?e.sibling=s:t.child=s,i.last=s)}if(null!==i.tail)return t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=et(),t.sibling=null,e=ai.current,V(ai,r?1&e|2:1&e),t;return aQ(t),null;case 22:case 23:return ar(t),iD(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!=(0x20000000&n)&&0==(128&t.flags)&&(aQ(t),6&t.subtreeFlags&&(t.flags|=8192)):aQ(t),null!==(n=t.updateQueue)&&aX(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&U(r7),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),rz(rJ),aQ(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}(t.alternate,t,oV);if(null!==n){ok=n;return}if(null!==(t=t.sibling)){ok=t;return}ok=t=e}while(null!==t)0===oz&&(oz=5)}function ly(e,t){do{var n=function(e,t){switch(r_(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return rz(rJ),Y(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return X(t),null;case 13:if(ar(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));rP()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return U(ai),null;case 4:return Y(),null;case 10:return rz(t.type),null;case 22:case 23:return ar(t),iD(),null!==e&&U(r7),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return rz(rJ),null;default:return null}}(e.alternate,e);if(null!==n){n.flags&=32767,ok=n;return}if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling)){ok=e;return}ok=e=n}while(null!==e)oz=6,ok=null}function lw(e,t,n,r,i,s,a,l,u){e.cancelPendingCommit=null;do l_();while(0!==o1)if(0!=(6&oO))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(!function(e,t,n,r,i,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(n=a&~n;0<n;){var c=31-ef(n),h=1<<c;o[c]=0,l[c]=-1;var d=u[c];if(null!==d)for(u[c]=null,c=0;c<d.length;c++){var f=d[c];null!==f&&(f.lane&=-0x20000001)}n&=~h}0!==r&&eI(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(a&~t))}(e,n,s=t.lanes|t.childLanes|n4,a,l,u),e===oM&&(ok=oM=null,oP=0),o2=t,o0=e,o3=n,o4=s,o6=i,o8=r,0!=(10256&t.subtreeFlags)||0!=(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,Q(es,function(){return lb(!0),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!=(13878&t.flags),0!=(13878&t.subtreeFlags)||r){r=k.T,k.T=null,i=P.p,P.p=2,a=oO,oO|=4;try{!function(e,t){if(e=e.containerInfo,uo=u5,nM(e=nO(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i,s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(e){n=null;break e}var l=0,u=-1,c=-1,h=0,d=0,f=e,p=null;t:for(;;){for(;f!==n||0!==s&&3!==f.nodeType||(u=l+s),f!==a||0!==r&&3!==f.nodeType||(c=l+r),3===f.nodeType&&(l+=f.nodeValue.length),null!==(i=f.firstChild);)p=f,f=i;for(;;){if(f===e)break t;if(p===n&&++h===s&&(u=l),p===a&&++d===r&&(c=l),null!==(i=f.nextSibling))break;p=(f=p).parentNode}f=i}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ul={focusedElem:e,selectionRange:n},u5=!1,oi=t;null!==oi;)if(e=(t=oi).child,0!=(1024&t.subtreeFlags)&&null!==e)e.return=t,oi=e;else for(;null!==oi;){switch(a=(t=oi).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!=(1024&e)&&null!==a){e=void 0,n=t,s=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var g=ac(n.type,s,n.elementType===n.type);e=r.getSnapshotBeforeUpdate(g,a),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){lA(n,n.return,e)}}break;case 3:if(0!=(1024&e)){if(9===(n=(e=t.stateNode.containerInfo).nodeType))uC(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":uC(e);break;default:e.textContent=""}}break;default:if(0!=(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,oi=e;break}oi=t.return}}(e,t,n)}finally{oO=a,P.p=i,k.T=r}}o1=1,lE(),lv(),lC()}}function lE(){if(1===o1){o1=0;var e=o0,t=o2,n=0!=(13878&t.flags);if(0!=(13878&t.subtreeFlags)||n){n=k.T,k.T=null;var r=P.p;P.p=2;var i=oO;oO|=4;try{op(t,e);var s=ul,a=nO(e.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&function e(t,n){return!!t&&!!n&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(o.ownerDocument.documentElement,o)){if(null!==l&&nM(o)){var u=l.start,c=l.end;if(void 0===c&&(c=u),"selectionStart"in o)o.selectionStart=u,o.selectionEnd=Math.min(c,o.value.length);else{var h=o.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var f=d.getSelection(),p=o.textContent.length,g=Math.min(l.start,p),m=void 0===l.end?g:Math.min(l.end,p);!f.extend&&g>m&&(a=m,m=g,g=a);var y=nD(o,g),w=nD(o,m);if(y&&w&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==w.node||f.focusOffset!==w.offset)){var E=h.createRange();E.setStart(y.node,y.offset),f.removeAllRanges(),g>m?(f.addRange(E),f.extend(w.node,w.offset)):(E.setEnd(w.node,w.offset),f.addRange(E))}}}}for(h=[],f=o;f=f.parentNode;)1===f.nodeType&&h.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"==typeof o.focus&&o.focus(),o=0;o<h.length;o++){var v=h[o];v.element.scrollLeft=v.left,v.element.scrollTop=v.top}}u5=!!uo,ul=uo=null}finally{oO=i,P.p=r,k.T=n}}e.current=t,o1=2}}function lv(){if(2===o1){o1=0;var e=o0,t=o2,n=0!=(8772&t.flags);if(0!=(8772&t.subtreeFlags)||n){n=k.T,k.T=null;var r=P.p;P.p=2;var i=oO;oO|=4;try{os(e,t.alternate,t)}finally{oO=i,P.p=r,k.T=n}}o1=3}}function lC(){if(4===o1||3===o1){o1=0,ee();var e=o0,t=o2,n=o3,r=o8;0!=(10256&t.subtreeFlags)||0!=(10256&t.flags)?o1=5:(o1=0,o2=o0=null,lS(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(oJ=null),eN(n),t=t.stateNode,eh&&"function"==typeof eh.onCommitFiberRoot)try{eh.onCommitFiberRoot(ec,t,void 0,128==(128&t.current.flags))}catch(e){}if(null!==r){t=k.T,i=P.p,P.p=2,k.T=null;try{for(var s=e.onRecoverableError,a=0;a<r.length;a++){var o=r[a];s(o.value,{componentStack:o.stack})}}finally{k.T=t,P.p=i}}0!=(3&o3)&&l_(),lF(e),i=e.pendingLanes,0!=(4194090&n)&&0!=(42&i)?e===o7?o5++:(o5=0,o7=e):o5=0,lU(0,!1)}}function lS(e,t){0==(e.pooledCacheLanes&=t)&&null!=(t=e.pooledCache)&&(e.pooledCache=null,r0(t))}function l_(e){return lE(),lv(),lC(),lb(e)}function lb(){if(5!==o1)return!1;var e=o0,t=o4;o4=0;var n=eN(o3),r=k.T,i=P.p;try{P.p=32>n?32:n,k.T=null,n=o6,o6=null;var s=o0,a=o3;if(o1=0,o2=o0=null,o3=0,0!=(6&oO))throw Error(o(331));var l=oO;if(oO|=4,oT(s.current),ov(s,s.current,a,n),oO=l,lU(0,!1),eh&&"function"==typeof eh.onPostCommitFiberRoot)try{eh.onPostCommitFiberRoot(ec,s)}catch(e){}return!0}finally{P.p=i,k.T=r,lS(e,t)}}function lI(e,t,n){t=n0(n,t),t=ay(e.stateNode,t,2),null!==(e=iw(e,t,2))&&(eb(e,2),lF(e))}function lA(e,t,n){if(3===e.tag)lI(e,e,n);else for(;null!==t;){if(3===t.tag){lI(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===oJ||!oJ.has(r))){e=n0(n,e),null!==(r=iw(t,n=aw(2),2))&&(aE(n,r,t,e),eb(r,2),lF(r));break}}t=t.return}}function lT(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new oD;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(oU=!0,i.add(n),e=lN.bind(null,e,t,n),t.then(e,e))}function lN(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,oM===e&&(oP&n)===n&&(4===oz||3===oz&&(0x3c00000&oP)===oP&&300>et()-oQ?0==(2&oO)&&lo(e,0):oW|=n,oY===oP&&(oY=0)),lF(e)}function lR(e,t){0===t&&(t=eS()),null!==(e=n7(e,t))&&(eb(e,t),lF(e))}function lD(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),lR(e,n)}function lO(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),lR(e,n)}var lM=null,lk=null,lP=!1,lx=!1,lL=!1,lB=0;function lF(e){e!==lk&&null===e.next&&(null===lk?lM=lk=e:lk=lk.next=e),lx=!0,lP||(lP=!0,uy(function(){0!=(6&oO)?Q(er,lV):lz()}))}function lU(e,t){if(!lL&&lx){lL=!0;do for(var n=!1,r=lM;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var a=r.suspendedLanes,o=r.pingedLanes;s=0xc000095&(s=(1<<31-ef(42|e)+1)-1&(i&~(a&~o)))?0xc000095&s|1:s?2|s:0}0!==s&&(n=!0,lW(r,s))}else s=oP,0==(3&(s=eE(r,r===oM?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||ev(r,s)||(n=!0,lW(r,s));r=r.next}while(n)lL=!1}}function lV(){lz()}function lz(){lx=lP=!1;var e,t=0;0!==lB&&(((e=window.event)&&"popstate"===e.type?e===uf||(uf=e,0):(uf=null,1))||(t=lB),lB=0);for(var n=et(),r=null,i=lM;null!==i;){var s=i.next,a=lj(i,n);0===a?(i.next=null,null===r?lM=s:r.next=s,null===s&&(lk=r)):(r=i,(0!==t||0!=(3&a))&&(lx=!0)),i=s}lU(t,!1)}function lj(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-0x3c00001&e.pendingLanes;0<s;){var a=31-ef(s),o=1<<a,l=i[a];-1===l?(0==(o&n)||0!=(o&r))&&(i[a]=function(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return -1}}(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}if(t=oM,n=oP,n=eE(e,e===t?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===ox||9===ox)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&K(r),e.callbackNode=null,e.callbackPriority=0;if(0==(3&n)||ev(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&K(r),eN(n)){case 2:case 8:n=ei;break;case 32:default:n=es;break;case 0x10000000:n=eo}return n=Q(n,r=lH.bind(null,e)),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&K(r),e.callbackPriority=2,e.callbackNode=null,2}function lH(e,t){if(0!==o1&&5!==o1)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(l_(!0)&&e.callbackNode!==n)return null;var r=oP;return 0===(r=eE(e,e===oM?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(ln(e,r,t),lj(e,et()),null!=e.callbackNode&&e.callbackNode===n?lH.bind(null,e):null)}function lW(e,t){if(l_())return null;ln(e,t,!0)}function lG(){return 0===lB&&(lB=eC()),lB}function lY(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:tg(""+e)}function lq(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var lX=0;lX<nZ.length;lX++){var l$=nZ[lX];nJ(l$.toLowerCase(),"on"+(l$[0].toUpperCase()+l$.slice(1)))}nJ(nW,"onAnimationEnd"),nJ(nG,"onAnimationIteration"),nJ(nY,"onAnimationStart"),nJ("dblclick","onDoubleClick"),nJ("focusin","onFocus"),nJ("focusout","onBlur"),nJ(nq,"onTransitionRun"),nJ(nX,"onTransitionStart"),nJ(n$,"onTransitionCancel"),nJ(nQ,"onTransitionEnd"),eX("onMouseEnter",["mouseout","mouseover"]),eX("onMouseLeave",["mouseout","mouseover"]),eX("onPointerEnter",["pointerout","pointerover"]),eX("onPointerLeave",["pointerout","pointerover"]),eq("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),eq("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),eq("onBeforeInput",["compositionend","keypress","textInput","paste"]),eq("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),eq("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),eq("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lQ="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lK=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lQ));function lZ(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=u;try{s(i)}catch(e){ah(e)}i.currentTarget=null,s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=u;try{s(i)}catch(e){ah(e)}i.currentTarget=null,s=l}}}}function lJ(e,t){var n=t[eP];void 0===n&&(n=t[eP]=new Set);var r=e+"__bubble";n.has(r)||(l3(t,e,2,!1),n.add(r))}function l1(e,t,n){var r=0;t&&(r|=4),l3(n,e,r,t)}var l0="_reactListening"+Math.random().toString(36).slice(2);function l2(e){if(!e[l0]){e[l0]=!0,eG.forEach(function(t){"selectionchange"!==t&&(lK.has(t)||l1(t,!1,e),l1(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[l0]||(t[l0]=!0,l1("selectionchange",!1,t))}}function l3(e,t,n,r){switch(ci(t)){case 2:var i=u7;break;case 8:i=u9;break;default:i=ce}n=i.bind(null,t,n,e),i=void 0,tI&&("touchstart"===t||"touchmove"===t||"wheel"===t)&&(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function l4(e,t,n,r,i){var s=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&a.stateNode.containerInfo===i)return;a=a.return}for(;null!==o;){if(null===(a=eV(o)))return;if(5===(l=a.tag)||6===l||26===l||27===l){r=s=a;continue e}o=o.parentNode}}r=r.return}tS(function(){var r=s,i=ty(n),a=[];e:{var o=nK.get(e);if(void 0!==o){var l=tW,c=e;switch(e){case"keypress":if(0===tO(n))break e;case"keydown":case"keyup":l=t6;break;case"focusin":c="focus",l=tQ;break;case"focusout":c="blur",l=tQ;break;case"beforeblur":case"afterblur":l=tQ;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=tX;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=t$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=t5;break;case nW:case nG:case nY:l=tK;break;case nQ:l=t7;break;case"scroll":case"scrollend":l=tY;break;case"wheel":l=t9;break;case"copy":case"cut":case"paste":l=tZ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=t8;break;case"toggle":case"beforetoggle":l=ne}var h=0!=(4&t),d=!h&&("scroll"===e||"scrollend"===e),f=h?null!==o?o+"Capture":null:o;h=[];for(var p,g=r;null!==g;){var m=g;if(p=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===p||null===f||null!=(m=t_(g,f))&&h.push(l6(g,m,p)),d)break;g=g.return}0<h.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:h}))}}if(0==(7&t)){if((o="mouseover"===e||"pointerover"===e,l="mouseout"===e||"pointerout"===e,!(o&&n!==tm&&(c=n.relatedTarget||n.fromElement)&&(eV(c)||c[ek])))&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(c=n.relatedTarget||n.toElement,l=r,null!==(c=c?eV(c):null)&&(d=u(c),h=c.tag,c!==d||5!==h&&27!==h&&6!==h)&&(c=null)):(l=null,c=r),l!==c)){if(h=tX,m="onMouseLeave",f="onMouseEnter",g="mouse",("pointerout"===e||"pointerover"===e)&&(h=t8,m="onPointerLeave",f="onPointerEnter",g="pointer"),d=null==l?o:ej(l),p=null==c?o:ej(c),(o=new h(m,g+"leave",l,n,i)).target=d,o.relatedTarget=p,m=null,eV(i)===r&&((h=new h(f,g+"enter",c,n,i)).target=p,h.relatedTarget=d,m=h),d=m,l&&c)t:{for(h=l,f=c,g=0,p=h;p;p=l5(p))g++;for(p=0,m=f;m;m=l5(m))p++;for(;0<g-p;)h=l5(h),g--;for(;0<p-g;)f=l5(f),p--;for(;g--;){if(h===f||null!==f&&h===f.alternate)break t;h=l5(h),f=l5(f)}h=null}else h=null;null!==l&&l7(a,o,l,h,!1),null!==c&&null!==d&&l7(a,d,c,h,!0)}e:{if("select"===(l=(o=r?ej(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var y,w=ny;else if(nh(o))if(nw)w=nA;else{w=nb;var E=n_}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)?w=nI:r&&td(r.elementType)&&(w=ny);if(w&&(w=w(e,r))){nd(a,w,n,i);break e}E&&E(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&ti(o,"number",o.value)}switch(E=r?ej(r):window,e){case"focusin":(nh(E)||"true"===E.contentEditable)&&(nP=E,nx=r,nL=null);break;case"focusout":nL=nx=nP=null;break;case"mousedown":nB=!0;break;case"contextmenu":case"mouseup":case"dragend":nB=!1,nF(a,n,i);break;case"selectionchange":if(nk)break;case"keydown":case"keyup":nF(a,n,i)}if(nn)t:{switch(e){case"compositionstart":var v="onCompositionStart";break t;case"compositionend":v="onCompositionEnd";break t;case"compositionupdate":v="onCompositionUpdate";break t}v=void 0}else nu?no(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(ns&&"ko"!==n.locale&&(nu||"onCompositionStart"!==v?"onCompositionEnd"===v&&nu&&(y=tD()):(tN="value"in(tT=i)?tT.value:tT.textContent,nu=!0)),0<(E=l8(r,v)).length&&(v=new tJ(v,e,null,n,i),a.push({event:v,listeners:E}),y?v.data=y:null!==(y=nl(n))&&(v.data=y))),(y=ni?function(e,t){switch(e){case"compositionend":return nl(t);case"keypress":if(32!==t.which)return null;return na=!0," ";case"textInput":return" "===(e=t.data)&&na?null:e;default:return null}}(e,n):function(e,t){if(nu)return"compositionend"===e||!nn&&no(e,t)?(e=tD(),tR=tN=tT=null,nu=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ns&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(v=l8(r,"onBeforeInput")).length&&(E=new tJ("onBeforeInput","beforeinput",null,n,i),a.push({event:E,listeners:v}),E.data=y);var C=e;if("submit"===C&&r&&r.stateNode===i){var S=lY((i[eM]||null).action),_=n.submitter;_&&null!==(C=(C=_[eM]||null)?lY(C.formAction):_.getAttribute("formAction"))&&(S=C,_=null);var b=new tW("action","action",null,n,i);a.push({event:b,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(0!==lB){var e=_?lq(i,_):new FormData(i);sx(r,{pending:!0,data:e,method:i.method,action:S},null,e)}}else"function"==typeof S&&(b.preventDefault(),sx(r,{pending:!0,data:e=_?lq(i,_):new FormData(i),method:i.method,action:S},S,e))},currentTarget:i}]})}}lZ(a,t)})}function l6(e,t,n){return{instance:e,listener:t,currentTarget:n}}function l8(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=t_(e,n))&&r.unshift(l6(e,i,s)),null!=(i=t_(e,t))&&r.push(l6(e,i,s))),3===e.tag)return r;e=e.return}return[]}function l5(e){if(null===e)return null;do e=e.return;while(e&&5!==e.tag&&27!==e.tag)return e||null}function l7(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===u||(l=u,i?null!=(u=t_(n,s))&&a.unshift(l6(n,u,l)):i||null!=(u=t_(n,s))&&a.push(l6(n,u,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var l9=/\r\n?/g,ue=/\u0000|\uFFFD/g;function ut(e){return("string"==typeof e?e:""+e).replace(l9,"\n").replace(ue,"")}function un(e,t){return t=ut(t),ut(e)===t}function ur(){}function ui(e,t,n,r,i,s){switch(n){case"children":"string"==typeof r?"body"===t||"textarea"===t&&""===r||tl(e,r):("number"==typeof r||"bigint"==typeof r)&&"body"!==t&&tl(e,""+r);break;case"className":eJ(e,"class",r);break;case"tabIndex":eJ(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":eJ(e,n,r);break;case"style":th(e,r,s);break;case"data":if("object"!==t){eJ(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)||null==r||"function"==typeof r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=tg(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"==typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof s&&("formAction"===n?("input"!==t&&ui(e,t,"name",i.name,i,null),ui(e,t,"formEncType",i.formEncType,i,null),ui(e,t,"formMethod",i.formMethod,i,null),ui(e,t,"formTarget",i.formTarget,i,null)):(ui(e,t,"encType",i.encType,i,null),ui(e,t,"method",i.method,i,null),ui(e,t,"target",i.target,i,null))),null==r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=tg(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=ur);break;case"onScroll":null!=r&&lJ("scroll",e);break;case"onScrollEnd":null!=r&&lJ("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"muted":e.muted=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":case"innerText":case"textContent":break;case"xlinkHref":if(null==r||"function"==typeof r||"boolean"==typeof r||"symbol"==typeof r){e.removeAttribute("xlink:href");break}n=tg(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!=typeof r&&"symbol"!=typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"==typeof r||"symbol"==typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":lJ("beforetoggle",e),lJ("toggle",e),eZ(e,"popover",r);break;case"xlinkActuate":e1(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":e1(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":e1(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":e1(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":e1(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":e1(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":e1(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":e1(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":e1(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":eZ(e,"is",r);break;default:2<n.length&&("o"===n[0]||"O"===n[0])&&("n"===n[1]||"N"===n[1])||eZ(e,n=tf.get(n)||n,r)}}function us(e,t,n,r,i,s){switch(n){case"style":th(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"==typeof r?tl(e,r):("number"==typeof r||"bigint"==typeof r)&&tl(e,""+r);break;case"onScroll":null!=r&&lJ("scroll",e);break;case"onScrollEnd":null!=r&&lJ("scrollend",e);break;case"onClick":null!=r&&(e.onclick=ur);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:if(!eY.hasOwnProperty(n))e:{if("o"===n[0]&&"n"===n[1]&&(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"==typeof(s=null!=(s=e[eM]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"==typeof r)){"function"!=typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i);break e}n in e?e[n]=r:!0===r?e.setAttribute(n,""):eZ(e,n,r)}}}function ua(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":lJ("error",e),lJ("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:ui(e,t,r,a,n,null)}}s&&ui(e,t,"srcSet",n.srcSet,n,null),i&&ui(e,t,"src",n.src,n,null);return;case"input":lJ("invalid",e);var l=r=a=s=null,u=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(null!=h)switch(i){case"name":s=h;break;case"type":a=h;break;case"checked":u=h;break;case"defaultChecked":c=h;break;case"value":r=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(o(137,t));break;default:ui(e,t,i,h,n,null)}}tr(e,r,l,u,c,a,s,!1),e5(e);return;case"select":for(s in lJ("invalid",e),i=a=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:ui(e,t,s,l,n,null)}t=r,n=a,e.multiple=!!i,null!=t?ts(e,!!i,t,!1):null!=n&&ts(e,!!i,n,!0);return;case"textarea":for(a in lJ("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:ui(e,t,a,l,n,null)}to(e,i,s,r),e5(e);return;case"option":for(u in n)n.hasOwnProperty(u)&&null!=(i=n[u])&&("selected"===u?e.selected=i&&"function"!=typeof i&&"symbol"!=typeof i:ui(e,t,u,i,n,null));return;case"dialog":lJ("beforetoggle",e),lJ("toggle",e),lJ("cancel",e),lJ("close",e);break;case"iframe":case"object":lJ("load",e);break;case"video":case"audio":for(i=0;i<lQ.length;i++)lJ(lQ[i],e);break;case"image":lJ("error",e),lJ("load",e);break;case"details":lJ("toggle",e);break;case"embed":case"source":case"link":lJ("error",e),lJ("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:ui(e,t,c,i,n,null)}return;default:if(td(t)){for(h in n)n.hasOwnProperty(h)&&void 0!==(i=n[h])&&us(e,t,h,i,n,void 0);return}}for(l in n)n.hasOwnProperty(l)&&null!=(i=n[l])&&ui(e,t,l,i,n,null)}var uo=null,ul=null;function uu(e){return 9===e.nodeType?e:e.ownerDocument}function uc(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uh(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ud(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var uf=null,up="function"==typeof setTimeout?setTimeout:void 0,ug="function"==typeof clearTimeout?clearTimeout:void 0,um="function"==typeof Promise?Promise:void 0,uy="function"==typeof queueMicrotask?queueMicrotask:void 0!==um?function(e){return um.resolve(null).then(e).catch(uw)}:up;function uw(e){setTimeout(function(){throw e})}function uE(e){return"head"===e}function uv(e,t){var n=t,r=0,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0<r&&8>r){n=r;var a=e.ownerDocument;if(1&n&&uT(a.documentElement),2&n&&uT(a.body),4&n)for(uT(n=a.head),a=n.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[eF]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=o}}if(0===i){e.removeChild(s),cS(t);return}i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=s}while(n)cS(t)}function uC(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":uC(n),eU(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function uS(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function u_(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var ub=null;function uI(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function uA(e,t,n){switch(t=uu(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function uT(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);eU(e)}var uN=new Map,uR=new Set;function uD(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var uO=P.d;P.d={f:function(){var e=uO.f(),t=ls();return e||t},r:function(e){var t=ez(e);null!==t&&5===t.tag&&"form"===t.type?sB(t):uO.r(e)},D:function(e){uO.D(e),uk("dns-prefetch",e,null)},C:function(e,t){uO.C(e,t),uk("preconnect",e,t)},L:function(e,t,n){if(uO.L(e,t,n),uM&&e&&t){var r='link[rel="preload"][as="'+tt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(r+='[imagesrcset="'+tt(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(r+='[imagesizes="'+tt(n.imageSizes)+'"]')):r+='[href="'+tt(e)+'"]';var i=r;switch(t){case"style":i=ux(e);break;case"script":i=uF(e)}uN.has(i)||(e=d({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),uN.set(i,e),null!==uM.querySelector(r)||"style"===t&&uM.querySelector(uL(i))||"script"===t&&uM.querySelector(uU(i))||(ua(t=uM.createElement("link"),"link",e),eW(t),uM.head.appendChild(t)))}},m:function(e,t){if(uO.m(e,t),uM&&e){var n=t&&"string"==typeof t.as?t.as:"script",r='link[rel="modulepreload"][as="'+tt(n)+'"][href="'+tt(e)+'"]',i=r;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=uF(e)}if(!uN.has(i)&&(e=d({rel:"modulepreload",href:e},t),uN.set(i,e),null===uM.querySelector(r))){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(uM.querySelector(uU(i)))return}ua(n=uM.createElement("link"),"link",e),eW(n),uM.head.appendChild(n)}}},X:function(e,t){if(uO.X(e,t),uM&&e){var n=eH(uM).hoistableScripts,r=uF(e),i=n.get(r);i||((i=uM.querySelector(uU(r)))||(e=d({src:e,async:!0},t),(t=uN.get(r))&&uH(e,t),eW(i=uM.createElement("script")),ua(i,"link",e),uM.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(r,i))}},S:function(e,t,n){if(uO.S(e,t,n),uM&&e){var r=eH(uM).hoistableStyles,i=ux(e);t=t||"default";var s=r.get(i);if(!s){var a={loading:0,preload:null};if(s=uM.querySelector(uL(i)))a.loading=5;else{e=d({rel:"stylesheet",href:e,"data-precedence":t},n),(n=uN.get(i))&&uj(e,n);var o=s=uM.createElement("link");eW(o),ua(o,"link",e),o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),o.addEventListener("load",function(){a.loading|=1}),o.addEventListener("error",function(){a.loading|=2}),a.loading|=4,uz(s,t,uM)}s={type:"stylesheet",instance:s,count:1,state:a},r.set(i,s)}}},M:function(e,t){if(uO.M(e,t),uM&&e){var n=eH(uM).hoistableScripts,r=uF(e),i=n.get(r);i||((i=uM.querySelector(uU(r)))||(e=d({src:e,async:!0,type:"module"},t),(t=uN.get(r))&&uH(e,t),eW(i=uM.createElement("script")),ua(i,"link",e),uM.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(r,i))}}};var uM="undefined"==typeof document?null:document;function uk(e,t,n){if(uM&&"string"==typeof t&&t){var r=tt(t);r='link[rel="'+e+'"][href="'+r+'"]',"string"==typeof n&&(r+='[crossorigin="'+n+'"]'),uR.has(r)||(uR.add(r),e={rel:e,crossOrigin:n,href:t},null===uM.querySelector(r)&&(ua(t=uM.createElement("link"),"link",e),eW(t),uM.head.appendChild(t)))}}function uP(e,t,n,r){var i=(i=H.current)?uD(i):null;if(!i)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=ux(n.href),(r=(n=eH(i).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=ux(n.href);var s,a,l,u,c=eH(i).hoistableStyles,h=c.get(e);if(h||(i=i.ownerDocument||i,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,h),(c=i.querySelector(uL(e)))&&!c._p&&(h.instance=c,h.state.loading=5),uN.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},uN.set(e,n),c||(s=i,a=e,l=n,u=h.state,s.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(u.preload=a=s.createElement("link"),a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),ua(a,"link",l),eW(a),s.head.appendChild(a))))),t&&null===r)throw Error(o(528,""));return h}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=uF(n),(r=(n=eH(i).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function ux(e){return'href="'+tt(e)+'"'}function uL(e){return'link[rel="stylesheet"]['+e+"]"}function uB(e){return d({},e,{"data-precedence":e.precedence,precedence:null})}function uF(e){return'[src="'+tt(e)+'"]'}function uU(e){return"script[async]"+e}function uV(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+tt(n.href)+'"]');if(r)return t.instance=r,eW(r),r;var i=d({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return eW(r=(e.ownerDocument||e).createElement("style")),ua(r,"style",i),uz(r,n.precedence,e),t.instance=r;case"stylesheet":i=ux(n.href);var s=e.querySelector(uL(i));if(s)return t.state.loading|=4,t.instance=s,eW(s),s;r=uB(n),(i=uN.get(i))&&uj(r,i),eW(s=(e.ownerDocument||e).createElement("link"));var a=s;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),ua(s,"link",r),t.state.loading|=4,uz(s,n.precedence,e),t.instance=s;case"script":if(s=uF(n.src),i=e.querySelector(uU(s)))return t.instance=i,eW(i),i;return r=n,(i=uN.get(s))&&uH(r=d({},n),i),eW(i=(e=e.ownerDocument||e).createElement("script")),ua(i,"link",r),e.head.appendChild(i),t.instance=i;case"void":return null;default:throw Error(o(443,t.type))}return"stylesheet"===t.type&&0==(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,uz(r,n.precedence,e)),t.instance}function uz(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)s=o;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function uj(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function uH(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var uW=null;function uG(e,t,n){if(null===uW){var r=new Map,i=uW=new Map;i.set(n,r)}else(r=(i=uW).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[eF]||s[eO]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var a=s.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(s):r.set(a,[s])}}return r}function uY(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function uq(e){return"stylesheet"!==e.type||0!=(3&e.state.loading)}var uX=null;function u$(){}function uQ(){if(this.count--,0===this.count){if(this.stylesheets)uZ(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var uK=null;function uZ(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,uK=new Map,t.forEach(uJ,e),uK=null,uQ.call(e))}function uJ(e,t){if(!(4&t.state.loading)){var n=uK.get(e);if(n)var r=n.get(null);else{n=new Map,uK.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var a=i[s];("LINK"===a.nodeName||"not all"!==a.getAttribute("media"))&&(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(i=t.instance).getAttribute("data-precedence"),(s=n.get(a)||r)===r&&n.set(null,i),n.set(a,i),this.count++,r=uQ.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var u1={$$typeof:C,Provider:null,Consumer:null,_currentValue:x,_currentValue2:x,_threadCount:0};function u0(e,t,n,r,i,s,a,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=e_(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=e_(0),this.hiddenUpdates=e_(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function u2(e,t,n,r,i,s,a,o,l,u,c,h){return e=new u0(e,t,n,a,o,l,u,h),t=1,!0===s&&(t|=24),s=rr(3,null,null,t),e.current=s,s.stateNode=e,t=r1(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},ig(s),e}function u3(e,t,n,r,i,s){i=i?rt:rt,null===r.context?r.context=i:r.pendingContext=i,(r=iy(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=iw(e,r,t))&&(lt(n,e,t),iE(n,e,t))}function u4(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function u6(e,t){u4(e,t),(e=e.alternate)&&u4(e,t)}function u8(e){if(13===e.tag){var t=n7(e,0x4000000);null!==t&&lt(t,e,0x4000000),u6(e,0x4000000)}}var u5=!0;function u7(e,t,n,r){var i=k.T;k.T=null;var s=P.p;try{P.p=2,ce(e,t,n,r)}finally{P.p=s,k.T=i}}function u9(e,t,n,r){var i=k.T;k.T=null;var s=P.p;try{P.p=8,ce(e,t,n,r)}finally{P.p=s,k.T=i}}function ce(e,t,n,r){if(u5){var i=ct(r);if(null===i)l4(e,t,r,cn,n),cf(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return ca=cp(ca,e,t,n,r,i),!0;case"dragenter":return co=cp(co,e,t,n,r,i),!0;case"mouseover":return cl=cp(cl,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return cu.set(s,cp(cu.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,cc.set(s,cp(cc.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(cf(e,r),4&t&&-1<cd.indexOf(e)){for(;null!==i;){var s=ez(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var a=ew(s.pendingLanes);if(0!==a){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-ef(a);o.entanglements[1]|=l,a&=~l}lF(s),0==(6&oO)&&(oK=et()+500,lU(0,!1))}}break;case 13:null!==(o=n7(s,2))&&lt(o,s,2),ls(),u6(s,2)}if(null===(s=ct(r))&&l4(e,t,r,cn,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else l4(e,t,r,null,n)}}function ct(e){return cr(e=ty(e))}var cn=null;function cr(e){if(cn=null,null!==(e=eV(e))){var t=u(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return cn=e,null}function ci(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(en()){case er:return 2;case ei:return 8;case es:case ea:return 32;case eo:return 0x10000000;default:return 32}default:return 32}}var cs=!1,ca=null,co=null,cl=null,cu=new Map,cc=new Map,ch=[],cd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cf(e,t){switch(e){case"focusin":case"focusout":ca=null;break;case"dragenter":case"dragleave":co=null;break;case"mouseover":case"mouseout":cl=null;break;case"pointerover":case"pointerout":cu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cc.delete(t.pointerId)}}function cp(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&null!==(t=ez(t))&&u8(t)):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i)),e}function cg(e){var t=eV(e.target);if(null!==t){var n=u(t);if(null!==n){if(13===(t=n.tag)){if(null!==(t=c(n))){e.blockedOn=t,function(e,t){var n=P.p;try{return P.p=e,t()}finally{P.p=n}}(e.priority,function(){if(13===n.tag){var e=o9(),t=n7(n,e=eT(e));null!==t&&lt(t,n,e),u6(n,e)}});return}}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=3===n.tag?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function cm(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ct(e.nativeEvent);if(null!==n)return null!==(t=ez(n))&&u8(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);tm=r,n.target.dispatchEvent(r),tm=null,t.shift()}return!0}function cy(e,t,n){cm(e)&&n.delete(t)}function cw(){cs=!1,null!==ca&&cm(ca)&&(ca=null),null!==co&&cm(co)&&(co=null),null!==cl&&cm(cl)&&(cl=null),cu.forEach(cy),cc.forEach(cy)}function cE(e,t){e.blockedOn===t&&(e.blockedOn=null,cs||(cs=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,cw)))}var cv=null;function cC(e){cv!==e&&(cv=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){cv===e&&(cv=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!=typeof r)if(null===cr(r||n))continue;else break;var s=ez(n);null!==s&&(e.splice(t,3),t-=3,sx(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function cS(e){function t(t){return cE(t,e)}null!==ca&&cE(ca,e),null!==co&&cE(co,e),null!==cl&&cE(cl,e),cu.forEach(t),cc.forEach(t);for(var n=0;n<ch.length;n++){var r=ch[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<ch.length&&null===(n=ch[0]).blockedOn;)cg(n),null===n.blockedOn&&ch.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],a=i[eM]||null;if("function"==typeof s)a||cC(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(i=s,a=s[eM]||null)o=a.formAction;else if(null!==cr(i))continue}else o=a.action;"function"==typeof o?n[r+1]=o:(n.splice(r,3),r-=3),cC(n)}}}function c_(e){this._internalRoot=e}function cb(e){this._internalRoot=e}cb.prototype.render=c_.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));u3(t.current,o9(),e,t,null,null)},cb.prototype.unmount=c_.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;u3(e.current,2,null,e,null,null),ls(),t[ek]=null}},cb.prototype.unstable_scheduleHydration=function(e){if(e){var t=eR();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ch.length&&0!==t&&t<ch[n].priority;n++);ch.splice(n,0,e),0===n&&cg(e)}};var cI=s.version;if("19.1.0"!==cI)throw Error(o(527,cI,"19.1.0"));if(P.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw Error(o(268,e=Object.keys(e).join(",")))}return e=null===(e=null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=u(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return h(i),e;if(s===r)return h(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t))?function e(t){var n=t.tag;if(5===n||26===n||27===n||6===n)return t;for(t=t.child;null!==t;){if(null!==(n=e(t)))return n;t=t.sibling}return null}(e):null)?null:e.stateNode},"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var cA=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cA.isDisabled&&cA.supportsFiber)try{ec=cA.inject({bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.1.0"}),eh=cA}catch(e){}}tx=function(e,t){if(!l(e))throw Error(o(299));var n=!1,r="",i=ad,s=af,a=ap,u=null;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(a=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&(u=t.unstable_transitionCallbacks)),t=u2(e,1,!1,null,null,n,r,i,s,a,u,null),e[ek]=t.current,l2(e),new c_(t)},tL=function(e,t,n){if(!l(e))throw Error(o(299));var r=!1,i="",s=ad,a=af,u=ap,c=null,h=null;return null!=n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(a=n.onCaughtError),void 0!==n.onRecoverableError&&(u=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&(c=n.unstable_transitionCallbacks),void 0!==n.formState&&(h=n.formState)),(t=u2(e,1,!0,t,null!=n?n:null,r,i,s,a,u,c,h)).context=rt,n=t.current,(i=iy(r=eT(r=o9()))).callback=null,iw(n,i,r),n=r,t.current.lanes=n,eb(t,n),lF(t),e[ek]=t.current,l2(e),new cb(t)},tB="19.1.0"}),ee("fO90s",function(e,t){e.exports=J("1wAW3")}),ee("1wAW3",function(e,t){function n(e,t){var n=e.length;for(e.push(t);0<n;){var r=n-1>>>1,i=e[r];if(0<a(i,t))e[r]=t,e[n]=i,n=r;else break}}function i(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;for(var r=0,i=e.length,s=i>>>1;r<s;){var o=2*(r+1)-1,l=e[o],u=o+1,c=e[u];if(0>a(l,n))u<i&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[o]=n,r=o);else if(u<i&&0>a(c,n))e[r]=c,e[u]=n,r=u;else break}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(r(e.exports,"unstable_now",()=>o,e=>o=e),r(e.exports,"unstable_IdlePriority",()=>l,e=>l=e),r(e.exports,"unstable_ImmediatePriority",()=>u,e=>u=e),r(e.exports,"unstable_LowPriority",()=>c,e=>c=e),r(e.exports,"unstable_NormalPriority",()=>h,e=>h=e),r(e.exports,"unstable_Profiling",()=>d,e=>d=e),r(e.exports,"unstable_UserBlockingPriority",()=>f,e=>f=e),r(e.exports,"unstable_cancelCallback",()=>p,e=>p=e),r(e.exports,"unstable_forceFrameRate",()=>g,e=>g=e),r(e.exports,"unstable_getCurrentPriorityLevel",()=>m,e=>m=e),r(e.exports,"unstable_next",()=>y,e=>y=e),r(e.exports,"unstable_requestPaint",()=>w,e=>w=e),r(e.exports,"unstable_runWithPriority",()=>E,e=>E=e),r(e.exports,"unstable_scheduleCallback",()=>v,e=>v=e),r(e.exports,"unstable_shouldYield",()=>C,e=>C=e),r(e.exports,"unstable_wrapCallback",()=>S,e=>S=e),o=void 0,"object"==typeof performance&&"function"==typeof performance.now){var o,l,u,c,h,d,f,p,g,m,y,w,E,v,C,S,_,b=performance;o=function(){return b.now()}}else{var I=Date,A=I.now();o=function(){return I.now()-A}}var T=[],N=[],R=1,D=null,O=3,M=!1,k=!1,P=!1,x=!1,L="function"==typeof setTimeout?setTimeout:null,B="function"==typeof clearTimeout?clearTimeout:null,F="undefined"!=typeof setImmediate?setImmediate:null;function U(e){for(var t=i(N);null!==t;){if(null===t.callback)s(N);else if(t.startTime<=e)s(N),t.sortIndex=t.expirationTime,n(T,t);else break;t=i(N)}}function V(e){if(P=!1,U(e),!k)if(null!==i(T))k=!0,z||(z=!0,_());else{var t=i(N);null!==t&&$(V,t.startTime-e)}}var z=!1,j=-1,H=5,W=-1;function G(){return!!x||!(o()-W<H)}function Y(){if(x=!1,z){var e=o();W=e;var t=!0;try{e:{k=!1,P&&(P=!1,B(j),j=-1),M=!0;var n=O;try{t:{for(U(e),D=i(T);null!==D&&!(D.expirationTime>e&&G());){var r=D.callback;if("function"==typeof r){D.callback=null,O=D.priorityLevel;var a=r(D.expirationTime<=e);if(e=o(),"function"==typeof a){D.callback=a,U(e),t=!0;break t}D===i(T)&&s(T),U(e)}else s(T);D=i(T)}if(null!==D)t=!0;else{var l=i(N);null!==l&&$(V,l.startTime-e),t=!1}}break e}finally{D=null,O=n,M=!1}}}finally{t?_():z=!1}}}if("function"==typeof F)_=function(){F(Y)};else if("undefined"!=typeof MessageChannel){var q=new MessageChannel,X=q.port2;q.port1.onmessage=Y,_=function(){X.postMessage(null)}}else _=function(){L(Y,0)};function $(e,t){j=L(function(){e(o())},t)}l=5,u=1,c=4,h=3,d=null,f=2,p=function(e){e.callback=null},g=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<e?Math.floor(1e3/e):5},m=function(){return O},y=function(e){switch(O){case 1:case 2:case 3:var t=3;break;default:t=O}var n=O;O=t;try{return e()}finally{O=n}},w=function(){x=!0},E=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=O;O=e;try{return t()}finally{O=n}},v=function(e,t,r){var s=o();switch(r="object"==typeof r&&null!==r&&"number"==typeof(r=r.delay)&&0<r?s+r:s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=0x3fffffff;break;case 4:a=1e4;break;default:a=5e3}return a=r+a,e={id:R++,callback:t,priorityLevel:e,startTime:r,expirationTime:a,sortIndex:-1},r>s?(e.sortIndex=r,n(N,e),null===i(T)&&e===i(N)&&(P?(B(j),j=-1):P=!0,$(V,r-s))):(e.sortIndex=a,n(T,e),k||M||(k=!0,z||(z=!0,_()))),e},C=G,S=function(e){var t=O;return function(){var n=O;O=t;try{return e.apply(this,arguments)}finally{O=n}}}}),ee("1u0KT",function(e,t){!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=J("5R2tS")});var et={};et=J("8rWe0"),J("acw62");var en=(J("acw62"),J("acw62")),er=J("1u0KT");function ei(){return(ei=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}(i=S||(S={})).Pop="POP",i.Push="PUSH",i.Replace="REPLACE";const es="popstate";function ea(e,t){if(!1===e||null==e)throw Error(t)}function eo(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw Error(t)}catch(e){}}}function el(e,t){return{usr:e.state,key:e.key,idx:t}}function eu(e,t,n,r){return void 0===n&&(n=null),ei({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?eh(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function ec(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function eh(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}(s=_||(_={})).data="data",s.deferred="deferred",s.redirect="redirect",s.error="error";const ed=/^:[\w-]+$/,ef=e=>"*"===e;function ep(e,t){var n,r,i;let s,a;"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[o,l]=(n=e.path,r=e.caseSensitive,i=e.end,void 0===r&&(r=!1),void 0===i&&(i=!0),eo("*"===n||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were "'+n.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+n.replace(/\*$/,"/*")+'".'),s=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(s.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")),n.endsWith("*")?(s.push({paramName:"*"}),a+="*"===n||"/*"===n?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?a+="\\/*$":""!==n&&"/"!==n&&(a+="(?:(?=\\/|$))"),[new RegExp(a,r?void 0:"i"),s]),u=t.match(o);if(!u)return null;let c=u[0],h=c.replace(/(.)\/+$/,"$1"),d=u.slice(1);return{params:l.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=d[n]||"";h=c.slice(0,c.length-e.length).replace(/(.)\/+$/,"$1")}let s=d[n];return i&&!s?e[r]=void 0:e[r]=(s||"").replace(/%2F/g,"/"),e},{}),pathname:c,pathnameBase:h,pattern:e}}function eg(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function em(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field [")+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ey(e,t){let n=e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function ew(e,t,n,r){let i,s;void 0===r&&(r=!1),"string"==typeof e?i=eh(e):(ea(!(i=ei({},e)).pathname||!i.pathname.includes("?"),em("?","pathname","search",i)),ea(!i.pathname||!i.pathname.includes("#"),em("#","pathname","hash",i)),ea(!i.search||!i.search.includes("#"),em("#","search","hash",i)));let a=""===e||""===i.pathname,o=a?"/":i.pathname;if(null==o)s=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){var n;let r;void 0===t&&(t="/");let{pathname:i,search:s="",hash:a=""}="string"==typeof e?eh(e):e;return{pathname:i?i.startsWith("/")?i:(n=i,r=t.replace(/\/+$/,"").split("/"),n.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"):t,search:eC(s),hash:eS(a)}}(i,s),u=o&&"/"!==o&&o.endsWith("/"),c=(a||"."===o)&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const eE=e=>e.join("/").replace(/\/\/+/g,"/"),ev=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),eC=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",eS=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Symbol("deferred");var en=J("acw62");function e_(){return(e_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const eb=en.createContext(null),eI=en.createContext(null),eA=en.createContext(null),eT=en.createContext(null),eN=en.createContext({outlet:null,matches:[],isDataRoute:!1}),eR=en.createContext(null);function eD(){return null!=en.useContext(eT)}function eO(){return eD()||ea(!1),en.useContext(eT).location}function eM(e){en.useContext(eA).static||en.useLayoutEffect(e)}function ek(){let{isDataRoute:e}=en.useContext(eN);return e?function(){let e,{router:t}=(eF.UseNavigateStable,(e=en.useContext(eb))||ea(!1),e),n=eV(eU.UseNavigateStable),r=en.useRef(!1);return eM(()=>{r.current=!0}),en.useCallback(function(e,i){void 0===i&&(i={}),r.current&&("number"==typeof e?t.navigate(e):t.navigate(e,e_({fromRouteId:n},i)))},[t,n])}():function(){eD()||ea(!1);let e=en.useContext(eb),{basename:t,future:n,navigator:r}=en.useContext(eA),{matches:i}=en.useContext(eN),{pathname:s}=eO(),a=JSON.stringify(ey(i,n.v7_relativeSplatPath)),o=en.useRef(!1);return eM(()=>{o.current=!0}),en.useCallback(function(n,i){if(void 0===i&&(i={}),!o.current)return;if("number"==typeof n)return void r.go(n);let l=ew(n,JSON.parse(a),s,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:eE([t,l.pathname])),(i.replace?r.replace:r.push)(l,i.state,i)},[t,r,a,s,e])}()}function eP(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=en.useContext(eA),{matches:i}=en.useContext(eN),{pathname:s}=eO(),a=JSON.stringify(ey(i,r.v7_relativeSplatPath));return en.useMemo(()=>ew(e,JSON.parse(a),s,"path"===n),[e,a,s,n])}const ex=en.createElement(function(){var e;let t,n,r,i,s=(n=en.useContext(eR),r=(eU.UseRouteError,(t=en.useContext(eI))||ea(!1),t),i=eV(eU.UseRouteError),void 0!==n?n:null==(e=r.errors)?void 0:e[i]),a=null!=s&&"number"==typeof s.status&&"string"==typeof s.statusText&&"boolean"==typeof s.internal&&"data"in s?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),o=s instanceof Error?s.stack:null;return en.createElement(en.Fragment,null,en.createElement("h2",null,"Unexpected Application Error!"),en.createElement("h3",{style:{fontStyle:"italic"}},a),o?en.createElement("pre",{style:{padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"}},o):null,null)},null);class eL extends en.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?en.createElement(eN.Provider,{value:this.props.routeContext},en.createElement(eR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function eB(e){let{routeContext:t,match:n,children:r}=e,i=en.useContext(eb);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),en.createElement(eN.Provider,{value:t},r)}var eF=((a=eF||{}).UseBlocker="useBlocker",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a),eU=((o=eU||{}).UseBlocker="useBlocker",o.UseLoaderData="useLoaderData",o.UseActionData="useActionData",o.UseRouteError="useRouteError",o.UseNavigation="useNavigation",o.UseRouteLoaderData="useRouteLoaderData",o.UseMatches="useMatches",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o.UseRouteId="useRouteId",o);function eV(e){let t,n=((t=en.useContext(eN))||ea(!1),t),r=n.matches[n.matches.length-1];return r.route.id||ea(!1),r.route.id}const ez={},ej=(e,t,n)=>{};function eH(e){let{to:t,replace:n,state:r,relative:i}=e;eD()||ea(!1);let{future:s,static:a}=en.useContext(eA),{matches:o}=en.useContext(eN),{pathname:l}=eO(),u=ek(),c=JSON.stringify(ew(t,ey(o,s.v7_relativeSplatPath),l,"path"===i));return en.useEffect(()=>u(JSON.parse(c),{replace:n,state:r,relative:i}),[u,c,i,n,r]),null}function eW(e){ea(!1)}function eG(e){let{basename:t="/",children:n=null,location:r,navigationType:i=S.Pop,navigator:s,static:a=!1,future:o}=e;eD()&&ea(!1);let l=t.replace(/^\/*/,"/"),u=en.useMemo(()=>({basename:l,navigator:s,static:a,future:e_({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);"string"==typeof r&&(r=eh(r));let{pathname:c="/",search:h="",hash:d="",state:f=null,key:p="default"}=r,g=en.useMemo(()=>{let e=eg(c,l);return null==e?null:{location:{pathname:e,search:h,hash:d,state:f,key:p},navigationType:i}},[l,c,h,d,f,p,i]);return null==g?null:en.createElement(eA.Provider,{value:u},en.createElement(eT.Provider,{children:n,value:g}))}function eY(e){let{children:t,location:n}=e;return function(e,t,n,r){var i,s;let a;eD()||ea(!1);let{navigator:o}=en.useContext(eA),{matches:l}=en.useContext(eN),u=l[l.length-1],c=u?u.params:{};u&&u.pathname;let h=u?u.pathnameBase:"/";u&&u.route;let d=eO();if(t){let e="string"==typeof t?eh(t):t;"/"===h||(null==(i=e.pathname)?void 0:i.startsWith(h))||ea(!1),a=e}else a=d;let f=a.pathname||"/",p=f;if("/"!==h){let e=h.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let g=(void 0===s&&(s="/"),function(e,t,n,r){let i=eg(("string"==typeof t?eh(t):t).pathname||"/",n);if(null==i)return null;let s=function e(t,n,r,i){void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i="");let s=(t,s,a)=>{var o,l;let u,c,h={relativePath:void 0===a?t.path||"":a,caseSensitive:!0===t.caseSensitive,childrenIndex:s,route:t};h.relativePath.startsWith("/")&&(ea(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),h.relativePath=h.relativePath.slice(i.length));let d=eE([i,h.relativePath]),f=r.concat(h);t.children&&t.children.length>0&&(ea(!0!==t.index,'Index routes must not have child routes. Please remove all child routes from route path "'+d+'".'),e(t.children,n,f,d)),(null!=t.path||t.index)&&n.push({path:d,score:(o=d,l=t.index,c=(u=o.split("/")).length,u.some(ef)&&(c+=-2),l&&(c+=2),u.filter(e=>!ef(e)).reduce((e,t)=>e+(ed.test(t)?3:""===t?1:10),c)),routesMeta:f})};return t.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let n of function e(t){let n=t.split("/");if(0===n.length)return[];let[r,...i]=n,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(0===i.length)return s?[a,""]:[a];let o=e(i.join("/")),l=[];return l.push(...o.map(e=>""===e?a:[a,e].join("/"))),s&&l.push(...o),l.map(e=>t.startsWith("/")&&""===e?"/":e)}(e.path))s(e,t,n);else s(e,t)}),n}(e);s.sort((e,t)=>{var n,r;return e.score!==t.score?t.score-e.score:(n=e.routesMeta.map(e=>e.childrenIndex),r=t.routesMeta.map(e=>e.childrenIndex),n.length===r.length&&n.slice(0,-1).every((e,t)=>e===r[t])?n[n.length-1]-r[r.length-1]:0)});let a=null;for(let e=0;null==a&&e<s.length;++e){let t=function(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return eo(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}(i);a=function(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",a=[];for(let e=0;e<r.length;++e){let o=r[e],l=e===r.length-1,u="/"===s?t:t.slice(s.length)||"/",c=ep({path:o.relativePath,caseSensitive:o.caseSensitive,end:l},u),h=o.route;if(!c&&l&&n&&!r[r.length-1].route.index&&(c=ep({path:o.relativePath,caseSensitive:o.caseSensitive,end:!1},u)),!c)return null;Object.assign(i,c.params),a.push({params:i,pathname:eE([s,c.pathname]),pathnameBase:ev(eE([s,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(s=eE([s,c.pathnameBase]))}return a}(s[e],t,r)}return a}(e,{pathname:p},s,!1)),m=function(e,t,n,r){var i,s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(null==(s=r)||!s.v7_partialHydration||0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let a=e,o=null==(i=n)?void 0:i.errors;if(null!=o){let e=a.findIndex(e=>e.route.id&&(null==o?void 0:o[e.route.id])!==void 0);e>=0||ea(!1),a=a.slice(0,Math.min(a.length,e+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let e=0;e<a.length;e++){let t=a[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(u=e),t.route.id){let{loaderData:e,errors:r}=n,i=t.route.loader&&void 0===e[t.route.id]&&(!r||void 0===r[t.route.id]);if(t.route.lazy||i){l=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight((e,r,i)=>{var s;let c,h=!1,d=null,f=null;n&&(c=o&&r.route.id?o[r.route.id]:void 0,d=r.route.errorElement||ex,l&&(u<0&&0===i?(s="route-fallback",ez[s]||(ez[s]=!0),h=!0,f=null):u===i&&(h=!0,f=r.route.hydrateFallbackElement||null)));let p=t.concat(a.slice(0,i+1)),g=()=>{let t;return t=c?d:h?f:r.route.Component?en.createElement(r.route.Component,null):r.route.element?r.route.element:e,en.createElement(eB,{match:r,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?en.createElement(eL,{location:n.location,revalidation:n.revalidation,component:d,error:c,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}(g&&g.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:eE([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:eE([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,void 0,void 0);return t&&m?en.createElement(eT.Provider,{value:{location:e_({pathname:"/",search:"",hash:"",state:null,key:"default"},a),navigationType:S.Pop}},m):m}(function e(t,n){void 0===n&&(n=[]);let r=[];return en.Children.forEach(t,(t,i)=>{if(!en.isValidElement(t))return;let s=[...n,i];if(t.type===en.Fragment)return void r.push.apply(r,e(t.props.children,s));t.type!==eW&&ea(!1),t.props.index&&t.props.children&&ea(!1);let a={id:t.props.id||s.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(a.children=e(t.props.children,s)),r.push(a)}),r}(t),n)}en.startTransition;var eq=((l=eq||{})[l.pending=0]="pending",l[l.success=1]="success",l[l.error=2]="error",l);function eX(){return(eX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}new Promise(()=>{}),en.Component;const e$=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(e){}const eQ=en.startTransition;function eK(e){let{basename:t,children:n,future:r,window:i}=e,s=en.useRef();null==s.current&&(s.current=function(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=S.Pop,l=null,u=c();function c(){return(a.state||{idx:null}).idx}function h(){o=S.Pop;let e=c(),t=null==e?null:e-u;u=e,l&&l({action:o,location:f.location,delta:t})}function d(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"==typeof e?e:ec(e);return ea(t,"No window.location.(origin|href) available to create URL for href: "+(n=n.replace(/ $/,"%20"))),new URL(n,t)}null==u&&(u=0,a.replaceState(ei({},a.state,{idx:u}),""));let f={get action(){return o},get location(){return e(i,a)},listen(e){if(l)throw Error("A history only accepts one active listener");return i.addEventListener(es,h),l=e,()=>{i.removeEventListener(es,h),l=null}},createHref:e=>t(i,e),createURL:d,encodeLocation(e){let t=d(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o=S.Push;let n=eu(f.location,e,t);let r=el(n,u=c()+1),h=f.createHref(n);try{a.pushState(r,"",h)}catch(e){if(e instanceof DOMException&&"DataCloneError"===e.name)throw e;i.location.assign(h)}s&&l&&l({action:o,location:f.location,delta:1})},replace:function(e,t){o=S.Replace;let r=eu(f.location,e,t);n&&n(r,e);let i=el(r,u=c()),h=f.createHref(r);a.replaceState(i,"",h),s&&l&&l({action:o,location:f.location,delta:0})},go:e=>a.go(e)};return f}(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return eu("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:ec(t)},null,{window:i,v5Compat:!0}));let a=s.current,[o,l]=en.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},c=en.useCallback(e=>{u&&eQ?eQ(()=>l(e)):l(e)},[l,u]);return en.useLayoutEffect(()=>a.listen(c),[a,c]),en.useEffect(()=>{var e;(null==r?void 0:r.v7_startTransition)===void 0&&ej("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),(null==r?void 0:r.v7_relativeSplatPath)===void 0&&ej("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),e&&(void 0===e.v7_fetcherPersist&&ej("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),void 0===e.v7_normalizeFormMethod&&ej("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),void 0===e.v7_partialHydration&&ej("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),void 0===e.v7_skipActionErrorRevalidation&&ej("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))},[r]),en.createElement(eG,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}er.flushSync,en.useId;const eZ="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,eJ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,e1=en.forwardRef(function(e,t){let n,{onClick:r,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:u,preventScrollReset:c,viewTransition:h}=e,d=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,e$),{basename:f}=en.useContext(eA),p=!1;if("string"==typeof u&&eJ.test(u)&&(n=u,eZ))try{let e=new URL(window.location.href),t=new URL(u.startsWith("//")?e.protocol+u:u),n=eg(t.pathname,f);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:p=!0}catch(e){}let g=function(e,t){let{relative:n}=void 0===t?{}:t;eD()||ea(!1);let{basename:r,navigator:i}=en.useContext(eA),{hash:s,pathname:a,search:o}=eP(e,{relative:n}),l=a;return"/"!==r&&(l="/"===a?r:eE([r,a])),i.createHref({pathname:l,search:o,hash:s})}(u,{relative:i}),m=function(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}=void 0===t?{}:t,l=ek(),u=eO(),c=eP(e,{relative:a});return en.useCallback(t=>{0!==t.button||n&&"_self"!==n||t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||(t.preventDefault(),l(e,{replace:void 0!==r?r:ec(u)===ec(c),state:i,preventScrollReset:s,relative:a,viewTransition:o}))},[u,l,c,r,i,n,e,s,a,o])}(u,{replace:a,state:o,target:l,preventScrollReset:c,relative:i,viewTransition:h});return en.createElement("a",eX({},d,{href:n||g,onClick:p||s?r:function(e){r&&r(e),e.defaultPrevented||m(e)},ref:t,target:l}))});(u=b||(b={})).UseScrollRestoration="useScrollRestoration",u.UseSubmit="useSubmit",u.UseSubmitFetcher="useSubmitFetcher",u.UseFetcher="useFetcher",u.useViewTransitionState="useViewTransitionState",(c=I||(I={})).UseFetcher="useFetcher",c.UseFetchers="useFetchers",c.UseScrollRestoration="useScrollRestoration";var en=(J("acw62"),J("acw62"));const e0=(0,en.createContext)();function e2({children:e}){let[t,n]=(0,en.useState)([]),[r,i]=(0,en.useState)(null);return(0,et.jsx)(e0.Provider,{value:{cartItems:t,addToCart:(e,t)=>{let r={name:e,price:t};n(e=>[...e,r])},clearCart:()=>{n([])},user:r,loginUser:e=>i(e),logoutUser:()=>i(null)},children:e})}const e3=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:((64512&i)==55296&&r+1<e.length&&(64512&e.charCodeAt(r+1))==56320?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128):t[n++]=i>>12|224,t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t},e4=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){let s=e[n++],a=((7&i)<<18|(63&s)<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{let s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")},e6={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let i=e[t],s=t+1<e.length,a=s?e[t+1]:0,o=t+2<e.length,l=o?e[t+2]:0,u=i>>2,c=(3&i)<<4|a>>4,h=(15&a)<<2|l>>6,d=63&l;!o&&(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(e3(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):e4(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let i=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0,a=++t<e.length?n[e.charAt(t)]:64,o=++t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==s||null==a||null==o)throw new e8;let l=i<<2|s>>4;if(r.push(l),64!==a){let e=s<<4&240|a>>2;if(r.push(e),64!==o){let e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class e8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const e5=function(e){let t=e3(e);return e6.encodeByteArray(t,!0)},e7=function(e){return e5(e).replace(/\./g,"")},e9=function(e){try{return e6.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},te=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==Q)return Q;throw Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{let e;if("undefined"==typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&e9(e[1]);return t&&JSON.parse(t)})()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},tt=e=>{var t,n;return null==(n=null==(t=te())?void 0:t.emulatorHosts)?void 0:n[e]},tn=()=>{var e;return null==(e=te())?void 0:e.config},tr=e=>{var t;return null==(t=te())?void 0:t[`_${e}`]};class ti{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function ts(e){return e.endsWith(".cloudworkstations.dev")}async function ta(e){return(await fetch(e,{credentials:"include"})).ok}const to={};let tl=!1;function tu(e,t){if("undefined"==typeof window||"undefined"==typeof document||!ts(window.location.host)||to[e]===t||to[e]||tl)return;function n(e){return`__firebase__banner__${e}`}to[e]=t;let r="__firebase__banner",i=function(){let e={prod:[],emulator:[]};for(let t of Object.keys(to))to[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){let e,t,s=(e=document.getElementById(r),t=!1,e||((e=document.createElement("div")).setAttribute("id",r),t=!0),{created:t,element:e}),a=n("text"),o=document.getElementById(a)||document.createElement("span"),l=n("learnmore"),u=document.getElementById(l)||document.createElement("a"),c=n("preprendIcon"),h=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(s.created){let e=s.element;e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center",u.setAttribute("id",l),u.innerText="Learn more",u.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",u.setAttribute("target","__blank"),u.style.paddingLeft="5px",u.style.textDecoration="underline";let t=function(){let e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{tl=!0;let e=document.getElementById(r);e&&e.remove()},e}();h.setAttribute("width","24"),h.setAttribute("id",c),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px",e.append(h,o,u,t),document.body.appendChild(e)}i?(o.innerText="Preview backend disconnected.",h.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(h.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,o.innerText="Preview backend running in this workspace."),o.setAttribute("id",a)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",s):s()}function tc(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}class th extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,th.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,td.prototype.create)}}class td{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){var n,r;let i=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?(n=a,r=i,n.replace(tf,(e,t)=>{let n=r[t];return null!=n?String(n):`<${t}?>`})):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new th(s,l,i)}}const tf=/\{\$([^}]+)}/g;function tp(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let n=e[i],s=t[i];if(tg(n)&&tg(s)){if(!tp(n,s))return!1}else if(n!==s)return!1}for(let e of r)if(!n.includes(e))return!1;return!0}function tg(e){return null!==e&&"object"==typeof e}function tm(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function ty(e){let t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){let[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function tw(e){let t=e.indexOf("?");if(!t)return"";let n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class tE{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw Error("Missing Observer.");void 0===(r=!function(e,t){if("object"!=typeof e||null===e)return!1;for(let n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?{next:e,error:t,complete:n}:e).next&&(r.next=tv),void 0===r.error&&(r.error=tv),void 0===r.complete&&(r.complete=tv);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tv(){}function tC(e){return e&&e._delegate?e._delegate:e}class tS{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const t_="[DEFAULT]";class tb{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new ti;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!=(t=null==e?void 0:e.optional)&&t;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}if(r)return null;throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:t_})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=t_){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=t_){return this.instances.has(e)}getOptions(e=t_){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){var n;let r=this.normalizeInstanceIdentifier(t),i=null!=(n=this.onInitCallbacks.get(r))?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);let s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(n)for(let r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){var n;let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e)===t_?void 0:n,options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(e){}return r||null}normalizeInstanceIdentifier(e=t_){return this.component?this.component.multipleInstances?e:t_:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class tI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new tb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const tA=[];(h=A||(A={}))[h.DEBUG=0]="DEBUG",h[h.VERBOSE=1]="VERBOSE",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.SILENT=5]="SILENT";const tT={debug:A.DEBUG,verbose:A.VERBOSE,info:A.INFO,warn:A.WARN,error:A.ERROR,silent:A.SILENT},tN=A.INFO,tR={[A.DEBUG]:"log",[A.VERBOSE]:"log",[A.INFO]:"info",[A.WARN]:"warn",[A.ERROR]:"error"},tD=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=tR[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class tO{constructor(e){this.name=e,this._logLevel=tN,this._logHandler=tD,this._userLogHandler=null,tA.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in A))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?tT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,A.DEBUG,...e),this._logHandler(this,A.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,A.VERBOSE,...e),this._logHandler(this,A.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,A.INFO,...e),this._logHandler(this,A.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,A.WARN,...e),this._logHandler(this,A.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,A.ERROR,...e),this._logHandler(this,A.ERROR,...e)}}const tM=new WeakMap,tk=new WeakMap,tP=new WeakMap,tx=new WeakMap,tL=new WeakMap;let tB={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return tk.get(e);if("objectStoreNames"===t)return e.objectStoreNames||tP.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tF(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function tF(n){if(n instanceof IDBRequest){let e=new Promise((e,t)=>{let r=()=>{n.removeEventListener("success",i),n.removeEventListener("error",s)},i=()=>{e(tF(n.result)),r()},s=()=>{t(n.error),r()};n.addEventListener("success",i),n.addEventListener("error",s)});return e.then(e=>{e instanceof IDBCursor&&tM.set(e,n)}).catch(()=>{}),tL.set(e,n),e}if(tx.has(n))return tx.get(n);let r=function(n){if("function"==typeof n)return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(t||(t=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(n)?function(...e){return n.apply(tU(this),e),tF(tM.get(this))}:function(...e){return tF(n.apply(tU(this),e))}:function(e,...t){let r=n.call(tU(this),e,...t);return tP.set(r,e.sort?e.sort():[e]),tF(r)};return n instanceof IDBTransaction&&function(e){if(tk.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});tk.set(e,t)}(n),(e||(e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>n instanceof e)?new Proxy(n,tB):n}(n);return r!==n&&(tx.set(n,r),tL.set(r,n)),r}const tU=e=>tL.get(e),tV=["get","getKey","getAll","getAllKeys","count"],tz=["put","add","delete","clear"],tj=new Map;function tH(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(tj.get(t))return tj.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,i=tz.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||tV.includes(n)))return;let s=async function(e,...t){let s=this.transaction(e,i?"readwrite":"readonly"),a=s.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),i&&s.done]))[0]};return tj.set(t,s),s}tB={...n=tB,get:(e,t,r)=>tH(e,t)||n.get(e,t,r),has:(e,t)=>!!tH(e,t)||n.has(e,t)};class tW{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(!function(e){let t=e.getComponent();return(null==t?void 0:t.type)==="VERSION"}(e))return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}const tG="@firebase/app",tY="0.13.1",tq=new tO("@firebase/app"),tX="[DEFAULT]",t$={[tG]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/ai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},tQ=new Map,tK=new Map,tZ=new Map;function tJ(e,t){try{e.container.addComponent(t)}catch(n){tq.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function t1(e){let t=e.name;if(tZ.has(t))return tq.debug(`There were multiple attempts to register component ${t}.`),!1;for(let n of(tZ.set(t,e),tQ.values()))tJ(n,e);for(let t of tK.values())tJ(t,e);return!0}function t0(e,t){let n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function t2(e){return null!=e&&void 0!==e.settings}const t3=new td("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class t4{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new tS("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw t3.create("app-deleted",{appName:this._name})}}const t6="11.9.0";function t8(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});let r=Object.assign({name:tX,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!=typeof i||!i)throw t3.create("bad-app-name",{appName:String(i)});if(n||(n=tn()),!n)throw t3.create("no-options");let s=tQ.get(i);if(s)if(tp(n,s.options)&&tp(r,s.config))return s;else throw t3.create("duplicate-app",{appName:i});let a=new tI(i);for(let e of tZ.values())a.addComponent(e);let o=new t4(n,r,a);return tQ.set(i,o),o}function t5(e=tX){let t=tQ.get(e);if(!t&&e===tX&&tn())return t8();if(!t)throw t3.create("no-app",{appName:e});return t}function t7(e,t,n){var r;let i=null!=(r=t$[e])?r:e;n&&(i+=`-${n}`);let s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){let e=[`Unable to register library "${i}" with version "${t}":`];s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),tq.warn(e.join(" "));return}t1(new tS(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const t9="firebase-heartbeat-store";let ne=null;function nt(){return ne||(ne=(function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let a=indexedDB.open(e,1),o=tF(a);return r&&a.addEventListener("upgradeneeded",e=>{r(tF(a.result),e.oldVersion,e.newVersion,tF(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o})("firebase-heartbeat-database",0,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(t9)}catch(e){console.warn(e)}}}).catch(e=>{throw t3.create("idb-open",{originalErrorMessage:e.message})})),ne}async function nn(e){try{let t=(await nt()).transaction(t9),n=await t.objectStore(t9).get(ni(e));return await t.done,n}catch(e){if(e instanceof th)tq.warn(e.message);else{let t=t3.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});tq.warn(t.message)}}}async function nr(e,t){try{let n=(await nt()).transaction(t9,"readwrite"),r=n.objectStore(t9);await r.put(t,ni(e)),await n.done}catch(e){if(e instanceof th)tq.warn(e.message);else{let t=t3.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});tq.warn(t.message)}}}function ni(e){return`${e.name}!${e.options.appId}`}class ns{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new no(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=na();if((null==(e=this._heartbeatsCache)?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,(null==(t=this._heartbeatsCache)?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){let e=function(e){if(0===e.length)return -1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){tq.warn(e)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,(null==(e=this._heartbeatsCache)?void 0:e.heartbeats)==null||0===this._heartbeatsCache.heartbeats.length)return"";let t=na(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){let n=[],r=e.slice();for(let i of e){let e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),nl(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),nl(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=e7(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return tq.warn(e),""}}}function na(){return new Date().toISOString().substring(0,10)}class no{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise((e,t)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null==(e=i.error)?void 0:e.message)||"")}}catch(e){t(e)}}).then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let e=await nn(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let n=await this.read();return nr(this.app,{lastSentHeartbeatDate:null!=(t=e.lastSentHeartbeatDate)?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){let n=await this.read();return nr(this.app,{lastSentHeartbeatDate:null!=(t=e.lastSentHeartbeatDate)?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function nl(e){return e7(JSON.stringify({version:2,heartbeats:e})).length}function nu(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function nc(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}t1(new tS("platform-logger",e=>new tW(e),"PRIVATE")),t1(new tS("heartbeat",e=>new ns(e),"PRIVATE")),t7(tG,tY,""),t7(tG,tY,"esm2017"),t7("fire-js",""),t7("firebase","11.9.1","app"),"function"==typeof SuppressedError&&SuppressedError;const nh=new td("auth","Firebase",nc()),nd=new tO("@firebase/auth");function nf(e,...t){nd.logLevel<=A.ERROR&&nd.error(`Auth (${t6}): ${e}`,...t)}function np(e,...t){throw nw(e,...t)}function ng(e,...t){return nw(e,...t)}function nm(e,t,n){return new td("auth","Firebase",Object.assign(Object.assign({},nc()),{[t]:n})).create(t,{appName:e.name})}function ny(e){return nm(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nw(e,...t){if("string"!=typeof e){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return nh.create(e,...t)}function nE(e,t,...n){if(!e)throw nw(t,...n)}function nv(e){let t="INTERNAL ASSERTION FAILED: "+e;throw nf(t),Error(t)}function nC(){var e;return"undefined"!=typeof self&&(null==(e=self.location)?void 0:e.href)||""}function nS(){var e;return"undefined"!=typeof self&&(null==(e=self.location)?void 0:e.protocol)||null}class n_{constructor(e,t){var n;this.shortDelay=e,this.longDelay=t,n="Short delay should be less than long delay!",t>e||nv(n),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tc())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===nS()||"https:"===nS()||function(){let e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function nb(e,t){var n,r;n=e.emulator,r="Emulator should always be set here",n||nv(r);let{url:i}=e.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}class nI{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void nv("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void nv("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void nv("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const nA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},nT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nN=new n_(3e4,6e4);function nR(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function nD(e,t,n,r,i={}){return nO(e,i,async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});let a=tm(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);let l=Object.assign({method:t,headers:o},i);return("undefined"==typeof navigator||"Cloudflare-Workers"!==navigator.userAgent)&&(l.referrerPolicy="no-referrer"),e.emulatorConfig&&ts(e.emulatorConfig.host)&&(l.credentials="include"),nI.fetch()(await nk(e,e.config.apiHost,n,a),l)})}async function nO(e,t,n){e._canInitEmulator=!1;let r=Object.assign(Object.assign({},nA),t);try{let t=new nP(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();let s=await i.json();if("needConfirmation"in s)throw nx(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{let[t,n]=(i.ok?s.errorMessage:s.error.message).split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===t)throw nx(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===t)throw nx(e,"email-already-in-use",s);if("USER_DISABLED"===t)throw nx(e,"user-disabled",s);let a=r[t]||t.toLowerCase().replace(/[_\s]+/g,"-");if(n)throw nm(e,a,n);np(e,a)}}catch(t){if(t instanceof th)throw t;np(e,"network-request-failed",{message:String(t)})}}async function nM(e,t,n,r,i={}){let s=await nD(e,t,n,r,i);return"mfaPendingCredential"in s&&np(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function nk(e,t,n,r){let i=`${t}${n}?${r}`,s=e.config.emulator?nb(e.config,i):`${e.config.apiScheme}://${i}`;return nT.includes(n)&&(await e._persistenceManagerAvailable,"COOKIE"===e._getPersistenceType())?e._getPersistence()._getFinalTarget(s).toString():s}class nP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(ng(this.auth,"network-request-failed")),nN.get())})}}function nx(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=ng(e,t,r);return i.customData._tokenResponse=n,i}function nL(e){return void 0!==e&&void 0!==e.enterprise}class nB{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)switch(t.enforcementState){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nF(e,t){return nD(e,"GET","/v2/recaptchaConfig",nR(e,t))}async function nU(e,t){return nD(e,"POST","/v1/accounts:delete",t)}async function nV(e,t){return nD(e,"POST","/v1/accounts:lookup",t)}function nz(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}async function nj(e,t=!1){let n=tC(e),r=await n.getIdToken(t),i=nW(r);nE(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s="object"==typeof i.firebase?i.firebase:void 0,a=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:nz(nH(i.auth_time)),issuedAtTime:nz(nH(i.iat)),expirationTime:nz(nH(i.exp)),signInProvider:a||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}function nH(e){return 1e3*Number(e)}function nW(e){let[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return nf("JWT malformed, contained fewer than 3 sections"),null;try{let e=e9(n);if(!e)return nf("Failed to decode base64 JWT payload"),null;return JSON.parse(e)}catch(e){return nf("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}function nG(e){let t=nW(e);return nE(t,"internal-error"),nE(void 0!==t.exp,"internal-error"),nE(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function nY(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof th&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class nq{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(!e)return this.errorBackoff=3e4,Math.max(0,(null!=(t=this.user.stsTokenManager.expirationTime)?t:0)-Date.now()-3e5);{let e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(null==e?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class nX{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nz(this.lastLoginAt),this.creationTime=nz(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function n$(e){var t,n,r;let i=e.auth,s=await e.getIdToken(),a=await nY(e,nV(i,{idToken:s}));nE(null==a?void 0:a.users.length,i,"internal-error");let o=a.users[0];e._notifyReloadListener(o);let l=(null==(t=o.providerUserInfo)?void 0:t.length)?nK(o.providerUserInfo):[],u=(n=e.providerData,r=l,[...n.filter(e=>!r.some(t=>t.providerId===e.providerId)),...r]),c=e.isAnonymous,h=!(e.email&&o.passwordHash)&&!(null==u?void 0:u.length);Object.assign(e,{uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new nX(o.createdAt,o.lastLoginAt),isAnonymous:!!c&&h})}async function nQ(e){let t=tC(e);await n$(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function nK(e){return e.map(e=>{var{providerId:t}=e,n=nu(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}async function nZ(e,t){let n=await nO(e,{},async()=>{let n=tm({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await nk(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let o={method:"POST",headers:a,body:n};return e.emulatorConfig&&ts(e.emulatorConfig.host)&&(o.credentials="include"),nI.fetch()(s,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function nJ(e,t){return nD(e,"POST","/v2/accounts:revokeToken",nR(e,t))}class n1{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){nE(e.idToken,"internal-error"),nE(void 0!==e.idToken,"internal-error"),nE(void 0!==e.refreshToken,"internal-error");let t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):nG(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){nE(0!==e.length,"internal-error");let t=nG(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(nE(this.refreshToken,e,"user-token-expired"),this.refreshToken)?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:n,refreshToken:r,expiresIn:i}=await nZ(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){let{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new n1;return n&&(nE("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(nE("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(nE("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n1,this.toJSON())}_performRefresh(){return nv("not implemented")}}function n0(e,t){nE("string"==typeof e||void 0===e,"internal-error",{appName:t})}class n2{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=nu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nq(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new nX(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await nY(this,this.stsTokenManager.getToken(this.auth,e));return nE(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return nj(this,e)}reload(){return nQ(this)}_assign(e){this!==e&&(nE(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n2(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){nE(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await n$(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(t2(this.auth.app))return Promise.reject(ny(this.auth));let e=await this.getIdToken();return await nY(this,nU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,u;let c=null!=(n=t.displayName)?n:void 0,h=null!=(r=t.email)?r:void 0,d=null!=(i=t.phoneNumber)?i:void 0,f=null!=(s=t.photoURL)?s:void 0,p=null!=(a=t.tenantId)?a:void 0,g=null!=(o=t._redirectEventId)?o:void 0,m=null!=(l=t.createdAt)?l:void 0,y=null!=(u=t.lastLoginAt)?u:void 0,{uid:w,emailVerified:E,isAnonymous:v,providerData:C,stsTokenManager:S}=t;nE(w&&S,e,"internal-error");let _=n1.fromJSON(this.name,S);nE("string"==typeof w,e,"internal-error"),n0(c,e.name),n0(h,e.name),nE("boolean"==typeof E,e,"internal-error"),nE("boolean"==typeof v,e,"internal-error"),n0(d,e.name),n0(f,e.name),n0(p,e.name),n0(g,e.name),n0(m,e.name),n0(y,e.name);let b=new n2({uid:w,auth:e,email:h,emailVerified:E,displayName:c,isAnonymous:v,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:_,createdAt:m,lastLoginAt:y});return C&&Array.isArray(C)&&(b.providerData=C.map(e=>Object.assign({},e))),g&&(b._redirectEventId=g),b}static async _fromIdTokenResponse(e,t,n=!1){let r=new n1;r.updateFromServerResponse(t);let i=new n2({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await n$(i),i}static async _fromGetAccountInfoResponse(e,t,n){let r=t.users[0];nE(void 0!==r.localId,"internal-error");let i=void 0!==r.providerUserInfo?nK(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null==i?void 0:i.length),a=new n1;a.updateFromIdToken(n);let o=new n2({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s});return Object.assign(o,{uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new nX(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null==i?void 0:i.length)}),o}}const n3=new Map;function n4(e){var t,n;t="Expected a class definition",e instanceof Function||nv(t);let r=n3.get(e);return r?(n="Instance stored in cache mismatched with class",r instanceof e||nv(n)):(r=new e,n3.set(e,r)),r}class n6{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}function n8(e,t,n){return`firebase:${e}:${t}:${n}`}n6.type="NONE";class n5{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;let{config:r,name:i}=this.auth;this.fullUserKey=n8(this.userKey,r.apiKey,i),this.fullPersistenceKey=n8("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"==typeof e){let t=await nV(this.auth,{idToken:e}).catch(()=>void 0);return t?n2._fromGetAccountInfoResponse(this.auth,t,e):null}return n2._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new n5(n4(n6),e,n);let r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),i=r[0]||n4(n6),s=n8(n,e.config.apiKey,e.name),a=null;for(let n of t)try{let t=await n._get(s);if(t){let r;if("string"==typeof t){let n=await nV(e,{idToken:t}).catch(()=>void 0);if(!n)break;r=await n2._fromGetAccountInfoResponse(e,n,t)}else r=n2._fromJSON(e,t);n!==i&&(a=r),i=n;break}}catch(e){}let o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length&&(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(e){}}))),new n5(i,e,n)}}function n7(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";{if(rn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(n9(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ri(t))return"Blackberry";if(rs(t))return"Webos";if(re(t))return"Safari";if((t.includes("chrome/")||rt(t))&&!t.includes("edge/"))return"Chrome";if(rr(t))return"Android";let n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if((null==n?void 0:n.length)===2)return n[1]}return"Other"}function n9(e=tc()){return/firefox\//i.test(e)}function re(e=tc()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function rt(e=tc()){return/crios\//i.test(e)}function rn(e=tc()){return/iemobile/i.test(e)}function rr(e=tc()){return/android/i.test(e)}function ri(e=tc()){return/blackberry/i.test(e)}function rs(e=tc()){return/webos/i.test(e)}function ra(e=tc()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ro(e=tc()){return ra(e)||rr(e)||rs(e)||ri(e)||/windows phone/i.test(e)||rn(e)}function rl(e,t=[]){let n;switch(e){case"Browser":n=n7(tc());break;case"Worker":n=`${n7(tc())}-${e}`;break;default:n=e}let r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${t6}/${r}`}class ru{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let n=t=>new Promise((n,r)=>{try{let r=e(t);n(r)}catch(e){r(e)}});n.onAbort=t,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){for(let e of(t.reverse(),t))try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}async function rc(e,t={}){return nD(e,"GET","/v2/passwordPolicy",nR(e,t))}class rh{constructor(e){var t,n,r,i;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!=(t=s.minPasswordLength)?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!=(r=null==(n=e.allowedNonAlphanumericCharacters)?void 0:n.join(""))?r:"",this.forceUpgradeOnSignin=null!=(i=e.forceUpgradeOnSignin)&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;let o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null==(t=o.meetsMinPasswordLength)||t),o.isValid&&(o.isValid=null==(n=o.meetsMaxPasswordLength)||n),o.isValid&&(o.isValid=null==(r=o.containsLowercaseLetter)||r),o.isValid&&(o.isValid=null==(i=o.containsUppercaseLetter)||i),o.isValid&&(o.isValid=null==(s=o.containsNumericCharacter)||s),o.isValid&&(o.isValid=null==(a=o.containsNonAlphanumericCharacter)||a),o}validatePasswordLengthOptions(e,t){let n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class rd{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rf(this),this.idTokenSubscription=new rf(this),this.beforeStateQueue=new ru(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nh,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=n4(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted){if(this.persistenceManager=await n5.create(this,e),null==(n=this._resolvePersistenceManagerAvailable)||n.call(this),!this._deleted){if(null==(r=this._popupRedirectResolver)?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null==(i=this.currentUser)?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(this.currentUser||e){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await nV(this,{idToken:e}),n=await n2._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(t2(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let n=await this.assertedPersistence.getCurrentUser(),r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let n=null==(t=this.redirectUser)?void 0:t._redirectEventId,s=null==r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);(!n||n===s)&&(null==a?void 0:a.user)&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(e){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return(nE(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId)?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await n$(e)}catch(e){if((null==e?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(t2(this.app))return Promise.reject(ny(this));let t=e?tC(e):null;return t&&nE(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&nE(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return t2(this.app)?Promise.reject(ny(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return t2(this.app)?Promise.reject(ny(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(n4(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=new rh(await rc(this));null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new td("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await nJ(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null==(e=this._currentUser)?void 0:e.toJSON()}}async _setRedirectUser(e,t){let n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&n4(e)||this._popupRedirectResolver;nE(t,this,"argument-error"),this.redirectPersistenceManager=await n5.create(this,[n4(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return(this._isInitialized&&await this.queue(async()=>{}),(null==(t=this._currentUser)?void 0:t._redirectEventId)===e)?this._currentUser:(null==(n=this.redirectUser)?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let n=null!=(t=null==(e=this.currentUser)?void 0:e.uid)?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};let i="function"==typeof t?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(nE(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),"function"==typeof t){let i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{let n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return nE(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rl(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let n=await (null==(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);let r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(t2(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await (null==(e=this.appCheckServiceProvider.getImmediate({optional:!0}))?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){nd.logLevel<=A.WARN&&nd.warn(`Auth (${t6}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}class rf{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){let n=new tE(e,void 0);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return nE(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let rp={async loadJS(){throw Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rg(e){return`__${e}${Math.floor(1e6*Math.random())}`}class rm{constructor(){this.enterprise=new ry}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ry{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const rw="NO_RECAPTCHA";class rE{constructor(e){this.type="recaptcha-enterprise",this.auth=tC(e)}async verify(e="verify",t=!1){async function n(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{nF(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0===r.recaptchaKey)n(Error("recaptcha Enterprise site key undefined"));else{let n=new nB(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}}).catch(e=>{n(e)})})}function r(t,n,r){let i=window.grecaptcha;nL(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(rw)})}):r(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new rm().execute("siteKey",{action:"verify"}):new Promise((e,i)=>{n(this.auth).then(n=>{if(!t&&nL(window.grecaptcha))r(n,e,i);else{var s;if("undefined"==typeof window)return void i(Error("RecaptchaVerifier is only supported in browser"));let t=rp.recaptchaEnterpriseScript;0!==t.length&&(t+=n),(s=t,rp.loadJS(s)).then(()=>{r(n,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}}async function rv(e,t,n,r=!1,i=!1){let s,a=new rE(e);if(i)s=rw;else try{s=await a.verify(n)}catch(e){s=await a.verify(n,!0)}let o=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){let e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){let e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function rC(e,t,n,r,i){var s,a;if("EMAIL_PASSWORD_PROVIDER"===i)if(null==(s=e._getRecaptchaConfig())||!s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER"))return r(e,t).catch(async i=>{if("auth/missing-recaptcha-token"!==i.code)return Promise.reject(i);{console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let i=await rv(e,t,n,"getOobCode"===n);return r(e,i)}});else{let i=await rv(e,t,n,"getOobCode"===n);return r(e,i)}if("PHONE_PROVIDER"!==i)return Promise.reject(i+" provider is not supported.");if(null==(a=e._getRecaptchaConfig())?void 0:a.isProviderEnabled("PHONE_PROVIDER")){let i=await rv(e,t,n);return r(e,i).catch(async i=>{var s;if((null==(s=e._getRecaptchaConfig())?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let i=await rv(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{let i=await rv(e,t,n,!1,!0);return r(e,i)}}async function rS(e){let t=tC(e),n=new nB(await nF(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}));null==t.tenantId?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,n.isAnyProviderEnabled()&&new rE(t).verify()}function r_(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function rb(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}class rI{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return nv("not implemented")}_getIdTokenResponse(e){return nv("not implemented")}_linkToIdToken(e,t){return nv("not implemented")}_getReauthenticationResolver(e){return nv("not implemented")}}async function rA(e,t){return nD(e,"POST","/v1/accounts:signUp",t)}async function rT(e,t){return nM(e,"POST","/v1/accounts:signInWithPassword",nR(e,t))}async function rN(e,t){return nM(e,"POST","/v1/accounts:signInWithEmailLink",nR(e,t))}async function rR(e,t){return nM(e,"POST","/v1/accounts:signInWithEmailLink",nR(e,t))}class rD extends rI{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new rD(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new rD(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);else if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return rC(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",rT,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return rN(e,{email:this._email,oobCode:this._password});default:np(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return rC(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rA,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return rR(e,{idToken:t,email:this._email,oobCode:this._password});default:np(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function rO(e,t){return nM(e,"POST","/v1/accounts:signInWithIdp",nR(e,t))}class rM extends rI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new rM(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):np("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=nu(t,["providerId","signInMethod"]);if(!n||!r)return null;let s=new rM(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return rO(e,this.buildRequest())}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,rO(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,rO(e,t)}buildRequest(){let e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=tm(t)}return e}}async function rk(e,t){return nD(e,"POST","/v1/accounts:sendVerificationCode",nR(e,t))}async function rP(e,t){return nM(e,"POST","/v1/accounts:signInWithPhoneNumber",nR(e,t))}async function rx(e,t){let n=await nM(e,"POST","/v1/accounts:signInWithPhoneNumber",nR(e,t));if(n.temporaryProof)throw nx(e,"account-exists-with-different-credential",n);return n}const rL={USER_NOT_FOUND:"user-not-found"};async function rB(e,t){return nM(e,"POST","/v1/accounts:signInWithPhoneNumber",nR(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),rL)}class rF extends rI{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new rF({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new rF({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return rP(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return rx(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return rB(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));let{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new rF({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class rU{constructor(e){var t,n,r,i,s,a;let o=ty(tw(e)),l=null!=(t=o.apiKey)?t:null,u=null!=(n=o.oobCode)?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!=(r=o.mode)?r:null);nE(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!=(i=o.continueUrl)?i:null,this.languageCode=null!=(s=o.lang)?s:null,this.tenantId=null!=(a=o.tenantId)?a:null}static parseLink(e){let t=function(e){let t=ty(tw(e)).link,n=t?ty(tw(t)).deep_link_id:null,r=ty(tw(e)).deep_link_id;return(r?ty(tw(r)).link:null)||r||n||t||e}(e);try{return new rU(t)}catch(e){return null}}}class rV{constructor(){this.providerId=rV.PROVIDER_ID}static credential(e,t){return rD._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let n=rU.parseLink(t);return nE(n,"argument-error"),rD._fromEmailAndCode(e,n.code,n.tenantId)}}rV.PROVIDER_ID="password",rV.EMAIL_PASSWORD_SIGN_IN_METHOD="password",rV.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class rz{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class rj extends rz{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class rH extends rj{constructor(){super("facebook.com")}static credential(e){return rM._fromParams({providerId:rH.PROVIDER_ID,signInMethod:rH.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rH.credentialFromTaggedObject(e)}static credentialFromError(e){return rH.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rH.credential(e.oauthAccessToken)}catch(e){return null}}}rH.FACEBOOK_SIGN_IN_METHOD="facebook.com",rH.PROVIDER_ID="facebook.com";class rW extends rj{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return rM._fromParams({providerId:rW.PROVIDER_ID,signInMethod:rW.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return rW.credentialFromTaggedObject(e)}static credentialFromError(e){return rW.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return rW.credential(t,n)}catch(e){return null}}}rW.GOOGLE_SIGN_IN_METHOD="google.com",rW.PROVIDER_ID="google.com";class rG extends rj{constructor(){super("github.com")}static credential(e){return rM._fromParams({providerId:rG.PROVIDER_ID,signInMethod:rG.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rG.credentialFromTaggedObject(e)}static credentialFromError(e){return rG.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rG.credential(e.oauthAccessToken)}catch(e){return null}}}rG.GITHUB_SIGN_IN_METHOD="github.com",rG.PROVIDER_ID="github.com";class rY extends rj{constructor(){super("twitter.com")}static credential(e,t){return rM._fromParams({providerId:rY.PROVIDER_ID,signInMethod:rY.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return rY.credentialFromTaggedObject(e)}static credentialFromError(e){return rY.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return rY.credential(t,n)}catch(e){return null}}}async function rq(e,t){return nM(e,"POST","/v1/accounts:signUp",nR(e,t))}rY.TWITTER_SIGN_IN_METHOD="twitter.com",rY.PROVIDER_ID="twitter.com";class rX{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){return new rX({user:await n2._fromIdTokenResponse(e,n,r),providerId:r$(n),_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){return await e._updateTokensIfNecessary(n,!0),new rX({user:e,providerId:r$(n),_tokenResponse:n,operationType:t})}}function r$(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class rQ extends th{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,rQ.prototype),this.customData={appName:e.name,tenantId:null!=(i=e.tenantId)?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new rQ(e,t,n,r)}}function rK(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw rQ._fromErrorAndOperation(e,n,t,r);throw n})}async function rZ(e,t,n=!1){let r=await nY(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return rX._forOperation(e,"link",r)}async function rJ(e,t,n=!1){let{auth:r}=e;if(t2(r.app))return Promise.reject(ny(r));let i="reauthenticate";try{let s=await nY(e,rK(r,i,t,e),n);nE(s.idToken,r,"internal-error");let a=nW(s.idToken);nE(a,r,"internal-error");let{sub:o}=a;return nE(e.uid===o,r,"user-mismatch"),rX._forOperation(e,i,s)}catch(e){throw(null==e?void 0:e.code)==="auth/user-not-found"&&np(r,"user-mismatch"),e}}async function r1(e,t,n=!1){if(t2(e.app))return Promise.reject(ny(e));let r="signIn",i=await rK(e,r,t),s=await rX._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function r0(e,t){return r1(tC(e),t)}async function r2(e){let t=tC(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function r3(e,t,n){if(t2(e.app))return Promise.reject(ny(e));let r=tC(e),i=rC(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rq,"EMAIL_PASSWORD_PROVIDER"),s=await i.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&r2(e),t}),a=await rX._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}function r4(e,t){return nD(e,"POST","/v2/accounts/mfaEnrollment:start",nR(e,t))}new WeakMap;const r6="__sak";class r8{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{if(!this.storage)return Promise.resolve(!1);return this.storage.setItem(r6,"1"),this.storage.removeItem(r6),Promise.resolve(!0)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class r5 extends r8{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ro(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});let n=e.key;t?this.detachListener():this.stopPolling();let r=()=>{let e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(function(){let e=tc();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0})()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}r5.type="LOCAL";class r7 extends r8{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}r7.type="SESSION";class r9{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;let n=new r9(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let{eventId:t,eventType:n,data:r}=e.data,i=this.handlersMap[n];if(!(null==i?void 0:i.size))return;e.ports[0].postMessage({status:"ack",eventId:t,eventType:n});let s=Array.from(i).map(async t=>t(e.origin,r)),a=await Promise.all(s.map(async e=>{try{let t=await e;return{fulfilled:!0,value:t}}catch(e){return{fulfilled:!1,reason:e}}}));e.ports[0].postMessage({status:"done",eventId:t,eventType:n,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ie(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}r9.receivers=[];class it{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){let r,i,s="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!s)throw Error("connection_unavailable");return new Promise((a,o)=>{let l=ie("",20);s.port1.start();let u=setTimeout(()=>{o(Error("unsupported_event"))},n);i={messageChannel:s,onMessage(e){if(e.data.eventId===l)switch(e.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{o(Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(e.data.response);break;default:clearTimeout(u),clearTimeout(r),o(Error("invalid_response"))}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function ir(){return window}function ii(){return void 0!==ir().WorkerGlobalScope&&"function"==typeof ir().importScripts}async function is(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}const ia="firebaseLocalStorageDb",io="firebaseLocalStorage",il="fbase_key";class iu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ic(e,t){return e.transaction([io],t?"readwrite":"readonly").objectStore(io)}function ih(){let e=indexedDB.open(ia,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{let t=e.result;try{t.createObjectStore(io,{keyPath:il})}catch(e){n(e)}}),e.addEventListener("success",async()=>{let n=e.result;n.objectStoreNames.contains(io)?t(n):(n.close(),await new iu(indexedDB.deleteDatabase(ia)).toPromise(),t(await ih()))})})}async function id(e,t,n){return new iu(ic(e,!0).put({[il]:t,value:n})).toPromise()}async function ip(e,t){let n=ic(e,!1).get(t),r=await new iu(n).toPromise();return void 0===r?null:r.value}function ig(e,t){return new iu(ic(e,!0).delete(t)).toPromise()}class im{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await ih()),this.db}async _withRetries(e){let t=0;for(;;)try{let t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ii()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=r9._getInstance(ii()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await is(),!this.activeServiceWorker)return;this.sender=new it(this.activeServiceWorker);let n=await this.sender._send("ping",{},800);n&&(null==(e=n[0])?void 0:e.fulfilled)&&(null==(t=n[0])?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null==(t=null==navigator?void 0:navigator.serviceWorker)?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await ih();return await id(e,r6,"1"),await ig(e,r6),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>id(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>ip(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ig(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>new iu(ic(e,!1).getAll()).toPromise());if(!e||0!==this.pendingWrites)return[];let t=[],n=new Set;if(0!==e.length)for(let{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(let e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}function iy(e,t){return nD(e,"POST","/v2/accounts/mfaSignIn:start",nR(e,t))}im.type="LOCAL",rg("rcb"),new n_(3e4,6e4);const iw="recaptcha";async function iE(e,t,n){var r;if(!e._getRecaptchaConfig())try{await rS(e)}catch(e){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"==typeof t?{phoneNumber:t}:t,"session"in i){let t=i.session;if("phoneNumber"in i){nE("enroll"===t.type,e,"internal-error");let r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===rw){nE((null==n?void 0:n.type)===iw,e,"argument-error");let r=await iv(e,t,n);return r4(e,r)}return r4(e,t)},a=rC(e,r,"mfaSmsEnrollment",s,"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{nE("signin"===t.type,e,"internal-error");let s=(null==(r=i.multiFactorHint)?void 0:r.uid)||i.multiFactorUid;nE(s,e,"missing-multi-factor-info");let a={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===rw){nE((null==n?void 0:n.type)===iw,e,"argument-error");let r=await iv(e,t,n);return iy(e,r)}return iy(e,t)},l=rC(e,a,"mfaSmsSignIn",o,"PHONE_PROVIDER");return(await l.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{let t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=async(e,t)=>{if(t.captchaResponse===rw){nE((null==n?void 0:n.type)===iw,e,"argument-error");let r=await iv(e,t,n);return rk(e,r)}return rk(e,t)},s=rC(e,t,"sendVerificationCode",r,"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).sessionInfo}}finally{null==n||n._reset()}}async function iv(e,t,n){nE(n.type===iw,e,"argument-error");let r=await n.verify();nE("string"==typeof r,e,"argument-error");let i=Object.assign({},t);if("phoneEnrollmentInfo"in i){let e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if(!("phoneSignInInfo"in i))return Object.assign(i,{recaptchaToken:r}),i;{let e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}}class iC{constructor(e){this.providerId=iC.PROVIDER_ID,this.auth=tC(e)}verifyPhoneNumber(e,t){return iE(this.auth,e,tC(t))}static credential(e,t){return rF._fromVerification(e,t)}static credentialFromResult(e){return iC.credentialFromTaggedObject(e)}static credentialFromError(e){return iC.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:n}=e;return t&&n?rF._fromTokenResponse(t,n):null}}iC.PROVIDER_ID="phone",iC.PHONE_SIGN_IN_METHOD="phone";class iS extends rI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rO(e,this._buildIdpRequest())}_linkToIdToken(e,t){return rO(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return rO(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function i_(e){return r1(e.auth,new iS(e),e.bypassAuthState)}function ib(e){let{auth:t,user:n}=e;return nE(n,t,"internal-error"),rJ(n,new iS(e),e.bypassAuthState)}async function iI(e){let{auth:t,user:n}=e;return nE(n,t,"internal-error"),rZ(n,new iS(e),e.bypassAuthState)}class iA{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);let o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return i_;case"linkViaPopup":case"linkViaRedirect":return iI;case"reauthViaPopup":case"reauthViaRedirect":return ib;default:np(this.auth,"internal-error")}}resolve(e){var t,n;t=this.pendingPromise,n="Pending promise was never set",t||nv(n),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){var t,n;t=this.pendingPromise,n="Pending promise was never set",t||nv(n),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const iT=new n_(2e3,1e4);class iN extends iA{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,iN.currentPopupAction&&iN.currentPopupAction.cancel(),iN.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return nE(e,this.auth,"internal-error"),e}async onExecution(){var e,t;e=1===this.filter.length,t="Popup operations only handle one event",e||nv(t);let n=ie();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(ng(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null==(e=this.authWindow)?void 0:e.associatedEvent)||null}cancel(){this.reject(ng(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,iN.currentPopupAction=null}pollUserCancellation(){let e=()=>{var t,n;if(null==(n=null==(t=this.authWindow)?void 0:t.window)?void 0:n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ng(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iT.get())};e()}}iN.currentPopupAction=null;const iR=new Map;class iD extends iA{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=iR.get(this.auth._key());if(!e){try{let t=await iO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}iR.set(this.auth._key(),e)}return this.bypassAuthState||iR.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"===e.type)return void this.resolve(null);if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iO(e,t){var n;let r=n8("pendingRedirect",(n=t).config.apiKey,n.name),i=n4(e._redirectPersistence);if(!await i._isAvailable())return!1;let s=await i._get(r)==="true";return await i._remove(r),s}function iM(e,t){iR.set(e._key(),t)}async function ik(e,t,n=!1){if(t2(e.app))return Promise.reject(ny(e));let r=tC(e),i=t?n4(t):(nE(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver),s=new iD(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class iP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iL(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!iL(e)){let r=(null==(n=e.error.code)?void 0:n.split("auth/")[1])||"internal-error";t.onError(ng(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ix(e))}saveEventToCache(e){this.cachedEventUids.add(ix(e)),this.lastProcessedEventTime=Date.now()}}function ix(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function iL({type:e,error:t}){return"unknown"===e&&(null==t?void 0:t.code)==="auth/no-auth-event"}async function iB(e,t={}){return nD(e,"GET","/v1/projects",t)}const iF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iU=/^https?/;async function iV(e){if(e.config.emulator)return;let{authorizedDomains:t}=await iB(e);for(let e of t)try{if(function(e){let t=nC(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){let i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!iU.test(n))return!1;if(iF.test(e))return r===e;let i=e.replace(/\./g,"\\.");return RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}(e))return}catch(e){}np(e,"unauthorized-domain")}const iz=new n_(3e4,6e4);function ij(){let e=ir().___jsl;if(null==e?void 0:e.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}let iH=null;const iW=new n_(5e3,15e3),iG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iY=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);async function iq(e){let t=await (iH=iH||new Promise((t,n)=>{var r,i,s,a;function o(){ij(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ij(),n(ng(e,"network-request-failed"))},timeout:iz.get()})}if(null==(i=null==(r=ir().gapi)?void 0:r.iframes)?void 0:i.Iframe)t(gapi.iframes.getContext());else if(null==(s=ir().gapi)?void 0:s.load)o();else{let t=rg("iframefcb");return ir()[t]=()=>{gapi.load?o():n(ng(e,"network-request-failed"))},(a=`${rp.gapiScript}?onload=${t}`,rp.loadJS(a)).catch(e=>n(e))}}).catch(e=>{throw iH=null,e})),n=ir().gapi;return nE(n,e,"internal-error"),t.open({where:document.body,url:function(e){let t=e.config;nE(t.authDomain,e,"auth-domain-config-required");let n=t.emulator?nb(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:t6},i=iY.get(e.config.apiHost);i&&(r.eid=i);let s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${tm(r).slice(1)}`}(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iG,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});let i=ng(e,"network-request-failed"),s=ir().setTimeout(()=>{r(i)},iW.get());function a(){ir().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const iX={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class i${constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const iQ=encodeURIComponent("fac");async function iK(e,t,n,r,i,s){nE(e.config.authDomain,e,"auth-domain-config-required"),nE(e.config.apiKey,e,"invalid-api-key");let a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:t6,eventId:i};if(t instanceof rz)for(let[n,r]of(t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",!function(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())&&(a.customParameters=JSON.stringify(t.getCustomParameters())),Object.entries(s||{})))a[n]=r;if(t instanceof rj){let e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}for(let t of(e.tenantId&&(a.tid=e.tenantId),Object.keys(a)))void 0===a[t]&&delete a[t];let o=await e._getAppCheckToken(),l=o?`#${iQ}=${encodeURIComponent(o)}`:"";return`${function({config:e}){return e.emulator?nb(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${tm(a).slice(1)}${l}`}const iZ="webStorageSupport",iJ=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=r7,this._completeRedirectFn=ik,this._overrideRedirectResult=iM}async _openPopup(e,t,n,r){var i,s,a;s=null==(i=this.eventManagers[e._key()])?void 0:i.manager,a="_initialize() not called before _openPopup()",s||nv(a);let o=await iK(e,t,n,nC(),r);return function(e,t,n,r=500,i=600){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),o="",l=Object.assign(Object.assign({},iX),{width:r.toString(),height:i.toString(),top:s,left:a}),u=tc().toLowerCase();n&&(o=rt(u)?"_blank":n),n9(u)&&(t=t||"http://localhost",l.scrollbars="yes");let c=Object.entries(l).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=tc()){var t;return ra(e)&&!!(null==(t=window.navigator)?void 0:t.standalone)}(u)&&"_self"!==o)return function(e,t){let n=document.createElement("a");n.href=e,n.target=t;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new i$(null);let h=window.open(t||"",o,c);nE(h,e,"popup-blocked");try{h.focus()}catch(e){}return new i$(h)}(e,o,ie())}async _openRedirect(e,t,n,r){var i;return await this._originValidation(e),i=await iK(e,t,n,nC(),r),ir().location.href=i,new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){var n;let{manager:e,promise:r}=this.eventManagers[t];return e?Promise.resolve(e):(n="If manager is not set, promise should be",r||nv(n),r)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await iq(e),n=new iP(e);return t.register("authEvent",t=>(nE(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(iZ,{type:iZ},n=>{var r;let i=null==(r=null==n?void 0:n[0])?void 0:r[iZ];void 0!==i&&t(!!i),np(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=iV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ro()||re()||ra()}};var i1="@firebase/auth",i0="1.10.7";class i2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null==(e=this.auth.currentUser)?void 0:e.uid)||null}async getToken(e){return(this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser)?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){nE(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const i3=tr("authIdTokenMaxAge")||300;let i4=null;rp={loadJS:e=>new Promise((t,n)=>{var r,i;let s=document.createElement("script");s.setAttribute("src",e),s.onload=t,s.onerror=e=>{let t=ng("internal-error");t.customData=e,n(t)},s.type="text/javascript",s.charset="UTF-8",(null!=(i=null==(r=document.getElementsByTagName("head"))?void 0:r[0])?i:document).appendChild(s)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},d="Browser",t1(new tS("auth",(e,{options:t})=>{let n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=n.options;nE(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});let o=new rd(n,r,i,{apiKey:s,authDomain:a,clientPlatform:d,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rl(d)}),l=(null==t?void 0:t.persistence)||[],u=(Array.isArray(l)?l:[l]).map(n4);return(null==t?void 0:t.errorMap)&&o._updateErrorMap(t.errorMap),o._initializeWithPersistence(u,null==t?void 0:t.popupRedirectResolver),o},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),t1(new tS("auth-internal",e=>new i2(tC(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),t7(i1,i0,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(d)),t7(i1,i0,"esm2017");var i6="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==Q?Q:"undefined"!=typeof self?self:{},i8={};(function(){function e(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.B=Array(this.blockSize),this.o=this.h=0,this.s()}var t=function(){this.blockSize=-1};function n(){}function r(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+0xd76aa478|0;a=s+(i^(t=n+(a<<7|a>>>25))&(n^i))+r[1]+0xe8c7b756|0,a=i+(n^(s=t+(a<<12|a>>>20))&(t^n))+r[2]+0x242070db|0,a=n+(t^(i=s+(a<<17|a>>>15))&(s^t))+r[3]+0xc1bdceee|0,a=t+(s^(n=i+(a<<22|a>>>10))&(i^s))+r[4]+0xf57c0faf|0,a=s+(i^(t=n+(a<<7|a>>>25))&(n^i))+r[5]+0x4787c62a|0,a=i+(n^(s=t+(a<<12|a>>>20))&(t^n))+r[6]+0xa8304613|0,a=n+(t^(i=s+(a<<17|a>>>15))&(s^t))+r[7]+0xfd469501|0,a=t+(s^(n=i+(a<<22|a>>>10))&(i^s))+r[8]+0x698098d8|0,a=s+(i^(t=n+(a<<7|a>>>25))&(n^i))+r[9]+0x8b44f7af|0,a=i+(n^(s=t+(a<<12|a>>>20))&(t^n))+r[10]+0xffff5bb1|0,a=n+(t^(i=s+(a<<17|a>>>15))&(s^t))+r[11]+0x895cd7be|0,a=t+(s^(n=i+(a<<22|a>>>10))&(i^s))+r[12]+0x6b901122|0,a=s+(i^(t=n+(a<<7|a>>>25))&(n^i))+r[13]+0xfd987193|0,a=i+(n^(s=t+(a<<12|a>>>20))&(t^n))+r[14]+0xa679438e|0,a=n+(t^(i=s+(a<<17|a>>>15))&(s^t))+r[15]+0x49b40821|0,n=i+(a<<22|a>>>10),a=t+(i^s&(n^i))+r[1]+0xf61e2562|0,t=n+(a<<5|a>>>27),a=s+(n^i&(t^n))+r[6]+0xc040b340|0,s=t+(a<<9|a>>>23),a=i+(t^n&(s^t))+r[11]+0x265e5a51|0,i=s+(a<<14|a>>>18),a=n+(s^t&(i^s))+r[0]+0xe9b6c7aa|0,n=i+(a<<20|a>>>12),a=t+(i^s&(n^i))+r[5]+0xd62f105d|0,t=n+(a<<5|a>>>27),a=s+(n^i&(t^n))+r[10]+0x2441453|0,s=t+(a<<9|a>>>23),a=i+(t^n&(s^t))+r[15]+0xd8a1e681|0,i=s+(a<<14|a>>>18),a=n+(s^t&(i^s))+r[4]+0xe7d3fbc8|0,n=i+(a<<20|a>>>12),a=t+(i^s&(n^i))+r[9]+0x21e1cde6|0,t=n+(a<<5|a>>>27),a=s+(n^i&(t^n))+r[14]+0xc33707d6|0,s=t+(a<<9|a>>>23),a=i+(t^n&(s^t))+r[3]+0xf4d50d87|0,i=s+(a<<14|a>>>18),a=n+(s^t&(i^s))+r[8]+0x455a14ed|0,n=i+(a<<20|a>>>12),a=t+(i^s&(n^i))+r[13]+0xa9e3e905|0,t=n+(a<<5|a>>>27),a=s+(n^i&(t^n))+r[2]+0xfcefa3f8|0,s=t+(a<<9|a>>>23),a=i+(t^n&(s^t))+r[7]+0x676f02d9|0,i=s+(a<<14|a>>>18),a=n+(s^t&(i^s))+r[12]+0x8d2a4c8a|0,a=t+((n=i+(a<<20|a>>>12))^i^s)+r[5]+0xfffa3942|0,a=s+((t=n+(a<<4|a>>>28))^n^i)+r[8]+0x8771f681|0,a=i+((s=t+(a<<11|a>>>21))^t^n)+r[11]+0x6d9d6122|0,a=n+((i=s+(a<<16|a>>>16))^s^t)+r[14]+0xfde5380c|0,a=t+((n=i+(a<<23|a>>>9))^i^s)+r[1]+0xa4beea44|0,a=s+((t=n+(a<<4|a>>>28))^n^i)+r[4]+0x4bdecfa9|0,a=i+((s=t+(a<<11|a>>>21))^t^n)+r[7]+0xf6bb4b60|0,a=n+((i=s+(a<<16|a>>>16))^s^t)+r[10]+0xbebfbc70|0,a=t+((n=i+(a<<23|a>>>9))^i^s)+r[13]+0x289b7ec6|0,a=s+((t=n+(a<<4|a>>>28))^n^i)+r[0]+0xeaa127fa|0,a=i+((s=t+(a<<11|a>>>21))^t^n)+r[3]+0xd4ef3085|0,a=n+((i=s+(a<<16|a>>>16))^s^t)+r[6]+0x4881d05|0,a=t+((n=i+(a<<23|a>>>9))^i^s)+r[9]+0xd9d4d039|0,a=s+((t=n+(a<<4|a>>>28))^n^i)+r[12]+0xe6db99e5|0,a=i+((s=t+(a<<11|a>>>21))^t^n)+r[15]+0x1fa27cf8|0,a=n+((i=s+(a<<16|a>>>16))^s^t)+r[2]+0xc4ac5665|0,n=i+(a<<23|a>>>9),a=t+(i^(n|~s))+r[0]+0xf4292244|0,t=n+(a<<6|a>>>26),a=s+(n^(t|~i))+r[7]+0x432aff97|0,s=t+(a<<10|a>>>22),a=i+(t^(s|~n))+r[14]+0xab9423a7|0,i=s+(a<<15|a>>>17),a=n+(s^(i|~t))+r[5]+0xfc93a039|0,n=i+(a<<21|a>>>11),a=t+(i^(n|~s))+r[12]+0x655b59c3|0,t=n+(a<<6|a>>>26),a=s+(n^(t|~i))+r[3]+0x8f0ccc92|0,s=t+(a<<10|a>>>22),a=i+(t^(s|~n))+r[10]+0xffeff47d|0,i=s+(a<<15|a>>>17),a=n+(s^(i|~t))+r[1]+0x85845dd1|0,n=i+(a<<21|a>>>11),a=t+(i^(n|~s))+r[8]+0x6fa87e4f|0,t=n+(a<<6|a>>>26),a=s+(n^(t|~i))+r[15]+0xfe2ce6e0|0,s=t+(a<<10|a>>>22),a=i+(t^(s|~n))+r[6]+0xa3014314|0,i=s+(a<<15|a>>>17),a=n+(s^(i|~t))+r[13]+0x4e0811a1|0,n=i+(a<<21|a>>>11),a=t+(i^(n|~s))+r[4]+0xf7537e82|0,t=n+(a<<6|a>>>26),a=s+(n^(t|~i))+r[11]+0xbd3af235|0,s=t+(a<<10|a>>>22),a=i+(t^(s|~n))+r[2]+0x2ad7d2bb|0,i=s+(a<<15|a>>>17),a=n+(s^(i|~t))+r[9]+0xeb86d391|0,e.g[0]=e.g[0]+t|0,e.g[1]=e.g[1]+(i+(a<<21|a>>>11))|0,e.g[2]=e.g[2]+i|0,e.g[3]=e.g[3]+s|0}function i(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)},e.prototype.s=function(){this.g[0]=0x67452301,this.g[1]=0xefcdab89,this.g[2]=0x98badcfe,this.g[3]=0x10325476,this.o=this.h=0},e.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,i=this.B,s=this.h,a=0;a<t;){if(0==s)for(;a<=n;)r(this,e,a),a+=this.blockSize;if("string"==typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){r(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){r(this,i),s=0;break}}this.h=s,this.o+=t},e.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s,a={};function o(e){var t;return -128<=e&&128>e?(t=function(e){return new i([0|e],0>e?-1:0)},Object.prototype.hasOwnProperty.call(a,e)?a[e]:a[e]=t(e)):new i([0|e],0>e?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return u;if(0>e)return p(l(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=0x100000000;return new i(t,0)}var u=o(0),c=o(1),h=o(0x1000000);function d(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function f(e){return -1==e.h}function p(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new i(n,~e.h).add(c)}function g(e,t){return e.add(p(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function w(e,t){if(d(t))throw Error("division by zero");if(d(e))return new y(u,u);if(f(e))return t=w(p(e),t),new y(p(t.g),p(t.h));if(f(t))return t=w(e,p(t)),new y(p(t.g),t.h);if(30<e.g.length){if(f(e)||f(t))throw Error("slowDivide_ only works with positive integers.");for(var n=c,r=t;0>=r.l(e);)n=E(n),r=E(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!d(r);){var a=s.add(r);0>=a.l(e)&&(i=i.add(n),s=a),r=v(r,1),n=v(n,1)}return t=g(e,i.j(t)),new y(i,t)}for(i=u;0<=e.l(t);){for(r=48>=(r=Math.ceil(Math.log(n=Math.max(1,Math.floor(e.m()/t.m())))/Math.LN2))?1:Math.pow(2,r-48),a=(s=l(n)).j(t);f(a)||0<a.l(e);)n-=r,a=(s=l(n)).j(t);d(s)&&(s=c),i=i.add(s),e=g(e,a)}return new y(i,e)}function E(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new i(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],a=0;a<r;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new i(s,e.h)}(s=i.prototype).m=function(){if(f(this))return-p(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:0x100000000+r)*t,t*=0x100000000}return e},s.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(d(this))return"0";if(f(this))return"-"+p(this).toString(e);for(var t=l(Math.pow(e,6)),n=this,r="";;){var i=w(n,t).g,s=((0<(n=g(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(d(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},s.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},s.l=function(e){return f(e=g(this,e))?-1:+!d(e)},s.abs=function(){return f(this)?p(this):this},s.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var a=r+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);r=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new i(n,-0x80000000&n[n.length-1]?-1:0)},s.j=function(e){if(d(this)||d(e))return u;if(f(this))return f(e)?p(this).j(p(e)):p(p(this).j(e));if(f(e))return p(this.j(p(e)));if(0>this.l(h)&&0>e.l(h))return l(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var a=this.i(r)>>>16,o=65535&this.i(r),c=e.i(s)>>>16,g=65535&e.i(s);n[2*r+2*s]+=o*g,m(n,2*r+2*s),n[2*r+2*s+1]+=a*g,m(n,2*r+2*s+1),n[2*r+2*s+1]+=o*c,m(n,2*r+2*s+1),n[2*r+2*s+2]+=a*c,m(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new i(n,0)},s.A=function(e){return w(this,e).h},s.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new i(n,this.h&e.h)},s.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new i(n,this.h|e.h)},s.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new i(n,this.h^e.h)},e.prototype.digest=e.prototype.v,e.prototype.reset=e.prototype.s,e.prototype.update=e.prototype.u,N=i8.Md5=e,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=l,i.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return p(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=l(Math.pow(n,8)),i=u,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+a),n);8>a?(a=l(Math.pow(n,a)),i=i.j(a).add(l(o))):i=(i=i.j(r)).add(l(o))}return i},T=i8.Integer=i}).apply(void 0!==i6?i6:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var i5="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==Q?Q:"undefined"!=typeof self?self:{},i7={};(function(){var e,t,n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},i=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof i5&&i5];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,t){if(t)e:{var n=i;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in n))break e;n=n[a]}(t=t(s=n[e=e[e.length-1]]))!=s&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}("Array.prototype.values",function(e){return e||function(){var e,t,n,r,i;return e=this,t=function(e,t){return t},e instanceof String&&(e+=""),n=0,r=!1,(i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}})[Symbol.iterator]=function(){return i},i}});var s=s||{},a=this||self;function o(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function l(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function u(e,t,n){return e.call.apply(e.bind,arguments)}function c(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function h(e,t,n){return(h=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?u:c).apply(null,arguments)}function d(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function f(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function p(e){let t=e.length;if(0<t){let n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function g(e,t){for(let t=1;t<arguments.length;t++){let n=arguments[t];if(o(n)){let t=e.length||0,r=n.length||0;e.length=t+r;for(let i=0;i<r;i++)e[t+i]=n[i]}else e.push(n)}}function m(e){return/^[\s\xa0]*$/.test(e)}function y(){var e=a.navigator;return e&&(e=e.userAgent)?e:""}function w(e){return w[" "](e),e}w[" "]=function(){};var E=-1!=y().indexOf("Gecko")&&(-1==y().toLowerCase().indexOf("webkit")||-1!=y().indexOf("Edge"))&&-1==y().indexOf("Trident")&&-1==y().indexOf("MSIE")&&-1==y().indexOf("Edge");function v(e,t,n){for(let r in e)t.call(n,e[r],r,e)}function C(e){let t={};for(let n in e)t[n]=e[n];return t}let S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t])e[n]=r[n];for(let t=0;t<S.length;t++)n=S[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}var b=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new I,e=>e.reset());class I{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let A,T=!1,N=new class{constructor(){this.h=this.g=null}add(e,t){let n=b.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},B=()=>{let e=a.Promise.resolve(void 0);A=()=>{e.then(F)}};var F=()=>{let e;for(var t;e=null,N.g&&(e=N.g,N.g=N.g.next,N.g||(N.h=null),e.next=null),t=e;){try{t.h.call(t.g)}catch(e){!function(e){a.setTimeout(()=>{throw e},0)}(e)}b.j(t),100>b.h&&(b.h++,t.next=b.g,b.g=t)}T=!1};function U(){this.s=this.s,this.C=this.C}function V(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},V.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{let e=()=>{};a.addEventListener("test",e,t),a.removeEventListener("test",e,t)}catch(e){}return e}();function j(e,t){if(V.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(E){e:{try{w(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:H[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&j.aa.h.call(this)}}f(j,V);var H={2:"touch",3:"pen",4:"mouse"};j.prototype.h=function(){j.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var W="closure_listenable_"+(1e6*Math.random()|0),G=0;function Y(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++G,this.da=this.fa=!1}function q(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function X(e){this.src=e,this.g={},this.h=0}function $(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(q(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Q(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&!!n==s.capture&&s.ha==r)return i}return -1}X.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=Q(e,t,r,i);return -1<a?(t=e[a],n||(t.fa=!1)):((t=new Y(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var K="closure_lm_"+(1e6*Math.random()|0),Z={};function J(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=l(i)?!!i.capture:!!i,o=er(e);if(o||(e[K]=o=new X(e)),(n=o.add(t,n,r,a,s)).proxy)return n;if(r=function e(t){return en.call(e.src,e.listener,t)},n.proxy=r,r.src=e,r.listener=n,e.addEventListener)z||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(et(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function ee(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[W])$(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(et(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=er(t))?($(n,e),0==n.h&&(n.src=null,t[K]=null)):q(e)}}}function et(e){return e in Z?Z[e]:Z[e]="on"+e}function en(e,t){if(e.da)e=!0;else{t=new j(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&ee(e),e=n.call(r,t)}return e}function er(e){return(e=e[K])instanceof X?e:null}var ei="__closure_events_fn_"+(1e9*Math.random()>>>0);function es(e){return"function"==typeof e?e:(e[ei]||(e[ei]=function(t){return e.handleEvent(t)}),e[ei])}function ea(){U.call(this),this.i=new X(this),this.M=this,this.F=null}function eo(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new V(t,e);else if(t instanceof V)t.target=t.target||e;else{var i=t;_(t=new V(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=el(a,r,!0,t)&&i}if(i=el(a=t.g=e,r,!0,t)&&i,i=el(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=el(a=t.g=n[s],r,!1,t)&&i}function el(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&$(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}function eu(e,t,n){if("function"==typeof e)n&&(e=h(e,n));else if(e&&"function"==typeof e.handleEvent)e=h(e.handleEvent,e);else throw Error("Invalid listener argument");return 0x7fffffff<Number(t)?-1:a.setTimeout(e,t||0)}f(ea,U),ea.prototype[W]=!0,ea.prototype.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,s){if(Array.isArray(n))for(var a=0;a<n.length;a++)e(t,n[a],r,i,s);else(i=l(i)?!!i.capture:!!i,r=es(r),t&&t[W])?(t=t.i,(n=String(n).toString())in t.g&&-1<(r=Q(a=t.g[n],r,i,s))&&(q(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete t.g[n],t.h--))):t&&(t=er(t))&&(n=t.g[n.toString()],t=-1,n&&(t=Q(n,r,i,s)),(r=-1<t?n[t]:null)&&ee(r))}(this,e,t,n,r)},ea.prototype.N=function(){if(ea.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)q(n[r]);delete t.g[e],t.h--}}this.F=null},ea.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ea.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ec extends U{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:function e(t){t.g=eu(()=>{t.g=null,t.i&&(t.i=!1,e(t))},t.l);let n=t.h;t.h=null,t.m.apply(null,n)}(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function eh(e){U.call(this),this.h=e,this.g={}}f(eh,U);var ed=[];function ef(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&ee(e)},e),e.g={}}eh.prototype.N=function(){eh.aa.N.call(this),ef(this)},eh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ep=a.JSON.stringify,eg=a.JSON.parse,em=class{stringify(e){return a.JSON.stringify(e,void 0)}parse(e){return a.JSON.parse(e,void 0)}};function ey(){}function ew(e){return e.h||(e.h=e.i())}function eE(){}ey.prototype.h=null;var ev={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function eC(){V.call(this,"d")}function eS(){V.call(this,"c")}f(eC,V),f(eS,V);var e_={},eb=null;function eI(){return eb=eb||new ea}function eA(e){V.call(this,e_.La,e)}function eT(e){let t=eI();eo(t,new eA(t))}function eN(e,t){V.call(this,e_.STAT_EVENT,e),this.stat=t}function eR(e){let t=eI();eo(t,new eN(t,e))}function eD(e,t){V.call(this,e_.Ma,e),this.size=t}function eO(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){e()},t)}function eM(){this.g=!0}function ek(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}}return ep(n)}catch(e){return t}}(e,n)+(r?" "+r:"")})}e_.La="serverreachability",f(eA,V),e_.STAT_EVENT="statevent",f(eN,V),e_.Ma="timingevent",f(eD,V),eM.prototype.xa=function(){this.g=!1},eM.prototype.info=function(){};var eP={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ex={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function eL(){}function eB(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new eh(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new eF}function eF(){this.i=null,this.g="",this.h=!1}f(eL,ey),eL.prototype.g=function(){return new XMLHttpRequest},eL.prototype.i=function(){return{}},t=new eL;var eU={},eV={};function ez(e,t,n){e.L=1,e.v=tn(e5(t)),e.m=n,e.P=!0,ej(e,null)}function ej(e,t){e.F=Date.now(),eW(e),e.A=e5(e.v);var n,r,i,s,a,o,u=e.A,c=e.R;Array.isArray(c)||(c=[String(c)]),tg(u.i,"t",c),e.C=0,u=e.j.J,e.h=new eF,e.g=t0(e.j,u?t:null,!e.m),0<e.O&&(e.M=new ec(h(e.Y,e,e.g),e.O)),t=e.U,u=e.g,c=e.ca;var d="readystatechange";Array.isArray(d)||(d&&(ed[0]=d.toString()),d=ed);for(var f=0;f<d.length;f++){var p=function e(t,n,r,i,s){if(i&&i.once)return function e(t,n,r,i,s){if(Array.isArray(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,s);return null}return r=es(r),t&&t[W]?t.L(n,r,l(i)?!!i.capture:!!i,s):J(t,n,r,!0,i,s)}(t,n,r,i,s);if(Array.isArray(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,s);return null}return r=es(r),t&&t[W]?t.K(n,r,l(i)?!!i.capture:!!i,s):J(t,n,r,!1,i,s)}(u,d[f],c||t.handleEvent,!1,t.h||t);if(!p)break;t.g[p.key]=p}t=e.H?C(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),eT(),n=e.i,r=e.u,i=e.A,s=e.l,a=e.R,o=e.m,n.info(function(){if(n.g)if(o)for(var e="",t=o.split("&"),l=0;l<t.length;l++){var u=t[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");e=2<=h.length&&"type"==h[1]?e+(c+"=")+u+"&":e+(c+"=redacted&")}}else e=null;else e=o;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+r+"\n"+i+"\n"+e})}function eH(e){return!!e.g&&"GET"==e.u&&2!=e.L&&e.j.Ca}function eW(e){e.S=Date.now()+e.I,eG(e,e.I)}function eG(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=eO(h(e.ba,e),t)}function eY(e){e.B&&(a.clearTimeout(e.B),e.B=null)}function eq(e){0==e.j.G||e.J||tQ(e.j,e)}function eX(e){eY(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ef(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function e$(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||e1(n.h,e))){if(!e.K&&e1(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g)if(n.g.F+3e3<e.F)t$(n),tU(n);else break e;tY(n),eR(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=eO(h(n.Za,n),6e3));if(1>=eJ(n.h)&&n.ca){try{n.ca()}catch(e){}n.ca=void 0}}else tZ(n,11)}else if((e.K||n.g==e)&&t$(n),!m(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let o=i[t];if(n.T=o[0],o=o[1],2==n.G)if("c"==o[0]){n.K=o[1],n.ia=o[2];let t=o[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));let i=o[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));let l=o[5];null!=l&&"number"==typeof l&&0<l&&(n.L=r=1.5*l,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;let u=e.g;if(u){let e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(e0(s,s.h),s.h=null))}if(r.D){let e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,tt(r.I,r.D,e))}}if(n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms")),(r=n).qa=t1(r,r.J?r.ia:null,r.W),e.K){e2(r.h,e);var a=r.L;a&&(e.I=a),e.B&&(eY(e),eW(e)),r.g=e}else tG(r);0<n.i.length&&tz(n)}else"stop"!=o[0]&&"close"!=o[0]||tZ(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?tZ(n,7):tF(n):"noop"!=o[0]&&n.l&&n.l.ta(o),n.v=0)}}eT(4)}catch(e){}}eB.prototype.ca=function(e){e=e.target;let t=this.M;t&&3==tP(e)?t.j():this.Y(e)},eB.prototype.Y=function(e){try{if(e==this.g)e:{let E=tP(this.g);var t=this.g.Ba();let v=this.g.Z();if(!(3>E)&&(3!=E||this.g&&(this.h.h||this.g.oa()||tx(this.g)))){this.J||4!=E||7==t||(8==t||0>=v?eT(3):eT(2)),eY(this);var n=this.g.Z();this.X=n;t:if(eH(this)){var r=tx(this.g);e="";var i=r.length,s=4==tP(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){eX(this),eq(this);var o="";break t}this.h.i=new a.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(s&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,l=this.i,u=this.u,c=this.A,h=this.l,d=this.R,f=n,l.info(function(){return"XMLHTTP RESP ("+h+") [ attempt "+d+"]: "+u+"\n"+c+"\n"+E+" "+f}),this.o){if(this.T&&!this.K){t:{if(this.g){var l,u,c,h,d,f,p,g=this.g;if((p=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(p)){var y=p;break t}}y=null}if(n=y)ek(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,e$(this,n);else{this.o=!1,this.s=3,eR(12),eX(this),eq(this);break e}}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;)if((e=function(e,t){var n=e.C,r=t.indexOf("\n",n);return -1==r?eV:isNaN(n=Number(t.substring(n,r)))?eU:(r+=1)+n>t.length?eV:(t=t.slice(r,r+n),e.C=r+n,t)}(this,o))==eV){4==E&&(this.s=4,eR(14),n=!1),ek(this.i,this.l,null,"[Incomplete Response]");break}else if(e==eU){this.s=4,eR(15),ek(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}else ek(this.i,this.l,e,null),e$(this,e);if(eH(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=E||0!=o.length||this.h.h||(this.s=1,eR(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var w=this.j;w.g==this&&w.ba&&!w.M&&(w.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),tq(w),w.M=!0,eR(11))}}else ek(this.i,this.l,o,"[Invalid Chunked Response]"),eX(this),eq(this)}else ek(this.i,this.l,o,null),e$(this,o);4==E&&eX(this),this.o&&!this.J&&(4==E?tQ(this.j,this):(this.o=!1,eW(this)))}else(function(e){let t={};e=(e.g&&2<=tP(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(m(e[r]))continue;var n=function(e){var t=1;e=e.split(":");let n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}(e[r]);let i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();let s=t[i]||[];t[i]=s,s.push(n)}var r=function(e){return e.join(", ")};for(let e in t)r.call(void 0,t[e],e,t)})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,eR(12)):(this.s=0,eR(13)),eX(this),eq(this)}}}catch(e){}finally{}},eB.prototype.cancel=function(){this.J=!0,eX(this)},eB.prototype.ba=function(){var e,t;this.B=null;let n=Date.now();0<=n-this.S?(e=this.i,t=this.A,e.info(function(){return"TIMEOUT: "+t}),2!=this.L&&(eT(),eR(17)),eX(this),this.s=2,eq(this)):eG(this,this.S-n)};var eQ=class{constructor(e,t){this.g=e,this.map=t}};function eK(e){this.l=e||10,e=a.PerformanceNavigationTiming?0<(e=a.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function eZ(e){return!!e.h||!!e.g&&e.g.size>=e.j}function eJ(e){return e.h?1:e.g?e.g.size:0}function e1(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function e0(e,t){e.g?e.g.add(t):e.h=t}function e2(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function e3(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(let n of e.g.values())t=t.concat(n.D);return t}return p(e.i)}function e4(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(o(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(o(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(let r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(o(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}eK.prototype.cancel=function(){if(this.i=e3(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(let e of this.g.values())e.cancel();this.g.clear()}};var e6=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function e8(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof e8){this.h=e.h,e7(this,e.j),this.o=e.o,this.g=e.g,e9(this,e.s),this.l=e.l;var t=e.i,n=new th;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),te(this,n),this.m=e.m}else e&&(t=String(e).match(e6))?(this.h=!1,e7(this,t[1]||"",!0),this.o=tr(t[2]||""),this.g=tr(t[3]||"",!0),e9(this,t[4]),this.l=tr(t[5]||"",!0),te(this,t[6]||"",!0),this.m=tr(t[7]||"")):(this.h=!1,this.i=new th(null,this.h))}function e5(e){return new e8(e)}function e7(e,t,n){e.j=n?tr(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function e9(e,t){if(t){if(isNaN(t=Number(t))||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function te(e,t,n){var r,i;t instanceof th?(e.i=t,r=e.i,(i=e.h)&&!r.j&&(td(r),r.i=null,r.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(tf(this,t),tg(this,n,e))},r)),r.j=i):(n||(t=ti(t,tu)),e.i=new th(t,e.h))}function tt(e,t,n){e.i.set(t,n)}function tn(e){return tt(e,"zx",Math.floor(0x80000000*Math.random()).toString(36)+Math.abs(Math.floor(0x80000000*Math.random())^Date.now()).toString(36)),e}function tr(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ti(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ts),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ts(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}e8.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ti(t,ta,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ti(t,ta,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ti(n,"/"==n.charAt(0)?tl:to,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ti(n,tc)),e.join("")};var ta=/[#\/\?@]/g,to=/[#\?:]/g,tl=/[#\?]/g,tu=/[#\?@]/g,tc=/#/g;function th(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function td(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function tf(e,t){td(e),t=tm(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function tp(e,t){return td(e),t=tm(e,t),e.g.has(t)}function tg(e,t,n){tf(e,t),0<n.length&&(e.i=null,e.g.set(tm(e,t),p(n)),e.h+=n.length)}function tm(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function ty(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(e){}}function tw(){this.g=new em}function tE(e){this.l=e.Ub||null,this.j=e.eb||!1}function tv(e,t){ea.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function tC(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function tS(e){e.readyState=4,e.l=null,e.j=null,e.v=null,t_(e)}function t_(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function tb(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function tI(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=tb(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):tt(e,t,n))}function tA(e){ea.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=th.prototype).add=function(e,t){td(this),this.i=null,e=tm(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},n.forEach=function(e,t){td(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},n.na=function(){td(this);let e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){let i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},n.V=function(e){td(this);let t=[];if("string"==typeof e)tp(this,e)&&(t=t.concat(this.g.get(tm(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},n.set=function(e,t){return td(this),this.i=null,tp(this,e=tm(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},n.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];let s=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},f(tE,ey),tE.prototype.g=function(){return new tv(this.l,this.j)},tE.prototype.i=(e={},function(){return e}),f(tv,ea),(n=tv.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,t_(this)},n.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;let t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||a).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,tS(this)),this.readyState=0},n.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,t_(this)),this.g&&(this.readyState=3,t_(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==a.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tC(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?tS(this):t_(this),3==this.readyState&&tC(this)}},n.Ra=function(e){this.g&&(this.response=this.responseText=e,tS(this))},n.Qa=function(e){this.g&&(this.response=e,tS(this))},n.ga=function(){this.g&&tS(this)},n.setRequestHeader=function(e,t){this.u.append(e,t)},n.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let e=[],t=this.h.entries();for(var n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(tv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),f(tA,ea);var tT=/^https?$/i,tN=["POST","PUT"];function tR(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,tD(e),tM(e)}function tD(e){e.A||(e.A=!0,eo(e,"complete"),eo(e,"error"))}function tO(e){if(e.h&&void 0!==s&&(!e.v[1]||4!=tP(e)||2!=e.Z())){if(e.u&&4==tP(e))eu(e.Ea,0,e);else if(eo(e,"readystatechange"),4==tP(e)){e.h=!1;try{let s=e.Z();switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t,n,r=!0;break;default:r=!1}if(!(t=r)){if(n=0===s){var i=String(e.D).match(e6)[1]||null;!i&&a.self&&a.self.location&&(i=a.self.location.protocol.slice(0,-1)),n=!tT.test(i?i.toLowerCase():"")}t=n}if(t)eo(e,"complete"),eo(e,"success");else{e.m=6;try{var o=2<tP(e)?e.g.statusText:""}catch(e){o=""}e.l=o+" ["+e.Z()+"]",tD(e)}}finally{tM(e)}}}}function tM(e,t){if(e.g){tk(e);let n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||eo(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function tk(e){e.I&&(a.clearTimeout(e.I),e.I=null)}function tP(e){return e.g?e.g.readyState:0}function tx(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function tL(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function tB(e){this.Aa=0,this.i=[],this.j=new eM,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tL("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tL("baseRetryDelayMs",5e3,e),this.cb=tL("retryDelaySeedMs",1e4,e),this.Wa=tL("forwardChannelMaxRetries",2,e),this.wa=tL("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new eK(e&&e.concurrentRequestLimit),this.Da=new tw,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function tF(e){if(tV(e),3==e.G){var t=e.U++,n=e5(e.I);if(tt(n,"SID",e.K),tt(n,"RID",t),tt(n,"TYPE","terminate"),tH(e,n),(t=new eB(e,e.j,t)).L=2,t.v=tn(e5(n)),n=!1,a.navigator&&a.navigator.sendBeacon)try{n=a.navigator.sendBeacon(t.v.toString(),"")}catch(e){}!n&&a.Image&&((new Image).src=t.v,n=!0),n||(t.g=t0(t.j,null),t.g.ea(t.v)),t.F=Date.now(),eW(t)}tJ(e)}function tU(e){e.g&&(tq(e),e.g.cancel(),e.g=null)}function tV(e){tU(e),e.u&&(a.clearTimeout(e.u),e.u=null),t$(e),e.h.cancel(),e.s&&("number"==typeof e.s&&a.clearTimeout(e.s),e.s=null)}function tz(e){if(!eZ(e.h)&&!e.s){e.s=!0;var t=e.Ga;A||B(),T||(A(),T=!0),N.add(t,e),e.B=0}}function tj(e,t){var n;n=t?t.l:e.U++;let r=e5(e.I);tt(r,"SID",e.K),tt(r,"RID",n),tt(r,"AID",e.T),tH(e,r),e.m&&e.o&&tI(r,e.m,e.o),n=new eB(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tW(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),e0(e.h,n),ez(n,r,t)}function tH(e,t){e.H&&v(e.H,function(e,n){tt(t,n,e)}),e.l&&e4({},function(e,n){tt(t,n,e)})}function tW(e,t,n){n=Math.min(e.i.length,n);var r=e.l?h(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){let e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<n;a++){let n=i[a].g,o=i[a].map;if(0>(n-=t))t=Math.max(0,i[a].g-100),s=!1;else try{!function(e,t,n){let r=n||"";try{e4(e,function(e,n){let i=e;l(e)&&(i=ep(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}(o,e,"req"+n+"_")}catch(e){r&&r(o)}}if(s){r=e.join("&");break e}}}return t.D=e=e.i.splice(0,n),r}function tG(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;A||B(),T||(A(),T=!0),N.add(t,e),e.v=0}}function tY(e){return!e.g&&!e.u&&!(3<=e.v)&&(e.Y++,e.u=eO(h(e.Fa,e),tK(e,e.v)),e.v++,!0)}function tq(e){null!=e.A&&(a.clearTimeout(e.A),e.A=null)}function tX(e){e.g=new eB(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=e5(e.qa);tt(t,"RID","rpc"),tt(t,"SID",e.K),tt(t,"AID",e.T),tt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&tt(t,"TO",e.ja),tt(t,"TYPE","xmlhttp"),tH(e,t),e.m&&e.o&&tI(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=tn(e5(t)),n.m=null,n.P=!0,ej(n,e)}function t$(e){null!=e.C&&(a.clearTimeout(e.C),e.C=null)}function tQ(e,t){var n,r=null;if(e.g==t){t$(e),tq(e),e.g=null;var i=2}else{if(!e1(e.h,t))return;r=t.D,e2(e.h,t),i=1}if(0!=e.G){if(t.o)if(1==i){r=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;eo(i=eI(),new eD(i,r)),tz(e)}else tG(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==i&&(n=t,!(eJ(e.h)>=e.h.j-!!e.s)&&(e.s?(e.i=n.D.concat(e.i),!0):1!=e.G&&2!=e.G&&!(e.B>=(e.Va?0:e.Wa))&&(e.s=eO(h(e.Ga,e,n),tK(e,e.B)),e.B++,!0)))||2==i&&tY(e)))switch(r&&0<r.length&&((t=e.h).i=t.i.concat(r)),s){case 1:tZ(e,5);break;case 4:tZ(e,10);break;case 3:tZ(e,6);break;default:tZ(e,2)}}}function tK(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function tZ(e,t){if(e.j.info("Error code "+t),2==t){var n=h(e.fb,e),r=e.Xa;let t=!r;r=new e8(r||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||e7(r,"https"),tn(r),t?function(e,t){let n=new eM;if(a.Image){let r=new Image;r.onload=d(ty,n,"TestLoadImage: loaded",!0,t,r),r.onerror=d(ty,n,"TestLoadImage: error",!1,t,r),r.onabort=d(ty,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=d(ty,n,"TestLoadImage: timeout",!1,t,r),a.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){let n=new eM,r=new AbortController,i=setTimeout(()=>{r.abort(),ty(n,"TestPingServer: timeout",!1,t)},1e4);fetch(e,{signal:r.signal}).then(e=>{clearTimeout(i),e.ok?ty(n,"TestPingServer: ok",!0,t):ty(n,"TestPingServer: server error",!1,t)}).catch(()=>{clearTimeout(i),ty(n,"TestPingServer: error",!1,t)})}(r.toString(),n)}else eR(2);e.G=0,e.l&&e.l.sa(t),tJ(e),tV(e)}function tJ(e){if(e.G=0,e.ka=[],e.l){let t=e3(e.h);(0!=t.length||0!=e.i.length)&&(g(e.ka,t),g(e.ka,e.i),e.h.i.length=0,p(e.i),e.i.length=0),e.l.ra()}}function t1(e,t,n){var r=n instanceof e8?e5(n):new e8(n);if(""!=r.g)t&&(r.g=t+"."+r.g),e9(r,r.s);else{var i=a.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new e8(null);r&&e7(s,r),t&&(s.g=t),i&&e9(s,i),n&&(s.l=n),r=s}return n=e.D,t=e.ya,n&&t&&tt(r,n,t),tt(r,"VER",e.la),tH(e,r),r}function t0(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new tA(e.Ca&&!e.pa?new tE({eb:n}):e.pa)).Ha(e.J),t}function t2(){}function t3(){}function t4(e,t){ea.call(this),this.g=new tB(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!m(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!m(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new t5(this)}function t6(e){eC.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(let n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function t8(){eS.call(this),this.status=1}function t5(e){this.g=e}(n=tA.prototype).Ha=function(e){this.J=e},n.ea=function(e,n,r,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);n=n?n.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():t.g(),this.v=this.o?ew(this.o):ew(t),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(n,String(e),!0),this.B=!1}catch(e){tR(this,e);return}if(e=r||"",r=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)r.set(s,i[s]);else if("function"==typeof i.keys&&"function"==typeof i.get)for(let e of i.keys())r.set(e,i.get(e));else throw Error("Unknown input type for opt_headers: "+String(i));for(let[t,o]of(i=Array.from(r.keys()).find(e=>"content-type"==e.toLowerCase()),s=a.FormData&&e instanceof a.FormData,!(0<=Array.prototype.indexOf.call(tN,n,void 0))||i||s||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r))this.g.setRequestHeader(t,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tk(this),this.u=!0,this.g.send(e),this.u=!1}catch(e){tR(this,e)}},n.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,eo(this,"complete"),eo(this,"abort"),tM(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tM(this,!0)),tA.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?tO(this):this.bb())},n.bb=function(){tO(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<tP(this)?this.g.status:-1}catch(e){return -1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},n.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),eg(t)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=tB.prototype).la=8,n.G=1,n.connect=function(e,t,n,r){eR(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=t1(this,null,this.W),tz(this)},n.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;let i=new eB(this,this.j,e),s=this.o;if(this.S&&(s?_(s=C(s),this.S):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){t:{var r=this.i[n];if("__data__"in r.map&&"string"==typeof(r=r.map.__data__)){r=r.length;break t}r=void 0}if(void 0===r)break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tW(this,i,t),tt(n=e5(this.I),"RID",e),tt(n,"CVER",22),this.D&&tt(n,"X-HTTP-Session-Id",this.D),tH(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(tb(s)))+"&"+t:this.m&&tI(n,this.m,s)),e0(this.h,i),this.Ua&&tt(n,"TYPE","init"),this.P?(tt(n,"$req",t),tt(n,"SID","null"),i.T=!0,ez(i,n,null)):ez(i,n,t),this.G=2}}else 3==this.G&&(e?tj(this,e):0==this.i.length||eZ(this.h)||tj(this))},n.Fa=function(){if(this.u=null,tX(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=eO(h(this.ab,this),e)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,eR(10),tU(this),tX(this))},n.Za=function(){null!=this.C&&(this.C=null,tU(this),tY(this),eR(19))},n.fb=function(e){e?(this.j.info("Successfully pinged google.com"),eR(2)):(this.j.info("Failed to ping google.com"),eR(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=t2.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},t3.prototype.g=function(e,t){return new t4(e,t)},f(t4,ea),t4.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},t4.prototype.close=function(){tF(this.g)},t4.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ep(e),e=n);t.i.push(new eQ(t.Ya++,e)),3==t.G&&tz(t)},t4.prototype.N=function(){this.g.l=null,delete this.j,tF(this.g),delete this.g,t4.aa.N.call(this)},f(t6,eC),f(t8,eS),f(t5,t2),t5.prototype.ua=function(){eo(this.g,"a")},t5.prototype.ta=function(e){eo(this.g,new t6(e))},t5.prototype.sa=function(e){eo(this.g,new t8)},t5.prototype.ra=function(){eo(this.g,"b")},t3.prototype.createWebChannel=t3.prototype.g,t4.prototype.send=t4.prototype.o,t4.prototype.open=t4.prototype.m,t4.prototype.close=t4.prototype.close,L=i7.createWebChannelTransport=function(){return new t3},x=i7.getStatEventTarget=function(){return eI()},P=i7.Event=e_,k=i7.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},eP.NO_ERROR=0,eP.TIMEOUT=8,eP.HTTP_ERROR=6,M=i7.ErrorCode=eP,ex.COMPLETE="complete",O=i7.EventType=ex,eE.EventType=ev,ev.OPEN="a",ev.CLOSE="b",ev.ERROR="c",ev.MESSAGE="d",ea.prototype.listen=ea.prototype.K,D=i7.WebChannel=eE,i7.FetchXmlHttpFactory=tE,tA.prototype.listenOnce=tA.prototype.L,tA.prototype.getLastError=tA.prototype.Ka,tA.prototype.getLastErrorCode=tA.prototype.Ba,tA.prototype.getStatus=tA.prototype.Z,tA.prototype.getResponseJson=tA.prototype.Oa,tA.prototype.getResponseText=tA.prototype.oa,tA.prototype.send=tA.prototype.ea,tA.prototype.setWithCredentials=tA.prototype.Ha,R=i7.XhrIo=tA}).apply(void 0!==i5?i5:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),B=function(e){for(var t,n=e.length,r=n%3,i=[],s=0,a=n-r;s<a;s+=16383)i.push(function(e,t,n){for(var r,i=[],s=t;s<n;s+=3)r=(e[s]<<16&0xff0000)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(i9[r>>18&63]+i9[r>>12&63]+i9[r>>6&63]+i9[63&r]);return i.join("")}(e,s,s+16383>a?a:s+16383));return 1===r?i.push(i9[(t=e[n-1])>>2]+i9[t<<4&63]+"=="):2===r&&i.push(i9[(t=(e[n-2]<<8)+e[n-1])>>10]+i9[t>>4&63]+i9[t<<2&63]+"="),i.join("")};for(var i9=[],se=[],st="undefined"!=typeof Uint8Array?Uint8Array:Array,sn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",sr=0,si=sn.length;sr<si;++sr)i9[sr]=sn[sr],se[sn.charCodeAt(sr)]=sr;se[45]=62,se[95]=63,F=function(e,t,n,r,i){var s,a,o=8*i-r-1,l=(1<<o)-1,u=l>>1,c=-7,h=n?i-1:0,d=n?-1:1,f=e[t+h];for(h+=d,s=f&(1<<-c)-1,f>>=-c,c+=o;c>0;s=256*s+e[t+h],h+=d,c-=8);for(a=s&(1<<-c)-1,s>>=-c,c+=r;c>0;a=256*a+e[t+h],h+=d,c-=8);if(0===s)s=1-u;else{if(s===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),s-=u}return(f?-1:1)*a*Math.pow(2,s-r)},U=function(e,t,n,r,i,s){var a,o,l,u=8*s-i-1,c=(1<<u)-1,h=c>>1,d=5960464477539062e-23*(23===i),f=r?0:s-1,p=r?1:-1,g=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(o=+!!isNaN(t),a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+h>=1?t+=d/l:t+=d*Math.pow(2,1-h),t*l>=2&&(a++,l/=2),a+h>=c?(o=0,a=c):a+h>=1?(o=(t*l-1)*Math.pow(2,i),a+=h):(o=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+f]=255&o,f+=p,o/=256,i-=8);for(a=a<<i|o,u+=i;u>0;e[n+f]=255&a,f+=p,a/=256,u-=8);e[n+f-p]|=128*g};const ss="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function sa(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,so.prototype),t}function so(e,t,n){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return sc(e)}return sl(e,t,n)}function sl(e,t,n){if("string"==typeof e){var r=e,i=t;if(("string"!=typeof i||""===i)&&(i="utf8"),!so.isEncoding(i))throw TypeError("Unknown encoding: "+i);let n=0|sp(r,i),s=sa(n),a=s.write(r,i);return a!==n&&(s=s.slice(0,a)),s}if(ArrayBuffer.isView(e)){var s=e;if(sB(s,Uint8Array)){let e=new Uint8Array(s);return sd(e.buffer,e.byteOffset,e.byteLength)}return sh(s)}if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(sB(e,ArrayBuffer)||e&&sB(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(sB(e,SharedArrayBuffer)||e&&sB(e.buffer,SharedArrayBuffer)))return sd(e,t,n);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let a=e.valueOf&&e.valueOf();if(null!=a&&a!==e)return so.from(a,t,n);let o=function(e){if(so.isBuffer(e)){let t=0|sf(e.length),n=sa(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?sa(0):sh(e):"Buffer"===e.type&&Array.isArray(e.data)?sh(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return so.from(e[Symbol.toPrimitive]("string"),t,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function su(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function sc(e){return su(e),sa(e<0?0:0|sf(e))}function sh(e){let t=e.length<0?0:0|sf(e.length),n=sa(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function sd(e,t,n){let r;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),so.prototype),r}function sf(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function sp(e,t){if(so.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||sB(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return sP(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return sx(e).length;default:if(i)return r?-1:sP(e).length;t=(""+t).toLowerCase(),i=!0}}function sg(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0||(n>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,n){let r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=sF[e[r]];return i}(this,t,n);case"utf8":case"utf-8":return sE(this,t,n);case"ascii":return function(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}(this,t,n);case"base64":var i,s,a;return i=this,s=t,a=n,0===s&&a===i.length?B(i):B(i.slice(s,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){let r=e.slice(t,n),i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}(this,t,n);default:if(r)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function sm(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function sy(e,t,n,r,i){var s;if(0===e.length)return -1;if("string"==typeof n?(r=n,n=0):n>0x7fffffff?n=0x7fffffff:n<-0x80000000&&(n=-0x80000000),(s=n*=1)!=s&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length)if(i)return -1;else n=e.length-1;else if(n<0)if(!i)return -1;else n=0;if("string"==typeof t&&(t=so.from(t,r)),so.isBuffer(t))return 0===t.length?-1:sw(e,t,n,r,i);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(i)return Uint8Array.prototype.indexOf.call(e,t,n);else return Uint8Array.prototype.lastIndexOf.call(e,t,n);return sw(e,[t],n,r,i)}throw TypeError("val must be string, number or Buffer")}function sw(e,t,n,r,i){let s,a=1,o=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return -1;a=2,o/=2,l/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let r=-1;for(s=n;s<o;s++)if(u(e,s)===u(t,-1===r?0:s-r)){if(-1===r&&(r=s),s-r+1===l)return r*a}else -1!==r&&(s-=s-r),r=-1}else for(n+l>o&&(n=o-l),s=n;s>=0;s--){let n=!0;for(let r=0;r<l;r++)if(u(e,s+r)!==u(t,r)){n=!1;break}if(n)return s}return -1}function sE(e,t,n){n=Math.min(e.length,n);let r=[],i=t;for(;i<n;){let t=e[i],s=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=n){let n,r,o,l;switch(a){case 1:t<128&&(s=t);break;case 2:(192&(n=e[i+1]))==128&&(l=(31&t)<<6|63&n)>127&&(s=l);break;case 3:n=e[i+1],r=e[i+2],(192&n)==128&&(192&r)==128&&(l=(15&t)<<12|(63&n)<<6|63&r)>2047&&(l<55296||l>57343)&&(s=l);break;case 4:n=e[i+1],r=e[i+2],o=e[i+3],(192&n)==128&&(192&r)==128&&(192&o)==128&&(l=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&o)>65535&&l<1114112&&(s=l)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=a}var s=r;let a=s.length;if(a<=4096)return String.fromCharCode.apply(String,s);let o="",l=0;for(;l<a;)o+=String.fromCharCode.apply(String,s.slice(l,l+=4096));return o}function sv(e,t,n){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>n)throw RangeError("Trying to access beyond buffer length")}function sC(e,t,n,r,i,s){if(!so.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw RangeError('"value" argument is out of bounds');if(n+r>e.length)throw RangeError("Index out of range")}function sS(e,t,n,r,i){sD(t,r,i,e,n,7);let s=Number(t&BigInt(0xffffffff));e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s;let a=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function s_(e,t,n,r,i){sD(t,r,i,e,n,7);let s=Number(t&BigInt(0xffffffff));e[n+7]=s,s>>=8,e[n+6]=s,s>>=8,e[n+5]=s,s>>=8,e[n+4]=s;let a=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function sb(e,t,n,r,i,s){if(n+r>e.length||n<0)throw RangeError("Index out of range")}function sI(e,t,n,r,i){return t*=1,n>>>=0,i||sb(e,t,n,4,34028234663852886e22,-34028234663852886e22),U(e,t,n,r,23,4),n+4}function sA(e,t,n,r,i){return t*=1,n>>>=0,i||sb(e,t,n,8,17976931348623157e292,-17976931348623157e292),U(e,t,n,r,52,8),n+8}so.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),so.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(so.prototype,"parent",{enumerable:!0,get:function(){if(so.isBuffer(this))return this.buffer}}),Object.defineProperty(so.prototype,"offset",{enumerable:!0,get:function(){if(so.isBuffer(this))return this.byteOffset}}),so.poolSize=8192,so.from=function(e,t,n){return sl(e,t,n)},Object.setPrototypeOf(so.prototype,Uint8Array.prototype),Object.setPrototypeOf(so,Uint8Array),so.alloc=function(e,t,n){return(su(e),e<=0)?sa(e):void 0!==t?"string"==typeof n?sa(e).fill(t,n):sa(e).fill(t):sa(e)},so.allocUnsafe=function(e){return sc(e)},so.allocUnsafeSlow=function(e){return sc(e)},so.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==so.prototype},so.compare=function(e,t){if(sB(e,Uint8Array)&&(e=so.from(e,e.offset,e.byteLength)),sB(t,Uint8Array)&&(t=so.from(t,t.offset,t.byteLength)),!so.isBuffer(e)||!so.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,s=Math.min(n,r);i<s;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:+(r<n)},so.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},so.concat=function(e,t){let n;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return so.alloc(0);if(void 0===t)for(n=0,t=0;n<e.length;++n)t+=e[n].length;let r=so.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){let t=e[n];if(sB(t,Uint8Array))i+t.length>r.length?(so.isBuffer(t)||(t=so.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else if(so.isBuffer(t))t.copy(r,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=t.length}return r},so.byteLength=sp,so.prototype._isBuffer=!0,so.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)sm(this,t,t+1);return this},so.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)sm(this,t,t+3),sm(this,t+1,t+2);return this},so.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)sm(this,t,t+7),sm(this,t+1,t+6),sm(this,t+2,t+5),sm(this,t+3,t+4);return this},so.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?sE(this,0,e):sg.apply(this,arguments)},so.prototype.toLocaleString=so.prototype.toString,so.prototype.equals=function(e){if(!so.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===so.compare(this,e)},so.prototype.inspect=function(){let e="";return e=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim(),this.length>50&&(e+=" ... "),"<Buffer "+e+">"},ss&&(so.prototype[ss]=so.prototype.inspect),so.prototype.compare=function(e,t,n,r,i){if(sB(e,Uint8Array)&&(e=so.from(e,e.offset,e.byteLength)),!so.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return -1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;let s=i-r,a=n-t,o=Math.min(s,a),l=this.slice(r,i),u=e.slice(t,n);for(let e=0;e<o;++e)if(l[e]!==u[e]){s=l[e],a=u[e];break}return s<a?-1:+(a<s)},so.prototype.includes=function(e,t,n){return -1!==this.indexOf(e,t,n)},so.prototype.indexOf=function(e,t,n){return sy(this,e,t,n,!0)},so.prototype.lastIndexOf=function(e,t,n){return sy(this,e,t,n,!1)},so.prototype.write=function(e,t,n,r){var i,s,a,o,l,u,c,h;if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let d=this.length-t;if((void 0===n||n>d)&&(n=d),e.length>0&&(n<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let f=!1;for(;;)switch(r){case"hex":return function(e,t,n,r){let i;n=Number(n)||0;let s=e.length-n;r?(r=Number(r))>s&&(r=s):r=s;let a=t.length;for(r>a/2&&(r=a/2),i=0;i<r;++i){var o;let r=parseInt(t.substr(2*i,2),16);if((o=r)!=o)break;e[n+i]=r}return i}(this,e,t,n);case"utf8":case"utf-8":return i=t,s=n,sL(sP(e,this.length-i),this,i,s);case"ascii":case"latin1":case"binary":return a=t,o=n,sL(function(e){let t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(e),this,a,o);case"base64":return l=t,u=n,sL(sx(e),this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,h=n,sL(function(e,t){let n,r,i=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,i.push(n%256),i.push(r);return i}(e,this.length-c),this,c,h);default:if(f)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),f=!0}},so.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},so.prototype.slice=function(e,t){let n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);let r=this.subarray(e,t);return Object.setPrototypeOf(r,so.prototype),r},so.prototype.readUintLE=so.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||sv(e,t,this.length);let r=this[e],i=1,s=0;for(;++s<t&&(i*=256);)r+=this[e+s]*i;return r},so.prototype.readUintBE=so.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||sv(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},so.prototype.readUint8=so.prototype.readUInt8=function(e,t){return e>>>=0,t||sv(e,1,this.length),this[e]},so.prototype.readUint16LE=so.prototype.readUInt16LE=function(e,t){return e>>>=0,t||sv(e,2,this.length),this[e]|this[e+1]<<8},so.prototype.readUint16BE=so.prototype.readUInt16BE=function(e,t){return e>>>=0,t||sv(e,2,this.length),this[e]<<8|this[e+1]},so.prototype.readUint32LE=so.prototype.readUInt32LE=function(e,t){return e>>>=0,t||sv(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},so.prototype.readUint32BE=so.prototype.readUInt32BE=function(e,t){return e>>>=0,t||sv(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},so.prototype.readBigUInt64LE=sU(function(e){sO(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&sM(e,this.length-8);let r=t+256*this[++e]+65536*this[++e]+0x1000000*this[++e],i=this[++e]+256*this[++e]+65536*this[++e]+0x1000000*n;return BigInt(r)+(BigInt(i)<<BigInt(32))}),so.prototype.readBigUInt64BE=sU(function(e){sO(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&sM(e,this.length-8);let r=0x1000000*t+65536*this[++e]+256*this[++e]+this[++e],i=0x1000000*this[++e]+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)}),so.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||sv(e,t,this.length);let r=this[e],i=1,s=0;for(;++s<t&&(i*=256);)r+=this[e+s]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},so.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||sv(e,t,this.length);let r=t,i=1,s=this[e+--r];for(;r>0&&(i*=256);)s+=this[e+--r]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},so.prototype.readInt8=function(e,t){return(e>>>=0,t||sv(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},so.prototype.readInt16LE=function(e,t){e>>>=0,t||sv(e,2,this.length);let n=this[e]|this[e+1]<<8;return 32768&n?0xffff0000|n:n},so.prototype.readInt16BE=function(e,t){e>>>=0,t||sv(e,2,this.length);let n=this[e+1]|this[e]<<8;return 32768&n?0xffff0000|n:n},so.prototype.readInt32LE=function(e,t){return e>>>=0,t||sv(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},so.prototype.readInt32BE=function(e,t){return e>>>=0,t||sv(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},so.prototype.readBigInt64LE=sU(function(e){sO(e>>>=0,"offset");let t=this[e],n=this[e+7];return(void 0===t||void 0===n)&&sM(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+0x1000000*this[++e])}),so.prototype.readBigInt64BE=sU(function(e){sO(e>>>=0,"offset");let t=this[e],n=this[e+7];return(void 0===t||void 0===n)&&sM(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(0x1000000*this[++e]+65536*this[++e]+256*this[++e]+n)}),so.prototype.readFloatLE=function(e,t){return e>>>=0,t||sv(e,4,this.length),F(this,e,!0,23,4)},so.prototype.readFloatBE=function(e,t){return e>>>=0,t||sv(e,4,this.length),F(this,e,!1,23,4)},so.prototype.readDoubleLE=function(e,t){return e>>>=0,t||sv(e,8,this.length),F(this,e,!0,52,8)},so.prototype.readDoubleBE=function(e,t){return e>>>=0,t||sv(e,8,this.length),F(this,e,!1,52,8)},so.prototype.writeUintLE=so.prototype.writeUIntLE=function(e,t,n,r){if(e*=1,t>>>=0,n>>>=0,!r){let r=Math.pow(2,8*n)-1;sC(this,e,t,n,r,0)}let i=1,s=0;for(this[t]=255&e;++s<n&&(i*=256);)this[t+s]=e/i&255;return t+n},so.prototype.writeUintBE=so.prototype.writeUIntBE=function(e,t,n,r){if(e*=1,t>>>=0,n>>>=0,!r){let r=Math.pow(2,8*n)-1;sC(this,e,t,n,r,0)}let i=n-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+n},so.prototype.writeUint8=so.prototype.writeUInt8=function(e,t,n){return e*=1,t>>>=0,n||sC(this,e,t,1,255,0),this[t]=255&e,t+1},so.prototype.writeUint16LE=so.prototype.writeUInt16LE=function(e,t,n){return e*=1,t>>>=0,n||sC(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},so.prototype.writeUint16BE=so.prototype.writeUInt16BE=function(e,t,n){return e*=1,t>>>=0,n||sC(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},so.prototype.writeUint32LE=so.prototype.writeUInt32LE=function(e,t,n){return e*=1,t>>>=0,n||sC(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},so.prototype.writeUint32BE=so.prototype.writeUInt32BE=function(e,t,n){return e*=1,t>>>=0,n||sC(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},so.prototype.writeBigUInt64LE=sU(function(e,t=0){return sS(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),so.prototype.writeBigUInt64BE=sU(function(e,t=0){return s_(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),so.prototype.writeIntLE=function(e,t,n,r){if(e*=1,t>>>=0,!r){let r=Math.pow(2,8*n-1);sC(this,e,t,n,r-1,-r)}let i=0,s=1,a=0;for(this[t]=255&e;++i<n&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s|0)-a&255;return t+n},so.prototype.writeIntBE=function(e,t,n,r){if(e*=1,t>>>=0,!r){let r=Math.pow(2,8*n-1);sC(this,e,t,n,r-1,-r)}let i=n-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s|0)-a&255;return t+n},so.prototype.writeInt8=function(e,t,n){return e*=1,t>>>=0,n||sC(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},so.prototype.writeInt16LE=function(e,t,n){return e*=1,t>>>=0,n||sC(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},so.prototype.writeInt16BE=function(e,t,n){return e*=1,t>>>=0,n||sC(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},so.prototype.writeInt32LE=function(e,t,n){return e*=1,t>>>=0,n||sC(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},so.prototype.writeInt32BE=function(e,t,n){return e*=1,t>>>=0,n||sC(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},so.prototype.writeBigInt64LE=sU(function(e,t=0){return sS(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),so.prototype.writeBigInt64BE=sU(function(e,t=0){return s_(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),so.prototype.writeFloatLE=function(e,t,n){return sI(this,e,t,!0,n)},so.prototype.writeFloatBE=function(e,t,n){return sI(this,e,t,!1,n)},so.prototype.writeDoubleLE=function(e,t,n){return sA(this,e,t,!0,n)},so.prototype.writeDoubleBE=function(e,t,n){return sA(this,e,t,!1,n)},so.prototype.copy=function(e,t,n,r){if(!so.isBuffer(e))throw TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);let i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},so.prototype.fill=function(e,t,n,r){let i;if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!so.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===e.length){let t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{let s=so.isBuffer(e)?e:so.from(e,r),a=s.length;if(0===a)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=s[i%a]}return this};const sT={};function sN(e,t,n){sT[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function sR(e){let t="",n=e.length,r=+("-"===e[0]);for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function sD(e,t,n,r,i,s){if(e>n||e<t){let r,i="bigint"==typeof t?"n":"";throw r=s>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${(s+1)*8}${i}`:`>= -(2${i} ** ${(s+1)*8-1}${i}) and < 2 ** ${(s+1)*8-1}${i}`:`>= ${t}${i} and <= ${n}${i}`,new sT.ERR_OUT_OF_RANGE("value",r,e)}sO(i,"offset"),(void 0===r[i]||void 0===r[i+s])&&sM(i,r.length-(s+1))}function sO(e,t){if("number"!=typeof e)throw new sT.ERR_INVALID_ARG_TYPE(t,"number",e)}function sM(e,t,n){if(Math.floor(e)!==e)throw sO(e,n),new sT.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new sT.ERR_BUFFER_OUT_OF_BOUNDS;throw new sT.ERR_OUT_OF_RANGE(n||"offset",`>= ${+!!n} and <= ${t}`,e)}sN("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),sN("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),sN("ERR_OUT_OF_RANGE",function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>0x100000000?i=sR(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=sR(i)),i+="n"),r+=` It must be ${t}. Received ${i}`},RangeError);const sk=/[^+/0-9A-Za-z-_]/g;function sP(e,t){let n;t=t||1/0;let r=e.length,i=null,s=[];for(let a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319||a+1===r){(t-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return s}function sx(e){return function(e){var t,n,r=function(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}(e),i=r[0],s=r[1],a=new st((i+s)*3/4-s),o=0,l=s>0?i-4:i;for(n=0;n<l;n+=4)t=se[e.charCodeAt(n)]<<18|se[e.charCodeAt(n+1)]<<12|se[e.charCodeAt(n+2)]<<6|se[e.charCodeAt(n+3)],a[o++]=t>>16&255,a[o++]=t>>8&255,a[o++]=255&t;return 2===s&&(t=se[e.charCodeAt(n)]<<2|se[e.charCodeAt(n+1)]>>4,a[o++]=255&t),1===s&&(t=se[e.charCodeAt(n)]<<10|se[e.charCodeAt(n+1)]<<4|se[e.charCodeAt(n+2)]>>2,a[o++]=t>>8&255,a[o++]=255&t),a}(function(e){if((e=(e=e.split("=")[0]).trim().replace(sk,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function sL(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length)&&!(i>=e.length);++i)t[i+n]=e[i];return i}function sB(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}const sF=function(){let e="0123456789abcdef",t=Array(256);for(let n=0;n<16;++n){let r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function sU(e){return"undefined"==typeof BigInt?sV:e}function sV(){throw Error("BigInt not supported")}const sz="@firebase/firestore",sj="4.7.17";class sH{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sH.UNAUTHENTICATED=new sH(null),sH.GOOGLE_CREDENTIALS=new sH("google-credentials-uid"),sH.FIRST_PARTY=new sH("first-party-uid"),sH.MOCK_USER=new sH("mock-user");let sW="11.9.0";const sG=new tO("@firebase/firestore");function sY(){return sG.logLevel}function sq(e,...t){if(sG.logLevel<=A.DEBUG){let n=t.map(sQ);sG.debug(`Firestore (${sW}): ${e}`,...n)}}function sX(e,...t){if(sG.logLevel<=A.ERROR){let n=t.map(sQ);sG.error(`Firestore (${sW}): ${e}`,...n)}}function s$(e,...t){if(sG.logLevel<=A.WARN){let n=t.map(sQ);sG.warn(`Firestore (${sW}): ${e}`,...n)}}function sQ(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function sK(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,sZ(e,r,n)}function sZ(e,t,n){let r=`FIRESTORE (${sW}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw sX(r),Error(r)}function sJ(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||sZ(t,i,r)}const s1={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class s0 extends th{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class s2{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class s3{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class s4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(sH.UNAUTHENTICATED))}shutdown(){}}class s6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class s8{constructor(e){this.t=e,this.currentUser=sH.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){sJ(void 0===this.o,42304);let n=this.i,r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve(),i=new s2;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new s2,e.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{sq("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?a(e):(sq("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new s2)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(sq("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(sJ("string"==typeof t.accessToken,31837,{l:t}),new s3(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return sJ(null===e||"string"==typeof e,2055,{h:e}),new sH(e)}}class s5{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=sH.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class s7{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new s5(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(sH.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class s9{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ae{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,t2(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){sJ(void 0===this.o,3512),this.o=n=>{e.enqueueRetryable(()=>(e=>{null!=e.error&&sq("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let n=e.token!==this.m;return this.m=e.token,sq("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()})(n))};let n=e=>{sq("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>n(e)),setTimeout(()=>{if(!this.appCheck){let e=this.V.getImmediate({optional:!0});e?n(e):sq("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new s9(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(sJ("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new s9(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function at(){return new TextEncoder}class an{static newId(){let e=62*Math.floor(256/62),t="";for(;t.length<20;){let n=function(e){let t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(40);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let e=0;e<40;e++)n[e]=Math.floor(256*Math.random());return n}(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function ar(e,t){return e<t?-1:+(e>t)}function ai(e,t){let n=0;for(;n<e.length&&n<t.length;){let r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return ar(r,i);{let s=at(),a=function(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return ar(e[n],t[n]);return ar(e.length,t.length)}(s.encode(as(e,n)),s.encode(as(t,n)));return 0!==a?a:ar(r,i)}}n+=r>65535?2:1}return ar(e.length,t.length)}function as(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function aa(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class ao{static now(){return ao.fromMillis(Date.now())}static fromDate(e){return ao.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*1e6);return new ao(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new s0(s1.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-0xe7791f700||e>=0x3afff44180)throw new s0(s1.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ar(this.nanoseconds,e.nanoseconds):ar(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -0xe7791f700).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class al{static fromTimestamp(e){return new al(e)}static min(){return new al(new ao(0,0))}static max(){return new al(new ao(0x3afff4417f,0x3b9ac9ff))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const au="__name__";class ac{constructor(e,t,n){void 0===t?t=0:t>e.length&&sK(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&sK(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ac.comparator(this,e)}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof ac?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++){let n=ac.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return ar(e.length,t.length)}static compareSegments(e,t){let n=ac.isNumericId(e),r=ac.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?ac.extractNumericId(e).compare(ac.extractNumericId(t)):ai(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return T.fromString(e.substring(4,e.length-2))}}class ah extends ac{construct(e,t,n){return new ah(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let n of e){if(n.indexOf("//")>=0)throw new s0(s1.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new ah(t)}static emptyPath(){return new ah([])}}const ad=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class af extends ac{construct(e,t,n){return new af(e,t,n)}static isValidIdentifier(e){return ad.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),af.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===au}static keyField(){return new af([au])}static fromServerFormat(e){let t=[],n="",r=0,i=()=>{if(0===n.length)throw new s0(s1.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""},s=!1;for(;r<e.length;){let t=e[r];if("\\"===t){if(r+1===e.length)throw new s0(s1.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new s0(s1.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?s=!s:"."!==t||s?n+=t:i(),r++}if(i(),s)throw new s0(s1.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new af(t)}static emptyPath(){return new af([])}}class ap{constructor(e){this.path=e}static fromPath(e){return new ap(ah.fromString(e))}static fromName(e){return new ap(ah.fromString(e).popFirst(5))}static empty(){return new ap(ah.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ah.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ah.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ap(new ah(e.slice()))}}class ag{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ag(al.min(),ap.empty(),-1)}static max(){return new ag(al.max(),ap.empty(),-1)}}class am{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function ay(e){if(e.code!==s1.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;sq("LocalStore","Unexpectedly lost primary lease")}class aw{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&sK(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new aw((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof aw?t:aw.resolve(t)}catch(e){return aw.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):aw.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):aw.reject(t)}static resolve(e){return new aw((t,n)=>{t(e)})}static reject(e){return new aw((t,n)=>{n(e)})}static waitFor(e){return new aw((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=aw.resolve(!1);for(let n of e)t=t.next(e=>e?aw.resolve(e):n());return t}static forEach(e,t){let n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new aw((n,r)=>{let i=e.length,s=Array(i),a=0;for(let o=0;o<i;o++){let l=o;t(e[l]).next(e=>{s[l]=e,++a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new aw((n,r)=>{let i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function aE(e){return"IndexedDbTransactionError"===e.name}class av{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ue(e),this.ce=e=>t.writeSequenceNumber(e))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ce&&this.ce(e),e}}av.le=-1;function aC(e){return 0===e&&1/e==-1/0}function aS(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function a_(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ab(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class aI{constructor(e,t){this.comparator=e,this.root=t||aT.EMPTY}insert(e,t){return new aI(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,aT.BLACK,null,null))}remove(e){return new aI(this.comparator,this.root.remove(e,this.comparator).copy(null,null,aT.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){let e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new aA(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new aA(this.root,e,this.comparator,!1)}getReverseIterator(){return new aA(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new aA(this.root,e,this.comparator,!0)}}class aA{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class aT{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:aT.RED,this.left=null!=r?r:aT.EMPTY,this.right=null!=i?i:aT.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new aT(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}removeMin(){if(this.left.isEmpty())return aT.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}remove(e,t){let n,r=this;if(0>t(e,r.key))r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return aT.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}rotateLeft(){let e=this.copy(null,null,aT.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,aT.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw sK(43730,{key:this.key,value:this.value});if(this.right.isRed())throw sK(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw sK(27949);return e+ +!this.isRed()}}aT.EMPTY=null,aT.RED=!0,aT.BLACK=!1,aT.EMPTY=new class{constructor(){this.size=0}get key(){throw sK(57766)}get value(){throw sK(16141)}get color(){throw sK(16727)}get left(){throw sK(29726)}get right(){throw sK(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new aT(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class aN{constructor(e){this.comparator=e,this.data=new aI(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new aR(this.data.getIterator())}getIteratorFrom(e){return new aR(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof aN)||this.size!==e.size)return!1;let t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){let e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new aN(this.comparator);return t.data=e,t}}class aR{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class aD{constructor(e){this.fields=e,e.sort(af.comparator)}static empty(){return new aD([])}unionWith(e){let t=new aN(af.comparator);for(let e of this.fields)t=t.add(e);for(let n of e)t=t.add(n);return new aD(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return aa(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class aO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class aM{constructor(e){this.binaryString=e}static fromBase64String(e){return new aM(function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new aO("Invalid base64 string: "+e):e}}(e))}static fromUint8Array(e){return new aM(function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){var e=this.binaryString;let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ar(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}aM.EMPTY_BYTE_STRING=new aM("");const ak=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function aP(e){if(sJ(!!e,39018),"string"==typeof e){let t=0,n=ak.exec(e);if(sJ(!!n,46558,{timestamp:e}),n[1]){let e=n[1];t=Number(e=(e+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(e).getTime()/1e3),nanos:t}}return{seconds:ax(e.seconds),nanos:ax(e.nanos)}}function ax(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function aL(e){return"string"==typeof e?aM.fromBase64String(e):aM.fromUint8Array(e)}const aB="server_timestamp",aF="__type__",aU="__previous_value__",aV="__local_write_time__";function az(e){var t,n;return(null==(n=((null==(t=null==e?void 0:e.mapValue)?void 0:t.fields)||{})[aF])?void 0:n.stringValue)===aB}function aj(e){let t=e.mapValue.fields[aU];return az(t)?aj(t):t}function aH(e){let t=aP(e.mapValue.fields[aV].timestampValue);return new ao(t.seconds,t.nanos)}class aW{constructor(e,t,n,r,i,s,a,o,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=u}}const aG="(default)";class aY{constructor(e,t){this.projectId=e,this.database=t||aG}static empty(){return new aY("","")}get isDefaultDatabase(){return this.database===aG}isEqual(e){return e instanceof aY&&e.projectId===this.projectId&&e.database===this.database}}const aq="__type__",aX="__max__",a$={mapValue:{fields:{__type__:{stringValue:aX}}}},aQ="__vector__",aK="value";function aZ(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?az(e)?4:or(e)?0x1fffffffffffff:ot(e)?10:11:sK(28295,{value:e})}function aJ(e,t){if(e===t)return!0;let n=aZ(e);if(n!==aZ(t))return!1;switch(n){case 0:case 0x1fffffffffffff:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return aH(e).isEqual(aH(t));case 3:if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let r=aP(e.timestampValue),i=aP(t.timestampValue);return r.seconds===i.seconds&&r.nanos===i.nanos;case 5:return e.stringValue===t.stringValue;case 6:return aL(e.bytesValue).isEqual(aL(t.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return ax(e.geoPointValue.latitude)===ax(t.geoPointValue.latitude)&&ax(e.geoPointValue.longitude)===ax(t.geoPointValue.longitude);case 2:if("integerValue"in e&&"integerValue"in t)return ax(e.integerValue)===ax(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){let n=ax(e.doubleValue),r=ax(t.doubleValue);return n===r?aC(n)===aC(r):isNaN(n)&&isNaN(r)}return!1;case 9:return aa(e.arrayValue.values||[],t.arrayValue.values||[],aJ);case 10:case 11:let s=e.mapValue.fields||{},a=t.mapValue.fields||{};if(aS(s)!==aS(a))return!1;for(let e in s)if(s.hasOwnProperty(e)&&(void 0===a[e]||!aJ(s[e],a[e])))return!1;return!0;default:return sK(52216,{left:e})}}function a1(e,t){return void 0!==(e.values||[]).find(e=>aJ(e,t))}function a0(e,t){if(e===t)return 0;let n=aZ(e),r=aZ(t);if(n!==r)return ar(n,r);switch(n){case 0:case 0x1fffffffffffff:return 0;case 1:return ar(e.booleanValue,t.booleanValue);case 2:let i=ax(e.integerValue||e.doubleValue),s=ax(t.integerValue||t.doubleValue);return i<s?-1:i>s?1:i===s?0:isNaN(i)?isNaN(s)?0:-1:1;case 3:return a2(e.timestampValue,t.timestampValue);case 4:return a2(aH(e),aH(t));case 5:return ai(e.stringValue,t.stringValue);case 6:return function(e,t){let n=aL(e),r=aL(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){let n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){let t=ar(n[e],r[e]);if(0!==t)return t}return ar(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){let n=ar(ax(e.latitude),ax(t.latitude));return 0!==n?n:ar(ax(e.longitude),ax(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return a3(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;let a=e.fields||{},o=t.fields||{},l=null==(n=a[aK])?void 0:n.arrayValue,u=null==(r=o[aK])?void 0:r.arrayValue,c=ar((null==(i=null==l?void 0:l.values)?void 0:i.length)||0,(null==(s=null==u?void 0:u.values)?void 0:s.length)||0);return 0!==c?c:a3(l,u)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===a$.mapValue&&t===a$.mapValue)return 0;if(e===a$.mapValue)return 1;if(t===a$.mapValue)return -1;let n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){let t=ai(r[e],s[e]);if(0!==t)return t;let a=a0(n[r[e]],i[s[e]]);if(0!==a)return a}return ar(r.length,s.length)}(e.mapValue,t.mapValue);default:throw sK(23264,{Pe:n})}}function a2(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ar(e,t);let n=aP(e),r=aP(t),i=ar(n.seconds,r.seconds);return 0!==i?i:ar(n.nanos,r.nanos)}function a3(e,t){let n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){let t=a0(n[e],r[e]);if(t)return t}return ar(n.length,r.length)}function a4(e){var t,n;return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){let t=aP(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?aL(e.bytesValue).toBase64():"referenceValue"in e?(t=e.referenceValue,ap.fromName(t).toString()):"geoPointValue"in e?(n=e.geoPointValue,`geo(${n.latitude},${n.longitude})`):"arrayValue"in e?function(e){let t="[",n=!0;for(let r of e.values||[])n?n=!1:t+=",",t+=a4(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){let t=Object.keys(e.fields||{}).sort(),n="{",r=!0;for(let i of t)r?r=!1:n+=",",n+=`${i}:${a4(e.fields[i])}`;return n+"}"}(e.mapValue):sK(61005,{value:e})}function a6(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function a8(e){return!!e&&"integerValue"in e}function a5(e){return!!e&&"arrayValue"in e}function a7(e){return!!e&&"nullValue"in e}function a9(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function oe(e){return!!e&&"mapValue"in e}function ot(e){var t,n;return(null==(n=((null==(t=null==e?void 0:e.mapValue)?void 0:t.fields)||{})[aq])?void 0:n.stringValue)===aQ}function on(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return a_(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=on(n)),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=on(e.arrayValue.values[n]);return t}return Object.assign({},e)}function or(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===aX}class oi{constructor(e){this.value=e}static empty(){return new oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(!oe(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=on(t)}setAll(e){let t=af.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=on(e):r.push(i.lastSegment())});let i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){let t=this.field(e.popLast());oe(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return aJ(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];oe(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){for(let r of(a_(t,(t,n)=>e[t]=n),n))delete e[r]}clone(){return new oi(on(this.value))}}class os{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new os(e,0,al.min(),al.min(),al.min(),oi.empty(),0)}static newFoundDocument(e,t,n,r){return new os(e,1,t,al.min(),n,r,0)}static newNoDocument(e,t){return new os(e,2,t,al.min(),al.min(),oi.empty(),0)}static newUnknownDocument(e,t){return new os(e,3,t,al.min(),al.min(),oi.empty(),2)}convertToFoundDocument(e,t){return this.createTime.isEqual(al.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=al.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof os&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new os(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class oa{constructor(e,t){this.position=e,this.inclusive=t}}function oo(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){let s=t[i],a=e.position[i];if(r=s.field.isKeyField()?ap.comparator(ap.fromName(a.referenceValue),n.key):a0(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ol(e,t){if(null===e)return null===t;if(null===t||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!aJ(e.position[n],t.position[n]))return!1;return!0}class ou{constructor(e,t="asc"){this.field=e,this.dir=t}}class oc{}class oh extends oc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new og(e,t,n):"array-contains"===t?new oE(e,n):"in"===t?new ov(e,n):"not-in"===t?new oC(e,n):"array-contains-any"===t?new oS(e,n):new oh(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new om(e,n):new oy(e,n)}matches(e){let t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(a0(t,this.value)):null!==t&&aZ(this.value)===aZ(t)&&this.matchesComparison(a0(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return sK(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class od extends oc{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new od(e,t)}matches(e){return of(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Te||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function of(e){return"and"===e.op}function op(e){for(let t of e.filters)if(t instanceof od)return!1;return!0}class og extends oh{constructor(e,t,n){super(e,t,n),this.key=ap.fromName(n.referenceValue)}matches(e){let t=ap.comparator(e.key,this.key);return this.matchesComparison(t)}}class om extends oh{constructor(e,t){super(e,"in",t),this.keys=ow("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class oy extends oh{constructor(e,t){super(e,"not-in",t),this.keys=ow("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ow(e,t){var n;return((null==(n=t.arrayValue)?void 0:n.values)||[]).map(e=>ap.fromName(e.referenceValue))}class oE extends oh{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return a5(t)&&a1(t.arrayValue,this.value)}}class ov extends oh{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return null!==t&&a1(this.value.arrayValue,t)}}class oC extends oh{constructor(e,t){super(e,"not-in",t)}matches(e){if(a1(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!a1(this.value.arrayValue,t)}}class oS extends oh{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!a5(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>a1(this.value.arrayValue,e))}}class o_{constructor(e,t=null,n=[],r=[],i=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.Ie=null}}function ob(e,t=null,n=[],r=[],i=null,s=null,a=null){return new o_(e,t,n,r,i,s,a)}function oI(e){if(null===e.Ie){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(e=>(function e(t){if(t instanceof oh)return t.field.canonicalString()+t.op.toString()+a4(t.value);if(op(t)&&of(t))return t.filters.map(t=>e(t)).join(",");{let n=t.filters.map(t=>e(t)).join(",");return`${t.op}(${n})`}})(e)).join(","),t+="|ob:",t+=e.orderBy.map(e=>e.field.canonicalString()+e.dir).join(","),null==e.limit||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>a4(e)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>a4(e)).join(",")),e.Ie=t}return e.Ie}function oA(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++){var n,r;if(n=e.orderBy[i],r=t.orderBy[i],!(n.dir===r.dir&&n.field.isEqual(r.field)))return!1}if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!function e(t,n){return t instanceof oh?n instanceof oh&&t.op===n.op&&t.field.isEqual(n.field)&&aJ(t.value,n.value):t instanceof od?n instanceof od&&t.op===n.op&&t.filters.length===n.filters.length&&t.filters.reduce((t,r,i)=>t&&e(r,n.filters[i]),!0):void sK(19439)}(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ol(e.startAt,t.startAt)&&ol(e.endAt,t.endAt)}function oT(e){return ap.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class oN{constructor(e,t=null,n=[],r=[],i=null,s="F",a=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function oR(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function oD(e){return null!==e.collectionGroup}function oO(e){if(null===e.Ee){let t;e.Ee=[];let n=new Set;for(let t of e.explicitOrderBy)e.Ee.push(t),n.add(t.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(t=new aN(af.comparator),e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t).forEach(t=>{n.has(t.canonicalString())||t.isKeyField()||e.Ee.push(new ou(t,r))}),n.has(af.keyField().canonicalString())||e.Ee.push(new ou(af.keyField(),r))}return e.Ee}function oM(e){return e.de||(e.de=function(e,t){if("F"===e.limitType)return ob(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{let t="desc"===e.dir?"asc":"desc";return new ou(e.field,t)});let n=e.endAt?new oa(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new oa(e.startAt.position,e.startAt.inclusive):null;return ob(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}(e,oO(e))),e.de}function ok(e,t){let n=e.filters.concat([t]);return new oN(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function oP(e,t,n){return new oN(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ox(e,t){return oA(oM(e),oM(t))&&e.limitType===t.limitType}function oL(e){return`${oI(oM(e))}|lt:${e.limitType}`}function oB(e){var t;let n;return`Query(target=${n=(t=oM(e)).path.canonicalString(),null!==t.collectionGroup&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(e=>(function e(t){return t instanceof oh?`${t.field.canonicalString()} ${t.op} ${a4(t.value)}`:t instanceof od?t.op.toString()+" {"+t.getFilters().map(e).join(" ,")+"}":"Filter"})(e)).join(", ")}]`),null==t.limit||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(e=>`${e.field.canonicalString()} (${e.dir})`).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(e=>a4(e)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(e=>a4(e)).join(",")),`Target(${n})`}; limitType=${e.limitType})`}function oF(e,t){return t.isFoundDocument()&&function(e,t){let n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ap.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(let n of oO(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(let n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(!e.startAt||!!function(e,t,n){let r=oo(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,oO(e),t))&&(!e.endAt||!!function(e,t,n){let r=oo(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,oO(e),t))}function oU(e){return(t,n)=>{let r=!1;for(let i of oO(e)){let e=function(e,t,n){let r=e.field.isKeyField()?ap.comparator(t.key,n.key):function(e,t,n){let r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?a0(r,i):sK(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return -1*r;default:return sK(19790,{direction:e.dir})}}(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}class oV{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){for(let[t,r]of n)if(this.equalsFn(t,e))return r}}has(e){return void 0!==this.get(e)}set(e,t){let n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){a_(this.inner,(t,n)=>{for(let[t,r]of n)e(t,r)})}isEmpty(){return ab(this.inner)}size(){return this.innerSize}}const oz=new aI(ap.comparator),oj=new aI(ap.comparator);function oH(...e){let t=oj;for(let n of e)t=t.insert(n.key,n);return t}function oW(e){let t=oj;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function oG(){return new oV(e=>e.toString(),(e,t)=>e.isEqual(t))}const oY=new aI(ap.comparator),oq=new aN(ap.comparator);function oX(...e){let t=oq;for(let n of e)t=t.add(n);return t}const o$=new aN(ar);function oQ(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:aC(t)?"-0":t}}function oK(e){return{integerValue:""+e}}class oZ{constructor(){this._=void 0}}function oJ(e,t){return e instanceof o6?a8(t)||t&&"doubleValue"in t?t:{integerValue:0}:null}class o1 extends oZ{}class o0 extends oZ{constructor(e){super(),this.elements=e}}function o2(e,t){let n=o5(t);for(let t of e.elements)n.some(e=>aJ(e,t))||n.push(t);return{arrayValue:{values:n}}}class o3 extends oZ{constructor(e){super(),this.elements=e}}function o4(e,t){let n=o5(t);for(let t of e.elements)n=n.filter(e=>!aJ(e,t));return{arrayValue:{values:n}}}class o6 extends oZ{constructor(e,t){super(),this.serializer=e,this.Re=t}}function o8(e){return ax(e.integerValue||e.doubleValue)}function o5(e){return a5(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class o7{constructor(e,t){this.version=e,this.transformResults=t}}class o9{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new o9}static exists(e){return new o9(void 0,e)}static updateTime(e){return new o9(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function le(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class lt{}function ln(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new lc(e.key,o9.none()):new ls(e.key,e.data,o9.none());{let n=e.data,r=oi.empty(),i=new aN(af.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new la(e.key,r,new aD(i.toArray()),o9.none())}}function lr(e,t,n,r){return e instanceof ls?function(e,t,n,r){if(!le(e.precondition,t))return n;let i=e.value.clone(),s=lu(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof la?function(e,t,n,r){if(!le(e.precondition,t))return n;let i=lu(e.fieldTransforms,r,t),s=t.data;return(s.setAll(lo(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n)?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):le(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}function li(e,t){var n,r;return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||!(!n||!r)&&aa(n,r,(e,t)=>{var n,r;return e.field.isEqual(t.field)&&(n=e.transform,r=t.transform,n instanceof o0&&r instanceof o0||n instanceof o3&&r instanceof o3?aa(n.elements,r.elements,aJ):n instanceof o6&&r instanceof o6?aJ(n.Re,r.Re):n instanceof o1&&r instanceof o1)})))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ls extends lt{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class la extends lt{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function lo(e){let t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=e.data.field(n);t.set(n,r)}}),t}function ll(e,t,n){let r=new Map;sJ(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let s=0;s<n.length;s++){var i;let a=e[s],o=a.transform,l=t.data.field(a.field);r.set(a.field,(i=n[s],o instanceof o0?o2(o,l):o instanceof o3?o4(o,l):i))}return r}function lu(e,t,n){let r=new Map;for(let i of e){let e=i.transform,s=n.data.field(i.field);r.set(i.field,e instanceof o1?function(e,t){let n={fields:{[aF]:{stringValue:aB},[aV]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&az(t)&&(t=aj(t)),t&&(n.fields[aU]=t),{mapValue:n}}(t,s):e instanceof o0?o2(e,s):e instanceof o3?o4(e,s):function(e,t){let n=oJ(e,t),r=o8(n)+o8(e.Re);return a8(n)&&a8(e.Re)?oK(r):oQ(e.serializer,r)}(e,s))}return r}class lc extends lt{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lh extends lt{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ld{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){let n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let r=this.mutations[t];r.key.isEqual(e.key)&&function(e,t,n){e instanceof ls?function(e,t,n){let r=e.value.clone(),i=ll(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof la?function(e,t,n){if(!le(e.precondition,t))return t.convertToUnknownDocument(n.version);let r=ll(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(lo(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):t.convertToNoDocument(n.version).setHasCommittedMutations()}(r,e,n[t])}}applyToLocalView(e,t){for(let n of this.baseMutations)n.key.isEqual(e.key)&&(t=lr(n,e,t,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(e.key)&&(t=lr(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let n=oG();return this.mutations.forEach(r=>{let i=e.get(r.key),s=i.overlayedDocument,a=this.applyToLocalView(s,i.mutatedFields),o=ln(s,a=t.has(r.key)?null:a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(al.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),oX())}isEqual(e){return this.batchId===e.batchId&&aa(this.mutations,e.mutations,(e,t)=>li(e,t))&&aa(this.baseMutations,e.baseMutations,(e,t)=>li(e,t))}}class lf{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){sJ(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let r=oY,i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new lf(e,t,n,r)}}class lp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class lg{constructor(e,t){this.count=e,this.unchangedNames=t}}function lm(e){if(void 0===e)return sX("GRPC error has no .code"),s1.UNKNOWN;switch(e){case V.OK:return s1.OK;case V.CANCELLED:return s1.CANCELLED;case V.UNKNOWN:return s1.UNKNOWN;case V.DEADLINE_EXCEEDED:return s1.DEADLINE_EXCEEDED;case V.RESOURCE_EXHAUSTED:return s1.RESOURCE_EXHAUSTED;case V.INTERNAL:return s1.INTERNAL;case V.UNAVAILABLE:return s1.UNAVAILABLE;case V.UNAUTHENTICATED:return s1.UNAUTHENTICATED;case V.INVALID_ARGUMENT:return s1.INVALID_ARGUMENT;case V.NOT_FOUND:return s1.NOT_FOUND;case V.ALREADY_EXISTS:return s1.ALREADY_EXISTS;case V.PERMISSION_DENIED:return s1.PERMISSION_DENIED;case V.FAILED_PRECONDITION:return s1.FAILED_PRECONDITION;case V.ABORTED:return s1.ABORTED;case V.OUT_OF_RANGE:return s1.OUT_OF_RANGE;case V.UNIMPLEMENTED:return s1.UNIMPLEMENTED;case V.DATA_LOSS:return s1.DATA_LOSS;default:return sK(39323,{code:e})}}(z=V||(V={}))[z.OK=0]="OK",z[z.CANCELLED=1]="CANCELLED",z[z.UNKNOWN=2]="UNKNOWN",z[z.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",z[z.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",z[z.NOT_FOUND=5]="NOT_FOUND",z[z.ALREADY_EXISTS=6]="ALREADY_EXISTS",z[z.PERMISSION_DENIED=7]="PERMISSION_DENIED",z[z.UNAUTHENTICATED=16]="UNAUTHENTICATED",z[z.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",z[z.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",z[z.ABORTED=10]="ABORTED",z[z.OUT_OF_RANGE=11]="OUT_OF_RANGE",z[z.UNIMPLEMENTED=12]="UNIMPLEMENTED",z[z.INTERNAL=13]="INTERNAL",z[z.UNAVAILABLE=14]="UNAVAILABLE",z[z.DATA_LOSS=15]="DATA_LOSS";const ly=new T([0xffffffff,0xffffffff],0);function lw(e){let t=at().encode(e),n=new N;return n.update(t),new Uint8Array(n.digest())}function lE(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new T([n,r],0),new T([i,s],0)]}class lv{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new lC(`Invalid padding: ${t}`);if(n<0||e.length>0&&0===this.hashCount)throw new lC(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new lC(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=T.fromNumber(this.pe)}we(e,t,n){let r=e.add(t.multiply(T.fromNumber(n)));return 1===r.compare(ly)&&(r=new T([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.pe)return!1;let[t,n]=lE(lw(e));for(let e=0;e<this.hashCount;e++){let r=this.we(t,n,e);if(!this.be(r))return!1}return!0}static create(e,t,n){let r=new lv(new Uint8Array(Math.ceil(e/8)),e%8==0?0:8-e%8,t);return n.forEach(e=>r.insert(e)),r}insert(e){if(0===this.pe)return;let[t,n]=lE(lw(e));for(let e=0;e<this.hashCount;e++){let r=this.we(t,n,e);this.Se(r)}}Se(e){let t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class lC extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class lS{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){let r=new Map;return r.set(e,l_.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new lS(al.min(),r,new aI(ar),oz,oX())}}class l_{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new l_(n,t,oX(),oX(),oX())}}class lb{constructor(e,t,n,r){this.De=e,this.removedTargetIds=t,this.key=n,this.ve=r}}class lI{constructor(e,t){this.targetId=e,this.Ce=t}}class lA{constructor(e,t,n=aM.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class lT{constructor(){this.Fe=0,this.Me=lD(),this.xe=aM.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return 0!==this.Fe}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=oX(),t=oX(),n=oX();return this.Me.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:sK(38017,{changeType:i})}}),new l_(this.xe,this.Oe,e,t,n)}Qe(){this.Ne=!1,this.Me=lD()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,sJ(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class lN{constructor(e){this.ze=e,this.je=new Map,this.He=oz,this.Je=lR(),this.Ye=lR(),this.Ze=new aI(ar)}Xe(e){for(let t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(let t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{let n=this.rt(t);switch(e.state){case 0:this.it(t)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(t);break;case 3:this.it(t)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),n.ke(e.resumeToken));break;default:sK(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((e,n)=>{this.it(n)&&t(n)})}ot(e){let t=e.targetId,n=e.Ce.count,r=this._t(t);if(r){let i=r.target;if(oT(i))if(0===n){let e=new ap(i.path);this.tt(t,e,os.newNoDocument(e,al.min()))}else sJ(1===n,20013,{expectedCount:n});else{let r=this.ut(t);if(r!==n){let n=this.ct(e),i=n?this.lt(n,e,r):1;0!==i&&(this.st(t),this.Ze=this.Ze.insert(t,2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}ct(e){let t,n,r=e.Ce.unchangedNames;if(!r||!r.bits)return null;let{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=r;try{t=aL(i).toUint8Array()}catch(e){if(e instanceof aO)return s$("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{n=new lv(t,s,a)}catch(e){return s$(e instanceof lC?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===n.pe?null:n}lt(e,t,n){return 2*(t.Ce.count!==n-this.Tt(e,t.targetId))}Tt(e,t){let n=this.ze.getRemoteKeysForTarget(t),r=0;return n.forEach(n=>{let i=this.ze.Pt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.tt(t,n,null),r++)}),r}It(e){let t=new Map;this.je.forEach((n,r)=>{let i=this._t(r);if(i){if(n.current&&oT(i.target)){let t=new ap(i.target.path);this.Et(t).has(r)||this.dt(r,t)||this.tt(r,t,os.newNoDocument(t,e))}n.Le&&(t.set(r,n.qe()),n.Qe())}});let n=oX();this.Ye.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{let t=this._t(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.He.forEach((t,n)=>n.setReadTime(e));let r=new lS(e,t,this.Ze,this.He,n);return this.He=oz,this.Je=lR(),this.Ye=lR(),this.Ze=new aI(ar),r}et(e,t){if(!this.it(e))return;let n=2*!!this.dt(e,t.key);this.rt(e).$e(t.key,n),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,n){if(!this.it(e))return;let r=this.rt(e);this.dt(e,t)?r.$e(t,1):r.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),n&&(this.He=this.He.insert(t,n))}removeTarget(e){this.je.delete(e)}ut(e){let t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new lT,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new aN(ar),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new aN(ar),this.Je=this.Je.insert(e,t)),t}it(e){let t=null!==this._t(e);return t||sq("WatchChangeAggregator","Detected inactive target",e),t}_t(e){let t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new lT),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function lR(){return new aI(ap.comparator)}function lD(){return new aI(ap.comparator)}const lO={asc:"ASCENDING",desc:"DESCENDING"},lM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lk={and:"AND",or:"OR"};class lP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function lx(e,t){return e.useProto3Json||null==t?t:{value:t}}function lL(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function lB(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function lF(e){return sJ(!!e,49232),al.fromTimestamp(function(e){let t=aP(e);return new ao(t.seconds,t.nanos)}(e))}function lU(e,t){return lV(e,t).canonicalString()}function lV(e,t){let n=new ah(["projects",e.projectId,"databases",e.database]).child("documents");return void 0===t?n:n.child(t)}function lz(e){let t=ah.fromString(e);return sJ(lQ(t),10190,{key:t.toString()}),t}function lj(e,t){return lU(e.databaseId,t.path)}function lH(e,t){let n=lz(t);if(n.get(1)!==e.databaseId.projectId)throw new s0(s1.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new s0(s1.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ap(lY(n))}function lW(e,t){return lU(e.databaseId,t)}function lG(e){return new ah(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function lY(e){return sJ(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function lq(e,t,n){return{name:lj(e,t),fields:n.value.mapValue.fields}}function lX(e){return{fieldPath:e.canonicalString()}}function l$(e){return af.fromServerFormat(e.fieldPath)}function lQ(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class lK{constructor(e,t,n,r,i=al.min(),s=al.min(),a=aM.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new lK(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new lK(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lK(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lK(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class lZ{constructor(e){this.wt=e}}class lJ{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(+!!e.booleanValue);else if("integerValue"in e)this.Mt(t,15),t.xt(ax(e.integerValue));else if("doubleValue"in e){let n=ax(e.doubleValue);isNaN(n)?this.Mt(t,13):(this.Mt(t,15),aC(n)?t.xt(0):t.xt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Mt(t,20),"string"==typeof n&&(n=aP(n)),t.Ot(`${n.seconds||""}`),t.xt(n.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(aL(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){let n=e.geoPointValue;this.Mt(t,45),t.xt(n.latitude||0),t.xt(n.longitude||0)}else"mapValue"in e?or(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):ot(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):sK(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){let n=e.fields||{};for(let e of(this.Mt(t,55),Object.keys(n)))this.Nt(e,t),this.Ct(n[e],t)}qt(e,t){var n,r;let i=e.fields||{};this.Mt(t,53);let s=(null==(r=null==(n=i[aK].arrayValue)?void 0:n.values)?void 0:r.length)||0;this.Mt(t,15),t.xt(ax(s)),this.Nt(aK,t),this.Ct(i[aK],t)}$t(e,t){let n=e.values||[];for(let e of(this.Mt(t,50),n))this.Ct(e,t)}kt(e,t){this.Mt(t,37),ap.fromName(e).path.forEach(e=>{this.Mt(t,60),this.Kt(e,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}lJ.Wt=new lJ;class l1{constructor(){this.Cn=new l0}addToCollectionParentIndex(e,t){return this.Cn.add(t),aw.resolve()}getCollectionParents(e,t){return aw.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return aw.resolve()}deleteFieldIndex(e,t){return aw.resolve()}deleteAllFieldIndexes(e){return aw.resolve()}createTargetIndexes(e,t){return aw.resolve()}getDocumentsMatchingTarget(e,t){return aw.resolve(null)}getIndexType(e,t){return aw.resolve(0)}getFieldIndexes(e,t){return aw.resolve([])}getNextCollectionGroupToUpdate(e){return aw.resolve(null)}getMinOffset(e,t){return aw.resolve(ag.min())}getMinOffsetFromCollectionGroup(e,t){return aw.resolve(ag.min())}updateCollectionGroup(e,t,n){return aw.resolve()}updateIndexEntries(e,t){return aw.resolve()}}class l0{constructor(){this.index={}}add(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new aN(ah.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new aN(ah.comparator)).toArray()}}new Uint8Array(0);const l2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class l3{static withCacheSize(e){return new l3(e,l3.DEFAULT_COLLECTION_PERCENTILE,l3.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}l3.DEFAULT_COLLECTION_PERCENTILE=10,l3.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,l3.DEFAULT=new l3(0x2800000,l3.DEFAULT_COLLECTION_PERCENTILE,l3.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),l3.DISABLED=new l3(-1,0,0);class l4{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new l4(0)}static lr(){return new l4(-1)}}const l6="LruGarbageCollector";function l8([e,t],[n,r]){let i=ar(e,n);return 0===i?ar(t,r):i}class l5{constructor(e){this.Er=e,this.buffer=new aN(l8),this.dr=0}Ar(){return++this.dr}Rr(e){let t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();0>l8(t,e)&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class l7{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Vr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return null!==this.Vr}mr(e){sq(l6,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){aE(e)?sq(l6,"Ignoring IndexedDB error during garbage collection: ",e):await ay(e)}await this.mr(3e5)})}}class l9{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return aw.resolve(av.le);let n=new l5(t);return this.gr.forEachTarget(e,e=>n.Rr(e.sequenceNumber)).next(()=>this.gr.yr(e,e=>n.Rr(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.gr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return -1===this.params.cacheSizeCollectionThreshold?(sq("LruGarbageCollector","Garbage collection skipped; disabled"),aw.resolve(l2)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(sq("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),l2):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let n,r,i,s,a,o,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(sq("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),sY()<=A.DEBUG&&sq("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${r} in `+(a-s)+"ms\n"+`	Removed ${i} targets in `+(o-a)+"ms\n"+`	Removed ${e} documents in `+(l-o)+"ms\n"+`Total Duration: ${l-u}ms`),aw.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}class ue{constructor(){this.changes=new oV(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,os.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let n=this.changes.get(t);return void 0!==n?aw.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ut{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class un{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&lr(n.mutation,e,aD.empty(),ao.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,oX()).next(()=>t))}getLocalViewOfDocuments(e,t,n=oX()){let r=oG();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=oH();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){let n=oG();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,oX()))}populateOverlays(e,t,n){let r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=oz,s=oG(),a=oG();return t.forEach((e,t)=>{let a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof la)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),lr(a.mutation,t,a.mutation.getFieldMask(),ao.now())):s.set(t.key,aD.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new ut(t,null!=(n=s.get(e))?n:null))}),a))}recalculateAndSaveOverlays(e,t){let n=oG(),r=new aI((e,t)=>e-t),i=oX();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(let i of e)i.keys().forEach(e=>{let s=t.get(e);if(null===s)return;let a=n.get(e)||aD.empty();a=i.applyToLocalView(s,a),n.set(e,a);let o=(r.get(i.batchId)||oX()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{let s=[],a=r.getReverseIterator();for(;a.hasNext();){let r=a.getNext(),o=r.key,l=r.value,u=oG();l.forEach(e=>{if(!i.has(e)){let r=ln(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,u))}return aw.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return ap.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):oD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{let s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):aw.resolve(oG()),a=-1,o=i;return s.next(t=>aw.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?aw.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,oX())).next(e=>({batchId:a,changes:oW(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ap(t)).next(e=>{let t=oH();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){let i=t.collectionGroup,s=oH();return this.indexManager.getCollectionParents(e,i).next(a=>aw.forEach(a,a=>{let o=new oN(a.child(i),null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt);return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{let r=n.getKey();null===e.get(r)&&(e=e.insert(r,os.newInvalidDocument(r)))});let n=oH();return e.forEach((e,r)=>{let s=i.get(e);void 0!==s&&lr(s.mutation,r,aD.empty(),ao.now()),oF(t,r)&&(n=n.insert(e,r))}),n})}}class ur{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return aw.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,{id:t.id,version:t.version,createTime:lF(t.createTime)}),aw.resolve()}getNamedQuery(e,t){return aw.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,{name:t.name,query:function(e){let t=function(e){var t;let n,r=function(e){let t=lz(e);return 4===t.length?ah.emptyPath():lY(t)}(e.parent),i=e.structuredQuery,s=i.from?i.from.length:0,a=null;if(s>0){sJ(1===s,65062);let e=i.from[0];e.allDescendants?a=e.collectionId:r=r.child(e.collectionId)}let o=[];i.where&&(o=function(e){var t;let n=function e(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":let t=l$(e.unaryFilter.field);return oh.create(t,"==",{doubleValue:NaN});case"IS_NULL":let n=l$(e.unaryFilter.field);return oh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let r=l$(e.unaryFilter.field);return oh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let i=l$(e.unaryFilter.field);return oh.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return sK(61313);default:return sK(60726)}}(t):void 0!==t.fieldFilter?oh.create(l$(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return sK(58110);default:return sK(50506)}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==t.compositeFilter?od.create(t.compositeFilter.filters.map(t=>e(t)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return sK(1026)}}(t.compositeFilter.op)):sK(30097,{filter:t})}(e);return n instanceof od&&op(t=n)&&of(t)?n.getFilters():[n]}(i.where));let l=[];i.orderBy&&(l=i.orderBy.map(e=>new ou(l$(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))));let u=null;i.limit&&(u=null==(n="object"==typeof(t=i.limit)?t.value:t)?null:n);let c=null;i.startAt&&(c=function(e){let t=!!e.before;return new oa(e.values||[],t)}(i.startAt));let h=null;return i.endAt&&(h=function(e){let t=!e.before;return new oa(e.values||[],t)}(i.endAt)),new oN(r,a,l,o,u,"F",c,h)}({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?oP(t,t.limit,"L"):t}(t.bundledQuery),readTime:lF(t.readTime)}),aw.resolve()}}class ui{constructor(){this.overlays=new aI(ap.comparator),this.Qr=new Map}getOverlay(e,t){return aw.resolve(this.overlays.get(t))}getOverlays(e,t){let n=oG();return aw.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),aw.resolve()}removeOverlaysForBatchId(e,t,n){let r=this.Qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Qr.delete(n)),aw.resolve()}getOverlaysForCollection(e,t,n){let r=oG(),i=t.length+1,s=new ap(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return aw.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new aI((e,t)=>e-t),s=this.overlays.getIterator();for(;s.hasNext();){let e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=oG(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let a=oG(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return aw.resolve(a)}St(e,t,n){let r=this.overlays.get(n.key);if(null!==r){let e=this.Qr.get(r.largestBatchId).delete(n.key);this.Qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new lp(t,n));let i=this.Qr.get(t);void 0===i&&(i=oX(),this.Qr.set(t,i)),this.Qr.set(t,i.add(n.key))}}class us{constructor(){this.sessionToken=aM.EMPTY_BYTE_STRING}getSessionToken(e){return aw.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,aw.resolve()}}class ua{constructor(){this.$r=new aN(uo.Ur),this.Kr=new aN(uo.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){let n=new uo(e,t);this.$r=this.$r.add(n),this.Kr=this.Kr.add(n)}Gr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.zr(new uo(e,t))}jr(e,t){e.forEach(e=>this.removeReference(e,t))}Hr(e){let t=new ap(new ah([])),n=new uo(t,e),r=new uo(t,e+1),i=[];return this.Kr.forEachInRange([n,r],e=>{this.zr(e),i.push(e.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){let t=new ap(new ah([])),n=new uo(t,e),r=new uo(t,e+1),i=oX();return this.Kr.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){let t=new uo(e,0),n=this.$r.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class uo{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return ap.comparator(e.key,t.key)||ar(e.Zr,t.Zr)}static Wr(e,t){return ar(e.Zr,t.Zr)||ap.comparator(e.key,t.key)}}class ul{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new aN(uo.Ur)}checkEmpty(e){return aw.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){let i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new ld(i,t,n,r);for(let t of(this.mutationQueue.push(s),r))this.Xr=this.Xr.add(new uo(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return aw.resolve(s)}lookupMutationBatch(e,t){return aw.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){let n=this.ti(t+1),r=n<0?0:n;return aw.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return aw.resolve(0===this.mutationQueue.length?-1:this.nr-1)}getAllMutationBatches(e){return aw.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let n=new uo(t,0),r=new uo(t,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([n,r],e=>{let t=this.ei(e.Zr);i.push(t)}),aw.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new aN(ar);return t.forEach(e=>{let t=new uo(e,0),r=new uo(e,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([t,r],e=>{n=n.add(e.Zr)})}),aw.resolve(this.ni(n))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,i=n;ap.isDocumentKey(i)||(i=i.child(""));let s=new uo(new ap(i),0),a=new aN(ar);return this.Xr.forEachWhile(e=>{let t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Zr)),!0)},s),aw.resolve(this.ni(a))}ni(e){let t=[];return e.forEach(e=>{let n=this.ei(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){sJ(0===this.ri(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Xr;return aw.forEach(t.mutations,r=>{let i=new uo(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Xr=n})}sr(e){}containsKey(e,t){let n=new uo(t,0),r=this.Xr.firstAfterOrEqual(n);return aw.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,aw.resolve()}ri(e,t){return this.ti(e)}ti(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ei(e){let t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class uu{constructor(e){this.ii=e,this.docs=new aI(ap.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ii(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let n=this.docs.get(t);return aw.resolve(n?n.document.mutableCopy():os.newInvalidDocument(t))}getEntries(e,t){let n=oz;return t.forEach(e=>{let t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():os.newInvalidDocument(e))}),aw.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=oz,s=t.path,a=new ap(s.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){let{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||0>=function(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n||0!==(n=ap.comparator(e.documentKey,t.documentKey))?n:ar(e.largestBatchId,t.largestBatchId)}(new ag(a.readTime,a.key,-1),n)||(r.has(a.key)||oF(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return aw.resolve(i)}getAllFromCollectionGroup(e,t,n,r){sK(9500)}si(e,t){return aw.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new uc(this)}getSize(e){return aw.resolve(this.size)}}class uc extends ue{constructor(e){super(),this.Br=e}applyChanges(e){let t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Br.addEntry(e,r)):this.Br.removeEntry(n)}),aw.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}class uh{constructor(e){this.persistence=e,this.oi=new oV(e=>oI(e),oA),this.lastRemoteSnapshotVersion=al.min(),this.highestTargetId=0,this._i=0,this.ai=new ua,this.targetCount=0,this.ui=l4.cr()}forEachTarget(e,t){return this.oi.forEach((e,n)=>t(n)),aw.resolve()}getLastRemoteSnapshotVersion(e){return aw.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return aw.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),aw.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this._i&&(this._i=t),aw.resolve()}Tr(e){this.oi.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ui=new l4(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,aw.resolve()}updateTargetData(e,t){return this.Tr(t),aw.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,aw.resolve()}removeTargets(e,t,n){let r=0,i=[];return this.oi.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.oi.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),aw.waitFor(i).next(()=>r)}getTargetCount(e){return aw.resolve(this.targetCount)}getTargetData(e,t){let n=this.oi.get(t)||null;return aw.resolve(n)}addMatchingKeys(e,t,n){return this.ai.Gr(t,n),aw.resolve()}removeMatchingKeys(e,t,n){this.ai.jr(t,n);let r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),aw.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),aw.resolve()}getMatchingKeysForTargetId(e,t){let n=this.ai.Yr(t);return aw.resolve(n)}containsKey(e,t){return aw.resolve(this.ai.containsKey(t))}}class ud{constructor(e,t){this.ci={},this.overlays={},this.li=new av(0),this.hi=!1,this.hi=!0,this.Pi=new us,this.referenceDelegate=e(this),this.Ti=new uh(this),this.indexManager=new l1,this.remoteDocumentCache=new uu(e=>this.referenceDelegate.Ii(e)),this.serializer=new lZ(t),this.Ei=new ur(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ui,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ci[e.toKey()];return n||(n=new ul(t,this.referenceDelegate),this.ci[e.toKey()]=n),n}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,n){sq("MemoryPersistence","Starting transaction:",e);let r=new uf(this.li.next());return this.referenceDelegate.di(),n(r).next(e=>this.referenceDelegate.Ai(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ri(e,t){return aw.or(Object.values(this.ci).map(n=>()=>n.containsKey(e,t)))}}class uf extends am{constructor(e){super(),this.currentSequenceNumber=e}}class up{constructor(e){this.persistence=e,this.Vi=new ua,this.mi=null}static fi(e){return new up(e)}get gi(){if(this.mi)return this.mi;throw sK(60996)}addReference(e,t,n){return this.Vi.addReference(n,t),this.gi.delete(n.toString()),aw.resolve()}removeReference(e,t,n){return this.Vi.removeReference(n,t),this.gi.add(n.toString()),aw.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),aw.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(e=>this.gi.add(e.toString()));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.gi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return aw.forEach(this.gi,n=>{let r=ap.fromPath(n);return this.pi(e,r).next(e=>{e||t.removeEntry(r,al.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(e=>{e?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return aw.or([()=>aw.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class ug{constructor(e,t){this.persistence=e,this.yi=new oV(e=>(function(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t+="\x01\x01"),t=function(e,t){let n=t,r=e.length;for(let t=0;t<r;t++){let r=e.charAt(t);switch(r){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=r}}return n}(e.get(n),t);return t+"\x01\x01"})(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=new l9(this,t)}static fi(e,t){return new ug(e,t)}di(){}Ai(e){return aw.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){let t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}br(e){let t=0;return this.yr(e,e=>{t++}).next(()=>t)}yr(e,t){return aw.forEach(this.yi,(n,r)=>this.Dr(e,n,r).next(e=>e?aw.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0,r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.si(e,r=>this.Dr(e,r,t).next(e=>{e||(n++,i.removeEntry(r,al.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),aw.resolve()}removeTarget(e,t){let n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.yi.set(n,e.currentSequenceNumber),aw.resolve()}removeReference(e,t,n){return this.yi.set(n,e.currentSequenceNumber),aw.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),aw.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=function e(t){switch(aZ(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let n=aj(t);return n?16+e(n):16;case 5:return 2*t.stringValue.length;case 6:return aL(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(t.arrayValue.values||[]).reduce((t,n)=>t+e(n),0);case 10:case 11:var r;let i;return r=t.mapValue,i=0,a_(r.fields,(t,n)=>{i+=t.length+e(n)}),i;default:throw sK(13486,{value:t})}}(e.data.value)),t}Dr(e,t,n){return aw.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.yi.get(t);return aw.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class um{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ds=n,this.As=r}static Rs(e,t){let n=oX(),r=oX();for(let e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new um(e,t.fromCache,n,r)}}class uy{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class uw{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=!function(){var e;let t=null==(e=te())?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(Q.process)}catch(e){return!1}}()&&navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")?8:function(e){let t=e.match(/Android ([\d.]+)/i);return Number(t?t[1].split(".").slice(0,2).join("."):"-1")}(tc())>0?6:4}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,n,r){let i={result:null};return this.ws(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.bs(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;let n=new uy;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.fs)return this.Ds(e,t,n,r.size)})}).next(()=>i.result)}Ds(e,t,n,r){return n.documentReadCount<this.gs?(sY()<=A.DEBUG&&sq("QueryEngine","SDK will not create cache indexes for query:",oB(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),aw.resolve()):(sY()<=A.DEBUG&&sq("QueryEngine","Query:",oB(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ps*r?(sY()<=A.DEBUG&&sq("QueryEngine","The SDK decides to create cache indexes for query:",oB(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,oM(t))):aw.resolve())}ws(e,t){if(oR(t))return aw.resolve(null);let n=oM(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(n=oM(t=oP(t,null,"F"))),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{let i=oX(...r);return this.ys.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{let s=this.vs(t,r);return this.Cs(t,s,i,n.readTime)?this.ws(e,oP(t,null,"F")):this.Fs(e,s,t,n)}))})))}bs(e,t,n,r){return oR(t)||r.isEqual(al.min())?aw.resolve(null):this.ys.getDocuments(e,n).next(i=>{let s=this.vs(t,i);return this.Cs(t,s,n,r)?aw.resolve(null):(sY()<=A.DEBUG&&sq("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),oB(t)),this.Fs(e,s,t,function(e,t){let n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1;return new ag(al.fromTimestamp(1e9===r?new ao(n+1,0):new ao(n,r)),ap.empty(),-1)}(r,0)).next(e=>e))})}vs(e,t){let n=new aN(oU(e));return t.forEach((t,r)=>{oF(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;let i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return sY()<=A.DEBUG&&sq("QueryEngine","Using full collection scan to execute query:",oB(t)),this.ys.getDocumentsMatchingQuery(e,t,ag.min(),n)}Fs(e,t,n,r){return this.ys.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const uE="LocalStore";class uv{constructor(e,t,n,r){this.persistence=e,this.Ms=t,this.serializer=r,this.xs=new aI(ar),this.Os=new oV(e=>oI(e),oA),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(n)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new un(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}async function uC(e,t){return await e.persistence.runTransaction("Handle user change","readonly",n=>{let r;return e.mutationQueue.getAllMutationBatches(n).next(i=>(r=i,e.Ls(t),e.mutationQueue.getAllMutationBatches(n))).next(t=>{let i=[],s=[],a=oX();for(let e of r)for(let t of(i.push(e.batchId),e.mutations))a=a.add(t.key);for(let e of t)for(let t of(s.push(e.batchId),e.mutations))a=a.add(t.key);return e.localDocuments.getDocuments(n,a).next(e=>({ks:e,removedBatchIds:i,addedBatchIds:s}))})})}function uS(e){return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}async function u_(e,t,n){let r=e.xs.get(t);try{n||await e.persistence.runTransaction("Release target",n?"readwrite":"readwrite-primary",t=>e.persistence.referenceDelegate.removeTarget(t,r))}catch(e){if(!aE(e))throw e;sq(uE,`Failed to update sequence numbers for target ${t}: ${e}`)}e.xs=e.xs.remove(t),e.Os.delete(r.target)}function ub(e,t,n){let r=al.min(),i=oX();return e.persistence.runTransaction("Execute query","readwrite",s=>(function(e,t,n){let r=e.Os.get(n);return void 0!==r?aw.resolve(e.xs.get(r)):e.Ti.getTargetData(t,n)})(e,s,oM(t)).next(t=>{if(t)return r=t.lastLimboFreeSnapshotVersion,e.Ti.getMatchingKeysForTargetId(s,t.targetId).next(e=>{i=e})}).next(()=>e.Ms.getDocumentsMatchingQuery(s,t,n?r:al.min(),n?i:oX())).next(n=>{var r,s,a;let o;return r=e,s=t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2)),a=n,o=r.Ns.get(s)||al.min(),a.forEach((e,t)=>{t.readTime.compareTo(o)>0&&(o=t.readTime)}),r.Ns.set(s,o),{documents:n,$s:i}}))}class uI{constructor(){this.activeTargetIds=o$}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})}}class uA{constructor(){this.xo=new uI,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,n){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new uI,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class uT{No(e){}shutdown(){}}const uN="ConnectivityMonitor";class uR{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){for(let e of(sq(uN,"Network connectivity changed: AVAILABLE"),this.Qo))e(0)}qo(){for(let e of(sq(uN,"Network connectivity changed: UNAVAILABLE"),this.Qo))e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let uD=null;function uO(){return null===uD?uD=0x10000000+Math.round(0x80000000*Math.random()):uD++,"0x"+uD.toString(16)}const uM="RestConnection",uk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class uP{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${n}/databases/${r}`,this.Go=this.databaseId.database===aG?`project_id=${n}`:`project_id=${n}&database_id=${r}`}zo(e,t,n,r,i){let s=uO(),a=this.jo(e,t.toUriEncodedString());sq(uM,`Sending RPC '${e}' ${s}:`,a,n);let o={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(o,r,i);let{host:l}=new URL(a),u=ts(l);return this.Jo(e,a,o,n,u).then(t=>(sq(uM,`Received RPC '${e}' ${s}: `,t),t),t=>{throw s$(uM,`RPC '${e}' ${s} failed with error: `,t,"url: ",a,"request:",n),t})}Yo(e,t,n,r,i,s){return this.zo(e,t,n,r,i)}Ho(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+sW,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}jo(e,t){let n=uk[e];return`${this.Ko}/v1/${t}:${n}`}terminate(){}}class ux{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}const uL="WebChannelConnection";class uB extends uP{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){let s=uO();return new Promise((i,a)=>{let o=new R;o.setWithCredentials(!0),o.listenOnce(O.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case M.NO_ERROR:let t=o.getResponseJson();sq(uL,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),i(t);break;case M.TIMEOUT:sq(uL,`RPC '${e}' ${s} timed out`),a(new s0(s1.DEADLINE_EXCEEDED,"Request time out"));break;case M.HTTP_ERROR:let n=o.getStatus();if(sq(uL,`RPC '${e}' ${s} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=null==e?void 0:e.error;if(t&&t.status&&t.message){let e=function(e){let t=e.toLowerCase().replace(/_/g,"-");return Object.values(s1).indexOf(t)>=0?t:s1.UNKNOWN}(t.status);a(new s0(e,t.message))}else a(new s0(s1.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new s0(s1.UNAVAILABLE,"Connection failed."));break;default:sK(9055,{h_:e,streamId:s,P_:o.getLastErrorCode(),T_:o.getLastError()})}}finally{sq(uL,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(r);sq(uL,`RPC '${e}' ${s} sending request:`,r),o.send(t,"POST",l,n,15)})}I_(e,t,n){let r=uO(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=L(),a=x(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Ho(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;let u=i.join("");sq(uL,`Creating RPC '${e}' stream ${r}: ${u}`,o);let c=s.createWebChannel(u,o);this.E_(c);let h=!1,d=!1,f=new ux({Zo:t=>{d?sq(uL,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(sq(uL,`Opening RPC '${e}' stream ${r} transport.`),c.open(),h=!0),sq(uL,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},Xo:()=>c.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(c,D.EventType.OPEN,()=>{d||(sq(uL,`RPC '${e}' stream ${r} transport opened.`),f.__())}),p(c,D.EventType.CLOSE,()=>{d||(d=!0,sq(uL,`RPC '${e}' stream ${r} transport closed`),f.u_(),this.d_(c))}),p(c,D.EventType.ERROR,t=>{d||(d=!0,s$(uL,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),f.u_(new s0(s1.UNAVAILABLE,"The operation could not be completed")))}),p(c,D.EventType.MESSAGE,t=>{var n;if(!d){let i=t.data[0];sJ(!!i,16349);let s=(null==i?void 0:i.error)||(null==(n=i[0])?void 0:n.error);if(s){sq(uL,`RPC '${e}' stream ${r} received error:`,s);let t=s.status,n=function(e){let t=V[e];if(void 0!==t)return lm(t)}(t),i=s.message;void 0===n&&(n=s1.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,f.u_(new s0(n,i)),c.close()}else sq(uL,`RPC '${e}' stream ${r} received:`,i),f.c_(i)}}),p(a,P.STAT_EVENT,t=>{t.stat===k.PROXY?sq(uL,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===k.NOPROXY&&sq(uL,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.a_()},0),f}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}function uF(){return"undefined"!=typeof document?document:null}function uU(e){return new lP(e,!0)}class uV{constructor(e,t,n=1e3,r=1.5,i=6e4){this.xi=e,this.timerId=t,this.A_=n,this.R_=r,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();let t=Math.floor(this.m_+this.w_()),n=Math.max(0,Date.now()-this.g_),r=Math.max(0,t-n);r>0&&sq("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){null!==this.f_&&(this.f_.skipDelay(),this.f_=null)}cancel(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}const uz="PersistentStream";class uj{constructor(e,t,n,r,i,s,a,o){this.xi=e,this.S_=n,this.D_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new uV(e,t)}O_(){return 1===this.state||5===this.state||this.N_()}N_(){return 2===this.state||3===this.state}start(){this.M_=0,4!==this.state?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&null===this.C_&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,4!==e?this.x_.reset():t&&t.code===s1.RESOURCE_EXHAUSTED?(sX(t.toString()),sX("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===s1.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;let e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.v_===t&&this.z_(e,n)},t=>{e(()=>{let e=new s0(s1.UNKNOWN,"Fetching auth token failed: "+t.message);return this.j_(e)})})}z_(e,t){let n=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{n(()=>this.listener.e_())}),this.stream.n_(()=>{n(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(e=>{n(()=>this.j_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.M_?this.J_(e):this.onNext(e))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return sq(uz,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(sq(uz,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uH extends uj{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();let t=function(e,t){let n;if("targetChange"in t){var r,i;t.targetChange;let s="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:sK(39313,{state:r}),a=t.targetChange.targetIds||[],o=(i=t.targetChange.resumeToken,e.useProto3Json?(sJ(void 0===i||"string"==typeof i,58123),aM.fromBase64String(i||"")):(sJ(void 0===i||i instanceof so||i instanceof Uint8Array,16193),aM.fromUint8Array(i||new Uint8Array))),l=t.targetChange.cause;n=new lA(s,a,o,l&&new s0(void 0===l.code?s1.UNKNOWN:lm(l.code),l.message||"")||null)}else if("documentChange"in t){t.documentChange;let r=t.documentChange;r.document,r.document.name,r.document.updateTime;let i=lH(e,r.document.name),s=lF(r.document.updateTime),a=r.document.createTime?lF(r.document.createTime):al.min(),o=new oi({mapValue:{fields:r.document.fields}}),l=os.newFoundDocument(i,s,a,o);n=new lb(r.targetIds||[],r.removedTargetIds||[],l.key,l)}else if("documentDelete"in t){t.documentDelete;let r=t.documentDelete;r.document;let i=lH(e,r.document),s=r.readTime?lF(r.readTime):al.min(),a=os.newNoDocument(i,s);n=new lb([],r.removedTargetIds||[],a.key,a)}else if("documentRemove"in t){t.documentRemove;let r=t.documentRemove;r.document;let i=lH(e,r.document);n=new lb([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return sK(11601,{Vt:t});{t.filter;let e=t.filter;e.targetId;let{count:r=0,unchangedNames:i}=e,s=new lg(r,i);n=new lI(e.targetId,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return al.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?al.min():t.readTime?lF(t.readTime):al.min()}(e);return this.listener.Y_(t,n)}Z_(e){let t={};t.database=lG(this.serializer),t.addTarget=function(e,t){let n,r=t.target;if((n=oT(r)?{documents:{documents:[lW(e,r.path)]}}:{query:function(e,t){var n,r;let i,s={structuredQuery:{}},a=t.path;null!==t.collectionGroup?(i=a,s.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=a.popLast(),s.structuredQuery.from=[{collectionId:a.lastSegment()}]),s.parent=lW(e,i);let o=function(e){if(0!==e.length)return function e(t){return t instanceof oh?function(e){if("=="===e.op){if(a9(e.value))return{unaryFilter:{field:lX(e.field),op:"IS_NAN"}};if(a7(e.value))return{unaryFilter:{field:lX(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(a9(e.value))return{unaryFilter:{field:lX(e.field),op:"IS_NOT_NAN"}};if(a7(e.value))return{unaryFilter:{field:lX(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lX(e.field),op:lM[e.op],value:e.value}}}(t):t instanceof od?function(t){let n=t.getFilters().map(t=>e(t));return 1===n.length?n[0]:{compositeFilter:{op:lk[t.op],filters:n}}}(t):sK(54877,{filter:t})}(od.create(e,"and"))}(t.filters);o&&(s.structuredQuery.where=o);let l=function(e){if(0!==e.length)return e.map(e=>({field:lX(e.field),direction:lO[e.dir]}))}(t.orderBy);l&&(s.structuredQuery.orderBy=l);let u=lx(e,t.limit);return null!==u&&(s.structuredQuery.limit=u),t.startAt&&(s.structuredQuery.startAt={before:(n=t.startAt).inclusive,values:n.position}),t.endAt&&(s.structuredQuery.endAt={before:!(r=t.endAt).inclusive,values:r.position}),{gt:s,parent:i}}(e,r).gt}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=lB(e,t.resumeToken);let r=lx(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(al.min())>0){n.readTime=lL(e,t.snapshotVersion.toTimestamp());let r=lx(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);let n=function(e,t){let n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return sK(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Q_(t)}X_(e){let t={};t.database=lG(this.serializer),t.removeTarget=e,this.Q_(t)}}class uW extends uj{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return sJ(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,sJ(!e.writeResults||0===e.writeResults.length,55816),this.listener.na()}onNext(e){var t,n;sJ(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();let r=(t=e.writeResults,n=e.commitTime,t&&t.length>0?(sJ(void 0!==n,14353),t.map(e=>{let t;return(t=e.updateTime?lF(e.updateTime):lF(n)).isEqual(al.min())&&(t=lF(n)),new o7(t,e.transformResults||[])})):[]),i=lF(e.commitTime);return this.listener.ra(i,r)}ia(){let e={};e.database=lG(this.serializer),this.Q_(e)}ta(e){let t={streamToken:this.lastStreamToken,writes:e.map(e=>(function(e,t){var n;let r;if(t instanceof ls)r={update:lq(e,t.key,t.value)};else if(t instanceof lc)r={delete:lj(e,t.key)};else if(t instanceof la)r={update:lq(e,t.key,t.data),updateMask:function(e){let t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}(t.fieldMask)};else{if(!(t instanceof lh))return sK(16599,{ft:t.type});r={verify:lj(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(e=>(function(e,t){let n=t.transform;if(n instanceof o1)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof o0)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof o3)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof o6)return{fieldPath:t.field.canonicalString(),increment:n.Re};throw sK(20930,{transform:t.transform})})(0,e))),t.precondition.isNone||(r.currentDocument=void 0!==(n=t.precondition).updateTime?{updateTime:lL(e,n.updateTime.toTimestamp())}:void 0!==n.exists?{exists:n.exists}:sK(27497)),r})(this.serializer,e))};this.Q_(t)}}class uG{}class uY extends uG{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.sa=!1}oa(){if(this.sa)throw new s0(s1.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,n,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.zo(e,lV(t,n),r,i,s)).catch(e=>{throw"FirebaseError"===e.name?(e.code===s1.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new s0(s1.UNKNOWN,e.toString())})}Yo(e,t,n,r,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Yo(e,lV(t,n),r,s,a,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===s1.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new s0(s1.UNKNOWN,e.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class uq{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){0===this._a&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){"Online"===this.state?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,"Online"===e&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(sX(t),this.ua=!1):sq("OnlineStateTracker",t)}Ta(){null!==this.aa&&(this.aa.cancel(),this.aa=null)}}const uX="RemoteStore";class u${constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(e=>{n.enqueueAndForget(async()=>{u4(this)&&(sq(uX,"Restarting streams for network reachability change."),await async function(e){e.da.add(4),await uK(e),e.Va.set("Unknown"),e.da.delete(4),await uQ(e)}(this))})}),this.Va=new uq(n,r)}}async function uQ(e){if(u4(e))for(let t of e.Aa)await t(!0)}async function uK(e){for(let t of e.Aa)await t(!1)}function uZ(e,t){e.Ea.has(t.targetId)||(e.Ea.set(t.targetId,t),u3(e)?u2(e):cc(e).N_()&&u1(e,t))}function uJ(e,t){let n=cc(e);e.Ea.delete(t),n.N_()&&u0(e,t),0===e.Ea.size&&(n.N_()?n.k_():u4(e)&&e.Va.set("Unknown"))}function u1(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(al.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}cc(e).Z_(t)}function u0(e,t){e.ma.Ke(t),cc(e).X_(t)}function u2(e){e.ma=new lN({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),cc(e).start(),e.Va.ca()}function u3(e){return u4(e)&&!cc(e).O_()&&e.Ea.size>0}function u4(e){return 0===e.da.size}async function u6(e){e.Va.set("Online")}async function u8(e){e.Ea.forEach((t,n)=>{u1(e,t)})}async function u5(e,t){e.ma=void 0,u3(e)?(e.Va.Pa(t),u2(e)):e.Va.set("Unknown")}async function u7(e,t,n){if(e.Va.set("Online"),t instanceof lA&&2===t.state&&t.cause)try{await async function(e,t){let n=t.cause;for(let r of t.targetIds)e.Ea.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ea.delete(r),e.ma.removeTarget(r))}(e,t)}catch(n){sq(uX,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await u9(e,n)}else if(t instanceof lb?e.ma.Xe(t):t instanceof lI?e.ma.ot(t):e.ma.nt(t),!n.isEqual(al.min()))try{let t=await uS(e.localStore);n.compareTo(t)>=0&&await function(e,t){let n=e.ma.It(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){let i=e.Ea.get(r);i&&e.Ea.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{let r=e.Ea.get(t);if(!r)return;e.Ea.set(t,r.withResumeToken(aM.EMPTY_BYTE_STRING,r.snapshotVersion)),u0(e,t);let i=new lK(r.target,t,n,r.sequenceNumber);u1(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){sq(uX,"Failed to raise snapshot:",t),await u9(e,t)}}async function u9(e,t,n){if(!aE(t))throw t;e.da.add(1),await uK(e),e.Va.set("Offline"),n||(n=()=>uS(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{sq(uX,"Retrying IndexedDB access"),await n(),e.da.delete(1),await uQ(e)})}function ce(e,t){return t().catch(n=>u9(e,n,t))}async function ct(e){var t;let n=ch(e),r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:-1;for(;u4(t=e)&&t.Ia.length<10;)try{let t=await function(e,t){return e.persistence.runTransaction("Get next mutation batch","readonly",n=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}(e.localStore,r);if(null===t){0===e.Ia.length&&n.k_();break}r=t.batchId,function(e,t){e.Ia.push(t);let n=ch(e);n.N_()&&n.ea&&n.ta(t.mutations)}(e,t)}catch(t){await u9(e,t)}cn(e)&&cr(e)}function cn(e){return u4(e)&&!ch(e).O_()&&e.Ia.length>0}function cr(e){ch(e).start()}async function ci(e){ch(e).ia()}async function cs(e){let t=ch(e);for(let n of e.Ia)t.ta(n.mutations)}async function ca(e,t,n){let r=e.Ia.shift(),i=lf.from(r,t,n);await ce(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await ct(e)}async function co(e,t){t&&ch(e).ea&&await async function(e,t){var n;if(function(e){switch(e){case s1.OK:return sK(64938);case s1.CANCELLED:case s1.UNKNOWN:case s1.DEADLINE_EXCEEDED:case s1.RESOURCE_EXHAUSTED:case s1.INTERNAL:case s1.UNAVAILABLE:case s1.UNAUTHENTICATED:return!1;case s1.INVALID_ARGUMENT:case s1.NOT_FOUND:case s1.ALREADY_EXISTS:case s1.PERMISSION_DENIED:case s1.FAILED_PRECONDITION:case s1.ABORTED:case s1.OUT_OF_RANGE:case s1.UNIMPLEMENTED:case s1.DATA_LOSS:return!0;default:return sK(15467,{code:e})}}(n=t.code)&&n!==s1.ABORTED){let n=e.Ia.shift();ch(e).L_(),await ce(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await ct(e)}}(e,t),cn(e)&&cr(e)}async function cl(e,t){e.asyncQueue.verifyOperationInProgress(),sq(uX,"RemoteStore received new credentials");let n=u4(e);e.da.add(3),await uK(e),n&&e.Va.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.da.delete(3),await uQ(e)}async function cu(e,t){t?(e.da.delete(2),await uQ(e)):t||(e.da.add(2),await uK(e),e.Va.set("Unknown"))}function cc(e){var t,n,r;return e.fa||(t=e.datastore,n=e.asyncQueue,r={e_:u6.bind(null,e),n_:u8.bind(null,e),i_:u5.bind(null,e),Y_:u7.bind(null,e)},t.oa(),e.fa=new uH(n,t.connection,t.authCredentials,t.appCheckCredentials,t.serializer,r),e.Aa.push(async t=>{t?(e.fa.L_(),u3(e)?u2(e):e.Va.set("Unknown")):(await e.fa.stop(),e.ma=void 0)})),e.fa}function ch(e){var t,n,r;return e.ga||(t=e.datastore,n=e.asyncQueue,r={e_:()=>Promise.resolve(),n_:ci.bind(null,e),i_:co.bind(null,e),na:cs.bind(null,e),ra:ca.bind(null,e)},t.oa(),e.ga=new uW(n,t.connection,t.authCredentials,t.appCheckCredentials,t.serializer,r),e.Aa.push(async t=>{t?(e.ga.L_(),await ct(e)):(await e.ga.stop(),e.Ia.length>0&&(sq(uX,`Stopping write stream with ${e.Ia.length} pending writes`),e.Ia=[]))})),e.ga}class cd{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new s2,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){let s=new cd(e,t,Date.now()+n,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new s0(s1.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cf(e,t){if(sX("AsyncQueue",`${t}: ${e}`),aE(e))return new s0(s1.UNAVAILABLE,`${t}: ${e}`);throw e}class cp{static emptySet(e){return new cp(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ap.comparator(t.key,n.key):(e,t)=>ap.comparator(e.key,t.key),this.keyedMap=oH(),this.sortedSet=new aI(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof cp)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){let e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){let n=new cp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class cg{constructor(){this.pa=new aI(ap.comparator)}track(e){let t=e.doc.key,n=this.pa.get(t);n?0!==e.type&&3===n.type?this.pa=this.pa.insert(t,e):3===e.type&&1!==n.type?this.pa=this.pa.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.pa=this.pa.remove(t):1===e.type&&2===n.type?this.pa=this.pa.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):sK(63341,{Vt:e,ya:n}):this.pa=this.pa.insert(t,e)}wa(){let e=[];return this.pa.inorderTraversal((t,n)=>{e.push(n)}),e}}class cm{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){let s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new cm(e,t,cp.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ox(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class cy{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class cw{constructor(){this.queries=cE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){let n=e.queries;e.queries=cE(),n.forEach((e,n)=>{for(let e of n.Sa)e.onError(t)})}(this,new s0(s1.ABORTED,"Firestore shutting down"))}}function cE(){return new oV(e=>oL(e),ox)}async function cv(e,t){let n=3,r=t.query,i=e.queries.get(r);i?!i.Da()&&t.va()&&(n=2):(i=new cy,n=+!t.va());try{switch(n){case 0:i.ba=await e.onListen(r,!0);break;case 1:i.ba=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(n){let e=cf(n,`Initialization of query '${oB(t.query)}' failed`);return void t.onError(e)}e.queries.set(r,i),i.Sa.push(t),t.Fa(e.onlineState),i.ba&&t.Ma(i.ba)&&cb(e)}async function cC(e,t){let n=t.query,r=3,i=e.queries.get(n);if(i){let e=i.Sa.indexOf(t);e>=0&&(i.Sa.splice(e,1),0===i.Sa.length?r=+!t.va():!i.Da()&&t.va()&&(r=2))}switch(r){case 0:return e.queries.delete(n),e.onUnlisten(n,!0);case 1:return e.queries.delete(n),e.onUnlisten(n,!1);case 2:return e.onLastRemoteStoreUnlisten(n);default:return}}function cS(e,t){let n=!1;for(let r of t){let t=r.query,i=e.queries.get(t);if(i){for(let e of i.Sa)e.Ma(r)&&(n=!0);i.ba=r}}n&&cb(e)}function c_(e,t,n){let r=e.queries.get(t);if(r)for(let e of r.Sa)e.onError(n);e.queries.delete(t)}function cb(e){e.Ca.forEach(e=>{e.next()})}(H=j||(j={})).xa="default",H.Cache="cache";class cI{constructor(e,t,n){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=n||{}}Ma(e){if(!this.options.includeMetadataChanges){let t=[];for(let n of e.docChanges)3!==n.type&&t.push(n);e=new cm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){return!(e.fromCache&&this.va())||(!this.options.Qa||"Offline"===t)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}La(e){if(e.docChanges.length>0)return!0;let t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}qa(e){e=cm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==j.Cache}}class cA{constructor(e){this.key=e}}class cT{constructor(e){this.key=e}}class cN{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=oX(),this.mutatedKeys=oX(),this.Za=oU(e),this.Xa=new cp(this.Za)}get eu(){return this.Ha}tu(e,t){let n=t?t.nu:new cg,r=t?t.Xa:this.Xa,i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1,o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{let u=r.get(e),c=oF(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations),f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.ru(u,c)||(n.track({type:2,doc:c}),f=!0,(o&&this.Za(c,o)>0||l&&0>this.Za(c,l))&&(a=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(o||l)&&(a=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){let e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Xa:s,nu:n,Cs:a,mutatedKeys:i}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){let i=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;let s=e.nu.wa();s.sort((e,t)=>(function(e,t){let n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return sK(20277,{Vt:e})}};return n(e)-n(t)})(e.type,t.type)||this.Za(e.doc,t.doc)),this.iu(n),r=null!=r&&r;let a=t&&!r?this.su():[],o=0===this.Ya.size&&this.current&&!r?1:0,l=o!==this.Ja;return(this.Ja=o,0!==s.length||l)?{snapshot:new cm(this.query,e.Xa,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new cg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=e.current)}su(){if(!this.current)return[];let e=this.Ya;this.Ya=oX(),this.Xa.forEach(e=>{this._u(e.key)&&(this.Ya=this.Ya.add(e.key))});let t=[];return e.forEach(e=>{this.Ya.has(e)||t.push(new cT(e))}),this.Ya.forEach(n=>{e.has(n)||t.push(new cA(n))}),t}au(e){this.Ha=e.$s,this.Ya=oX();let t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return cm.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,0===this.Ja,this.hasCachedResults)}}const cR="SyncEngine";class cD{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class cO{constructor(e){this.key=e,this.cu=!1}}class cM{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.lu={},this.hu=new oV(e=>oL(e),ox),this.Pu=new Map,this.Tu=new Set,this.Iu=new aI(ap.comparator),this.Eu=new Map,this.du=new ua,this.Au={},this.Ru=new Map,this.Vu=l4.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return!0===this.mu}}async function ck(e,t,n=!0){let r,i=c1(e),s=i.hu.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.uu()):r=await cx(i,t,n,!0),r}async function cP(e,t){let n=c1(e);await cx(n,t,!0,!1)}async function cx(e,t,n,r){var i,s;let a,o=await (i=e.localStore,s=oM(t),i.persistence.runTransaction("Allocate target","readwrite",e=>{let t;return i.Ti.getTargetData(e,s).next(n=>n?(t=n,aw.resolve(t)):i.Ti.allocateTargetId(e).next(n=>(t=new lK(s,n,"TargetPurposeListen",e.currentSequenceNumber),i.Ti.addTargetData(e,t).next(()=>t))))}).then(e=>{let t=i.xs.get(e.targetId);return(null===t||e.snapshotVersion.compareTo(t.snapshotVersion)>0)&&(i.xs=i.xs.insert(e.targetId,e),i.Os.set(s,e.targetId)),e})),l=o.targetId,u=e.sharedClientState.addLocalQueryTarget(l,n);return r&&(a=await cL(e,t,l,"current"===u,o.resumeToken)),e.isPrimaryClient&&n&&uZ(e.remoteStore,o),a}async function cL(e,t,n,r,i){e.fu=(t,n,r)=>(async function(e,t,n,r){let i=t.view.tu(n);i.Cs&&(i=await ub(e.localStore,t.query,!1).then(({documents:e})=>t.view.tu(e,i)));let s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return c$(e,t.targetId,o.ou),o.snapshot})(e,t,n,r);let s=await ub(e.localStore,t,!0),a=new cN(t,s.$s),o=a.tu(s.documents),l=l_.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=a.applyChanges(o,e.isPrimaryClient,l);c$(e,n,u.ou);let c=new cD(t,n,a);return e.hu.set(t,c),e.Pu.has(n)?e.Pu.get(n).push(t):e.Pu.set(n,[t]),u.snapshot}async function cB(e,t,n){let r=e.hu.get(t),i=e.Pu.get(r.targetId);if(i.length>1)return e.Pu.set(r.targetId,i.filter(e=>!ox(e,t))),void e.hu.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(r.targetId),e.sharedClientState.isActiveQueryTarget(r.targetId)||await u_(e.localStore,r.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(r.targetId),n&&uJ(e.remoteStore,r.targetId),cq(e,r.targetId)}).catch(ay)):(cq(e,r.targetId),await u_(e.localStore,r.targetId,!0))}async function cF(e,t){let n=e.hu.get(t),r=e.Pu.get(n.targetId);e.isPrimaryClient&&1===r.length&&(e.sharedClientState.removeLocalQueryTarget(n.targetId),uJ(e.remoteStore,n.targetId))}async function cU(e,t,n){var r,i;let s=((r=e).remoteStore.remoteSyncer.applySuccessfulWrite=cH.bind(null,r),r.remoteStore.remoteSyncer.rejectFailedWrite=cW.bind(null,r),r);try{let e,r=await function(e,t){let n,r,i=ao.now(),s=t.reduce((e,t)=>e.add(t.key),oX());return e.persistence.runTransaction("Locally write mutations","readwrite",a=>{let o=oz,l=oX();return e.Bs.getEntries(a,s).next(e=>{(o=e).forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>e.localDocuments.getOverlayedDocuments(a,o)).next(r=>{n=r;let s=[];for(let e of t){let t=function(e,t){let n=null;for(let r of e.fieldTransforms){let e=t.data.field(r.field),i=oJ(r.transform,e||null);null!=i&&(null===n&&(n=oi.empty()),n.set(r.field,i))}return n||null}(e,n.get(e.key).overlayedDocument);null!=t&&s.push(new la(e.key,t,function e(t){let n=[];return a_(t.fields,(t,r)=>{let i=new af([t]);if(oe(r)){let t=e(r.mapValue).fields;if(0===t.length)n.push(i);else for(let e of t)n.push(i.child(e))}else n.push(i)}),new aD(n)}(t.value.mapValue),o9.exists(!0)))}return e.mutationQueue.addMutationBatch(a,i,s,t)}).next(t=>{r=t;let i=t.applyToLocalDocumentSet(n,l);return e.documentOverlayCache.saveOverlays(a,t.batchId,i)})}).then(()=>({batchId:r.batchId,changes:oW(n)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(r.batchId),i=r.batchId,(e=s.Au[s.currentUser.toKey()])||(e=new aI(ar)),e=e.insert(i,n),s.Au[s.currentUser.toKey()]=e,await cK(s,r.changes),await ct(s.remoteStore)}catch(t){let e=cf(t,"Failed to persist write");n.reject(e)}}async function cV(e,t){try{let n=await function(e,t){let n=t.snapshotVersion,r=e.xs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{var s,a,o;let l,u,c=e.Bs.newChangeBuffer({trackRemovals:!0});r=e.xs;let h=[];t.targetChanges.forEach((s,a)=>{var o;let l=r.get(a);if(!l)return;h.push(e.Ti.removeMatchingKeys(i,s.removedDocuments,a).next(()=>e.Ti.addMatchingKeys(i,s.addedDocuments,a)));let u=l.withSequenceNumber(i.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(aM.EMPTY_BYTE_STRING,al.min()).withLastLimboFreeSnapshotVersion(al.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,n)),r=r.insert(a,u),o=u,(0===l.resumeToken.approximateByteSize()||o.snapshotVersion.toMicroseconds()-l.snapshotVersion.toMicroseconds()>=3e8||s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size>0)&&h.push(e.Ti.updateTargetData(i,u))});let d=oz,f=oX();if(t.documentUpdates.forEach(n=>{t.resolvedLimboDocuments.has(n)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(i,n))}),h.push((s=i,a=c,o=t.documentUpdates,l=oX(),u=oX(),o.forEach(e=>l=l.add(e)),a.getEntries(s,l).next(e=>{let t=oz;return o.forEach((n,r)=>{let i=e.get(n);r.isFoundDocument()!==i.isFoundDocument()&&(u=u.add(n)),r.isNoDocument()&&r.version.isEqual(al.min())?(a.removeEntry(n,r.readTime),t=t.insert(n,r)):!i.isValidDocument()||r.version.compareTo(i.version)>0||0===r.version.compareTo(i.version)&&i.hasPendingWrites?(a.addEntry(r),t=t.insert(n,r)):sq(uE,"Ignoring outdated watch update for ",n,". Current version:",i.version," Watch version:",r.version)}),{qs:t,Qs:u}})).next(e=>{d=e.qs,f=e.Qs})),!n.isEqual(al.min())){let t=e.Ti.getLastRemoteSnapshotVersion(i).next(t=>e.Ti.setTargetsMetadata(i,i.currentSequenceNumber,n));h.push(t)}return aw.waitFor(h).next(()=>c.apply(i)).next(()=>e.localDocuments.getLocalViewOfDocuments(i,d,f)).next(()=>d)}).then(t=>(e.xs=r,t))}(e.localStore,t);t.targetChanges.forEach((t,n)=>{let r=e.Eu.get(n);r&&(sJ(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,22616),t.addedDocuments.size>0?r.cu=!0:t.modifiedDocuments.size>0?sJ(r.cu,14607):t.removedDocuments.size>0&&(sJ(r.cu,42227),r.cu=!1))}),await cK(e,n,t)}catch(e){await ay(e)}}function cz(e,t,n){var r;if(e.isPrimaryClient&&0===n||!e.isPrimaryClient&&1===n){let n,i=[];e.hu.forEach((e,n)=>{let r=n.view.Fa(t);r.snapshot&&i.push(r.snapshot)}),(r=e.eventManager).onlineState=t,n=!1,r.queries.forEach((e,r)=>{for(let e of r.Sa)e.Fa(t)&&(n=!0)}),n&&cb(r),i.length&&e.lu.Y_(i),e.onlineState=t,e.isPrimaryClient&&e.sharedClientState.setOnlineState(t)}}async function cj(e,t,n){e.sharedClientState.updateQueryState(t,"rejected",n);let r=e.Eu.get(t),i=r&&r.key;if(i){let n=new aI(ap.comparator);n=n.insert(i,os.newNoDocument(i,al.min()));let r=oX().add(i),s=new lS(al.min(),new Map,new aI(ar),n,r);await cV(e,s),e.Iu=e.Iu.remove(i),e.Eu.delete(t),cQ(e)}else await u_(e.localStore,t,!1).then(()=>cq(e,t,n)).catch(ay)}async function cH(e,t){var n;let r=t.batch.batchId;try{let i=await (n=e.localStore,n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{let r=t.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return(function(e,t,n,r){let i=n.batch,s=i.keys(),a=aw.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{let s=n.docVersions.get(e);sJ(null!==s,48541),0>t.version.compareTo(s)&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))})(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=oX();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))}));cY(e,r,null),cG(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await cK(e,i)}catch(e){await ay(e)}}async function cW(e,t,n){var r;try{let i=await (r=e.localStore,r.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let n;return r.mutationQueue.lookupMutationBatch(e,t).next(t=>(sJ(null!==t,37113),n=t.keys(),r.mutationQueue.removeMutationBatch(e,t))).next(()=>r.mutationQueue.performConsistencyCheck(e)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(e,n,t)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,n)).next(()=>r.localDocuments.getDocuments(e,n))}));cY(e,t,n),cG(e,t),e.sharedClientState.updateMutationState(t,"rejected",n),await cK(e,i)}catch(e){await ay(e)}}function cG(e,t){(e.Ru.get(t)||[]).forEach(e=>{e.resolve()}),e.Ru.delete(t)}function cY(e,t,n){let r=e.Au[e.currentUser.toKey()];if(r){let i=r.get(t);i&&(n?i.reject(n):i.resolve(),r=r.remove(t)),e.Au[e.currentUser.toKey()]=r}}function cq(e,t,n=null){for(let r of(e.sharedClientState.removeLocalQueryTarget(t),e.Pu.get(t)))e.hu.delete(r),n&&e.lu.gu(r,n);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach(t=>{e.du.containsKey(t)||cX(e,t)})}function cX(e,t){e.Tu.delete(t.path.canonicalString());let n=e.Iu.get(t);null!==n&&(uJ(e.remoteStore,n),e.Iu=e.Iu.remove(t),e.Eu.delete(n),cQ(e))}function c$(e,t,n){for(let r of n)r instanceof cA?(e.du.addReference(r.key,t),function(e,t){let n=t.key,r=n.path.canonicalString();e.Iu.get(n)||e.Tu.has(r)||(sq(cR,"New document in limbo: "+n),e.Tu.add(r),cQ(e))}(e,r)):r instanceof cT?(sq(cR,"Document no longer in limbo: "+r.key),e.du.removeReference(r.key,t),e.du.containsKey(r.key)||cX(e,r.key)):sK(19791,{pu:r})}function cQ(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){let t=e.Tu.values().next().value;e.Tu.delete(t);let n=new ap(ah.fromString(t)),r=e.Vu.next();e.Eu.set(r,new cO(n)),e.Iu=e.Iu.insert(n,r),uZ(e.remoteStore,new lK(oM(new oN(n.path)),r,"TargetPurposeLimboResolution",av.le))}}async function cK(e,t,n){let r=[],i=[],s=[];e.hu.isEmpty()||(e.hu.forEach((a,o)=>{s.push(e.fu(o,t,n).then(t=>{var s;if((t||n)&&e.isPrimaryClient){let r=t?!t.fromCache:null==(s=null==n?void 0:n.targetChanges.get(o.targetId))?void 0:s.current;e.sharedClientState.updateQueryState(o.targetId,r?"current":"not-current")}if(t){r.push(t);let e=um.Rs(o.targetId,t);i.push(e)}}))}),await Promise.all(s),e.lu.Y_(r),await async function(e,t){try{await e.persistence.runTransaction("notifyLocalViewChanges","readwrite",n=>aw.forEach(t,t=>aw.forEach(t.ds,r=>e.persistence.referenceDelegate.addReference(n,t.targetId,r)).next(()=>aw.forEach(t.As,r=>e.persistence.referenceDelegate.removeReference(n,t.targetId,r)))))}catch(e){if(!aE(e))throw e;sq(uE,"Failed to update sequence numbers: "+e)}for(let n of t){let t=n.targetId;if(!n.fromCache){let n=e.xs.get(t),r=n.snapshotVersion,i=n.withLastLimboFreeSnapshotVersion(r);e.xs=e.xs.insert(t,i)}}}(e.localStore,i))}async function cZ(e,t){if(!e.currentUser.isEqual(t)){sq(cR,"User change. New user:",t.toKey());let n=await uC(e.localStore,t);e.currentUser=t,e.Ru.forEach(e=>{e.forEach(e=>{e.reject(new s0(s1.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Ru.clear(),e.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await cK(e,n.ks)}}function cJ(e,t){let n=e.Eu.get(t);if(n&&n.cu)return oX().add(n.key);{let n=oX(),r=e.Pu.get(t);if(!r)return n;for(let t of r){let r=e.hu.get(t);n=n.unionWith(r.view.eu)}return n}}function c1(e){return e.remoteStore.remoteSyncer.applyRemoteEvent=cV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cJ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cj.bind(null,e),e.lu.Y_=cS.bind(null,e.eventManager),e.lu.gu=c_.bind(null,e.eventManager),e}class c0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=uU(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){var t,n;return t=this.persistence,n=new uw,new uv(t,n,e.initialUser,this.serializer)}Su(e){return new ud(up.fi,this.serializer)}bu(e){return new uA}async terminate(){var e,t;null==(e=this.gcScheduler)||e.stop(),null==(t=this.indexBackfillerScheduler)||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}c0.provider={build:()=>new c0};class c2 extends c0{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){return sJ(this.persistence.referenceDelegate instanceof ug,46915),new l7(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Su(e){let t=void 0!==this.cacheSizeBytes?l3.withCacheSize(this.cacheSizeBytes):l3.DEFAULT;return new ud(e=>ug.fi(e,t),this.serializer)}}class c3{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>cz(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=cZ.bind(null,this.syncEngine),await cu(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new cw}createDatastore(e){var t;let n=uU(e.databaseInfo.databaseId),r=new uB(e.databaseInfo);return t=e.authCredentials,new uY(t,e.appCheckCredentials,r,n)}createRemoteStore(e){var t,n;return t=this.localStore,n=this.datastore,new u$(t,n,e.asyncQueue,e=>cz(this.syncEngine,e,0),uR.C()?new uR:new uT)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){let o=new cM(e,t,n,r,i,s);return a&&(o.mu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){sq(uX,"RemoteStore shutting down."),e.da.add(5),await uK(e),e.Ra.shutdown(),e.Va.set("Unknown")}(this.remoteStore),null==(e=this.datastore)||e.terminate(),null==(t=this.eventManager)||t.terminate()}}c3.provider={build:()=>new c3};class c4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):sX("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const c6="FirestoreClient";class c8{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=sH.UNAUTHENTICATED,this.clientId=an.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{sq(c6,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(sq(c6,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new s2;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let t=cf(n,"Failed to shutdown persistence");e.reject(t)}}),e.promise}}async function c5(e,t){e.asyncQueue.verifyOperationInProgress(),sq(c6,"Initializing OfflineComponentProvider");let n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await uC(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function c7(e,t){e.asyncQueue.verifyOperationInProgress();let n=await c9(e);sq(c6,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>cl(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>cl(t.remoteStore,n)),e._onlineComponents=t}async function c9(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){sq(c6,"Using user provided OfflineComponentProvider");try{await c5(e,e._uninitializedComponentsProvider._offline)}catch(t){if(!("FirebaseError"===t.name?t.code===s1.FAILED_PRECONDITION||t.code===s1.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code))throw t;s$("Error using user provided cache. Falling back to memory cache: "+t),await c5(e,new c0)}}else sq(c6,"Using default OfflineComponentProvider"),await c5(e,new c2(void 0));return e._offlineComponents}async function he(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(sq(c6,"Using user provided OnlineComponentProvider"),await c7(e,e._uninitializedComponentsProvider._online)):(sq(c6,"Using default OnlineComponentProvider"),await c7(e,new c3))),e._onlineComponents}async function ht(e){let t=await he(e),n=t.eventManager;return n.onListen=ck.bind(null,t.syncEngine),n.onUnlisten=cB.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=cP.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=cF.bind(null,t.syncEngine),n}function hn(e){let t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const hr=new Map;function hi(e,t,n){if(!n)throw new s0(s1.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function hs(e){if(!ap.isDocumentKey(e))throw new s0(s1.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ha(e){if(ap.isDocumentKey(e))throw new s0(s1.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ho(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{var t;let n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}return"function"==typeof e?"a function":sK(12329,{type:typeof e})}function hl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new s0(s1.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=ho(e);throw new s0(s1.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}const hu="firestore.googleapis.com";class hc{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new s0(s1.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hu,this.ssl=!0}else this.host=e.host,this.ssl=null==(t=e.ssl)||t;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=0x2800000;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new s0(s1.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new s0(s1.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hn(null!=(n=e.experimentalLongPollingOptions)?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new s0(s1.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new s0(s1.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new s0(s1.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){var t,n;return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hh{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hc({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new s0(s1.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new s0(s1.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hc(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new s4;switch(e.type){case"firstParty":return new s7(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new s0(s1.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let t=hr.get(e);t&&(sq("ComponentProvider","Removing Datastore"),hr.delete(e),t.terminate())}(this),Promise.resolve()}}class hd{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new hd(this.firestore,e,this._query)}}class hf{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hf(this.firestore,e,this._key)}}class hp extends hd{constructor(e,t,n){super(e,t,new oN(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new hf(this.firestore,null,new ap(e))}withConverter(e){return new hp(this.firestore,e,this._path)}}function hg(e,t,...n){if(e=tC(e),hi("collection","path",t),e instanceof hh){let r=ah.fromString(t,...n);return ha(r),new hp(e,null,r)}{if(!(e instanceof hf||e instanceof hp))throw new s0(s1.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=e._path.child(ah.fromString(t,...n));return ha(r),new hp(e.firestore,null,r)}}function hm(e,t,...n){if(e=tC(e),1==arguments.length&&(t=an.newId()),hi("doc","path",t),e instanceof hh){let r=ah.fromString(t,...n);return hs(r),new hf(e,null,new ap(r))}{if(!(e instanceof hf||e instanceof hp))throw new s0(s1.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=e._path.child(ah.fromString(t,...n));return hs(r),new hf(e.firestore,e instanceof hp?e.converter:null,new ap(r))}}const hy="AsyncQueue";class hw{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new uV(this,"async_queue_retry"),this.rc=()=>{let e=uF();e&&sq(hy,"Visibility state changed to "+e.visibilityState),this.x_.b_()},this.sc=e;let t=uF();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;let t=uF();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});let t=new s2;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(0!==this.Ju.length){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!aE(e))throw e;sq(hy,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){let t=this.sc.then(()=>(this.ec=!0,e().catch(e=>{throw this.Xu=e,this.ec=!1,sX("INTERNAL UNHANDLED ERROR: ",hE(e)),e}).then(e=>(this.ec=!1,e))));return this.sc=t,t}enqueueAfterDelay(e,t,n){this.oc(),this.nc.indexOf(e)>-1&&(t=0);let r=cd.createAndSchedule(this,e,t,n,e=>this.uc(e));return this.Zu.push(r),r}oc(){this.Xu&&sK(47125,{cc:hE(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(let t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{for(let t of(this.Zu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs),this.Zu))if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){let t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function hE(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class hv extends hh{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new hw,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new hw(e),this._firestoreClient=void 0,await e}}}function hC(e){if(e._terminated)throw new s0(s1.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,n,r,i,s;let a=e._freezeSettings(),o=(i=e._databaseId,s=(null==(t=e._app)?void 0:t.options.appId)||"",new aW(i,s,e._persistenceKey,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,hn(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator));e._componentsProvider||(null==(n=a.localCache)?void 0:n._offlineComponentProvider)&&(null==(r=a.localCache)?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),e._firestoreClient=new c8(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(e){let t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}(e),e._firestoreClient}class hS{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hS(aM.fromBase64String(e))}catch(e){throw new s0(s1.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new hS(aM.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class h_{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new s0(s1.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new af(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class hb{constructor(e){this._methodName=e}}class hI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new s0(s1.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new s0(s1.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ar(this._lat,e._lat)||ar(this._long,e._long)}}class hA{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const hT=/^__.*__$/;class hN{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new la(e,this.data,this.fieldMask,t,this.fieldTransforms):new ls(e,this.data,t,this.fieldTransforms)}}function hR(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw sK(40011,{Ic:e})}}class hD{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Ec(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new hD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;let n=null==(t=this.path)?void 0:t.child(e),r=this.dc({path:n,Rc:!1});return r.Vc(e),r}mc(e){var t;let n=null==(t=this.path)?void 0:t.child(e),r=this.dc({path:n,Rc:!1});return r.Ec(),r}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return hV(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(0===e.length)throw this.gc("Document fields must not be empty");if(hR(this.Ic)&&hT.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class hO{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||uU(e)}bc(e,t,n,r=!1){return new hD({Ic:e,methodName:t,wc:n,path:af.emptyPath(),Rc:!1,yc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hM(e){let t=e._freezeSettings(),n=uU(e._databaseId);return new hO(e._databaseId,!!t.ignoreUndefinedProperties,n)}function hk(e,t,n,r,i,s={}){let a,o,l=e.bc(s.merge||s.mergeFields?2:0,t,n,i);hB("Data must be an object, but it was:",l,r);let u=hx(r,l);if(s.merge)a=new aD(l.fieldMask),o=l.fieldTransforms;else if(s.mergeFields){let e=[];for(let r of s.mergeFields){let i=function(e,t,n){if((t=tC(t))instanceof h_)return t._internalPath;if("string"==typeof t)return hU(e,t);throw hV("Field path arguments must be of type string or ",e,!1,void 0,n)}(t,r,n);if(!l.contains(i))throw new s0(s1.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);(function(e,t){return e.some(e=>e.isEqual(t))})(e,i)||e.push(i)}a=new aD(e),o=l.fieldTransforms.filter(e=>a.covers(e.field))}else a=null,o=l.fieldTransforms;return new hN(new oi(u),a,o)}function hP(e,t){if(hL(e=tC(e)))return hB("Unsupported field value:",t,e),hx(e,t);if(e instanceof hb)return function(e,t){if(!hR(t.Ic))throw t.gc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.gc(`${e._methodName}() is not currently supported inside arrays`);let n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Rc&&4!==t.Ic)throw t.gc("Nested arrays are not supported");let n=[],r=0;for(let i of e){let e=hP(i,t.fc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}return function(e,t){var n,r,i;if(null===(e=tC(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return n=t.serializer,"number"==typeof(i=r=e)&&Number.isInteger(i)&&!aC(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER?oK(r):oQ(n,r);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){let n=ao.fromDate(e);return{timestampValue:lL(t.serializer,n)}}if(e instanceof ao){let n=new ao(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:lL(t.serializer,n)}}if(e instanceof hI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof hS)return{bytesValue:lB(t.serializer,e._byteString)};if(e instanceof hf){let n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.gc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:lU(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof hA)return{mapValue:{fields:{[aq]:{stringValue:aQ},[aK]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.gc("VectorValues must only contain numeric values.");return oQ(t.serializer,e)})}}}}};throw t.gc(`Unsupported field value: ${ho(e)}`)}(e,t)}function hx(e,t){let n={};return ab(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):a_(e,(e,r)=>{let i=hP(r,t.Ac(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function hL(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ao||e instanceof hI||e instanceof hS||e instanceof hf||e instanceof hb||e instanceof hA)}function hB(e,t,n){if(!hL(n)||"object"!=typeof n||null===n||Object.getPrototypeOf(n)!==Object.prototype&&null!==Object.getPrototypeOf(n)){let r=ho(n);throw"an object"===r?t.gc(e+" a custom object"):t.gc(e+" "+r)}}const hF=RegExp("[~\\*/\\[\\]]");function hU(e,t,n){if(t.search(hF)>=0)throw hV(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new h_(...t.split("."))._internalPath}catch(r){throw hV(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function hV(e,t,n,r,i){let s=r&&!r.isEmpty(),a=void 0!==i,o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new s0(s1.INVALID_ARGUMENT,o+e+l)}class hz{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new hf(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){let e=new hj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(hH("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class hj extends hz{data(){return super.data()}}function hH(e,t){return"string"==typeof t?hU(e,t):t instanceof h_?t._internalPath:t._delegate._internalPath}class hW{}class hG extends hW{}class hY extends hG{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new hY(e,t,n)}_apply(e){let t=this._parse(e);return hQ(e._query,t),new hd(e.firestore,e.converter,ok(e._query,t))}_parse(e){let t=hM(e.firestore);return function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new s0(s1.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){h$(a,s);let t=[];for(let n of a)t.push(hX(r,e,n));o={arrayValue:{values:t}}}else o=hX(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||h$(a,s),o=function(e,t,n,r=!1){return hP(n,e.bc(r?4:3,t))}(n,t,a,"in"===s||"not-in"===s);return oh.create(i,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class hq extends hW{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new hq(e,t)}_parse(e){let t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:od.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;for(let e of t.getFlattenedFilters())hQ(n,e),n=ok(n,e)}(e._query,t),new hd(e.firestore,e.converter,ok(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function hX(e,t,n){if("string"==typeof(n=tC(n))){if(""===n)throw new s0(s1.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oD(t)&&-1!==n.indexOf("/"))throw new s0(s1.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=t.path.child(ah.fromString(n));if(!ap.isDocumentKey(r))throw new s0(s1.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return a6(e,new ap(r))}if(n instanceof hf)return a6(e,n._key);throw new s0(s1.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ho(n)}.`)}function h$(e,t){if(!Array.isArray(e)||0===e.length)throw new s0(s1.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function hQ(e,t){let n=function(e,t){for(let n of e)for(let e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new s0(s1.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new s0(s1.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class hK{convertValue(e,t="none"){switch(aZ(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ax(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(aL(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw sK(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let n={};return a_(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;return new hA(null==(r=null==(n=null==(t=e.fields)?void 0:t[aK].arrayValue)?void 0:n.values)?void 0:r.map(e=>ax(e.doubleValue)))}convertGeoPoint(e){return new hI(ax(e.latitude),ax(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":let n=aj(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(aH(e));default:return null}}convertTimestamp(e){let t=aP(e);return new ao(t.seconds,t.nanos)}convertDocumentKey(e,t){let n=ah.fromString(e);sJ(lQ(n),9688,{name:e});let r=new aY(n.get(1),n.get(3)),i=new ap(n.popFirst(5));return r.isEqual(t)||sX(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function hZ(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}class hJ{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class h1 extends hz{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new h0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let n=this._document.data.field(hH("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class h0 extends h1{data(e={}){return super.data(e)}}class h2{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new hJ(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new h0(this._firestore,this._userDataWriter,n.key,n,new hJ(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new s0(s1.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{let r=new h0(e._firestore,e._userDataWriter,n.doc.key,n.doc,new hJ(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{let r=new h0(e._firestore,e._userDataWriter,t.doc.key,t.doc,new hJ(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(s=(n=n.add(t.doc)).indexOf(t.doc.key)),{type:function(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return sK(61501,{type:e})}}(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function h3(e){e=hl(e,hf);let t=hl(e.firestore,hv);return(function(e,t,n={}){let r=new s2;return e.asyncQueue.enqueueAndForget(async()=>(function(e,t,n,r,i){let s=new c4({next:o=>{s.xu(),t.enqueueAndForget(()=>cC(e,a));let l=o.docs.has(n);!l&&o.fromCache?i.reject(new s0(s1.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new s0(s1.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new cI(new oN(n.path),s,{includeMetadataChanges:!0,Qa:!0});return cv(e,a)})(await ht(e),e.asyncQueue,t,n,r)),r.promise})(hC(t),e._key).then(n=>(function(e,t,n){let r=n.docs.get(t._key),i=new h4(e);return new h1(e,i,t._key,r,new hJ(n.hasPendingWrites,n.fromCache),t.converter)})(t,e,n))}class h4 extends hK{constructor(e){super(),this.firestore=e}convertBytes(e){return new hS(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new hf(this.firestore,null,t)}}function h6(e,t){var n=hC(e);let r=new s2;return n.asyncQueue.enqueueAndForget(async()=>cU(await he(n).then(e=>e.syncEngine),t,r)),r.promise}new WeakMap,function(e=!0){sW=t6,t1(new tS("firestore",(t,{instanceIdentifier:n,options:r})=>{let i=t.getProvider("app").getImmediate(),s=new hv(new s8(t.getProvider("auth-internal")),new ae(i,t.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new s0(s1.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new aY(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC").setMultipleInstances(!0)),t7(sz,sj,void 0),t7(sz,sj,"esm2017")}();const h8=t8({apiKey:"AIzaSyDrqVsR0gcGGudcPHWc7IkfhBm2QhCpFq4",authDomain:"cartiq-9fdf7.firebaseapp.com",projectId:"cartiq-9fdf7",storageBucket:"cartiq-9fdf7.firebasestorage.app",messagingSenderId:"1:192287325137:web:7ef842041c6353bf257ef0",appId:"1:192287325137:web:7ef842041c6353bf257ef0"}),h5=function(e=t5()){let t=t0(e,"auth");if(t.isInitialized())return t.getImmediate();let n=function(e,t){let n=t0(e,"auth");if(n.isInitialized()){let e=n.getImmediate();if(tp(n.getOptions(),null!=t?t:{}))return e;np(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:iJ,persistence:[im,r5,r7]}),r=tr("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){let e=new URL(r,location.origin);if(location.origin===e.origin){let t,r=(t=e.toString(),async e=>{let n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>i3)return;let i=null==n?void 0:n.token;i4!==i&&(i4=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});tC(n).beforeAuthStateChanged(r,()=>r(n.currentUser)),tC(n).onIdTokenChanged(e=>r(e),void 0,void 0)}}let i=tt("auth");return i&&function(e,t,n){let r=tC(e);nE(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");let i=r_(t),{host:s,port:a}=function(e){let t=r_(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let e=i[1];return{host:e,port:rb(r.substr(e.length+1))}}{let[e,t]=r.split(":");return{host:e,port:rb(t)}}}(t),o=null===a?"":`:${a}`,l={url:`${i}//${s}${o}/`},u=Object.freeze({host:s,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:!1})});if(!r._canInitEmulator){nE(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),nE(tp(l,r.config.emulator)&&tp(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,ts(s)?(ta(`${i}//${s}${o}`),tu("Auth",!0)):function(){function e(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(n,`http://${i}`),n}(h8),h7=function(e,t){let n=t0("object"==typeof e?e:t5(),"firestore").getImmediate({identifier:"string"==typeof e?e:aG});if(!n._initialized){let e=(e=>{let t=tt(e);if(!t)return;let n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&function(e,t,n,r={}){var i;e=hl(e,hh);let s=ts(t),a=e._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),l=`${t}:${n}`;s&&(ta(`https://${l}`),tu("Firestore",!0)),a.host!==hu&&a.host!==l&&s$("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},a),{host:l,ssl:s,emulatorOptions:r});if(!tp(u,o)&&(e._setSettings(u),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=sH.MOCK_USER;else{t=function(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[e7(JSON.stringify({alg:"none",type:"JWT"})),e7(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null==(i=e._app)?void 0:i.options.projectId);let s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new s0(s1.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new sH(s)}e._authCredentials=new s6(new s3(t,n))}}(n,...e)}return n}(h8);function h9(){let[e,t]=(0,en.useState)(!0),[n,r]=(0,en.useState)(""),[i,s]=(0,en.useState)(""),[a,o]=(0,en.useState)(""),[l,u]=(0,en.useState)(""),c=ek(),{loginUser:h}=(0,en.useContext)(e0),d=async()=>{try{let t;if(!n||!i||!e&&(!a||!l))return alert("Please fill in all required fields!");if(!e&&i!==a)return alert("Passwords do not match!");if(e){t=await (t2(h5.app)?Promise.reject(ny(h5)):r0(tC(h5),rV.credential(n,i)).catch(async e=>{throw"auth/password-does-not-meet-requirements"===e.code&&r2(h5),e})),alert("Login successful!");let e=t.user,r=hm(h7,"users",e.uid),s=await h3(r),a="";s.exists()&&(a=s.data().name),h({email:e.email,uid:e.uid,name:a})}else{let e=(t=await r3(h5,n,i)).user;await function(e,t,n){e=hl(e,hf);let r=hl(e.firestore,hv),i=hZ(e.converter,t,void 0);return h6(r,[hk(hM(r),"setDoc",e._key,i,null!==e.converter,void 0).toMutation(e._key,o9.none())])}(hm(h7,"users",e.uid),{name:l,email:n}),alert("Registered successfully!"),h({email:e.email,uid:e.uid,name:l})}c("/")}catch(e){console.error("Auth Error:",e),alert(e.message)}};return(0,et.jsx)("div",{className:"login-page",children:(0,et.jsxs)("div",{className:"login-card",children:[(0,et.jsxs)("div",{className:"form-heading",children:[(0,et.jsx)("div",{style:{fontSize:"2.5rem"},children:"CartIQ\uD83D\uDED2"}),(0,et.jsx)("h1",{children:e?"":"Join CartIQ"}),(0,et.jsx)("p",{children:e?"Smart shopping starts here.":"Create an account to begin your journey."})]}),!e&&(0,et.jsx)("input",{type:"text",placeholder:"\uD83D\uDC64 Full Name",className:"input",value:l,onChange:e=>u(e.target.value)}),(0,et.jsx)("input",{type:"email",placeholder:"\uD83D\uDCE7 Email",className:"input",value:n,onChange:e=>r(e.target.value)}),(0,et.jsx)("input",{type:"password",placeholder:"\uD83D\uDD10 Password",className:"input",value:i,onChange:e=>s(e.target.value)}),!e&&(0,et.jsx)("input",{type:"password",placeholder:"\uD83D\uDD12 Confirm Password",className:"input",value:a,onChange:e=>o(e.target.value)}),(0,et.jsx)("button",{onClick:d,className:"auth-btn",children:e?"Login":"Register"}),(0,et.jsx)("p",{onClick:()=>t(!e),className:"toggle-auth",children:e?"Don't have an account? Register here":"Already registered? Login"})]})})}function de(){return(0,et.jsxs)("nav",{className:"navbar",children:[(0,et.jsx)("div",{className:"nav-logo",children:"\uD83E\uDDE0 CartIQ"}),(0,et.jsxs)("ul",{className:"nav-links",children:[(0,et.jsx)("li",{children:(0,et.jsx)(e1,{to:"/dashboard",children:"Dashboard"})}),(0,et.jsx)("li",{children:(0,et.jsx)(e1,{to:"/home",children:"Home"})}),(0,et.jsx)("li",{children:(0,et.jsx)(e1,{to:"/payment-history",children:"Payment History"})}),(0,et.jsx)("li",{children:(0,et.jsx)(e1,{to:"/profile",children:"Profile"})}),(0,et.jsx)("li",{children:(0,et.jsx)(e1,{to:"/login",children:"Logout"})})]})]})}J("acw62"),J("acw62");var en=J("acw62");function dt(){let[e,t]=(0,en.useState)(!1),{user:n,cartItems:r}=(0,en.useContext)(e0),i=r.length,s=i>0?r[i-1]:null,a=r.reduce((e,t)=>e+t.price,0);return(0,et.jsxs)("div",{className:`info-panel ${e?"dark":""}`,children:[(0,et.jsxs)("div",{className:"info-top",children:[(0,et.jsxs)("div",{className:"greeting",children:["\uD83D\uDC4B Hello, ",n?.name||"Guest","!"]}),(0,et.jsxs)("div",{className:"actions",children:[(0,et.jsx)("button",{className:"theme-btn",onClick:()=>{t(!e),document.body.classList.toggle("dark-theme",!e)},children:e?"☀️ Light Mode":"\uD83C\uDF19 Dark Mode"}),(0,et.jsx)("button",{className:"notify-btn",children:"\uD83D\uDD14"})]})]}),(0,et.jsxs)("div",{className:"stats",children:[(0,et.jsxs)("div",{className:"stat",children:["\uD83D\uDED2 ",i," item",1!==i?"s":""," | ₹",a]}),(0,et.jsxs)("div",{className:"stat",children:["\uD83D\uDCE6 Last: ",s?`${s.name} \u{2013} \u{20B9}${s.price}`:"None"]}),(0,et.jsxs)("div",{className:"stat",children:["\uD83D\uDCB8 Saved: ₹",a]})]})]})}function dn(){return(0,et.jsxs)(et.Fragment,{children:[(0,et.jsx)(de,{}),(0,et.jsx)(dt,{}),(0,et.jsx)("div",{className:"dashboard",children:(0,et.jsx)("h1",{style:{padding:"20px",textAlign:"center"}})})]})}function dr(){return(0,et.jsxs)(et.Fragment,{children:[(0,et.jsx)(de,{}),(0,et.jsxs)("div",{className:"home",children:[(0,et.jsx)("h2",{children:"\uD83D\uDCDC Payment History"}),(0,et.jsx)("p",{children:"You haven't made any purchases yet."})]})]})}function di(){let{user:e}=(0,en.useContext)(e0);return(0,et.jsx)("div",{className:"profile-container",children:(0,et.jsxs)("div",{className:"profile-card",children:[(0,et.jsx)("img",{className:"profile-avatar-img",src:`https://ui-avatars.com/api/?name=${e?.name||"User"}&background=1a73e8&color=fff&size=128`,alt:"User Avatar"}),(0,et.jsxs)("h2",{children:["Welcome, ",e?.name||"User","!"]}),(0,et.jsxs)("p",{children:["Email: ",e?.email||"Not Available"]}),(0,et.jsx)("div",{className:"profile-divider"}),(0,et.jsx)("div",{className:"badge",children:"Verified Shopper ✅"})]})})}function ds(){let{logoutUser:e}=(0,en.useContext)(e0),t=ek();return(0,et.jsxs)("div",{className:"home-container",children:[(0,et.jsx)("h1",{children:"\uD83D\uDED2 Welcome to CartIQ!"}),(0,et.jsx)("p",{className:"subtitle",children:"Your smart cart companion – fast, easy, and queue-free \uD83D\uDE80"}),(0,et.jsxs)("div",{className:"tab-buttons",children:[(0,et.jsxs)("button",{onClick:()=>t("/scan"),children:["\uD83D\uDD0D Scan Items",(0,et.jsx)("br",{}),(0,et.jsx)("span",{className:"btn-subtext",children:"Start scanning products instantly"})]}),(0,et.jsxs)("button",{onClick:()=>t("/cart"),children:["\uD83E\uDDFA View Cart",(0,et.jsx)("br",{}),(0,et.jsx)("span",{className:"btn-subtext",children:"Check items you’ve added"})]}),(0,et.jsxs)("button",{onClick:()=>t("/payment"),children:["\uD83D\uDCB3 Payment",(0,et.jsx)("br",{}),(0,et.jsx)("span",{className:"btn-subtext",children:"Proceed to secure checkout"})]})]})]})}J("acw62");var en=(J("acw62"),J("acw62"),J("acw62"));(f=W||(W={}))[f.QR_CODE=0]="QR_CODE",f[f.AZTEC=1]="AZTEC",f[f.CODABAR=2]="CODABAR",f[f.CODE_39=3]="CODE_39",f[f.CODE_93=4]="CODE_93",f[f.CODE_128=5]="CODE_128",f[f.DATA_MATRIX=6]="DATA_MATRIX",f[f.MAXICODE=7]="MAXICODE",f[f.ITF=8]="ITF",f[f.EAN_13=9]="EAN_13",f[f.EAN_8=10]="EAN_8",f[f.PDF_417=11]="PDF_417",f[f.RSS_14=12]="RSS_14",f[f.RSS_EXPANDED=13]="RSS_EXPANDED",f[f.UPC_A=14]="UPC_A",f[f.UPC_E=15]="UPC_E",f[f.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION";var da=new Map([[W.QR_CODE,"QR_CODE"],[W.AZTEC,"AZTEC"],[W.CODABAR,"CODABAR"],[W.CODE_39,"CODE_39"],[W.CODE_93,"CODE_93"],[W.CODE_128,"CODE_128"],[W.DATA_MATRIX,"DATA_MATRIX"],[W.MAXICODE,"MAXICODE"],[W.ITF,"ITF"],[W.EAN_13,"EAN_13"],[W.EAN_8,"EAN_8"],[W.PDF_417,"PDF_417"],[W.RSS_14,"RSS_14"],[W.RSS_EXPANDED,"RSS_EXPANDED"],[W.UPC_A,"UPC_A"],[W.UPC_E,"UPC_E"],[W.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);(p=G||(G={}))[p.UNKNOWN=0]="UNKNOWN",p[p.URL=1]="URL",(g=Y||(Y={}))[g.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",g[g.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE";var dl=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[Y.SCAN_TYPE_CAMERA,Y.SCAN_TYPE_FILE],e}(),du=function(){function e(e,t){this.format=e,this.formatName=t}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!da.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,da.get(t))},e}(),dc=function(){function e(){}return e.createFromText=function(e){return{decodedText:e,result:{text:e}}},e.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},e}();(m=q||(q={}))[m.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",m[m.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",m[m.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR";var dh=function(){function e(){}return e.createFrom=function(e){return{errorMessage:e,type:q.UNKWOWN_ERROR}},e}(),dd=function(){function e(e){this.verbose=e}return e.prototype.log=function(e){this.verbose&&console.log(e)},e.prototype.warn=function(e){this.verbose&&console.warn(e)},e.prototype.logError=function(e,t){(this.verbose||!0===t)&&console.error(e)},e.prototype.logErrors=function(e){if(0===e.length)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},e}();function df(e){return null==e}var dp=function(){function e(){}return e.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},e.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),dg=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(e){return"Last Match: ".concat(e)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),dm=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),dy=function(){function e(){}return e.isMediaStreamConstraintsValid=function(e,t){if("object"!=typeof e){var n=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var r=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),i=Object.keys(e),s=0;s<i.length;s++){var a=i[s];if(r.has(a))return t.logError("".concat(a," is not supported videoConstaints."),!0),!1}return!0},e}(),dw={};(function(e){let t;var n,r,i,s,a,o,l,u,c,h,d,f,p,g,m,y,w,E,v,C,S,_,b=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},I=function(e){function t(){this.constructor=n}function n(t){var n,r,i,s,a=this.constructor,o=e.call(this,t)||this;return Object.defineProperty(o,"name",{value:a.name,enumerable:!1}),n=a.prototype,(r=Object.setPrototypeOf)?r(o,n):o.__proto__=n,void 0===i&&(i=o.constructor),(s=Error.captureStackTrace)&&s(o,i),o}return b(n,e),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t),n}(Error);class A extends I{constructor(e){super(e),this.message=e}getKind(){return this.constructor.kind}}A.kind="Exception";class T extends A{}T.kind="ArgumentException";class N extends A{}N.kind="IllegalArgumentException";class R{constructor(e){if(this.binarizer=e,null===e)throw new N("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return(null===this.matrix||void 0===this.matrix)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,n,r){let i=this.binarizer.getLuminanceSource().crop(e,t,n,r);return new R(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){let e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new R(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){let e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new R(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch(e){return""}}}class D extends A{static getChecksumInstance(){return new D}}D.kind="ChecksumException";class O{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class M{static arraycopy(e,t,n,r,i){for(;i--;)n[r++]=e[t++]}static currentTimeMillis(){return Date.now()}}class k extends A{}k.kind="IndexOutOfBoundsException";class P extends k{constructor(e,t){super(t),this.index=e,this.message=t}}P.kind="ArrayIndexOutOfBoundsException";class x{static fill(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t}static fillWithin(e,t,n,r){x.rangeCheck(e.length,t,n);for(let i=t;i<n;i++)e[i]=r}static rangeCheck(e,t,n){if(t>n)throw new N("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new P(t);if(n>e)throw new P(n)}static asList(...e){return e}static create(e,t,n){return Array.from({length:e}).map(e=>Array.from({length:t}).fill(n))}static createInt32Array(e,t,n){return Array.from({length:e}).map(e=>Int32Array.from({length:t}).fill(n))}static equals(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}static hashCode(e){if(null===e)return 0;let t=1;for(let n of e)t=31*t+n;return t}static fillUint8Array(e,t){for(let n=0;n!==e.length;n++)e[n]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){let n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)}static copyOfRange(e,t,n){let r=n-t,i=new Int32Array(r);return M.arraycopy(e,t,i,0,r),i}static binarySearch(e,t,n){void 0===n&&(n=x.numberComparator);let r=0,i=e.length-1;for(;r<=i;){let s=i+r>>1,a=n(t,e[s]);if(a>0)r=s+1;else{if(!(a<0))return s;i=s-1}}return-r-1}static numberComparator(e,t){return e-t}}class L{static numberOfTrailingZeros(e){let t;if(0===e)return 32;let n=31;return 0!=(t=e<<16)&&(n-=16,e=t),0!=(t=e<<8)&&(n-=8,e=t),0!=(t=e<<4)&&(n-=4,e=t),0!=(t=e<<2)&&(n-=2,e=t),n-(e<<1>>>31)}static numberOfLeadingZeros(e){if(0===e)return 32;let t=1;return e>>>16==0&&(t+=16,e<<=16),e>>>24==0&&(t+=8,e<<=8),e>>>28==0&&(t+=4,e<<=4),e>>>30==0&&(t+=2,e<<=2),t-=e>>>31}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e-=e>>>1&0x55555555,e=(e=(0x33333333&e)+(e>>>2&0x33333333))+(e>>>4)&0xf0f0f0f,e+=e>>>8,63&(e+=e>>>16)}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e,t){return parseInt(e,t)}}L.MIN_VALUE_32_BITS=-0x80000000,L.MAX_VALUE=Number.MAX_SAFE_INTEGER;class B{constructor(e,t){void 0===e?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,null==t?this.bits=B.makeArray(e):this.bits=t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>32*this.bits.length){let t=B.makeArray(e);M.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return(this.bits[Math.floor(e/32)]&1<<(31&e))!=0}set(e){this.bits[Math.floor(e/32)]|=1<<(31&e)}flip(e){this.bits[Math.floor(e/32)]^=1<<(31&e)}getNextSet(e){let t=this.size;if(e>=t)return t;let n=this.bits,r=Math.floor(e/32),i=n[r];i&=~((1<<(31&e))-1);let s=n.length;for(;0===i;){if(++r===s)return t;i=n[r]}let a=32*r+L.numberOfTrailingZeros(i);return a>t?t:a}getNextUnset(e){let t=this.size;if(e>=t)return t;let n=this.bits,r=Math.floor(e/32),i=~n[r];i&=~((1<<(31&e))-1);let s=n.length;for(;0===i;){if(++r===s)return t;i=~n[r]}let a=32*r+L.numberOfTrailingZeros(i);return a>t?t:a}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new N;if(t===e)return;let n=Math.floor(e/32),r=Math.floor(--t/32),i=this.bits;for(let s=n;s<=r;s++){let a=s>n?0:31&e,o=(2<<(s<r?31:31&t))-(1<<a);i[s]|=o}}clear(){let e=this.bits.length,t=this.bits;for(let n=0;n<e;n++)t[n]=0}isRange(e,t,n){if(t<e||e<0||t>this.size)throw new N;if(t===e)return!0;let r=Math.floor(e/32),i=Math.floor(--t/32),s=this.bits;for(let a=r;a<=i;a++){let o=a>r?0:31&e,l=(2<<(a<i?31:31&t))-(1<<o)|0;if((s[a]&l)!==(n?l:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(e,t){if(t<0||t>32)throw new N("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let n=t;n>0;n--)this.appendBit((e>>n-1&1)==1)}appendBitArray(e){let t=e.size;this.ensureCapacity(this.size+t);for(let n=0;n<t;n++)this.appendBit(e.get(n))}xor(e){if(this.size!==e.size)throw new N("Sizes don't match");let t=this.bits;for(let n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]}toBytes(e,t,n,r){for(let i=0;i<r;i++){let r=0;for(let t=0;t<8;t++)this.get(e)&&(r|=1<<7-t),e++;t[n+i]=r}}getBitArray(){return this.bits}reverse(){let e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits;for(let i=0;i<n;i++){let n=r[i];n=(n=(n=(n=(n=n>>1&0x55555555|(0x55555555&n)<<1)>>2&0x33333333|(0x33333333&n)<<2)>>4&0xf0f0f0f|(0xf0f0f0f&n)<<4)>>8&0xff00ff|(0xff00ff&n)<<8)>>16&65535|(65535&n)<<16,e[t-i]=n}if(this.size!==32*n){let t=32*n-this.size,r=e[0]>>>t;for(let i=1;i<n;i++){let n=e[i];r|=n<<32-t,e[i-1]=r,r=n>>>t}e[n-1]=r}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){return e instanceof B&&this.size===e.size&&x.equals(this.bits,e.bits)}hashCode(){return 31*this.size+x.hashCode(this.bits)}toString(){let e="";for(let t=0,n=this.size;t<n;t++)(7&t)==0&&(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new B(this.size,this.bits.slice())}}(n=f||(f={}))[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ASSUME_GS1=7]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS";var F=f;class U extends A{static getFormatInstance(){return new U}}U.kind="FormatException",(r=p||(p={}))[r.Cp437=0]="Cp437",r[r.ISO8859_1=1]="ISO8859_1",r[r.ISO8859_2=2]="ISO8859_2",r[r.ISO8859_3=3]="ISO8859_3",r[r.ISO8859_4=4]="ISO8859_4",r[r.ISO8859_5=5]="ISO8859_5",r[r.ISO8859_6=6]="ISO8859_6",r[r.ISO8859_7=7]="ISO8859_7",r[r.ISO8859_8=8]="ISO8859_8",r[r.ISO8859_9=9]="ISO8859_9",r[r.ISO8859_10=10]="ISO8859_10",r[r.ISO8859_11=11]="ISO8859_11",r[r.ISO8859_13=12]="ISO8859_13",r[r.ISO8859_14=13]="ISO8859_14",r[r.ISO8859_15=14]="ISO8859_15",r[r.ISO8859_16=15]="ISO8859_16",r[r.SJIS=16]="SJIS",r[r.Cp1250=17]="Cp1250",r[r.Cp1251=18]="Cp1251",r[r.Cp1252=19]="Cp1252",r[r.Cp1256=20]="Cp1256",r[r.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",r[r.UTF8=22]="UTF8",r[r.ASCII=23]="ASCII",r[r.Big5=24]="Big5",r[r.GB18030=25]="GB18030",r[r.EUC_KR=26]="EUC_KR";class V{constructor(e,t,n,...r){this.valueIdentifier=e,this.name=n,"number"==typeof t?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=r,V.VALUE_IDENTIFIER_TO_ECI.set(e,this),V.NAME_TO_ECI.set(n,this);let i=this.values;for(let e=0,t=i.length;e!==t;e++){let t=i[e];V.VALUES_TO_ECI.set(t,this)}for(let e of r)V.NAME_TO_ECI.set(e,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new U("incorect value");let t=V.VALUES_TO_ECI.get(e);if(void 0===t)throw new U("incorect value");return t}static getCharacterSetECIByName(e){let t=V.NAME_TO_ECI.get(e);if(void 0===t)throw new U("incorect value");return t}equals(e){return e instanceof V&&this.getName()===e.getName()}}V.VALUE_IDENTIFIER_TO_ECI=new Map,V.VALUES_TO_ECI=new Map,V.NAME_TO_ECI=new Map,V.Cp437=new V(p.Cp437,Int32Array.from([0,2]),"Cp437"),V.ISO8859_1=new V(p.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),V.ISO8859_2=new V(p.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),V.ISO8859_3=new V(p.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),V.ISO8859_4=new V(p.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),V.ISO8859_5=new V(p.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),V.ISO8859_6=new V(p.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),V.ISO8859_7=new V(p.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),V.ISO8859_8=new V(p.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),V.ISO8859_9=new V(p.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),V.ISO8859_10=new V(p.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),V.ISO8859_11=new V(p.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),V.ISO8859_13=new V(p.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),V.ISO8859_14=new V(p.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),V.ISO8859_15=new V(p.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),V.ISO8859_16=new V(p.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),V.SJIS=new V(p.SJIS,20,"SJIS","Shift_JIS"),V.Cp1250=new V(p.Cp1250,21,"Cp1250","windows-1250"),V.Cp1251=new V(p.Cp1251,22,"Cp1251","windows-1251"),V.Cp1252=new V(p.Cp1252,23,"Cp1252","windows-1252"),V.Cp1256=new V(p.Cp1256,24,"Cp1256","windows-1256"),V.UnicodeBigUnmarked=new V(p.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),V.UTF8=new V(p.UTF8,26,"UTF8","UTF-8"),V.ASCII=new V(p.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),V.Big5=new V(p.Big5,28,"Big5"),V.GB18030=new V(p.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),V.EUC_KR=new V(p.EUC_KR,30,"EUC_KR","EUC-KR");class z extends A{}z.kind="UnsupportedOperationException";class j{static decode(e,t){let n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):"undefined"==typeof TextDecoder||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}static shouldDecodeOnFallback(e){return!j.isBrowser()&&"ISO-8859-1"===e}static encode(e,t){let n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):"undefined"==typeof TextEncoder?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return"undefined"!=typeof window&&"[object Window]"===({}).toString.call(window)}static encodingName(e){return"string"==typeof e?e:e.getName()}static encodingCharacterSet(e){return e instanceof V?e:V.getCharacterSetECIByName(e)}static decodeFallback(e,t){let n=this.encodingCharacterSet(t);if(j.isDecodeFallbackSupported(n)){let t="";for(let n=0,r=e.length;n<r;n++){let r=e[n].toString(16);r.length<2&&(r="0"+r),t+="%"+r}return decodeURIComponent(t)}if(n.equals(V.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new z(`Encoding ${this.encodingName(t)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(V.UTF8)||e.equals(V.ISO8859_1)||e.equals(V.ASCII)}static encodeFallback(e){let t=btoa(unescape(encodeURIComponent(e))).split(""),n=[];for(let e=0;e<t.length;e++)n.push(t[e].charCodeAt(0));return new Uint8Array(n)}}class H{static castAsNonUtf8Char(e,t=null){let n=t?t.getName():this.ISO88591;return j.decode(new Uint8Array([e]),n)}static guessEncoding(e,t){if(null!=t&&void 0!==t.get(F.CHARACTER_SET))return t.get(F.CHARACTER_SET).toString();let n=e.length,r=!0,i=!0,s=!0,a=0,o=0,l=0,u=0,c=0,h=0,d=0,f=0,p=0,g=0,m=0,y=e.length>3&&239===e[0]&&187===e[1]&&191===e[2];for(let t=0;t<n&&(r||i||s);t++){let n=255&e[t];s&&(a>0?(128&n)==0?s=!1:a--:(128&n)!=0&&((64&n)==0?s=!1:(a++,(32&n)==0?o++:(a++,(16&n)==0?l++:(a++,(8&n)==0?u++:s=!1))))),r&&(n>127&&n<160?r=!1:n>159&&(n<192||215===n||247===n)&&m++),i&&(c>0?n<64||127===n||n>252?i=!1:c--:128===n||160===n||n>239?i=!1:n>160&&n<224?(h++,f=0,++d>p&&(p=d)):n>127?(c++,d=0,++f>g&&(g=f)):(d=0,f=0))}return(s&&a>0&&(s=!1),i&&c>0&&(i=!1),s&&(y||o+l+u>0))?H.UTF8:i&&(H.ASSUME_SHIFT_JIS||p>=3||g>=3)?H.SHIFT_JIS:r&&i?2===p&&2===h||10*m>=n?H.SHIFT_JIS:H.ISO88591:r?H.ISO88591:i?H.SHIFT_JIS:s?H.UTF8:H.PLATFORM_DEFAULT_ENCODING}static format(e,...t){let n=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(e,r,i,s,a,o){let l;if("%%"===e)return"%";if(void 0===t[++n])return;e=s?parseInt(s.substr(1)):void 0;let u=a?parseInt(a.substr(1)):void 0;switch(o){case"s":l=t[n];break;case"c":l=t[n][0];break;case"f":l=parseFloat(t[n]).toFixed(e);break;case"p":l=parseFloat(t[n]).toPrecision(e);break;case"e":l=parseFloat(t[n]).toExponential(e);break;case"x":l=parseInt(t[n]).toString(u||16);break;case"d":l=parseFloat(parseInt(t[n],u||10).toPrecision(e)).toFixed(0)}l="object"==typeof l?JSON.stringify(l):(+l).toString(u);let c=parseInt(i),h=i&&i[0]+""=="0"?"0":" ";for(;l.length<c;)l=void 0!==r?l+h:h+l;return l})}static getBytes(e,t){return j.encode(e,t)}static getCharCode(e,t=0){return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}H.SHIFT_JIS=V.SJIS.getName(),H.GB2312="GB2312",H.ISO88591=V.ISO8859_1.getName(),H.EUC_JP="EUC_JP",H.UTF8=V.UTF8.getName(),H.PLATFORM_DEFAULT_ENCODING=H.UTF8,H.ASSUME_SHIFT_JIS=!1;class W{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return"string"==typeof e?this.value+=e.toString():this.encoding?this.value+=H.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,n){for(let r=t;t<t+n;r++)this.append(e[r]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class G{constructor(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,null==t&&(t=e),this.height=t,e<1||t<1)throw new N("Both dimensions must be greater than 0");null==n&&(n=Math.floor((e+31)/32)),this.rowSize=n,null==r&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){let t=e.length,n=e[0].length,r=new G(n,t);for(let i=0;i<t;i++){let t=e[i];for(let e=0;e<n;e++)t[e]&&r.set(e,i)}return r}static parseFromString(e,t,n){if(null===e)throw new N("stringRepresentation cannot be null");let r=Array(e.length),i=0,s=0,a=-1,o=0,l=0;for(;l<e.length;)if("\n"===e.charAt(l)||"\r"===e.charAt(l)){if(i>s){if(-1===a)a=i-s;else if(i-s!==a)throw new N("row lengths do not match");s=i,o++}l++}else if(e.substring(l,l+t.length)===t)l+=t.length,r[i]=!0,i++;else if(e.substring(l,l+n.length)===n)l+=n.length,r[i]=!1,i++;else throw new N("illegal character encountered: "+e.substring(l));if(i>s){if(-1===a)a=i-s;else if(i-s!==a)throw new N("row lengths do not match");o++}let u=new G(a,o);for(let e=0;e<i;e++)r[e]&&u.set(Math.floor(e%a),Math.floor(e/a));return u}get(e,t){let n=t*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(31&e)&1)!=0}set(e,t){let n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(31&e)}unset(e,t){let n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(31&e))}flip(e,t){let n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(31&e)}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new N("input matrix dimensions do not match");let t=new B(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits;for(let i=0,s=this.height;i<s;i++){let s=i*n,a=e.getRow(i,t).getBitArray();for(let e=0;e<n;e++)r[s+e]^=a[e]}}clear(){let e=this.bits,t=e.length;for(let n=0;n<t;n++)e[n]=0}setRegion(e,t,n,r){if(t<0||e<0)throw new N("Left and top must be nonnegative");if(r<1||n<1)throw new N("Height and width must be at least 1");let i=e+n,s=t+r;if(s>this.height||i>this.width)throw new N("The region must fit inside the matrix");let a=this.rowSize,o=this.bits;for(let n=t;n<s;n++){let t=n*a;for(let n=e;n<i;n++)o[t+Math.floor(n/32)]|=1<<(31&n)}}getRow(e,t){null==t||t.getSize()<this.width?t=new B(this.width):t.clear();let n=this.rowSize,r=this.bits,i=e*n;for(let e=0;e<n;e++)t.setBulk(32*e,r[i+e]);return t}setRow(e,t){M.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){let e=this.getWidth(),t=this.getHeight(),n=new B(e),r=new B(e);for(let e=0,i=Math.floor((t+1)/2);e<i;e++)n=this.getRow(e,n),r=this.getRow(t-1-e,r),n.reverse(),r.reverse(),this.setRow(e,r),this.setRow(t-1-e,n)}getEnclosingRectangle(){let e=this.width,t=this.height,n=this.rowSize,r=this.bits,i=e,s=t,a=-1,o=-1;for(let e=0;e<t;e++)for(let t=0;t<n;t++){let l=r[e*n+t];if(0!==l){if(e<s&&(s=e),e>o&&(o=e),32*t<i){let e=0;for(;l<<31-e==0;)e++;32*t+e<i&&(i=32*t+e)}if(32*t+31>a){let e=31;for(;l>>>e==0;)e--;32*t+e>a&&(a=32*t+e)}}}return a<i||o<s?null:Int32Array.from([i,s,a-i+1,o-s+1])}getTopLeftOnBit(){let e=this.rowSize,t=this.bits,n=0;for(;n<t.length&&0===t[n];)n++;if(n===t.length)return null;let r=n/e,i=n%e*32,s=t[n],a=0;for(;s<<31-a==0;)a++;return i+=a,Int32Array.from([i,r])}getBottomRightOnBit(){let e=this.rowSize,t=this.bits,n=t.length-1;for(;n>=0&&0===t[n];)n--;if(n<0)return null;let r=Math.floor(n/e),i=32*Math.floor(n%e),s=t[n],a=31;for(;s>>>a==0;)a--;return i+=a,Int32Array.from([i,r])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){return e instanceof G&&this.width===e.width&&this.height===e.height&&this.rowSize===e.rowSize&&x.equals(this.bits,e.bits)}hashCode(){let e=this.width;return 31*(e=31*(e=31*(e=31*e+this.width)+this.height)+this.rowSize)+x.hashCode(this.bits)}toString(e="X ",t="  ",n="\n"){return this.buildToString(e,t,n)}buildToString(e,t,n){let r=new W;for(let i=0,s=this.height;i<s;i++){for(let n=0,s=this.width;n<s;n++)r.append(this.get(n,i)?e:t);r.append(n)}return r.toString()}clone(){return new G(this.width,this.height,this.rowSize,this.bits.slice())}}class Y extends A{static getNotFoundInstance(){return new Y}}Y.kind="NotFoundException";class q extends O{constructor(e){super(e),this.luminances=q.EMPTY,this.buckets=new Int32Array(q.LUMINANCE_BUCKETS)}getBlackRow(e,t){let n=this.getLuminanceSource(),r=n.getWidth();null==t||t.getSize()<r?t=new B(r):t.clear(),this.initArrays(r);let i=n.getRow(e,this.luminances),s=this.buckets;for(let e=0;e<r;e++)s[(255&i[e])>>q.LUMINANCE_SHIFT]++;let a=q.estimateBlackPoint(s);if(r<3)for(let e=0;e<r;e++)(255&i[e])<a&&t.set(e);else{let e=255&i[0],n=255&i[1];for(let s=1;s<r-1;s++){let r=255&i[s+1];(4*n-e-r)/2<a&&t.set(s),e=n,n=r}}return t}getBlackMatrix(){let e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight(),r=new G(t,n);this.initArrays(t);let i=this.buckets;for(let r=1;r<5;r++){let s=Math.floor(n*r/5),a=e.getRow(s,this.luminances),o=Math.floor(4*t/5);for(let e=Math.floor(t/5);e<o;e++){let t=255&a[e];i[t>>q.LUMINANCE_SHIFT]++}}let s=q.estimateBlackPoint(i),a=e.getMatrix();for(let e=0;e<n;e++){let n=e*t;for(let i=0;i<t;i++)(255&a[n+i])<s&&r.set(i,e)}return r}createBinarizer(e){return new q(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));let t=this.buckets;for(let e=0;e<q.LUMINANCE_BUCKETS;e++)t[e]=0}static estimateBlackPoint(e){let t=e.length,n=0,r=0,i=0;for(let s=0;s<t;s++)e[s]>i&&(r=s,i=e[s]),e[s]>n&&(n=e[s]);let s=0,a=0;for(let n=0;n<t;n++){let t=n-r,i=e[n]*t*t;i>a&&(s=n,a=i)}if(r>s){let e=r;r=s,s=e}if(s-r<=t/16)throw new Y;let o=s-1,l=-1;for(let t=s-1;t>r;t--){let i=t-r,a=i*i*(s-t)*(n-e[t]);a>l&&(o=t,l=a)}return o<<q.LUMINANCE_SHIFT}}q.LUMINANCE_BITS=5,q.LUMINANCE_SHIFT=8-q.LUMINANCE_BITS,q.LUMINANCE_BUCKETS=1<<q.LUMINANCE_BITS,q.EMPTY=Uint8ClampedArray.from([0]);class X extends q{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;let e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight();if(t>=X.MINIMUM_DIMENSION&&n>=X.MINIMUM_DIMENSION){let r=e.getMatrix(),i=t>>X.BLOCK_SIZE_POWER;(t&X.BLOCK_SIZE_MASK)!=0&&i++;let s=n>>X.BLOCK_SIZE_POWER;(n&X.BLOCK_SIZE_MASK)!=0&&s++;let a=X.calculateBlackPoints(r,i,s,t,n),o=new G(t,n);X.calculateThresholdForBlock(r,i,s,t,n,a,o),this.matrix=o}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new X(e)}static calculateThresholdForBlock(e,t,n,r,i,s,a){let o=i-X.BLOCK_SIZE,l=r-X.BLOCK_SIZE;for(let i=0;i<n;i++){let u=i<<X.BLOCK_SIZE_POWER;u>o&&(u=o);let c=X.cap(i,2,n-3);for(let n=0;n<t;n++){let i=n<<X.BLOCK_SIZE_POWER;i>l&&(i=l);let o=X.cap(n,2,t-3),h=0;for(let e=-2;e<=2;e++){let t=s[c+e];h+=t[o-2]+t[o-1]+t[o]+t[o+1]+t[o+2]}let d=h/25;X.thresholdBlock(e,i,u,d,r,a)}}}static cap(e,t,n){return e<t?t:e>n?n:e}static thresholdBlock(e,t,n,r,i,s){for(let a=0,o=n*i+t;a<X.BLOCK_SIZE;a++,o+=i)for(let i=0;i<X.BLOCK_SIZE;i++)(255&e[o+i])<=r&&s.set(t+i,n+a)}static calculateBlackPoints(e,t,n,r,i){let s=i-X.BLOCK_SIZE,a=r-X.BLOCK_SIZE,o=Array(n);for(let i=0;i<n;i++){o[i]=new Int32Array(t);let n=i<<X.BLOCK_SIZE_POWER;n>s&&(n=s);for(let s=0;s<t;s++){let t=s<<X.BLOCK_SIZE_POWER;t>a&&(t=a);let l=0,u=255,c=0;for(let i=0,s=n*r+t;i<X.BLOCK_SIZE;i++,s+=r){for(let t=0;t<X.BLOCK_SIZE;t++){let n=255&e[s+t];l+=n,n<u&&(u=n),n>c&&(c=n)}if(c-u>X.MIN_DYNAMIC_RANGE)for(i++,s+=r;i<X.BLOCK_SIZE;i++,s+=r)for(let t=0;t<X.BLOCK_SIZE;t++)l+=255&e[s+t]}let h=l>>2*X.BLOCK_SIZE_POWER;if(c-u<=X.MIN_DYNAMIC_RANGE&&(h=u/2,i>0&&s>0)){let e=(o[i-1][s]+2*o[i][s-1]+o[i-1][s-1])/4;u<e&&(h=e)}o[i][s]=h}}return o}}X.BLOCK_SIZE_POWER=3,X.BLOCK_SIZE=1<<X.BLOCK_SIZE_POWER,X.BLOCK_SIZE_MASK=X.BLOCK_SIZE-1,X.MINIMUM_DIMENSION=5*X.BLOCK_SIZE,X.MIN_DYNAMIC_RANGE=24;class ${constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,n,r){throw new z("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new z("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new z("This luminance source does not support rotation by 45 degrees.")}toString(){let e=new Uint8ClampedArray(this.width),t=new W;for(let n=0;n<this.height;n++){let r=this.getRow(n,e);for(let e=0;e<this.width;e++){let n,i=255&r[e];n=i<64?"#":i<128?"+":i<192?".":" ",t.append(n)}t.append("\n")}return t.toString()}}class K extends ${constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){let n=this.delegate.getRow(e,t),r=this.getWidth();for(let e=0;e<r;e++)n[e]=255-(255&n[e]);return n}getMatrix(){let e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t);for(let r=0;r<t;r++)n[r]=255-(255&e[r]);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,n,r){return new K(this.delegate.crop(e,t,n,r))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new K(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new K(this.delegate.rotateCounterClockwise45())}}class Z extends ${constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=Z.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){let t=e.getContext("2d").getImageData(0,0,e.width,e.height);return Z.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,n){let r=new Uint8ClampedArray(t*n);for(let t=0,n=0,i=e.length;t<i;t+=4,n++){let i;if(0===e[t+3])i=255;else{let n=e[t];i=306*n+601*e[t+1]+117*e[t+2]+512>>10}r[n]=i}return r}getRow(e,t){if(e<0||e>=this.getHeight())throw new N("Requested row is outside the image: "+e);let n=this.getWidth(),r=e*n;return null===t?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,n,r){return super.crop(e,t,n,r),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){let e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){let t=this.getTempCanvasElement(),n=t.getContext("2d"),r=e*Z.DEGREE_TO_RADIANS,i=this.canvas.width,s=this.canvas.height,a=Math.ceil(Math.abs(Math.cos(r))*i+Math.abs(Math.sin(r))*s),o=Math.ceil(Math.abs(Math.sin(r))*i+Math.abs(Math.cos(r))*s);return t.width=a,t.height=o,n.translate(a/2,o/2),n.rotate(r),n.drawImage(this.canvas,-(i/2),-(s/2)),this.buffer=Z.makeBufferFromCanvasImageData(t),this}invert(){return new K(this)}}Z.DEGREE_TO_RADIANS=Math.PI/180;class J{constructor(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ee=(globalThis||Q||self||window||void 0)&&(globalThis||Q||self||window||void 0).__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})};class et{constructor(e,t=500,n){this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!=typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return ee(this,void 0,void 0,function*(){if(!this.hasNavigator)throw Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw Error("Can't enumerate devices, method not supported.");let e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(let n of e){let e="video"===n.kind?"videoinput":n.kind;if("videoinput"!==e)continue;let r=n.deviceId||n.id,i={deviceId:r,label:n.label||`Video device ${t.length+1}`,kind:e,groupId:n.groupId};t.push(i)}return t})}getVideoInputDevices(){return ee(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(e=>new J(e.deviceId,e.label))})}findDeviceById(e){return ee(this,void 0,void 0,function*(){let t=yield this.listVideoInputDevices();return t?t.find(t=>t.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return ee(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return ee(this,void 0,void 0,function*(){return this.reset(),yield this.decodeOnceFromConstraints({video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},t)})}decodeOnceFromConstraints(e,t){return ee(this,void 0,void 0,function*(){let n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(n,t)})}decodeOnceFromStream(e,t){return ee(this,void 0,void 0,function*(){this.reset();let n=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(n)})}decodeFromInputVideoDeviceContinuously(e,t,n){return ee(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,n)})}decodeFromVideoDevice(e,t,n){return ee(this,void 0,void 0,function*(){return yield this.decodeFromConstraints({video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},t,n)})}decodeFromConstraints(e,t,n){return ee(this,void 0,void 0,function*(){let r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(r,t,n)})}decodeFromStream(e,t,n){return ee(this,void 0,void 0,function*(){this.reset();let r=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(r,n)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return ee(this,void 0,void 0,function*(){let n=this.prepareVideoElement(t);return this.addVideoSource(n,e),this.videoElement=n,this.stream=e,yield this.playVideoOnLoadAsync(n),n})}playVideoOnLoadAsync(e){return new Promise((t,n)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return ee(this,void 0,void 0,function*(){if(this.isVideoPlaying(e))return void console.warn("Trying to play video that is already playing.");try{yield e.play()}catch(e){console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){let n=document.getElementById(e);if(!n)throw new T(`element with id '${e}' not found`);if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new T(`element with id '${e}' must be an ${t} element`);return n}decodeFromImage(e,t){if(!e&&!t)throw new T("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new T("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,n){if(void 0===e&&void 0===t)throw new T("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)}decodeFromImageElement(e){if(!e)throw new T("An image element must be provided.");this.reset();let t=this.prepareImageElement(e);return this.imageElement=t,this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t)}decodeFromVideoElement(e){let t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){let n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)}_decodeFromVideoElementSetup(e){if(!e)throw new T("A video element must be provided.");this.reset();let t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new T("An URL must be provided.");this.reset();let t=this.prepareImageElement();this.imageElement=t;let n=this._decodeOnLoadImage(t);return t.src=e,n}decodeFromVideoUrl(e){if(!e)throw new T("An URL must be provided.");this.reset();let t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n}decodeFromVideoUrlContinuously(e,t){if(!e)throw new T("An URL must be provided.");this.reset();let n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r}_decodeOnLoadImage(e){return new Promise((t,n)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,n),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return ee(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return ee(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!!e.complete&&0!==e.naturalWidth}prepareImageElement(e){let t;return void 0===e&&((t=document.createElement("img")).width=200,t.height=200),"string"==typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return e||"undefined"==typeof document||((t=document.createElement("video")).width=200,t.height=200),"string"==typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e,t=!0,n=!0){this._stopAsyncDecode=!1;let r=(i,s)=>{if(this._stopAsyncDecode){s(new Y("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{let t=this.decode(e);i(t)}catch(o){let e=t&&o instanceof Y,a=o instanceof D||o instanceof U;if(e||a&&n)return setTimeout(r,this._timeBetweenDecodingAttempts,i,s);s(o)}};return new Promise((e,t)=>r(e,t))}decodeContinuously(e,t){this._stopContinuousDecode=!1;let n=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{let r=this.decode(e);t(r,null),setTimeout(n,this.timeBetweenScansMillis)}catch(i){t(null,i);let e=i instanceof D||i instanceof U,r=i instanceof Y;(e||r)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(e){let t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return 0!==e.videoWidth}drawFrameOnCanvas(e,t,n){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t,n=this.captureCanvasContext){t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){return this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e),new R(new X(new Z(this.getCaptureCanvas(e))))}getCaptureCanvasContext(e){if(!this.captureCanvasContext){let t=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=t}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){let t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){let t,n;if("undefined"==typeof document)return this._destroyCaptureCanvas(),null;let r=document.createElement("canvas");return void 0!==e&&(e instanceof HTMLVideoElement?(t=e.videoWidth,n=e.videoHeight):e instanceof HTMLImageElement&&(t=e.naturalWidth||e.width,n=e.naturalHeight||e.height)),r.style.width=t+"px",r.style.height=n+"px",r.width=t,r.height=n,r}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(void 0!==this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),void 0!==this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),void 0!==this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch(n){e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch(t){e.src=""}this.videoElement.removeAttribute("src")}}class en{constructor(e,t,n=null==t?0:8*t.length,r,i,s=M.currentTimeMillis()){this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=i,this.timestamp=s,this.text=e,this.rawBytes=t,null==n?this.numBits=null==t?0:8*t.length:this.numBits=n,this.resultPoints=r,this.format=i,this.resultMetadata=null,null==s?this.timestamp=M.currentTimeMillis():this.timestamp=s}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){null!==e&&(null===this.resultMetadata?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){let t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){let n=Array(t.length+e.length);M.arraycopy(t,0,n,0,t.length),M.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}(i=g||(g={}))[i.AZTEC=0]="AZTEC",i[i.CODABAR=1]="CODABAR",i[i.CODE_39=2]="CODE_39",i[i.CODE_93=3]="CODE_93",i[i.CODE_128=4]="CODE_128",i[i.DATA_MATRIX=5]="DATA_MATRIX",i[i.EAN_8=6]="EAN_8",i[i.EAN_13=7]="EAN_13",i[i.ITF=8]="ITF",i[i.MAXICODE=9]="MAXICODE",i[i.PDF_417=10]="PDF_417",i[i.QR_CODE=11]="QR_CODE",i[i.RSS_14=12]="RSS_14",i[i.RSS_EXPANDED=13]="RSS_EXPANDED",i[i.UPC_A=14]="UPC_A",i[i.UPC_E=15]="UPC_E",i[i.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION";var er=g;(s=m||(m={}))[s.OTHER=0]="OTHER",s[s.ORIENTATION=1]="ORIENTATION",s[s.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",s[s.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",s[s.ISSUE_NUMBER=4]="ISSUE_NUMBER",s[s.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",s[s.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",s[s.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",s[s.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",s[s.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",s[s.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY";var ei=m;class es{constructor(e,t,n,r,i=-1,s=-1){this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=s,this.numBits=null==e?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ea{exp(e){return this.expTable[e]}log(e){if(0===e)throw new N;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class eo{constructor(e,t){if(0===t.length)throw new N;this.field=e;let n=t.length;if(n>1&&0===t[0]){let e=1;for(;e<n&&0===t[e];)e++;e===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-e),M.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){let t;if(0===e)return this.getCoefficient(0);let n=this.coefficients;if(1===e){t=0;for(let e=0,r=n.length;e!==r;e++){let r=n[e];t=ea.addOrSubtract(t,r)}return t}t=n[0];let r=n.length,i=this.field;for(let s=1;s<r;s++)t=ea.addOrSubtract(i.multiply(e,t),n[s]);return t}addOrSubtract(e){if(!this.field.equals(e.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let e=t;t=n,n=e}let r=new Int32Array(n.length),i=n.length-t.length;M.arraycopy(n,0,r,0,i);for(let e=i;e<n.length;e++)r[e]=ea.addOrSubtract(t[e-i],n[e]);return new eo(this.field,r)}multiply(e){if(!this.field.equals(e.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();let t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,s=new Int32Array(n+i-1),a=this.field;for(let e=0;e<n;e++){let n=t[e];for(let t=0;t<i;t++)s[e+t]=ea.addOrSubtract(s[e+t],a.multiply(n,r[t]))}return new eo(a,s)}multiplyScalar(e){if(0===e)return this.field.getZero();if(1===e)return this;let t=this.coefficients.length,n=this.field,r=new Int32Array(t),i=this.coefficients;for(let s=0;s<t;s++)r[s]=n.multiply(i[s],e);return new eo(n,r)}multiplyByMonomial(e,t){if(e<0)throw new N;if(0===t)return this.field.getZero();let n=this.coefficients,r=n.length,i=new Int32Array(r+e),s=this.field;for(let e=0;e<r;e++)i[e]=s.multiply(n[e],t);return new eo(s,i)}divide(e){if(!this.field.equals(e.field))throw new N("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new N("Divide by 0");let t=this.field,n=t.getZero(),r=this,i=e.getCoefficient(e.getDegree()),s=t.inverse(i);for(;r.getDegree()>=e.getDegree()&&!r.isZero();){let i=r.getDegree()-e.getDegree(),a=t.multiply(r.getCoefficient(r.getDegree()),s),o=e.multiplyByMonomial(i,a),l=t.buildMonomial(i,a);n=n.addOrSubtract(l),r=r.addOrSubtract(o)}return[n,r]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);if(0!==n){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),0===t||1!==n){let t=this.field.log(n);0===t?e+="1":1===t?e+="a":(e+="a^",e+=t)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e}}class el extends A{}el.kind="ArithmeticException";class eu extends ea{constructor(e,t,n){super(),this.primitive=e,this.size=t,this.generatorBase=n;let r=new Int32Array(t),i=1;for(let n=0;n<t;n++)r[n]=i,(i*=2)>=t&&(i^=e,i&=t-1);this.expTable=r;let s=new Int32Array(t);for(let e=0;e<t-1;e++)s[r[e]]=e;this.logTable=s,this.zero=new eo(this,Int32Array.from([0])),this.one=new eo(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new N;if(0===t)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new eo(this,n)}inverse(e){if(0===e)throw new el;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+L.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}eu.AZTEC_DATA_12=new eu(4201,4096,1),eu.AZTEC_DATA_10=new eu(1033,1024,1),eu.AZTEC_DATA_6=new eu(67,64,1),eu.AZTEC_PARAM=new eu(19,16,1),eu.QR_CODE_FIELD_256=new eu(285,256,0),eu.DATA_MATRIX_FIELD_256=new eu(301,256,1),eu.AZTEC_DATA_8=eu.DATA_MATRIX_FIELD_256,eu.MAXICODE_FIELD_64=eu.AZTEC_DATA_6;class ec extends A{}ec.kind="ReedSolomonException";class eh extends A{}eh.kind="IllegalStateException";class ed{constructor(e){this.field=e}decode(e,t){let n=this.field,r=new eo(n,e),i=new Int32Array(t),s=!0;for(let e=0;e<t;e++){let t=r.evaluateAt(n.exp(e+n.getGeneratorBase()));i[i.length-1-e]=t,0!==t&&(s=!1)}if(s)return;let a=new eo(n,i),o=this.runEuclideanAlgorithm(n.buildMonomial(t,1),a,t),l=o[0],u=o[1],c=this.findErrorLocations(l),h=this.findErrorMagnitudes(u,c);for(let t=0;t<c.length;t++){let r=e.length-1-n.log(c[t]);if(r<0)throw new ec("Bad error location");e[r]=eu.addOrSubtract(e[r],h[t])}}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let n=e;e=t,t=n}let r=this.field,i=e,s=t,a=r.getZero(),o=r.getOne();for(;s.getDegree()>=(n/2|0);){let e=i,t=a;if(i=s,a=o,i.isZero())throw new ec("r_{i-1} was zero");s=e;let n=r.getZero(),l=i.getCoefficient(i.getDegree()),u=r.inverse(l);for(;s.getDegree()>=i.getDegree()&&!s.isZero();){let e=s.getDegree()-i.getDegree(),t=r.multiply(s.getCoefficient(s.getDegree()),u);n=n.addOrSubtract(r.buildMonomial(e,t)),s=s.addOrSubtract(i.multiplyByMonomial(e,t))}if(o=n.multiply(a).addOrSubtract(t),s.getDegree()>=i.getDegree())throw new eh("Division algorithm failed to reduce polynomial?")}let l=o.getCoefficient(0);if(0===l)throw new ec("sigmaTilde(0) was zero");let u=r.inverse(l);return[o.multiplyScalar(u),s.multiplyScalar(u)]}findErrorLocations(e){let t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);let n=new Int32Array(t),r=0,i=this.field;for(let s=1;s<i.getSize()&&r<t;s++)0===e.evaluateAt(s)&&(n[r]=i.inverse(s),r++);if(r!==t)throw new ec("Error locator degree does not match number of roots");return n}findErrorMagnitudes(e,t){let n=t.length,r=new Int32Array(n),i=this.field;for(let s=0;s<n;s++){let a=i.inverse(t[s]),o=1;for(let e=0;e<n;e++)if(s!==e){let n=i.multiply(t[e],a),r=(1&n)==0?1|n:-2&n;o=i.multiply(o,r)}r[s]=i.multiply(e.evaluateAt(a),i.inverse(o)),0!==i.getGeneratorBase()&&(r[s]=i.multiply(r[s],a))}return r}}(a=y||(y={}))[a.UPPER=0]="UPPER",a[a.LOWER=1]="LOWER",a[a.MIXED=2]="MIXED",a[a.DIGIT=3]="DIGIT",a[a.PUNCT=4]="PUNCT",a[a.BINARY=5]="BINARY";class ef{decode(e){this.ddata=e;let t=e.getBits(),n=this.extractBits(t),r=this.correctBits(n),i=new es(ef.convertBoolArrayToByteArray(r),ef.getEncodedData(r),null,null);return i.setNumBits(r.length),i}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,n=y.UPPER,r=y.UPPER,i="",s=0;for(;s<t;)if(r===y.BINARY){if(t-s<5)break;let a=ef.readCode(e,s,5);if(s+=5,0===a){if(t-s<11)break;a=ef.readCode(e,s,11)+31,s+=11}for(let n=0;n<a;n++){if(t-s<8){s=t;break}let n=ef.readCode(e,s,8);i+=H.castAsNonUtf8Char(n),s+=8}r=n}else{let a=r===y.DIGIT?4:5;if(t-s<a)break;let o=ef.readCode(e,s,a);s+=a;let l=ef.getCharacter(r,o);l.startsWith("CTRL_")?(n=r,r=ef.getTable(l.charAt(5)),"L"===l.charAt(6)&&(n=r)):(i+=l,r=n)}return i}static getTable(e){switch(e){case"L":return y.LOWER;case"P":return y.PUNCT;case"M":return y.MIXED;case"D":return y.DIGIT;case"B":return y.BINARY;default:return y.UPPER}}static getCharacter(e,t){switch(e){case y.UPPER:return ef.UPPER_TABLE[t];case y.LOWER:return ef.LOWER_TABLE[t];case y.MIXED:return ef.MIXED_TABLE[t];case y.PUNCT:return ef.PUNCT_TABLE[t];case y.DIGIT:return ef.DIGIT_TABLE[t];default:throw new eh("Bad table")}}correctBits(e){let t,n;2>=this.ddata.getNbLayers()?(n=6,t=eu.AZTEC_DATA_6):8>=this.ddata.getNbLayers()?(n=8,t=eu.AZTEC_DATA_8):22>=this.ddata.getNbLayers()?(n=10,t=eu.AZTEC_DATA_10):(n=12,t=eu.AZTEC_DATA_12);let r=this.ddata.getNbDatablocks(),i=e.length/n;if(i<r)throw new U;let s=e.length%n,a=new Int32Array(i);for(let t=0;t<i;t++,s+=n)a[t]=ef.readCode(e,s,n);try{new ed(t).decode(a,i-r)}catch(e){throw new U(e)}let o=(1<<n)-1,l=0;for(let e=0;e<r;e++){let t=a[e];if(0===t||t===o)throw new U;(1===t||t===o-1)&&l++}let u=Array(r*n-l),c=0;for(let e=0;e<r;e++){let t=a[e];if(1===t||t===o-1)u.fill(t>1,c,c+n-1),c+=n-1;else for(let e=n-1;e>=0;--e)u[c++]=(t&1<<e)!=0}return u}extractBits(e){let t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(t?11:14)+4*n,i=new Int32Array(r),s=Array(this.totalBitsInLayer(n,t));if(t)for(let e=0;e<i.length;e++)i[e]=e;else{let e=r+1+2*L.truncDivision(L.truncDivision(r,2)-1,15),t=r/2,n=L.truncDivision(e,2);for(let e=0;e<t;e++){let r=e+L.truncDivision(e,15);i[t-e-1]=n-r-1,i[t+e]=n+r+1}}for(let a=0,o=0;a<n;a++){let l=(n-a)*4+(t?9:12),u=2*a,c=r-1-u;for(let t=0;t<l;t++){let n=2*t;for(let r=0;r<2;r++)s[o+n+r]=e.get(i[u+r],i[u+t]),s[o+2*l+n+r]=e.get(i[u+t],i[c-r]),s[o+4*l+n+r]=e.get(i[c-r],i[c-t]),s[o+6*l+n+r]=e.get(i[c-t],i[u+r])}o+=8*l}return s}static readCode(e,t,n){let r=0;for(let i=t;i<t+n;i++)r<<=1,e[i]&&(r|=1);return r}static readByte(e,t){let n=e.length-t;return n>=8?ef.readCode(e,t,8):ef.readCode(e,t,n)<<8-n}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let n=0;n<t.length;n++)t[n]=ef.readByte(e,8*n);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}ef.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ef.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ef.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ef.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ef.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ep{constructor(){}static round(e){return e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,n,r){let i=e-n,s=t-r;return Math.sqrt(i*i+s*s)}static sum(e){let t=0;for(let n=0,r=e.length;n!==r;n++)t+=e[n];return t}}class eg{static floatToIntBits(e){return e}}eg.MAX_VALUE=Number.MAX_SAFE_INTEGER;class em{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){return e instanceof em&&this.x===e.x&&this.y===e.y}hashCode(){return 31*eg.floatToIntBits(this.x)+eg.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){let t,n,r,i=this.distance(e[0],e[1]),s=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]);if(s>=i&&s>=a?(n=e[0],t=e[1],r=e[2]):a>=s&&a>=i?(n=e[1],t=e[0],r=e[2]):(n=e[2],t=e[0],r=e[1]),0>this.crossProductZ(t,n,r)){let e=t;t=r,r=e}e[0]=t,e[1]=n,e[2]=r}static distance(e,t){return ep.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,n){let r=t.x,i=t.y;return(n.x-r)*(e.y-i)-(n.y-i)*(e.x-r)}}class ey{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class ew extends ey{constructor(e,t,n,r,i){super(e,t),this.compact=n,this.nbDatablocks=r,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class eE{constructor(e,t,n,r){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),null==t&&(t=eE.INIT_SIZE),null==n&&(n=e.getWidth()/2|0),null==r&&(r=e.getHeight()/2|0);let i=t/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=r-i,this.downInit=r+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Y}detect(){let e=this.leftInit,t=this.rightInit,n=this.upInit,r=this.downInit,i=!1,s=!0,a=!1,o=!1,l=!1,u=!1,c=!1,h=this.width,d=this.height;for(;s;){s=!1;let f=!0;for(;(f||!o)&&t<h;)(f=this.containsBlackPoint(n,r,t,!1))?(t++,s=!0,o=!0):!o&&t++;if(t>=h){i=!0;break}let p=!0;for(;(p||!l)&&r<d;)(p=this.containsBlackPoint(e,t,r,!0))?(r++,s=!0,l=!0):!l&&r++;if(r>=d){i=!0;break}let g=!0;for(;(g||!u)&&e>=0;)(g=this.containsBlackPoint(n,r,e,!1))?(e--,s=!0,u=!0):!u&&e--;if(e<0){i=!0;break}let m=!0;for(;(m||!c)&&n>=0;)(m=this.containsBlackPoint(e,t,n,!0))?(n--,s=!0,c=!0):!c&&n--;if(n<0){i=!0;break}s&&(a=!0)}if(!i&&a){let i=t-e,s=null;for(let t=1;null===s&&t<i;t++)s=this.getBlackPointOnSegment(e,r-t,e+t,r);if(null==s)throw new Y;let a=null;for(let t=1;null===a&&t<i;t++)a=this.getBlackPointOnSegment(e,n+t,e+t,n);if(null==a)throw new Y;let o=null;for(let e=1;null===o&&e<i;e++)o=this.getBlackPointOnSegment(t,n+e,t-e,n);if(null==o)throw new Y;let l=null;for(let e=1;null===l&&e<i;e++)l=this.getBlackPointOnSegment(t,r-e,t-e,r);if(null==l)throw new Y;return this.centerEdges(l,s,o,a)}throw new Y}getBlackPointOnSegment(e,t,n,r){let i=ep.round(ep.distance(e,t,n,r)),s=(n-e)/i,a=(r-t)/i,o=this.image;for(let n=0;n<i;n++){let r=ep.round(e+n*s),i=ep.round(t+n*a);if(o.get(r,i))return new em(r,i)}return null}centerEdges(e,t,n,r){let i=e.getX(),s=e.getY(),a=t.getX(),o=t.getY(),l=n.getX(),u=n.getY(),c=r.getX(),h=r.getY(),d=eE.CORR;return i<this.width/2?[new em(c-d,h+d),new em(a+d,o+d),new em(l-d,u-d),new em(i+d,s-d)]:[new em(c+d,h+d),new em(a+d,o-d),new em(l-d,u+d),new em(i-d,s-d)]}containsBlackPoint(e,t,n,r){let i=this.image;if(r){for(let r=e;r<=t;r++)if(i.get(r,n))return!0}else for(let r=e;r<=t;r++)if(i.get(n,r))return!0;return!1}}eE.INIT_SIZE=10,eE.CORR=1;class ev{static checkAndNudgePoints(e,t){let n=e.getWidth(),r=e.getHeight(),i=!0;for(let e=0;e<t.length&&i;e+=2){let s=Math.floor(t[e]),a=Math.floor(t[e+1]);if(s<-1||s>n||a<-1||a>r)throw new Y;i=!1,-1===s?(t[e]=0,i=!0):s===n&&(t[e]=n-1,i=!0),-1===a?(t[e+1]=0,i=!0):a===r&&(t[e+1]=r-1,i=!0)}i=!0;for(let e=t.length-2;e>=0&&i;e-=2){let s=Math.floor(t[e]),a=Math.floor(t[e+1]);if(s<-1||s>n||a<-1||a>r)throw new Y;i=!1,-1===s?(t[e]=0,i=!0):s===n&&(t[e]=n-1,i=!0),-1===a?(t[e+1]=0,i=!0):a===r&&(t[e+1]=r-1,i=!0)}}}class eC{constructor(e,t,n,r,i,s,a,o,l){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=i,this.a32=s,this.a13=a,this.a23=o,this.a33=l}static quadrilateralToQuadrilateral(e,t,n,r,i,s,a,o,l,u,c,h,d,f,p,g){let m=eC.quadrilateralToSquare(e,t,n,r,i,s,a,o);return eC.squareToQuadrilateral(l,u,c,h,d,f,p,g).times(m)}transformPoints(e){let t=e.length,n=this.a11,r=this.a12,i=this.a13,s=this.a21,a=this.a22,o=this.a23,l=this.a31,u=this.a32,c=this.a33;for(let h=0;h<t;h+=2){let t=e[h],d=e[h+1],f=i*t+o*d+c;e[h]=(n*t+s*d+l)/f,e[h+1]=(r*t+a*d+u)/f}}transformPointsWithValues(e,t){let n=this.a11,r=this.a12,i=this.a13,s=this.a21,a=this.a22,o=this.a23,l=this.a31,u=this.a32,c=this.a33,h=e.length;for(let d=0;d<h;d++){let h=e[d],f=t[d],p=i*h+o*f+c;e[d]=(n*h+s*f+l)/p,t[d]=(r*h+a*f+u)/p}}static squareToQuadrilateral(e,t,n,r,i,s,a,o){let l=e-n+i-a,u=t-r+s-o;if(0===l&&0===u)return new eC(n-e,i-n,e,r-t,s-r,t,0,0,1);{let c=n-i,h=a-i,d=r-s,f=o-s,p=c*f-h*d,g=(l*f-h*u)/p,m=(c*u-l*d)/p;return new eC(n-e+g*n,a-e+m*a,e,r-t+g*r,o-t+m*o,t,g,m,1)}}static quadrilateralToSquare(e,t,n,r,i,s,a,o){return eC.squareToQuadrilateral(e,t,n,r,i,s,a,o).buildAdjoint()}buildAdjoint(){return new eC(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new eC(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class eS extends ev{sampleGrid(e,t,n,r,i,s,a,o,l,u,c,h,d,f,p,g,m,y,w){let E=eC.quadrilateralToQuadrilateral(r,i,s,a,o,l,u,c,h,d,f,p,g,m,y,w);return this.sampleGridWithTransform(e,t,n,E)}sampleGridWithTransform(e,t,n,r){if(t<=0||n<=0)throw new Y;let i=new G(t,n),s=new Float32Array(2*t);for(let t=0;t<n;t++){let n=s.length,a=t+.5;for(let e=0;e<n;e+=2)s[e]=e/2+.5,s[e+1]=a;r.transformPoints(s),ev.checkAndNudgePoints(e,s);try{for(let r=0;r<n;r+=2)e.get(Math.floor(s[r]),Math.floor(s[r+1]))&&i.set(r/2,t)}catch(e){throw new Y}}return i}}class e_{static setGridSampler(e){e_.gridSampler=e}static getInstance(){return e_.gridSampler}}e_.gridSampler=new eS;class eb{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new em(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class eI{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){let e=n[0];n[0]=n[2],n[2]=e}return this.extractParameters(n),new ew(this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),this.getMatrixCornerPoints(n),this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new Y;let t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);let r=0;for(let e=0;e<4;e++){let t=n[(this.shift+e)%4];this.compact?(r<<=7,r+=t>>1&127):(r<<=10,r+=(t>>2&992)+(t>>1&31))}let i=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=(i>>6)+1,this.nbDataBlocks=(63&i)+1):(this.nbLayers=(i>>11)+1,this.nbDataBlocks=(2047&i)+1)}getRotation(e,t){let n=0;e.forEach((e,r,i)=>{n=(n<<3)+((e>>t-2<<1)+(1&e))}),n=((1&n)<<11)+(n>>1);for(let e=0;e<4;e++)if(2>=L.bitCount(n^this.EXPECTED_CORNER_BITS[e]))return e;throw new Y}getCorrectedParameterData(e,t){let n,r;t?(n=7,r=2):(n=10,r=4);let i=n-r,s=new Int32Array(n);for(let t=n-1;t>=0;--t)s[t]=15&e,e>>=4;try{new ed(eu.AZTEC_PARAM).decode(s,i)}catch(e){throw new Y}let a=0;for(let e=0;e<r;e++)a=(a<<4)+s[e];return a}getBullsEyeCorners(e){let t=e,n=e,r=e,i=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let e=this.getFirstDifferent(t,s,1,-1),a=this.getFirstDifferent(n,s,1,1),o=this.getFirstDifferent(r,s,-1,1),l=this.getFirstDifferent(i,s,-1,-1);if(this.nbCenterLayers>2){let n=this.distancePoint(l,e)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(n<.75||n>1.25||!this.isWhiteOrBlackRectangle(e,a,o,l))break}t=e,n=a,r=o,i=l,s=!s}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new Y;this.compact=5===this.nbCenterLayers;let a=new em(t.getX()+.5,t.getY()-.5),o=new em(n.getX()+.5,n.getY()+.5),l=new em(r.getX()-.5,r.getY()+.5),u=new em(i.getX()-.5,i.getY()-.5);return this.expandSquare([a,o,l,u],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,n,r;try{let i=new eE(this.image).detect();e=i[0],t=i[1],n=i[2],r=i[3]}catch(a){let i=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new eb(i+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new eb(i+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new eb(i-7,s+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new eb(i-7,s-7),!1,-1,-1).toResultPoint()}let i=ep.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=ep.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{let a=new eE(this.image,15,i,s).detect();e=a[0],t=a[1],n=a[2],r=a[3]}catch(a){e=this.getFirstDifferent(new eb(i+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new eb(i+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new eb(i-7,s+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new eb(i-7,s-7),!1,-1,-1).toResultPoint()}return new eb(i=ep.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=ep.round((e.getY()+r.getY()+t.getY()+n.getY())/4))}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,n,r,i){let s=e_.getInstance(),a=this.getDimension(),o=a/2-this.nbCenterLayers,l=a/2+this.nbCenterLayers;return s.sampleGrid(e,a,a,o,o,l,o,l,l,o,l,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY())}sampleLine(e,t,n){let r=0,i=this.distanceResultPoint(e,t),s=i/n,a=e.getX(),o=e.getY(),l=s*(t.getX()-e.getX())/i,u=s*(t.getY()-e.getY())/i;for(let e=0;e<n;e++)this.image.get(ep.round(a+e*l),ep.round(o+e*u))&&(r|=1<<n-e-1);return r}isWhiteOrBlackRectangle(e,t,n,r){e=new eb(e.getX()-3,e.getY()+3),t=new eb(t.getX()-3,t.getY()-3),n=new eb(n.getX()+3,n.getY()-3),r=new eb(r.getX()+3,r.getY()+3);let i=this.getColor(r,e);if(0===i)return!1;let s=this.getColor(e,t);return s===i&&(s=this.getColor(t,n))===i&&(s=this.getColor(n,r))===i}getColor(e,t){let n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,i=(t.getY()-e.getY())/n,s=0,a=e.getX(),o=e.getY(),l=this.image.get(e.getX(),e.getY()),u=Math.ceil(n);for(let e=0;e<u;e++)a+=r,o+=i,this.image.get(ep.round(a),ep.round(o))!==l&&s++;let c=s/n;return c>.1&&c<.9?0:c<=.1===l?1:-1}getFirstDifferent(e,t,n,r){let i=e.getX()+n,s=e.getY()+r;for(;this.isValid(i,s)&&this.image.get(i,s)===t;)i+=n,s+=r;for(i-=n,s-=r;this.isValid(i,s)&&this.image.get(i,s)===t;)i+=n;for(i-=n;this.isValid(i,s)&&this.image.get(i,s)===t;)s+=r;return new eb(i,s-=r)}expandSquare(e,t,n){let r=n/(2*t),i=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,o=(e[0].getY()+e[2].getY())/2,l=new em(a+r*i,o+r*s),u=new em(a-r*i,o-r*s);return i=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),[l,new em((a=(e[1].getX()+e[3].getX())/2)+r*i,(o=(e[1].getY()+e[3].getY())/2)+r*s),u,new em(a-r*i,o-r*s)]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=ep.round(e.getX()),n=ep.round(e.getY());return this.isValid(t,n)}distancePoint(e,t){return ep.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return ep.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(L.truncDivision(this.nbLayers-4,8)+1)+15}}class eA{decode(e,t=null){let n=null,r=new eI(e.getBlackMatrix()),i=null,s=null;try{let e=r.detectMirror(!1);i=e.getPoints(),this.reportFoundResultPoints(t,i),s=new ef().decode(e)}catch(e){n=e}if(null==s)try{let e=r.detectMirror(!0);i=e.getPoints(),this.reportFoundResultPoints(t,i),s=new ef().decode(e)}catch(e){if(null!=n)throw n;throw e}let a=new en(s.getText(),s.getRawBytes(),s.getNumBits(),i,er.AZTEC,M.currentTimeMillis()),o=s.getByteSegments();null!=o&&a.putMetadata(ei.BYTE_SEGMENTS,o);let l=s.getECLevel();return null!=l&&a.putMetadata(ei.ERROR_CORRECTION_LEVEL,l),a}reportFoundResultPoints(e,t){if(null!=e){let n=e.get(F.NEED_RESULT_POINT_CALLBACK);null!=n&&t.forEach((e,t,r)=>{n.foundPossibleResultPoint(e)})}}reset(){}}class eT{decode(e,t){try{return this.doDecode(e,t)}catch(n){if(t&&!0===t.get(F.TRY_HARDER)&&e.isRotateSupported()){let n=e.rotateCounterClockwise(),r=this.doDecode(n,t),i=r.getResultMetadata(),s=270;null!==i&&!0===i.get(ei.ORIENTATION)&&(s+=i.get(ei.ORIENTATION)%360),r.putMetadata(ei.ORIENTATION,s);let a=r.getResultPoints();if(null!==a){let e=n.getHeight();for(let t=0;t<a.length;t++)a[t]=new em(e-a[t].getY()-1,a[t].getX())}return r}throw new Y}}reset(){}doDecode(e,t){let n,r=e.getWidth(),i=e.getHeight(),s=new B(r),a=t&&!0===t.get(F.TRY_HARDER),o=Math.max(1,i>>(a?8:5));n=a?i:15;let l=Math.trunc(i/2);for(let a=0;a<n;a++){let n=Math.trunc((a+1)/2),u=l+o*((1&a)==0?n:-n);if(u<0||u>=i)break;try{s=e.getBlackRow(u,s)}catch(e){continue}for(let e=0;e<2;e++){if(1===e&&(s.reverse(),t&&!0===t.get(F.NEED_RESULT_POINT_CALLBACK))){let e=new Map;t.forEach((t,n)=>e.set(n,t)),e.delete(F.NEED_RESULT_POINT_CALLBACK),t=e}try{let n=this.decodeRow(u,s,t);if(1===e){n.putMetadata(ei.ORIENTATION,180);let e=n.getResultPoints();null!==e&&(e[0]=new em(r-e[0].getX()-1,e[0].getY()),e[1]=new em(r-e[1].getX()-1,e[1].getY()))}return n}catch(e){}}}throw new Y}static recordPattern(e,t,n){let r=n.length;for(let e=0;e<r;e++)n[e]=0;let i=e.getSize();if(t>=i)throw new Y;let s=!e.get(t),a=0,o=t;for(;o<i;){if(e.get(o)!==s)n[a]++;else if(++a===r)break;else n[a]=1,s=!s;o++}if(a!==r&&(a!==r-1||o!==i))throw new Y}static recordPatternInReverse(e,t,n){let r=n.length,i=e.get(t);for(;t>0&&r>=0;)e.get(--t)!==i&&(r--,i=!i);if(r>=0)throw new Y;eT.recordPattern(e,t+1,n)}static patternMatchVariance(e,t,n){let r=e.length,i=0,s=0;for(let n=0;n<r;n++)i+=e[n],s+=t[n];if(i<s)return Number.POSITIVE_INFINITY;let a=i/s;n*=a;let o=0;for(let i=0;i<r;i++){let r=e[i],s=t[i]*a,l=r>s?r-s:s-r;if(l>n)return Number.POSITIVE_INFINITY;o+=l}return o/i}}class eN extends eT{static findStartPattern(e){let t=e.getSize(),n=e.getNextSet(0),r=0,i=Int32Array.from([0,0,0,0,0,0]),s=n,a=!1;for(let o=n;o<t;o++)if(e.get(o)!==a)i[r]++;else{if(5===r){let t=eN.MAX_AVG_VARIANCE,n=-1;for(let e=eN.CODE_START_A;e<=eN.CODE_START_C;e++){let r=eT.patternMatchVariance(i,eN.CODE_PATTERNS[e],eN.MAX_INDIVIDUAL_VARIANCE);r<t&&(t=r,n=e)}if(n>=0&&e.isRange(Math.max(0,s-(o-s)/2),s,!1))return Int32Array.from([s,o,n]);s+=i[0]+i[1],(i=i.slice(2,i.length-1))[r-1]=0,i[r]=0,r--}else r++;i[r]=1,a=!a}throw new Y}static decodeCode(e,t,n){eT.recordPattern(e,n,t);let r=eN.MAX_AVG_VARIANCE,i=-1;for(let e=0;e<eN.CODE_PATTERNS.length;e++){let n=eN.CODE_PATTERNS[e],s=this.patternMatchVariance(t,n,eN.MAX_INDIVIDUAL_VARIANCE);s<r&&(r=s,i=e)}if(i>=0)return i;throw new Y}decodeRow(e,t,n){let r,i=n&&!0===n.get(F.ASSUME_GS1),s=eN.findStartPattern(t),a=s[2],o=0,l=new Uint8Array(20);switch(l[o++]=a,a){case eN.CODE_START_A:r=eN.CODE_CODE_A;break;case eN.CODE_START_B:r=eN.CODE_CODE_B;break;case eN.CODE_START_C:r=eN.CODE_CODE_C;break;default:throw new U}let u=!1,c=!1,h="",d=s[0],f=s[1],p=Int32Array.from([0,0,0,0,0,0]),g=0,m=0,y=a,w=0,E=!0,v=!1,C=!1;for(;!u;){let e=c;switch(c=!1,g=m,m=eN.decodeCode(t,p,f),l[o++]=m,m!==eN.CODE_STOP&&(E=!0),m!==eN.CODE_STOP&&(y+=++w*m),d=f,f+=p.reduce((e,t)=>e+t,0),m){case eN.CODE_START_A:case eN.CODE_START_B:case eN.CODE_START_C:throw new U}switch(r){case eN.CODE_CODE_A:if(m<64)C===v?h+=String.fromCharCode(32+m):h+=String.fromCharCode(32+m+128),C=!1;else if(m<96)C===v?h+=String.fromCharCode(m-64):h+=String.fromCharCode(m+64),C=!1;else switch(m!==eN.CODE_STOP&&(E=!1),m){case eN.CODE_FNC_1:i&&(0===h.length?h+="]C1":h+="\x1d");break;case eN.CODE_FNC_2:case eN.CODE_FNC_3:break;case eN.CODE_FNC_4_A:!v&&C?(v=!0,C=!1):v&&C?(v=!1,C=!1):C=!0;break;case eN.CODE_SHIFT:c=!0,r=eN.CODE_CODE_B;break;case eN.CODE_CODE_B:r=eN.CODE_CODE_B;break;case eN.CODE_CODE_C:r=eN.CODE_CODE_C;break;case eN.CODE_STOP:u=!0}break;case eN.CODE_CODE_B:if(m<96)C===v?h+=String.fromCharCode(32+m):h+=String.fromCharCode(32+m+128),C=!1;else switch(m!==eN.CODE_STOP&&(E=!1),m){case eN.CODE_FNC_1:i&&(0===h.length?h+="]C1":h+="\x1d");break;case eN.CODE_FNC_2:case eN.CODE_FNC_3:break;case eN.CODE_FNC_4_B:!v&&C?(v=!0,C=!1):v&&C?(v=!1,C=!1):C=!0;break;case eN.CODE_SHIFT:c=!0,r=eN.CODE_CODE_A;break;case eN.CODE_CODE_A:r=eN.CODE_CODE_A;break;case eN.CODE_CODE_C:r=eN.CODE_CODE_C;break;case eN.CODE_STOP:u=!0}break;case eN.CODE_CODE_C:if(m<100)m<10&&(h+="0"),h+=m;else switch(m!==eN.CODE_STOP&&(E=!1),m){case eN.CODE_FNC_1:i&&(0===h.length?h+="]C1":h+="\x1d");break;case eN.CODE_CODE_A:r=eN.CODE_CODE_A;break;case eN.CODE_CODE_B:r=eN.CODE_CODE_B;break;case eN.CODE_STOP:u=!0}}e&&(r=r===eN.CODE_CODE_A?eN.CODE_CODE_B:eN.CODE_CODE_A)}let S=f-d;if(f=t.getNextUnset(f),!t.isRange(f,Math.min(t.getSize(),f+(f-d)/2),!1))throw new Y;if((y-=w*g)%103!==g)throw new D;let _=h.length;if(0===_)throw new Y;_>0&&E&&(h=r===eN.CODE_CODE_C?h.substring(0,_-2):h.substring(0,_-1));let b=(s[1]+s[0])/2,I=d+S/2,A=l.length,T=new Uint8Array(A);for(let e=0;e<A;e++)T[e]=l[e];return new en(h,T,0,[new em(b,e),new em(I,e)],er.CODE_128,new Date().getTime())}}eN.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],eN.MAX_AVG_VARIANCE=.25,eN.MAX_INDIVIDUAL_VARIANCE=.7,eN.CODE_SHIFT=98,eN.CODE_CODE_C=99,eN.CODE_CODE_B=100,eN.CODE_CODE_A=101,eN.CODE_FNC_1=102,eN.CODE_FNC_2=97,eN.CODE_FNC_3=96,eN.CODE_FNC_4_A=101,eN.CODE_FNC_4_B=100,eN.CODE_START_A=103,eN.CODE_START_B=104,eN.CODE_START_C=105,eN.CODE_STOP=106;class eR extends eT{constructor(e=!1,t=!1){super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,n){let r,i,s,a=this.counters;a.fill(0),this.decodeRowResult="";let o=eR.findAsteriskPattern(t,a),l=t.getNextSet(o[1]),u=t.getSize();do{eR.recordPattern(t,l,a);let e=eR.toNarrowWidePattern(a);if(e<0)throw new Y;for(let t of(r=eR.patternToChar(e),this.decodeRowResult+=r,i=l,a))l+=t;l=t.getNextSet(l)}while("*"!==r)this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let c=0;for(let e of a)c+=e;let h=l-i-c;if(l!==u&&2*h<c)throw new Y;if(this.usingCheckDigit){let e=this.decodeRowResult.length-1,t=0;for(let n=0;n<e;n++)t+=eR.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(n));if(this.decodeRowResult.charAt(e)!==eR.ALPHABET_STRING.charAt(t%43))throw new D;this.decodeRowResult=this.decodeRowResult.substring(0,e)}if(0===this.decodeRowResult.length)throw new Y;s=this.extendedMode?eR.decodeExtended(this.decodeRowResult):this.decodeRowResult;let d=(o[1]+o[0])/2,f=i+c/2;return new en(s,null,0,[new em(d,e),new em(f,e)],er.CODE_39,new Date().getTime())}static findAsteriskPattern(e,t){let n=e.getSize(),r=e.getNextSet(0),i=0,s=r,a=!1,o=t.length;for(let l=r;l<n;l++)if(e.get(l)!==a)t[i]++;else{if(i===o-1){if(this.toNarrowWidePattern(t)===eR.ASTERISK_ENCODING&&e.isRange(Math.max(0,s-Math.floor((l-s)/2)),s,!1))return[s,l];s+=t[0]+t[1],t.copyWithin(0,2,2+i-1),t[i-1]=0,t[i]=0,i--}else i++;t[i]=1,a=!a}throw new Y}static toNarrowWidePattern(e){let t,n=e.length,r=0;do{let i=0x7fffffff;for(let t of e)t<i&&t>r&&(i=t);r=i,t=0;let s=0,a=0;for(let i=0;i<n;i++){let o=e[i];o>r&&(a|=1<<n-1-i,t++,s+=o)}if(3===t){for(let i=0;i<n&&t>0;i++){let n=e[i];if(n>r&&(t--,2*n>=s))return -1}return a}}while(t>3)return -1}static patternToChar(e){for(let t=0;t<eR.CHARACTER_ENCODINGS.length;t++)if(eR.CHARACTER_ENCODINGS[t]===e)return eR.ALPHABET_STRING.charAt(t);if(e===eR.ASTERISK_ENCODING)return"*";throw new Y}static decodeExtended(e){let t=e.length,n="";for(let r=0;r<t;r++){let t=e.charAt(r);if("+"===t||"$"===t||"%"===t||"/"===t){let i=e.charAt(r+1),s="\0";switch(t){case"+":if(i>="A"&&i<="Z")s=String.fromCharCode(i.charCodeAt(0)+32);else throw new U;break;case"$":if(i>="A"&&i<="Z")s=String.fromCharCode(i.charCodeAt(0)-64);else throw new U;break;case"%":if(i>="A"&&i<="E")s=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")s=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")s=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")s=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)s="\0";else if("V"===i)s="@";else if("W"===i)s="`";else if("X"===i||"Y"===i||"Z"===i)s="";else throw new U;break;case"/":if(i>="A"&&i<="O")s=String.fromCharCode(i.charCodeAt(0)-32);else if("Z"===i)s=":";else throw new U}n+=s,r++}else n+=t}return n}}eR.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",eR.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],eR.ASTERISK_ENCODING=148;class eD extends eT{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,n){let r=this.decodeStart(t),i=this.decodeEnd(t),s=new W;eD.decodeMiddle(t,r[1],i[0],s);let a=s.toString(),o=null;null!=n&&(o=n.get(F.ALLOWED_LENGTHS)),null==o&&(o=eD.DEFAULT_ALLOWED_LENGTHS);let l=a.length,u=!1,c=0;for(let e of o){if(l===e){u=!0;break}e>c&&(c=e)}if(!u&&l>c&&(u=!0),!u)throw new U;return new en(a,null,0,[new em(r[1],e),new em(i[0],e)],er.ITF,new Date().getTime())}static decodeMiddle(e,t,n,r){let i=new Int32Array(10),s=new Int32Array(5),a=new Int32Array(5);for(i.fill(0),s.fill(0),a.fill(0);t<n;){eT.recordPattern(e,t,i);for(let e=0;e<5;e++){let t=2*e;s[e]=i[t],a[e]=i[t+1]}let n=eD.decodeDigit(s);r.append(n.toString()),n=this.decodeDigit(a),r.append(n.toString()),i.forEach(function(e){t+=e})}}decodeStart(e){let t=eD.skipWhiteSpace(e),n=eD.findGuardPattern(e,t,eD.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n}validateQuietZone(e,t){let n=10*this.narrowLineWidth;n=n<t?n:t;for(let r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(0!==n)throw new Y}static skipWhiteSpace(e){let t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new Y;return n}decodeEnd(e){e.reverse();try{let t,n=eD.skipWhiteSpace(e);try{t=eD.findGuardPattern(e,n,eD.END_PATTERN_REVERSED[0])}catch(r){r instanceof Y&&(t=eD.findGuardPattern(e,n,eD.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,t[0]);let r=t[0];return t[0]=e.getSize()-t[1],t[1]=e.getSize()-r,t}finally{e.reverse()}}static findGuardPattern(e,t,n){let r=n.length,i=new Int32Array(r),s=e.getSize(),a=!1,o=0,l=t;i.fill(0);for(let u=t;u<s;u++)if(e.get(u)!==a)i[o]++;else{if(o===r-1){if(eT.patternMatchVariance(i,n,eD.MAX_INDIVIDUAL_VARIANCE)<eD.MAX_AVG_VARIANCE)return[l,u];l+=i[0]+i[1],M.arraycopy(i,2,i,0,o-1),i[o-1]=0,i[o]=0,o--}else o++;i[o]=1,a=!a}throw new Y}static decodeDigit(e){let t=eD.MAX_AVG_VARIANCE,n=-1,r=eD.PATTERNS.length;for(let i=0;i<r;i++){let r=eD.PATTERNS[i],s=eT.patternMatchVariance(e,r,eD.MAX_INDIVIDUAL_VARIANCE);s<t?(t=s,n=i):s===t&&(n=-1)}if(n>=0)return n%10;throw new Y}}eD.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],eD.MAX_AVG_VARIANCE=.38,eD.MAX_INDIVIDUAL_VARIANCE=.5,eD.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],eD.START_PATTERN=Int32Array.from([1,1,1,1]),eD.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class eO extends eT{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t,n=!1,r=0,i=Int32Array.from([0,0,0]);for(;!n;){i=Int32Array.from([0,0,0]);let s=(t=eO.findGuardPattern(e,r,!1,this.START_END_PATTERN,i))[0],a=s-((r=t[1])-s);a>=0&&(n=e.isRange(a,s,!1))}return t}static checkChecksum(e){return eO.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return eO.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-48;if(t<0||t>9)throw new U;n+=t}n*=3;for(let r=t-2;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-48;if(t<0||t>9)throw new U;n+=t}return(1e3-n)%10}static decodeEnd(e,t){return eO.findGuardPattern(e,t,!1,eO.START_END_PATTERN,new Int32Array(eO.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))}static findGuardPattern(e,t,n,r,i){let s=e.getSize();t=n?e.getNextUnset(t):e.getNextSet(t);let a=0,o=t,l=r.length,u=n;for(let n=t;n<s;n++)if(e.get(n)!==u)i[a]++;else{if(a===l-1){if(eT.patternMatchVariance(i,r,eO.MAX_INDIVIDUAL_VARIANCE)<eO.MAX_AVG_VARIANCE)return Int32Array.from([o,n]);o+=i[0]+i[1];let e=i.slice(2,i.length-1);for(let t=0;t<a-1;t++)i[t]=e[t];i[a-1]=0,i[a]=0,a--}else a++;i[a]=1,u=!u}throw new Y}static decodeDigit(e,t,n,r){this.recordPattern(e,n,t);let i=this.MAX_AVG_VARIANCE,s=-1,a=r.length;for(let e=0;e<a;e++){let n=r[e],a=eT.patternMatchVariance(t,n,eO.MAX_INDIVIDUAL_VARIANCE);a<i&&(i=a,s=e)}if(s>=0)return s;throw new Y}}eO.MAX_AVG_VARIANCE=.48,eO.MAX_INDIVIDUAL_VARIANCE=.7,eO.START_END_PATTERN=Int32Array.from([1,1,1]),eO.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),eO.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),eO.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class eM{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),s=r.toString(),a=eM.parseExtensionString(s),o=new en(s,null,0,[new em((n[0]+n[1])/2,e),new em(i,e)],er.UPC_EAN_EXTENSION,new Date().getTime());return null!=a&&o.putAllMetadata(a),o}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],a=0;for(let t=0;t<5&&s<i;t++){let i=eO.decodeDigit(e,r,s,eO.L_AND_G_PATTERNS);for(let e of(n+=String.fromCharCode(48+i%10),r))s+=e;i>=10&&(a|=1<<4-t),4!==t&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(5!==n.length)throw new Y;let o=this.determineCheckDigit(a);if(eM.extensionChecksum(n.toString())!==o)throw new Y;return s}static extensionChecksum(e){let t=e.length,n=0;for(let r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-48;n*=3;for(let r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-48;return(n*=3)%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new Y}static parseExtensionString(e){if(5!==e.length)return null;let t=eM.parseExtension5String(e);return null==t?null:new Map([[ei.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}let n=parseInt(e.substring(1)),r=(n/100).toString(),i=n%100;return t+r+"."+(i<10?"0"+i:i.toString())}}class ek{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),s=r.toString(),a=ek.parseExtensionString(s),o=new en(s,null,0,[new em((n[0]+n[1])/2,e),new em(i,e)],er.UPC_EAN_EXTENSION,new Date().getTime());return null!=a&&o.putAllMetadata(a),o}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],a=0;for(let t=0;t<2&&s<i;t++){let i=eO.decodeDigit(e,r,s,eO.L_AND_G_PATTERNS);for(let e of(n+=String.fromCharCode(48+i%10),r))s+=e;i>=10&&(a|=1<<1-t),1!==t&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(2!==n.length||parseInt(n.toString())%4!==a)throw new Y;return s}static parseExtensionString(e){return 2!==e.length?null:new Map([[ei.ISSUE_NUMBER,parseInt(e)]])}}class eP{static decodeRow(e,t,n){let r=eO.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new eM().decodeRow(e,t,r)}catch(n){return new ek().decodeRow(e,t,r)}}}eP.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ex extends eO{constructor(){super(),this.decodeRowStringBuffer="",ex.L_AND_G_PATTERNS=ex.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=ex.L_PATTERNS[e-10],n=new Int32Array(t.length);for(let e=0;e<t.length;e++)n[e]=t[t.length-e-1];ex.L_AND_G_PATTERNS[e]=n}}decodeRow(e,t,n){let r=ex.findStartGuardPattern(t),i=null==n?null:n.get(F.NEED_RESULT_POINT_CALLBACK);if(null!=i){let t=new em((r[0]+r[1])/2,e);i.foundPossibleResultPoint(t)}let s=this.decodeMiddle(t,r,this.decodeRowStringBuffer),a=s.rowOffset,o=s.resultString;if(null!=i){let t=new em(a,e);i.foundPossibleResultPoint(t)}let l=this.decodeEnd(t,a);if(null!=i){let t=new em((l[0]+l[1])/2,e);i.foundPossibleResultPoint(t)}let u=l[1],c=u+(u-l[0]);if(c>=t.getSize()||!t.isRange(u,c,!1))throw new Y;let h=o.toString();if(h.length<8)throw new U;if(!ex.checkChecksum(h))throw new D;let d=(r[1]+r[0])/2,f=(l[1]+l[0])/2,p=this.getBarcodeFormat(),g=new en(h,null,0,[new em(d,e),new em(f,e)],p,new Date().getTime()),m=0;try{let n=eP.decodeRow(e,t,l[1]);g.putMetadata(ei.UPC_EAN_EXTENSION,n.getText()),g.putAllMetadata(n.getResultMetadata()),g.addResultPoints(n.getResultPoints()),m=n.getText().length}catch(e){}let y=null==n?null:n.get(F.ALLOWED_EAN_EXTENSIONS);if(null!=y){let e=!1;for(let t in y)if(m.toString()===t){e=!0;break}if(!e)throw new Y}return g}decodeEnd(e,t){return ex.findGuardPattern(e,t,!1,ex.START_END_PATTERN,new Int32Array(ex.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return ex.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let n=parseInt(e.charAt(t-1),10);return ex.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-48;if(t<0||t>9)throw new U;n+=t}n*=3;for(let r=t-2;r>=0;r-=2){let t=e.charAt(r).charCodeAt(0)-48;if(t<0||t>9)throw new U;n+=t}return(1e3-n)%10}}class eL extends ex{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],a=0;for(let t=0;t<6&&s<i;t++){let i=ex.decodeDigit(e,r,s,ex.L_AND_G_PATTERNS);for(let e of(n+=String.fromCharCode(48+i%10),r))s+=e;i>=10&&(a|=1<<5-t)}n=eL.determineFirstDigit(n,a),s=ex.findGuardPattern(e,s,!0,ex.MIDDLE_PATTERN,new Int32Array(ex.MIDDLE_PATTERN.length).fill(0))[1];for(let t=0;t<6&&s<i;t++){let t=ex.decodeDigit(e,r,s,ex.L_PATTERNS);for(let e of(n+=String.fromCharCode(48+t),r))s+=e}return{rowOffset:s,resultString:n}}getBarcodeFormat(){return er.EAN_13}static determineFirstDigit(e,t){for(let n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode(48+n)+e;throw new Y}}eL.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class eB extends ex{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1];for(let t=0;t<4&&s<i;t++){let t=ex.decodeDigit(e,r,s,ex.L_PATTERNS);for(let e of(n+=String.fromCharCode(48+t),r))s+=e}s=ex.findGuardPattern(e,s,!0,ex.MIDDLE_PATTERN,new Int32Array(ex.MIDDLE_PATTERN.length).fill(0))[1];for(let t=0;t<4&&s<i;t++){let t=ex.decodeDigit(e,r,s,ex.L_PATTERNS);for(let e of(n+=String.fromCharCode(48+t),r))s+=e}return{rowOffset:s,resultString:n}}getBarcodeFormat(){return er.EAN_8}}class eF extends ex{constructor(){super(...arguments),this.ean13Reader=new eL}getBarcodeFormat(){return er.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))}decodeMiddle(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)}maybeReturnResult(e){let t=e.getText();if("0"===t.charAt(0)){let n=new en(t.substring(1),null,null,e.getResultPoints(),er.UPC_A);return null!=e.getResultMetadata()&&n.putAllMetadata(e.getResultMetadata()),n}throw new Y}reset(){this.ean13Reader.reset()}}class eU extends ex{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters.map(e=>e);r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],a=0;for(let t=0;t<6&&s<i;t++){let i=eU.decodeDigit(e,r,s,eU.L_AND_G_PATTERNS);for(let e of(n+=String.fromCharCode(48+i%10),r))s+=e;i>=10&&(a|=1<<5-t)}return{rowOffset:s,resultString:eU.determineNumSysAndCheckDigit(n,a)}}decodeEnd(e,t){return eU.findGuardPatternWithoutCounters(e,t,!0,eU.MIDDLE_END_PATTERN)}checkChecksum(e){return ex.checkChecksum(eU.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let n=0;n<=1;n++)for(let r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r])return String.fromCharCode(48+n)+e+String.fromCharCode(48+r);throw Y.getNotFoundInstance()}getBarcodeFormat(){return er.UPC_E}static convertUPCEtoUPCA(e){let t=e.slice(1,7).split("").map(e=>e.charCodeAt(0)),n=new W;n.append(e.charAt(0));let r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r)}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}eU.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),eU.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class eV extends eT{constructor(e){super();let t=null==e?null:e.get(F.POSSIBLE_FORMATS),n=[];null==t?(n.push(new eL),n.push(new eF),n.push(new eB),n.push(new eU)):(t.indexOf(er.EAN_13)>-1&&n.push(new eL),t.indexOf(er.UPC_A)>-1&&n.push(new eF),t.indexOf(er.EAN_8)>-1&&n.push(new eB),t.indexOf(er.UPC_E)>-1&&n.push(new eU)),this.readers=n}decodeRow(e,t,n){for(let r of this.readers)try{let i=r.decodeRow(e,t,n),s=i.getBarcodeFormat()===er.EAN_13&&"0"===i.getText().charAt(0),a=null==n?null:n.get(F.POSSIBLE_FORMATS),o=null==a||a.includes(er.UPC_A);if(s&&o){let e=i.getRawBytes(),t=new en(i.getText().substring(1),e,e?e.length:null,i.getResultPoints(),er.UPC_A);return t.putAllMetadata(i.getResultMetadata()),t}return i}catch(e){}throw new Y}reset(){for(let e of this.readers)e.reset()}}class ez extends eT{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=[,,,,],this.evenRoundingErrors=[,,,,],this.oddCounts=Array(this.dataCharacterCounters.length/2),this.evenCounts=Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let n=0;n<t.length;n++)if(eT.patternMatchVariance(e,t[n],ez.MAX_INDIVIDUAL_VARIANCE)<ez.MAX_AVG_VARIANCE)return n;throw new Y}static count(e){return ep.sum(new Int32Array(e))}static increment(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]>r&&(r=t[i],n=i);e[n]++}static decrement(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]<r&&(r=t[i],n=i);e[n]--}static isFinderPattern(e){let t=e[0]+e[1],n=t+e[2]+e[3],r=t/n;if(r>=ez.MIN_FINDER_PATTERN_RATIO&&r<=ez.MAX_FINDER_PATTERN_RATIO){let t=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;for(let r of e)r>n&&(n=r),r<t&&(t=r);return n<10*t}return!1}}ez.MAX_AVG_VARIANCE=.2,ez.MAX_INDIVIDUAL_VARIANCE=.45,ez.MIN_FINDER_PATTERN_RATIO=9.5/12,ez.MAX_FINDER_PATTERN_RATIO=12.5/14;class ej{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){return e instanceof ej&&this.value===e.value&&this.checksumPortion===e.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class eH{constructor(e,t,n,r,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=[],this.resultPoints.push(new em(n,i)),this.resultPoints.push(new em(r,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){return e instanceof eH&&this.value===e.value}hashCode(){return this.value}}class eW{constructor(){}static getRSSvalue(e,t,n){let r=0;for(let t of e)r+=t;let i=0,s=0,a=e.length;for(let o=0;o<a-1;o++){let l;for(l=1,s|=1<<o;l<e[o];l++,s&=~(1<<o)){let e=eW.combins(r-l-1,a-o-2);if(n&&0===s&&r-l-(a-o-1)>=a-o-1&&(e-=eW.combins(r-l-(a-o),a-o-2)),a-o-1>1){let n=0;for(let e=r-l-(a-o-2);e>t;e--)n+=eW.combins(r-l-e-1,a-o-3);e-=n*(a-1-o)}else r-l>t&&e--;i+=e}r-=l}return i}static combins(e,t){let n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);let i=1,s=1;for(let t=e;t>n;t--)i*=t,s<=r&&(i/=s,s++);for(;s<=r;)i/=s,s++;return i}}class eG{static buildBitArray(e){let t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);let n=new B(12*t),r=0,i=e[0].getRightChar().getValue();for(let e=11;e>=0;--e)(i&1<<e)!=0&&n.set(r),r++;for(let t=1;t<e.length;++t){let i=e[t],s=i.getLeftChar().getValue();for(let e=11;e>=0;--e)(s&1<<e)!=0&&n.set(r),r++;if(null!=i.getRightChar()){let e=i.getRightChar().getValue();for(let t=11;t>=0;--t)(e&1<<t)!=0&&n.set(r),r++}}return n}}class eY{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class eq{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class eX extends eq{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===eX.FNC1}}eX.FNC1="$";class e$ extends eq{constructor(e,t,n){super(e),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class eQ extends eq{constructor(e,t,n){if(super(e),t<0||t>10||n<0||n>10)throw new U;this.firstDigit=t,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===eQ.FNC1}isSecondDigitFNC1(){return this.secondDigit===eQ.FNC1}isAnyFNC1(){return this.firstDigit===eQ.FNC1||this.secondDigit===eQ.FNC1}}eQ.FNC1=10;class eK{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new Y;let t=e.substring(0,2);for(let n of eK.TWO_DIGIT_DATA_LENGTH)if(n[0]===t){if(n[1]===eK.VARIABLE_LENGTH)return eK.processVariableAI(2,n[2],e);return eK.processFixedAI(2,n[1],e)}if(e.length<3)throw new Y;let n=e.substring(0,3);for(let t of eK.THREE_DIGIT_DATA_LENGTH)if(t[0]===n){if(t[1]===eK.VARIABLE_LENGTH)return eK.processVariableAI(3,t[2],e);return eK.processFixedAI(3,t[1],e)}for(let t of eK.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(t[0]===n){if(t[1]===eK.VARIABLE_LENGTH)return eK.processVariableAI(4,t[2],e);return eK.processFixedAI(4,t[1],e)}if(e.length<4)throw new Y;let r=e.substring(0,4);for(let t of eK.FOUR_DIGIT_DATA_LENGTH)if(t[0]===r){if(t[1]===eK.VARIABLE_LENGTH)return eK.processVariableAI(4,t[2],e);return eK.processFixedAI(4,t[1],e)}throw new Y}static processFixedAI(e,t,n){if(n.length<e)throw new Y;let r=n.substring(0,e);if(n.length<e+t)throw new Y;let i=n.substring(e,e+t),s=n.substring(e+t),a="("+r+")"+i,o=eK.parseFieldsInGeneralPurpose(s);return null==o?a:a+o}static processVariableAI(e,t,n){let r,i=n.substring(0,e);r=n.length<e+t?n.length:e+t;let s=n.substring(e,r),a=n.substring(r),o="("+i+")"+s,l=eK.parseFieldsInGeneralPurpose(a);return null==l?o:o+l}}eK.VARIABLE_LENGTH=[],eK.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",eK.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",eK.VARIABLE_LENGTH,20],["22",eK.VARIABLE_LENGTH,29],["30",eK.VARIABLE_LENGTH,8],["37",eK.VARIABLE_LENGTH,8],["90",eK.VARIABLE_LENGTH,30],["91",eK.VARIABLE_LENGTH,30],["92",eK.VARIABLE_LENGTH,30],["93",eK.VARIABLE_LENGTH,30],["94",eK.VARIABLE_LENGTH,30],["95",eK.VARIABLE_LENGTH,30],["96",eK.VARIABLE_LENGTH,30],["97",eK.VARIABLE_LENGTH,3],["98",eK.VARIABLE_LENGTH,30],["99",eK.VARIABLE_LENGTH,30]],eK.THREE_DIGIT_DATA_LENGTH=[["240",eK.VARIABLE_LENGTH,30],["241",eK.VARIABLE_LENGTH,30],["242",eK.VARIABLE_LENGTH,6],["250",eK.VARIABLE_LENGTH,30],["251",eK.VARIABLE_LENGTH,30],["253",eK.VARIABLE_LENGTH,17],["254",eK.VARIABLE_LENGTH,20],["400",eK.VARIABLE_LENGTH,30],["401",eK.VARIABLE_LENGTH,30],["402",17],["403",eK.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",eK.VARIABLE_LENGTH,20],["421",eK.VARIABLE_LENGTH,15],["422",3],["423",eK.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],eK.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",eK.VARIABLE_LENGTH,15],["391",eK.VARIABLE_LENGTH,18],["392",eK.VARIABLE_LENGTH,15],["393",eK.VARIABLE_LENGTH,18],["703",eK.VARIABLE_LENGTH,30]],eK.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",eK.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",eK.VARIABLE_LENGTH,20],["8003",eK.VARIABLE_LENGTH,30],["8004",eK.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",eK.VARIABLE_LENGTH,30],["8008",eK.VARIABLE_LENGTH,12],["8018",18],["8020",eK.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",eK.VARIABLE_LENGTH,70],["8200",eK.VARIABLE_LENGTH,70]];class eZ{constructor(e){this.buffer=new W,this.information=e}decodeAllCodes(e,t){let n=t,r=null;for(;;){let t=this.decodeGeneralPurposeField(n,r),i=eK.parseFieldsInGeneralPurpose(t.getNewString());if(null!=i&&e.append(i),r=t.isRemaining()?""+t.getRemainingValue():null,n===t.getNewPosition())break;n=t.getNewPosition()}return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let t=this.extractNumericValueFromBitArray(e,4);return 0===t?new eQ(this.information.getSize(),eQ.FNC1,eQ.FNC1):new eQ(this.information.getSize(),t-1,eQ.FNC1)}let t=this.extractNumericValueFromBitArray(e,7);return new eQ(e+7,(t-8)/11,(t-8)%11)}extractNumericValueFromBitArray(e,t){return eZ.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,n){let r=0;for(let i=0;i<n;++i)e.get(t+i)&&(r|=1<<n-i-1);return r}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);let n=this.parseBlocks();return null!=n&&n.isRemaining()?new e$(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new e$(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let n=this.current.getPosition();if(e=this.current.isAlpha()?(t=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(t=this.parseIsoIec646Block()).isFinished():(t=this.parseNumericBlock()).isFinished(),n===this.current.getPosition()&&!e)break}while(!e)return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1())return new eY(!0,e.isSecondDigitFNC1()?new e$(this.current.getPosition(),this.buffer.toString()):new e$(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()));if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1())return new eY(!0,new e$(this.current.getPosition(),this.buffer.toString()));this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new eY(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1())return new eY(!0,new e$(this.current.getPosition(),this.buffer.toString()));this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new eY(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1())return new eY(!0,new e$(this.current.getPosition(),this.buffer.toString()));this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new eY(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253}decodeIsoIec646(e){let t,n=this.extractNumericValueFromBitArray(e,5);if(15===n)return new eX(e+5,eX.FNC1);if(n>=5&&n<15)return new eX(e+5,"0"+(n-5));let r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new eX(e+7,""+(r+1));if(r>=90&&r<116)return new eX(e+7,""+(r+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:t="!";break;case 233:t='"';break;case 234:t="%";break;case 235:t="&";break;case 236:t="'";break;case 237:t="(";break;case 238:t=")";break;case 239:t="*";break;case 240:t="+";break;case 241:t=",";break;case 242:t="-";break;case 243:t=".";break;case 244:t="/";break;case 245:t=":";break;case 246:t=";";break;case 247:t="<";break;case 248:t="=";break;case 249:t=">";break;case 250:t="?";break;case 251:t="_";break;case 252:t=" ";break;default:throw new U}return new eX(e+8,t)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}decodeAlphanumeric(e){let t,n=this.extractNumericValueFromBitArray(e,5);if(15===n)return new eX(e+5,eX.FNC1);if(n>=5&&n<15)return new eX(e+5,"0"+(n-5));let r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new eX(e+6,""+(r+33));switch(r){case 58:t="*";break;case 59:t=",";break;case 60:t="-";break;case 61:t=".";break;case 62:t="/";break;default:throw new eh("Decoding invalid alphanumeric value: "+r)}return new eX(e+6,t)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class eJ{constructor(e){this.information=e,this.generalDecoder=new eZ(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class e1 extends eJ{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)}encodeCompressedGtinWithoutAI(e,t,n){for(let n=0;n<4;++n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*n,10);r/100==0&&e.append("0"),r/10==0&&e.append("0"),e.append(r)}e1.appendCheckDigit(e,n)}static appendCheckDigit(e,t){let n=0;for(let r=0;r<13;r++){let i=e.charAt(r+t).charCodeAt(0)-48;n+=(1&r)==0?3*i:i}10==(n=10-n%10)&&(n=0),e.append(n)}}e1.GTIN_SIZE=40;class e0 extends e1{constructor(e){super(e)}parseInformation(){let e=new W;e.append("(01)");let t=e.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(e0.HEADER_SIZE,4);return e.append(n),this.encodeCompressedGtinWithoutAI(e,e0.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,e0.HEADER_SIZE+44)}}e0.HEADER_SIZE=4;class e2 extends eJ{constructor(e){super(e)}parseInformation(){let e=new W;return this.getGeneralDecoder().decodeAllCodes(e,e2.HEADER_SIZE)}}e2.HEADER_SIZE=5;class e3 extends e1{constructor(e){super(e)}encodeCompressedWeight(e,t,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);let i=this.checkWeight(r),s=1e5;for(let t=0;t<5;++t)i/s==0&&e.append("0"),s/=10;e.append(i)}}class e4 extends e3{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=e4.HEADER_SIZE+e3.GTIN_SIZE+e4.WEIGHT_SIZE)throw new Y;let e=new W;return this.encodeCompressedGtin(e,e4.HEADER_SIZE),this.encodeCompressedWeight(e,e4.HEADER_SIZE+e3.GTIN_SIZE,e4.WEIGHT_SIZE),e.toString()}}e4.HEADER_SIZE=5,e4.WEIGHT_SIZE=15;class e6 extends e4{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class e8 extends e4{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class e5 extends e1{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<e5.HEADER_SIZE+e1.GTIN_SIZE)throw new Y;let e=new W;this.encodeCompressedGtin(e,e5.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(e5.HEADER_SIZE+e1.GTIN_SIZE,e5.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField(e5.HEADER_SIZE+e1.GTIN_SIZE+e5.LAST_DIGIT_SIZE,null);return e.append(n.getNewString()),e.toString()}}e5.HEADER_SIZE=8,e5.LAST_DIGIT_SIZE=2;class e7 extends e1{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<e7.HEADER_SIZE+e1.GTIN_SIZE)throw new Y;let e=new W;this.encodeCompressedGtin(e,e7.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(e7.HEADER_SIZE+e1.GTIN_SIZE,e7.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(e7.HEADER_SIZE+e1.GTIN_SIZE+e7.LAST_DIGIT_SIZE,e7.FIRST_THREE_DIGITS_SIZE);n/100==0&&e.append("0"),n/10==0&&e.append("0"),e.append(n);let r=this.getGeneralDecoder().decodeGeneralPurposeField(e7.HEADER_SIZE+e1.GTIN_SIZE+e7.LAST_DIGIT_SIZE+e7.FIRST_THREE_DIGITS_SIZE,null);return e.append(r.getNewString()),e.toString()}}e7.HEADER_SIZE=8,e7.LAST_DIGIT_SIZE=2,e7.FIRST_THREE_DIGITS_SIZE=10;class e9 extends e3{constructor(e,t,n){super(e),this.dateCode=n,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=e9.HEADER_SIZE+e9.GTIN_SIZE+e9.WEIGHT_SIZE+e9.DATE_SIZE)throw new Y;let e=new W;return this.encodeCompressedGtin(e,e9.HEADER_SIZE),this.encodeCompressedWeight(e,e9.HEADER_SIZE+e9.GTIN_SIZE,e9.WEIGHT_SIZE),this.encodeCompressedDate(e,e9.HEADER_SIZE+e9.GTIN_SIZE+e9.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,e9.DATE_SIZE);if(38400==n)return;e.append("("),e.append(this.dateCode),e.append(")");let r=n%32,i=(n/=32)%12+1,s=n/=12;s/10==0&&e.append("0"),e.append(s),i/10==0&&e.append("0"),e.append(i),r/10==0&&e.append("0"),e.append(r)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}function te(e){try{if(e.get(1))return new e0(e);if(!e.get(2))return new e2(e);switch(eZ.extractNumericValueFromBitArray(e,1,4)){case 4:return new e6(e);case 5:return new e8(e)}switch(eZ.extractNumericValueFromBitArray(e,1,5)){case 12:return new e5(e);case 13:return new e7(e)}switch(eZ.extractNumericValueFromBitArray(e,1,7)){case 56:return new e9(e,"310","11");case 57:return new e9(e,"320","11");case 58:return new e9(e,"310","13");case 59:return new e9(e,"320","13");case 60:return new e9(e,"310","15");case 61:return new e9(e,"320","15");case 62:return new e9(e,"310","17");case 63:return new e9(e,"320","17")}}catch(t){throw console.log(t),new eh("unknown decoder: "+e)}}e9.HEADER_SIZE=8,e9.WEIGHT_SIZE=20,e9.DATE_SIZE=16;class tt{constructor(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof tt&&tt.equalsOrNull(e.leftchar,t.leftchar)&&tt.equalsOrNull(e.rightchar,t.rightchar)&&tt.equalsOrNull(e.finderpattern,t.finderpattern)}static equalsOrNull(e,t){return null===e?null===t:tt.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class tn{constructor(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof tn&&this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed}checkEqualitity(e,t){let n;if(e&&t)return e.forEach((e,r)=>{t.forEach(t=>{e.getLeftChar().getValue()===t.getLeftChar().getValue()&&e.getRightChar().getValue()===t.getRightChar().getValue()&&e.getFinderPatter().getValue()===t.getFinderPatter().getValue()&&(n=!0)})}),n}}class tr extends ez{constructor(e){super(...arguments),this.pairs=Array(tr.MAX_PAIRS),this.rows=[],this.startEnd=[2],this.verbose=!0===e}decodeRow(e,t,n){this.pairs.length=0,this.startFromEven=!1;try{return tr.constructResult(this.decodeRow2pairs(e,t))}catch(e){this.verbose&&console.log(e)}return this.pairs.length=0,this.startFromEven=!0,tr.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let n,r=!1;for(;!r;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(e){if(e instanceof Y){if(!this.pairs.length)throw new Y;r=!0}}if(this.checkChecksum())return this.pairs;if(n=!!this.rows.length,this.storeRow(e,!1),n){let e=this.checkRowsBoolean(!1);if(null!=e||null!=(e=this.checkRowsBoolean(!0)))return e}throw new Y}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows([],0)}catch(e){this.verbose&&console.log(e)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let n=t;n<this.rows.length;n++){let t=this.rows[n];for(let t of(this.pairs.length=0,e))this.pairs.push(t.getPairs());if(this.pairs.push(t.getPairs()),!tr.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let r=Array(e);r.push(t);try{return this.checkRows(r,n+1)}catch(e){this.verbose&&console.log(e)}}throw new Y}static isValidSequence(e){for(let t of tr.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let n=!0;for(let r=0;r<e.length;r++)if(e[r].getFinderPattern().getValue()!=t[r]){n=!1;break}if(n)return!0}return!1}storeRow(e,t){let n=0,r=!1,i=!1;for(;n<this.rows.length;){let t=this.rows[n];if(t.getRowNumber()>e){i=t.isEquivalent(this.pairs);break}r=t.isEquivalent(this.pairs),n++}i||r||tr.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new tn(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let n of t)if(n.getPairs().length!==e.length){for(let t of n.getPairs())for(let n of e)if(tt.equals(t,n))break}}static isPartialRow(e,t){for(let n of t){let t=!0;for(let r of e){let e=!1;for(let t of n.getPairs())if(r.equals(t)){e=!0;break}if(!e){t=!1;break}}if(t)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=te(eG.buildBitArray(e)).parseInformation(),n=e[0].getFinderPattern().getResultPoints(),r=e[e.length-1].getFinderPattern().getResultPoints();return new en(t,null,null,[n[0],n[1],r[0],r[1]],er.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(null==n)return!1;let r=n.getChecksumPortion(),i=2;for(let e=1;e<this.pairs.size();++e){let t=this.pairs.get(e);r+=t.getLeftChar().getChecksumPortion(),i++;let n=t.getRightChar();null!=n&&(r+=n.getChecksumPortion(),i++)}return 211*(i-4)+(r%=211)==t.getValue()}static getNextSecondBar(e,t){let n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n}retrieveNextPair(e,t,n){let r,i,s=t.length%2==0;this.startFromEven&&(s=!s);let a=!0,o=-1;do this.findNextPair(e,t,o),null==(r=this.parseFoundFinderPattern(e,n,s))?o=tr.getNextSecondBar(e,this.startEnd[0]):a=!1;while(a)let l=this.decodeDataCharacter(e,r,s,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new Y;try{i=this.decodeDataCharacter(e,r,s,!1)}catch(e){i=null,this.verbose&&console.log(e)}return new tt(l,i,r,!0)}isEmptyPair(e){return 0===e.length}findNextPair(e,t,n){let r,i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let s=e.getSize();r=n>=0?n:this.isEmptyPair(t)?0:t[t.length-1].getFinderPattern().getStartEnd()[1];let a=t.length%2!=0;this.startFromEven&&(a=!a);let o=!1;for(;r<s&&(o=!e.get(r));)r++;let l=0,u=r;for(let t=r;t<s;t++)if(e.get(t)!=o)i[l]++;else{if(3==l){if(a&&tr.reverseCounters(i),tr.isFinderPattern(i)){this.startEnd[0]=u,this.startEnd[1]=t;return}a&&tr.reverseCounters(i),u+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,o=!o}throw new Y}static reverseCounters(e){let t=e.length;for(let n=0;n<t/2;++n){let r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}}parseFoundFinderPattern(e,t,n){let r,i,s,a;if(n){let t=this.startEnd[0]-1;for(;t>=0&&!e.get(t);)t--;t++,r=this.startEnd[0]-t,i=t,s=this.startEnd[1]}else i=this.startEnd[0],r=(s=e.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];let o=this.getDecodeFinderCounters();M.arraycopy(o,0,o,1,o.length-1),o[0]=r;try{a=this.parseFinderValue(o,tr.FINDER_PATTERNS)}catch(e){return null}return new eH(a,[i,s],i,s,t)}decodeDataCharacter(e,t,n,r){let i=this.getDataCharacterCounters();for(let e=0;e<i.length;e++)i[e]=0;if(r)tr.recordPatternInReverse(e,t.getStartEnd()[0],i);else{tr.recordPattern(e,t.getStartEnd()[1],i);for(let e=0,t=i.length-1;e<t;e++,t--){let n=i[e];i[e]=i[t],i[t]=n}}let s=ep.sum(new Int32Array(i))/17,a=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(s-a)/a>.3)throw new Y;let o=this.getOddCounts(),l=this.getEvenCounts(),u=this.getOddRoundingErrors(),c=this.getEvenRoundingErrors();for(let e=0;e<i.length;e++){let t=i[e]/s,n=t+.5;if(n<1){if(t<.3)throw new Y;n=1}else if(n>8){if(t>8.7)throw new Y;n=8}let r=e/2;(1&e)==0?(o[r]=n,u[r]=t-n):(l[r]=n,c[r]=t-n)}this.adjustOddEvenCounts(17);let h=4*t.getValue()+2*!n+ +!r-1,d=0,f=0;for(let e=o.length-1;e>=0;e--){if(tr.isNotA1left(t,n,r)){let t=tr.WEIGHTS[h][2*e];f+=o[e]*t}d+=o[e]}let p=0;for(let e=l.length-1;e>=0;e--)if(tr.isNotA1left(t,n,r)){let t=tr.WEIGHTS[h][2*e+1];p+=l[e]*t}let g=f+p;if((1&d)!=0||d>13||d<4)throw new Y;let m=(13-d)/2,y=tr.SYMBOL_WIDEST[m],w=eW.getRSSvalue(o,y,!0),E=eW.getRSSvalue(l,9-y,!1);return new ej(w*tr.EVEN_TOTAL_SUBSET[m]+E+tr.GSUM[m],g)}static isNotA1left(e,t,n){return!(0==e.getValue()&&t&&n)}adjustOddEvenCounts(e){let t=ep.sum(new Int32Array(this.getOddCounts())),n=ep.sum(new Int32Array(this.getEvenCounts())),r=!1,i=!1;t>13?i=!0:t<4&&(r=!0);let s=!1,a=!1;n>13?a=!0:n<4&&(s=!0);let o=t+n-e,l=(1&t)==1,u=(1&n)==0;if(1==o)if(l){if(u)throw new Y;i=!0}else{if(!u)throw new Y;a=!0}else if(-1==o)if(l){if(u)throw new Y;r=!0}else{if(!u)throw new Y;s=!0}else if(0==o){if(l){if(!u)throw new Y;t<n?(r=!0,a=!0):(i=!0,s=!0)}else if(u)throw new Y}else throw new Y;if(r){if(i)throw new Y;tr.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&tr.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(a)throw new Y;tr.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&tr.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}tr.SYMBOL_WIDEST=[7,5,4,3,1],tr.EVEN_TOTAL_SUBSET=[4,20,52,104,204],tr.GSUM=[0,348,1388,2948,3988],tr.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],tr.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],tr.FINDER_PAT_A=0,tr.FINDER_PAT_B=1,tr.FINDER_PAT_C=2,tr.FINDER_PAT_D=3,tr.FINDER_PAT_E=4,tr.FINDER_PAT_F=5,tr.FINDER_PATTERN_SEQUENCES=[[tr.FINDER_PAT_A,tr.FINDER_PAT_A],[tr.FINDER_PAT_A,tr.FINDER_PAT_B,tr.FINDER_PAT_B],[tr.FINDER_PAT_A,tr.FINDER_PAT_C,tr.FINDER_PAT_B,tr.FINDER_PAT_D],[tr.FINDER_PAT_A,tr.FINDER_PAT_E,tr.FINDER_PAT_B,tr.FINDER_PAT_D,tr.FINDER_PAT_C],[tr.FINDER_PAT_A,tr.FINDER_PAT_E,tr.FINDER_PAT_B,tr.FINDER_PAT_D,tr.FINDER_PAT_D,tr.FINDER_PAT_F],[tr.FINDER_PAT_A,tr.FINDER_PAT_E,tr.FINDER_PAT_B,tr.FINDER_PAT_D,tr.FINDER_PAT_E,tr.FINDER_PAT_F,tr.FINDER_PAT_F],[tr.FINDER_PAT_A,tr.FINDER_PAT_A,tr.FINDER_PAT_B,tr.FINDER_PAT_B,tr.FINDER_PAT_C,tr.FINDER_PAT_C,tr.FINDER_PAT_D,tr.FINDER_PAT_D],[tr.FINDER_PAT_A,tr.FINDER_PAT_A,tr.FINDER_PAT_B,tr.FINDER_PAT_B,tr.FINDER_PAT_C,tr.FINDER_PAT_C,tr.FINDER_PAT_D,tr.FINDER_PAT_E,tr.FINDER_PAT_E],[tr.FINDER_PAT_A,tr.FINDER_PAT_A,tr.FINDER_PAT_B,tr.FINDER_PAT_B,tr.FINDER_PAT_C,tr.FINDER_PAT_C,tr.FINDER_PAT_D,tr.FINDER_PAT_E,tr.FINDER_PAT_F,tr.FINDER_PAT_F],[tr.FINDER_PAT_A,tr.FINDER_PAT_A,tr.FINDER_PAT_B,tr.FINDER_PAT_B,tr.FINDER_PAT_C,tr.FINDER_PAT_D,tr.FINDER_PAT_D,tr.FINDER_PAT_E,tr.FINDER_PAT_E,tr.FINDER_PAT_F,tr.FINDER_PAT_F]],tr.MAX_PAIRS=11;class ti extends ej{constructor(e,t,n){super(e,t),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class ts extends ez{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,n){let r=this.decodePair(t,!1,e,n);ts.addOrTally(this.possibleLeftPairs,r),t.reverse();let i=this.decodePair(t,!0,e,n);for(let e of(ts.addOrTally(this.possibleRightPairs,i),t.reverse(),this.possibleLeftPairs))if(e.getCount()>1){for(let t of this.possibleRightPairs)if(t.getCount()>1&&ts.checkChecksum(e,t))return ts.constructResult(e,t)}throw new Y}static addOrTally(e,t){if(null==t)return;let n=!1;for(let r of e)if(r.getValue()===t.getValue()){r.incrementCount(),n=!0;break}n||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let n=new String(4537077*e.getValue()+t.getValue()).toString(),r=new W;for(let e=13-n.length;e>0;e--)r.append("0");r.append(n);let i=0;for(let e=0;e<13;e++){let t=r.charAt(e).charCodeAt(0)-48;i+=(1&e)==0?3*t:t}10==(i=10-i%10)&&(i=0),r.append(i.toString());let s=e.getFinderPattern().getResultPoints(),a=t.getFinderPattern().getResultPoints();return new en(r.toString(),null,0,[s[0],s[1],a[0],a[1]],er.RSS_14,new Date().getTime())}static checkChecksum(e,t){let n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r}decodePair(e,t,n,r){try{let i=this.findFinderPattern(e,t),s=this.parseFoundFinderPattern(e,n,t,i),a=null==r?null:r.get(F.NEED_RESULT_POINT_CALLBACK);if(null!=a){let r=(i[0]+i[1])/2;t&&(r=e.getSize()-1-r),a.foundPossibleResultPoint(new em(r,n))}let o=this.decodeDataCharacter(e,s,!0),l=this.decodeDataCharacter(e,s,!1);return new ti(1597*o.getValue()+l.getValue(),o.getChecksumPortion()+4*l.getChecksumPortion(),s)}catch(e){return null}}decodeDataCharacter(e,t,n){let r=this.getDataCharacterCounters();for(let e=0;e<r.length;e++)r[e]=0;if(n)eT.recordPatternInReverse(e,t.getStartEnd()[0],r);else{eT.recordPattern(e,t.getStartEnd()[1]+1,r);for(let e=0,t=r.length-1;e<t;e++,t--){let n=r[e];r[e]=r[t],r[t]=n}}let i=n?16:15,s=ep.sum(new Int32Array(r))/i,a=this.getOddCounts(),o=this.getEvenCounts(),l=this.getOddRoundingErrors(),u=this.getEvenRoundingErrors();for(let e=0;e<r.length;e++){let t=r[e]/s,n=Math.floor(t+.5);n<1?n=1:n>8&&(n=8);let i=Math.floor(e/2);(1&e)==0?(a[i]=n,l[i]=t-n):(o[i]=n,u[i]=t-n)}this.adjustOddEvenCounts(n,i);let c=0,h=0;for(let e=a.length-1;e>=0;e--)h*=9,h+=a[e],c+=a[e];let d=0,f=0;for(let e=o.length-1;e>=0;e--)d*=9,d+=o[e],f+=o[e];let p=h+3*d;if(n){if((1&c)!=0||c>12||c<4)throw new Y;let e=(12-c)/2,t=ts.OUTSIDE_ODD_WIDEST[e],n=eW.getRSSvalue(a,t,!1),r=eW.getRSSvalue(o,9-t,!0);return new ej(n*ts.OUTSIDE_EVEN_TOTAL_SUBSET[e]+r+ts.OUTSIDE_GSUM[e],p)}{if((1&f)!=0||f>10||f<4)throw new Y;let e=(10-f)/2,t=ts.INSIDE_ODD_WIDEST[e],n=eW.getRSSvalue(a,t,!0);return new ej(eW.getRSSvalue(o,9-t,!1)*ts.INSIDE_ODD_TOTAL_SUBSET[e]+n+ts.INSIDE_GSUM[e],p)}}findFinderPattern(e,t){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let r=e.getSize(),i=!1,s=0;for(;s<r&&t!==(i=!e.get(s));)s++;let a=0,o=s;for(let t=s;t<r;t++)if(e.get(t)!==i)n[a]++;else{if(3===a){if(ez.isFinderPattern(n))return[o,t];o+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,a--}else a++;n[a]=1,i=!i}throw new Y}parseFoundFinderPattern(e,t,n,r){let i=e.get(r[0]),s=r[0]-1;for(;s>=0&&i!==e.get(s);)s--;s++;let a=r[0]-s,o=this.getDecodeFinderCounters(),l=new Int32Array(o.length);M.arraycopy(o,0,l,1,o.length-1),l[0]=a;let u=this.parseFinderValue(l,ts.FINDER_PATTERNS),c=s,h=r[1];return n&&(c=e.getSize()-1-c,h=e.getSize()-1-h),new eH(u,[s,r[1]],c,h,t)}adjustOddEvenCounts(e,t){let n=ep.sum(new Int32Array(this.getOddCounts())),r=ep.sum(new Int32Array(this.getEvenCounts())),i=!1,s=!1,a=!1,o=!1;e?(n>12?s=!0:n<4&&(i=!0),r>12?o=!0:r<4&&(a=!0)):(n>11?s=!0:n<5&&(i=!0),r>10?o=!0:r<4&&(a=!0));let l=n+r-t,u=(1&n)==+!!e,c=(1&r)==1;if(1===l)if(u){if(c)throw new Y;s=!0}else{if(!c)throw new Y;o=!0}else if(-1===l)if(u){if(c)throw new Y;i=!0}else{if(!c)throw new Y;a=!0}else if(0===l){if(u){if(!c)throw new Y;n<r?(i=!0,o=!0):(s=!0,a=!0)}else if(c)throw new Y}else throw new Y;if(i){if(s)throw new Y;ez.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&ez.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(o)throw new Y;ez.increment(this.getEvenCounts(),this.getOddRoundingErrors())}o&&ez.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ts.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],ts.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],ts.OUTSIDE_GSUM=[0,161,961,2015,2715],ts.INSIDE_GSUM=[0,336,1036,1516],ts.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],ts.INSIDE_ODD_WIDEST=[2,4,6,8],ts.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ta extends eT{constructor(e,t){super(),this.readers=[],this.verbose=!0===t;let n=e?e.get(F.POSSIBLE_FORMATS):null,r=e&&void 0!==e.get(F.ASSUME_CODE_39_CHECK_DIGIT);n?((n.includes(er.EAN_13)||n.includes(er.UPC_A)||n.includes(er.EAN_8)||n.includes(er.UPC_E))&&this.readers.push(new eV(e)),n.includes(er.CODE_39)&&this.readers.push(new eR(r)),n.includes(er.CODE_128)&&this.readers.push(new eN),n.includes(er.ITF)&&this.readers.push(new eD),n.includes(er.RSS_14)&&this.readers.push(new ts),n.includes(er.RSS_EXPANDED)&&this.readers.push(new tr(this.verbose))):(this.readers.push(new eV(e)),this.readers.push(new eR),this.readers.push(new eV(e)),this.readers.push(new eN),this.readers.push(new eD),this.readers.push(new ts),this.readers.push(new tr(this.verbose)))}decodeRow(e,t,n){for(let r=0;r<this.readers.length;r++)try{return this.readers[r].decodeRow(e,t,n)}catch(e){}throw new Y}reset(){this.readers.forEach(e=>e.reset())}}class to{constructor(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class tl{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class tu{constructor(e,t,n,r,i,s){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=i,this.ecBlocks=s;let a=0,o=s.getECCodewords();for(let e of s.getECBlocks())a+=e.getCount()*(e.getDataCodewords()+o);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if((1&e)!=0||(1&t)!=0)throw new U;for(let n of tu.VERSIONS)if(n.symbolSizeRows===e&&n.symbolSizeColumns===t)return n;throw new U}toString(){return""+this.versionNumber}static buildVersions(){return[new tu(1,10,10,8,8,new to(5,new tl(1,3))),new tu(2,12,12,10,10,new to(7,new tl(1,5))),new tu(3,14,14,12,12,new to(10,new tl(1,8))),new tu(4,16,16,14,14,new to(12,new tl(1,12))),new tu(5,18,18,16,16,new to(14,new tl(1,18))),new tu(6,20,20,18,18,new to(18,new tl(1,22))),new tu(7,22,22,20,20,new to(20,new tl(1,30))),new tu(8,24,24,22,22,new to(24,new tl(1,36))),new tu(9,26,26,24,24,new to(28,new tl(1,44))),new tu(10,32,32,14,14,new to(36,new tl(1,62))),new tu(11,36,36,16,16,new to(42,new tl(1,86))),new tu(12,40,40,18,18,new to(48,new tl(1,114))),new tu(13,44,44,20,20,new to(56,new tl(1,144))),new tu(14,48,48,22,22,new to(68,new tl(1,174))),new tu(15,52,52,24,24,new to(42,new tl(2,102))),new tu(16,64,64,14,14,new to(56,new tl(2,140))),new tu(17,72,72,16,16,new to(36,new tl(4,92))),new tu(18,80,80,18,18,new to(48,new tl(4,114))),new tu(19,88,88,20,20,new to(56,new tl(4,144))),new tu(20,96,96,22,22,new to(68,new tl(4,174))),new tu(21,104,104,24,24,new to(56,new tl(6,136))),new tu(22,120,120,18,18,new to(68,new tl(6,175))),new tu(23,132,132,20,20,new to(62,new tl(8,163))),new tu(24,144,144,22,22,new to(62,new tl(8,156),new tl(2,155))),new tu(25,8,18,6,16,new to(7,new tl(1,5))),new tu(26,8,32,6,14,new to(11,new tl(1,10))),new tu(27,12,26,10,24,new to(14,new tl(1,16))),new tu(28,12,36,10,16,new to(18,new tl(1,22))),new tu(29,16,36,14,16,new to(24,new tl(1,32))),new tu(30,16,48,14,22,new to(28,new tl(1,49)))]}}tu.VERSIONS=tu.buildVersions();class tc{constructor(e){let t=e.getHeight();if(t<8||t>144||(1&t)!=0)throw new U;this.version=tc.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new G(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){let t=e.getHeight(),n=e.getWidth();return tu.getVersionForDimensions(t,n)}readCodewords(){let e=new Int8Array(this.version.getTotalCodewords()),t=0,n=4,r=0,i=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),a=!1,o=!1,l=!1,u=!1;do if(n!==i||0!==r||a)if(n!==i-2||0!==r||(3&s)==0||o)if(n!==i+4||2!==r||(7&s)!=0||l)if(n!==i-2||0!==r||(7&s)!=4||u){do n<i&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,i,s)),n-=2,r+=2;while(n>=0&&r<s)n+=1,r+=3;do n>=0&&r<s&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,i,s)),n+=2,r-=2;while(n<i&&r>=0)n+=3,r+=1}else e[t++]=255&this.readCorner4(i,s),n-=2,r+=2,u=!0;else e[t++]=255&this.readCorner3(i,s),n-=2,r+=2,l=!0;else e[t++]=255&this.readCorner2(i,s),n-=2,r+=2,o=!0;else e[t++]=255&this.readCorner1(i,s),n-=2,r+=2,a=!0;while(n<i||r<s)if(t!==this.version.getTotalCodewords())throw new U;return e}readModule(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,n,r){let i=0;return this.readModule(e-2,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-2,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t,n,r)&&(i|=1),i<<=1,this.readModule(e,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e,t,n,r)&&(i|=1),i}readCorner1(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}readCorner2(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner3(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner4(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}extractDataRegion(e){let t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new N("Dimension of bitMatrix must match the version size");let r=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),s=t/r|0,a=n/i|0,o=new G(a*i,s*r);for(let t=0;t<s;++t){let n=t*r;for(let s=0;s<a;++s){let a=s*i;for(let l=0;l<r;++l){let u=t*(r+2)+1+l,c=n+l;for(let t=0;t<i;++t){let n=s*(i+2)+1+t;if(e.get(n,u)){let e=a+t;o.set(e,c)}}}}}return o}}class th{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){let n=t.getECBlocks(),r=0,i=n.getECBlocks();for(let e of i)r+=e.getCount();let s=Array(r),a=0;for(let e of i)for(let t=0;t<e.getCount();t++){let t=e.getDataCodewords(),r=n.getECCodewords()+t;s[a++]=new th(t,new Uint8Array(r))}let o=s[0].codewords.length-n.getECCodewords(),l=o-1,u=0;for(let t=0;t<l;t++)for(let n=0;n<a;n++)s[n].codewords[t]=e[u++];let c=24===t.getVersionNumber(),h=c?8:a;for(let t=0;t<h;t++)s[t].codewords[o-1]=e[u++];let d=s[0].codewords.length;for(let t=o;t<d;t++)for(let n=0;n<a;n++){let r=c?(n+8)%a:n,i=c&&r>7?t-1:t;s[r].codewords[i]=e[u++]}if(u!==e.length)throw new N;return s}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class td{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new N(""+e);let t=0,n=this.bitOffset,r=this.byteOffset,i=this.bytes;if(n>0){let s=8-n,a=e<s?e:s,o=s-a;t=(i[r]&255>>8-a<<o)>>o,e-=a,8===(n+=a)&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|255&i[r],r++,e-=8;if(e>0){let s=8-e;t=t<<e|(i[r]&255>>s<<s)>>s,n+=e}}return this.bitOffset=n,this.byteOffset=r,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}(o=w||(w={}))[o.PAD_ENCODE=0]="PAD_ENCODE",o[o.ASCII_ENCODE=1]="ASCII_ENCODE",o[o.C40_ENCODE=2]="C40_ENCODE",o[o.TEXT_ENCODE=3]="TEXT_ENCODE",o[o.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",o[o.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",o[o.BASE256_ENCODE=6]="BASE256_ENCODE";class tf{static decode(e){let t=new td(e),n=new W,r=new W,i=[],s=w.ASCII_ENCODE;do if(s===w.ASCII_ENCODE)s=this.decodeAsciiSegment(t,n,r);else{switch(s){case w.C40_ENCODE:this.decodeC40Segment(t,n);break;case w.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case w.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case w.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case w.BASE256_ENCODE:this.decodeBase256Segment(t,n,i);break;default:throw new U}s=w.ASCII_ENCODE}while(s!==w.PAD_ENCODE&&t.available()>0)return r.length()>0&&n.append(r.toString()),new es(e,n.toString(),0===i.length?null:i,null)}static decodeAsciiSegment(e,t,n){let r=!1;do{let i=e.readBits(8);if(0===i)throw new U;if(i<=128){r&&(i+=128),t.append(String.fromCharCode(i-1));break}if(129===i)return w.PAD_ENCODE;else if(i<=229){let e=i-130;e<10&&t.append("0"),t.append(""+e)}else switch(i){case 230:return w.C40_ENCODE;case 231:return w.BASE256_ENCODE;case 232:t.append("\x1d");break;case 233:case 234:case 241:break;case 235:r=!0;break;case 236:t.append("[)>\x1e05\x1d"),n.insert(0,"\x1e\x04");break;case 237:t.append("[)>\x1e06\x1d"),n.insert(0,"\x1e\x04");break;case 238:return w.ANSIX12_ENCODE;case 239:return w.TEXT_ENCODE;case 240:return w.EDIFACT_ENCODE;default:if(254!==i||0!==e.available())throw new U}}while(e.available()>0)return w.ASCII_ENCODE}static decodeC40Segment(e,t){let n=!1,r=[],i=0;do{if(8===e.available())return;let s=e.readBits(8);if(254===s)return;this.parseTwoBytes(s,e.readBits(8),r);for(let e=0;e<3;e++){let s=r[e];switch(i){case 0:if(s<3)i=s+1;else if(s<this.C40_BASIC_SET_CHARS.length){let e=this.C40_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else throw new U;break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),i=0;break;case 2:if(s<this.C40_SHIFT2_SET_CHARS.length){let e=this.C40_SHIFT2_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else switch(s){case 27:t.append("\x1d");break;case 30:n=!0;break;default:throw new U}i=0;break;case 3:n?(t.append(String.fromCharCode(s+224)),n=!1):t.append(String.fromCharCode(s+96)),i=0;break;default:throw new U}}}while(e.available()>0)}static decodeTextSegment(e,t){let n=!1,r=[],i=0;do{if(8===e.available())return;let s=e.readBits(8);if(254===s)return;this.parseTwoBytes(s,e.readBits(8),r);for(let e=0;e<3;e++){let s=r[e];switch(i){case 0:if(s<3)i=s+1;else if(s<this.TEXT_BASIC_SET_CHARS.length){let e=this.TEXT_BASIC_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else throw new U;break;case 1:n?(t.append(String.fromCharCode(s+128)),n=!1):t.append(String.fromCharCode(s)),i=0;break;case 2:if(s<this.TEXT_SHIFT2_SET_CHARS.length){let e=this.TEXT_SHIFT2_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e)}else switch(s){case 27:t.append("\x1d");break;case 30:n=!0;break;default:throw new U}i=0;break;case 3:if(s<this.TEXT_SHIFT3_SET_CHARS.length){let e=this.TEXT_SHIFT3_SET_CHARS[s];n?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),n=!1):t.append(e),i=0}else throw new U;break;default:throw new U}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){let n=[];do{if(8===e.available())return;let r=e.readBits(8);if(254===r)return;this.parseTwoBytes(r,e.readBits(8),n);for(let e=0;e<3;e++){let r=n[e];switch(r){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(r<14)t.append(String.fromCharCode(r+44));else if(r<40)t.append(String.fromCharCode(r+51));else throw new U}}}while(e.available()>0)}static parseTwoBytes(e,t,n){let r=(e<<8)+t-1,i=Math.floor(r/1600);n[0]=i,r-=1600*i,i=Math.floor(r/40),n[1]=i,n[2]=r-40*i}static decodeEdifactSegment(e,t){do{if(16>=e.available())return;for(let n=0;n<4;n++){let n=e.readBits(6);if(31===n){let t=8-e.getBitOffset();8!==t&&e.readBits(t);return}(32&n)==0&&(n|=64),t.append(String.fromCharCode(n))}}while(e.available()>0)}static decodeBase256Segment(e,t,n){let r,i=1+e.getByteOffset(),s=this.unrandomize255State(e.readBits(8),i++);if((r=0===s?e.available()/8|0:s<250?s:250*(s-249)+this.unrandomize255State(e.readBits(8),i++))<0)throw new U;let a=new Uint8Array(r);for(let t=0;t<r;t++){if(8>e.available())throw new U;a[t]=this.unrandomize255State(e.readBits(8),i++)}n.push(a);try{t.append(j.decode(a,H.ISO88591))}catch(e){throw new eh("Platform does not support required encoding: "+e.message)}}static unrandomize255State(e,t){let n=e-(149*t%255+1);return n>=0?n:n+256}}tf.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],tf.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],tf.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],tf.TEXT_SHIFT2_SET_CHARS=tf.C40_SHIFT2_SET_CHARS,tf.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class tp{constructor(){this.rsDecoder=new ed(eu.DATA_MATRIX_FIELD_256)}decode(e){let t=new tc(e),n=t.getVersion(),r=t.readCodewords(),i=th.getDataBlocks(r,n),s=0;for(let e of i)s+=e.getNumDataCodewords();let a=new Uint8Array(s),o=i.length;for(let e=0;e<o;e++){let t=i[e],n=t.getCodewords(),r=t.getNumDataCodewords();this.correctErrors(n,r);for(let t=0;t<r;t++)a[t*o+e]=n[t]}return tf.decode(a)}correctErrors(e,t){let n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(e){throw new D}for(let r=0;r<t;r++)e[r]=n[r]}}class tg{constructor(e){this.image=e,this.rectangleDetector=new eE(this.image)}detect(){let e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if((t=this.detectSolid2(t))[3]=this.correctTopRight(t),!t[3])throw new Y;let n=(t=this.shiftToModuleCenter(t))[0],r=t[1],i=t[2],s=t[3],a=this.transitionsBetween(n,s)+1,o=this.transitionsBetween(i,s)+1;return(1&a)==1&&(a+=1),(1&o)==1&&(o+=1),4*a<7*o&&4*o<7*a&&(a=o=Math.max(a,o)),new ey(tg.sampleGrid(this.image,n,r,i,s,a,o),[n,r,i,s])}static shiftPoint(e,t,n){let r=(t.getX()-e.getX())/(n+1),i=(t.getY()-e.getY())/(n+1);return new em(e.getX()+r,e.getY()+i)}static moveAway(e,t,n){let r=e.getX(),i=e.getY();return r<t?r-=1:r+=1,i<n?i-=1:i+=1,new em(r,i)}detectSolid1(e){let t=e[0],n=e[1],r=e[3],i=e[2],s=this.transitionsBetween(t,n),a=this.transitionsBetween(n,r),o=this.transitionsBetween(r,i),l=this.transitionsBetween(i,t),u=s,c=[i,t,n,r];return u>a&&(u=a,c[0]=t,c[1]=n,c[2]=r,c[3]=i),u>o&&(u=o,c[0]=n,c[1]=r,c[2]=i,c[3]=t),u>l&&(c[0]=r,c[1]=i,c[2]=t,c[3]=n),c}detectSolid2(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i),a=tg.shiftPoint(n,r,(s+1)*4),o=tg.shiftPoint(r,n,(s+1)*4);return this.transitionsBetween(a,t)<this.transitionsBetween(o,i)?(e[0]=t,e[1]=n,e[2]=r,e[3]=i):(e[0]=n,e[1]=r,e[2]=i,e[3]=t),e}correctTopRight(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i),a=this.transitionsBetween(n,i),o=tg.shiftPoint(t,n,(a+1)*4),l=tg.shiftPoint(r,n,(s+1)*4);s=this.transitionsBetween(o,i),a=this.transitionsBetween(l,i);let u=new em(i.getX()+(r.getX()-n.getX())/(s+1),i.getY()+(r.getY()-n.getY())/(s+1)),c=new em(i.getX()+(t.getX()-n.getX())/(a+1),i.getY()+(t.getY()-n.getY())/(a+1));return this.isValid(u)?this.isValid(c)?this.transitionsBetween(o,u)+this.transitionsBetween(l,u)>this.transitionsBetween(o,c)+this.transitionsBetween(l,c)?u:c:u:this.isValid(c)?c:null}shiftToModuleCenter(e){let t,n,r=e[0],i=e[1],s=e[2],a=e[3],o=this.transitionsBetween(r,a)+1,l=this.transitionsBetween(s,a)+1,u=tg.shiftPoint(r,i,4*l),c=tg.shiftPoint(s,i,4*o);o=this.transitionsBetween(u,a)+1,l=this.transitionsBetween(c,a)+1,(1&o)==1&&(o+=1),(1&l)==1&&(l+=1);let h=(r.getX()+i.getX()+s.getX()+a.getX())/4,d=(r.getY()+i.getY()+s.getY()+a.getY())/4;return r=tg.moveAway(r,h,d),i=tg.moveAway(i,h,d),s=tg.moveAway(s,h,d),a=tg.moveAway(a,h,d),u=tg.shiftPoint(r,i,4*l),u=tg.shiftPoint(u,a,4*o),t=tg.shiftPoint(i,r,4*l),t=tg.shiftPoint(t,s,4*o),c=tg.shiftPoint(s,a,4*l),c=tg.shiftPoint(c,i,4*o),n=tg.shiftPoint(a,s,4*l),[u,t,c,n=tg.shiftPoint(n,r,4*o)]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,n,r,i,s,a){return e_.getInstance().sampleGrid(e,s,a,.5,.5,s-.5,.5,s-.5,a-.5,.5,a-.5,t.getX(),t.getY(),i.getX(),i.getY(),r.getX(),r.getY(),n.getX(),n.getY())}transitionsBetween(e,t){let n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),i=Math.trunc(t.getX()),s=Math.trunc(t.getY()),a=Math.abs(s-r)>Math.abs(i-n);if(a){let e=n;n=r,r=e,e=i,i=s,s=e}let o=Math.abs(i-n),l=Math.abs(s-r),u=-o/2,c=r<s?1:-1,h=n<i?1:-1,d=0,f=this.image.get(a?r:n,a?n:r);for(let e=n,t=r;e!==i;e+=h){let n=this.image.get(a?t:e,a?e:t);if(n!==f&&(d++,f=n),(u+=l)>0){if(t===s)break;t+=c,u-=o}}return d}}class tm{constructor(){this.decoder=new tp}decode(e,t=null){let n,r;if(null!=t&&t.has(F.PURE_BARCODE)){let t=tm.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(t),r=tm.NO_POINTS}else{let t=new tg(e.getBlackMatrix()).detect();n=this.decoder.decode(t.getBits()),r=t.getPoints()}let i=n.getRawBytes(),s=new en(n.getText(),i,8*i.length,r,er.DATA_MATRIX,M.currentTimeMillis()),a=n.getByteSegments();null!=a&&s.putMetadata(ei.BYTE_SEGMENTS,a);let o=n.getECLevel();return null!=o&&s.putMetadata(ei.ERROR_CORRECTION_LEVEL,o),s}reset(){}static extractPureBits(e){let t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null==t||null==n)throw new Y;let r=this.moduleSize(t,e),i=t[1],s=n[1],a=t[0],o=(n[0]-a+1)/r,l=(s-i+1)/r;if(o<=0||l<=0)throw new Y;let u=r/2;i+=u,a+=u;let c=new G(o,l);for(let t=0;t<l;t++){let n=i+t*r;for(let i=0;i<o;i++)e.get(a+i*r,n)&&c.set(i,t)}return c}static moduleSize(e,t){let n=t.getWidth(),r=e[0],i=e[1];for(;r<n&&t.get(r,i);)r++;if(r===n)throw new Y;let s=r-e[0];if(0===s)throw new Y;return s}}tm.NO_POINTS=[],(l=E||(E={}))[l.L=0]="L",l[l.M=1]="M",l[l.Q=2]="Q",l[l.H=3]="H";class ty{constructor(e,t,n){this.value=e,this.stringValue=t,this.bits=n,ty.FOR_BITS.set(n,this),ty.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return ty.L;case"M":return ty.M;case"Q":return ty.Q;case"H":return ty.H;default:throw new T(e+"not available")}}toString(){return this.stringValue}equals(e){return e instanceof ty&&this.value===e.value}static forBits(e){if(e<0||e>=ty.FOR_BITS.size)throw new N;return ty.FOR_BITS.get(e)}}ty.FOR_BITS=new Map,ty.FOR_VALUE=new Map,ty.L=new ty(E.L,"L",1),ty.M=new ty(E.M,"M",0),ty.Q=new ty(E.Q,"Q",3),ty.H=new ty(E.H,"H",2);class tw{constructor(e){this.errorCorrectionLevel=ty.forBits(e>>3&3),this.dataMask=7&e}static numBitsDiffering(e,t){return L.bitCount(e^t)}static decodeFormatInformation(e,t){let n=tw.doDecodeFormatInformation(e,t);return null!==n?n:tw.doDecodeFormatInformation(e^tw.FORMAT_INFO_MASK_QR,t^tw.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let n=Number.MAX_SAFE_INTEGER,r=0;for(let i of tw.FORMAT_INFO_DECODE_LOOKUP){let s=i[0];if(s===e||s===t)return new tw(i[1]);let a=tw.numBitsDiffering(e,s);a<n&&(r=i[1],n=a),e!==t&&(a=tw.numBitsDiffering(t,s))<n&&(r=i[1],n=a)}return n<=3?new tw(r):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){return e instanceof tw&&this.errorCorrectionLevel===e.errorCorrectionLevel&&this.dataMask===e.dataMask}}tw.FORMAT_INFO_MASK_QR=21522,tw.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class tE{constructor(e,...t){this.ecCodewordsPerBlock=e,this.ecBlocks=t}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;for(let t of this.ecBlocks)e+=t.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class tv{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class tC{constructor(e,t,...n){this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=n;let r=0,i=n[0].getECCodewordsPerBlock();for(let e of n[0].getECBlocks())r+=e.getCount()*(e.getDataCodewords()+i);this.totalCodewords=r}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!=1)throw new U;try{return this.getVersionForNumber((e-17)/4)}catch(e){throw new U}}static getVersionForNumber(e){if(e<1||e>40)throw new N;return tC.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(let r=0;r<tC.VERSION_DECODE_INFO.length;r++){let i=tC.VERSION_DECODE_INFO[r];if(i===e)return tC.getVersionForNumber(r+7);let s=tw.numBitsDiffering(e,i);s<t&&(n=r+7,t=s)}return t<=3?tC.getVersionForNumber(n):null}buildFunctionPattern(){let e=this.getDimensionForVersion(),t=new G(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);let n=this.alignmentPatternCenters.length;for(let e=0;e<n;e++){let r=this.alignmentPatternCenters[e]-2;for(let i=0;i<n;i++)(0!==e||0!==i&&i!==n-1)&&(e!==n-1||0!==i)&&t.setRegion(this.alignmentPatternCenters[i]-2,r,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}tC.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),tC.VERSIONS=[new tC(1,new Int32Array(0),new tE(7,new tv(1,19)),new tE(10,new tv(1,16)),new tE(13,new tv(1,13)),new tE(17,new tv(1,9))),new tC(2,Int32Array.from([6,18]),new tE(10,new tv(1,34)),new tE(16,new tv(1,28)),new tE(22,new tv(1,22)),new tE(28,new tv(1,16))),new tC(3,Int32Array.from([6,22]),new tE(15,new tv(1,55)),new tE(26,new tv(1,44)),new tE(18,new tv(2,17)),new tE(22,new tv(2,13))),new tC(4,Int32Array.from([6,26]),new tE(20,new tv(1,80)),new tE(18,new tv(2,32)),new tE(26,new tv(2,24)),new tE(16,new tv(4,9))),new tC(5,Int32Array.from([6,30]),new tE(26,new tv(1,108)),new tE(24,new tv(2,43)),new tE(18,new tv(2,15),new tv(2,16)),new tE(22,new tv(2,11),new tv(2,12))),new tC(6,Int32Array.from([6,34]),new tE(18,new tv(2,68)),new tE(16,new tv(4,27)),new tE(24,new tv(4,19)),new tE(28,new tv(4,15))),new tC(7,Int32Array.from([6,22,38]),new tE(20,new tv(2,78)),new tE(18,new tv(4,31)),new tE(18,new tv(2,14),new tv(4,15)),new tE(26,new tv(4,13),new tv(1,14))),new tC(8,Int32Array.from([6,24,42]),new tE(24,new tv(2,97)),new tE(22,new tv(2,38),new tv(2,39)),new tE(22,new tv(4,18),new tv(2,19)),new tE(26,new tv(4,14),new tv(2,15))),new tC(9,Int32Array.from([6,26,46]),new tE(30,new tv(2,116)),new tE(22,new tv(3,36),new tv(2,37)),new tE(20,new tv(4,16),new tv(4,17)),new tE(24,new tv(4,12),new tv(4,13))),new tC(10,Int32Array.from([6,28,50]),new tE(18,new tv(2,68),new tv(2,69)),new tE(26,new tv(4,43),new tv(1,44)),new tE(24,new tv(6,19),new tv(2,20)),new tE(28,new tv(6,15),new tv(2,16))),new tC(11,Int32Array.from([6,30,54]),new tE(20,new tv(4,81)),new tE(30,new tv(1,50),new tv(4,51)),new tE(28,new tv(4,22),new tv(4,23)),new tE(24,new tv(3,12),new tv(8,13))),new tC(12,Int32Array.from([6,32,58]),new tE(24,new tv(2,92),new tv(2,93)),new tE(22,new tv(6,36),new tv(2,37)),new tE(26,new tv(4,20),new tv(6,21)),new tE(28,new tv(7,14),new tv(4,15))),new tC(13,Int32Array.from([6,34,62]),new tE(26,new tv(4,107)),new tE(22,new tv(8,37),new tv(1,38)),new tE(24,new tv(8,20),new tv(4,21)),new tE(22,new tv(12,11),new tv(4,12))),new tC(14,Int32Array.from([6,26,46,66]),new tE(30,new tv(3,115),new tv(1,116)),new tE(24,new tv(4,40),new tv(5,41)),new tE(20,new tv(11,16),new tv(5,17)),new tE(24,new tv(11,12),new tv(5,13))),new tC(15,Int32Array.from([6,26,48,70]),new tE(22,new tv(5,87),new tv(1,88)),new tE(24,new tv(5,41),new tv(5,42)),new tE(30,new tv(5,24),new tv(7,25)),new tE(24,new tv(11,12),new tv(7,13))),new tC(16,Int32Array.from([6,26,50,74]),new tE(24,new tv(5,98),new tv(1,99)),new tE(28,new tv(7,45),new tv(3,46)),new tE(24,new tv(15,19),new tv(2,20)),new tE(30,new tv(3,15),new tv(13,16))),new tC(17,Int32Array.from([6,30,54,78]),new tE(28,new tv(1,107),new tv(5,108)),new tE(28,new tv(10,46),new tv(1,47)),new tE(28,new tv(1,22),new tv(15,23)),new tE(28,new tv(2,14),new tv(17,15))),new tC(18,Int32Array.from([6,30,56,82]),new tE(30,new tv(5,120),new tv(1,121)),new tE(26,new tv(9,43),new tv(4,44)),new tE(28,new tv(17,22),new tv(1,23)),new tE(28,new tv(2,14),new tv(19,15))),new tC(19,Int32Array.from([6,30,58,86]),new tE(28,new tv(3,113),new tv(4,114)),new tE(26,new tv(3,44),new tv(11,45)),new tE(26,new tv(17,21),new tv(4,22)),new tE(26,new tv(9,13),new tv(16,14))),new tC(20,Int32Array.from([6,34,62,90]),new tE(28,new tv(3,107),new tv(5,108)),new tE(26,new tv(3,41),new tv(13,42)),new tE(30,new tv(15,24),new tv(5,25)),new tE(28,new tv(15,15),new tv(10,16))),new tC(21,Int32Array.from([6,28,50,72,94]),new tE(28,new tv(4,116),new tv(4,117)),new tE(26,new tv(17,42)),new tE(28,new tv(17,22),new tv(6,23)),new tE(30,new tv(19,16),new tv(6,17))),new tC(22,Int32Array.from([6,26,50,74,98]),new tE(28,new tv(2,111),new tv(7,112)),new tE(28,new tv(17,46)),new tE(30,new tv(7,24),new tv(16,25)),new tE(24,new tv(34,13))),new tC(23,Int32Array.from([6,30,54,78,102]),new tE(30,new tv(4,121),new tv(5,122)),new tE(28,new tv(4,47),new tv(14,48)),new tE(30,new tv(11,24),new tv(14,25)),new tE(30,new tv(16,15),new tv(14,16))),new tC(24,Int32Array.from([6,28,54,80,106]),new tE(30,new tv(6,117),new tv(4,118)),new tE(28,new tv(6,45),new tv(14,46)),new tE(30,new tv(11,24),new tv(16,25)),new tE(30,new tv(30,16),new tv(2,17))),new tC(25,Int32Array.from([6,32,58,84,110]),new tE(26,new tv(8,106),new tv(4,107)),new tE(28,new tv(8,47),new tv(13,48)),new tE(30,new tv(7,24),new tv(22,25)),new tE(30,new tv(22,15),new tv(13,16))),new tC(26,Int32Array.from([6,30,58,86,114]),new tE(28,new tv(10,114),new tv(2,115)),new tE(28,new tv(19,46),new tv(4,47)),new tE(28,new tv(28,22),new tv(6,23)),new tE(30,new tv(33,16),new tv(4,17))),new tC(27,Int32Array.from([6,34,62,90,118]),new tE(30,new tv(8,122),new tv(4,123)),new tE(28,new tv(22,45),new tv(3,46)),new tE(30,new tv(8,23),new tv(26,24)),new tE(30,new tv(12,15),new tv(28,16))),new tC(28,Int32Array.from([6,26,50,74,98,122]),new tE(30,new tv(3,117),new tv(10,118)),new tE(28,new tv(3,45),new tv(23,46)),new tE(30,new tv(4,24),new tv(31,25)),new tE(30,new tv(11,15),new tv(31,16))),new tC(29,Int32Array.from([6,30,54,78,102,126]),new tE(30,new tv(7,116),new tv(7,117)),new tE(28,new tv(21,45),new tv(7,46)),new tE(30,new tv(1,23),new tv(37,24)),new tE(30,new tv(19,15),new tv(26,16))),new tC(30,Int32Array.from([6,26,52,78,104,130]),new tE(30,new tv(5,115),new tv(10,116)),new tE(28,new tv(19,47),new tv(10,48)),new tE(30,new tv(15,24),new tv(25,25)),new tE(30,new tv(23,15),new tv(25,16))),new tC(31,Int32Array.from([6,30,56,82,108,134]),new tE(30,new tv(13,115),new tv(3,116)),new tE(28,new tv(2,46),new tv(29,47)),new tE(30,new tv(42,24),new tv(1,25)),new tE(30,new tv(23,15),new tv(28,16))),new tC(32,Int32Array.from([6,34,60,86,112,138]),new tE(30,new tv(17,115)),new tE(28,new tv(10,46),new tv(23,47)),new tE(30,new tv(10,24),new tv(35,25)),new tE(30,new tv(19,15),new tv(35,16))),new tC(33,Int32Array.from([6,30,58,86,114,142]),new tE(30,new tv(17,115),new tv(1,116)),new tE(28,new tv(14,46),new tv(21,47)),new tE(30,new tv(29,24),new tv(19,25)),new tE(30,new tv(11,15),new tv(46,16))),new tC(34,Int32Array.from([6,34,62,90,118,146]),new tE(30,new tv(13,115),new tv(6,116)),new tE(28,new tv(14,46),new tv(23,47)),new tE(30,new tv(44,24),new tv(7,25)),new tE(30,new tv(59,16),new tv(1,17))),new tC(35,Int32Array.from([6,30,54,78,102,126,150]),new tE(30,new tv(12,121),new tv(7,122)),new tE(28,new tv(12,47),new tv(26,48)),new tE(30,new tv(39,24),new tv(14,25)),new tE(30,new tv(22,15),new tv(41,16))),new tC(36,Int32Array.from([6,24,50,76,102,128,154]),new tE(30,new tv(6,121),new tv(14,122)),new tE(28,new tv(6,47),new tv(34,48)),new tE(30,new tv(46,24),new tv(10,25)),new tE(30,new tv(2,15),new tv(64,16))),new tC(37,Int32Array.from([6,28,54,80,106,132,158]),new tE(30,new tv(17,122),new tv(4,123)),new tE(28,new tv(29,46),new tv(14,47)),new tE(30,new tv(49,24),new tv(10,25)),new tE(30,new tv(24,15),new tv(46,16))),new tC(38,Int32Array.from([6,32,58,84,110,136,162]),new tE(30,new tv(4,122),new tv(18,123)),new tE(28,new tv(13,46),new tv(32,47)),new tE(30,new tv(48,24),new tv(14,25)),new tE(30,new tv(42,15),new tv(32,16))),new tC(39,Int32Array.from([6,26,54,82,110,138,166]),new tE(30,new tv(20,117),new tv(4,118)),new tE(28,new tv(40,47),new tv(7,48)),new tE(30,new tv(43,24),new tv(22,25)),new tE(30,new tv(10,15),new tv(67,16))),new tC(40,Int32Array.from([6,30,58,86,114,142,170]),new tE(30,new tv(19,118),new tv(6,119)),new tE(28,new tv(18,47),new tv(31,48)),new tE(30,new tv(34,24),new tv(34,25)),new tE(30,new tv(20,15),new tv(61,16)))],(u=v||(v={}))[u.DATA_MASK_000=0]="DATA_MASK_000",u[u.DATA_MASK_001=1]="DATA_MASK_001",u[u.DATA_MASK_010=2]="DATA_MASK_010",u[u.DATA_MASK_011=3]="DATA_MASK_011",u[u.DATA_MASK_100=4]="DATA_MASK_100",u[u.DATA_MASK_101=5]="DATA_MASK_101",u[u.DATA_MASK_110=6]="DATA_MASK_110",u[u.DATA_MASK_111=7]="DATA_MASK_111";class tS{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let n=0;n<t;n++)for(let r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)}}tS.values=new Map([[v.DATA_MASK_000,new tS(v.DATA_MASK_000,(e,t)=>(e+t&1)==0)],[v.DATA_MASK_001,new tS(v.DATA_MASK_001,(e,t)=>(1&e)==0)],[v.DATA_MASK_010,new tS(v.DATA_MASK_010,(e,t)=>t%3==0)],[v.DATA_MASK_011,new tS(v.DATA_MASK_011,(e,t)=>(e+t)%3==0)],[v.DATA_MASK_100,new tS(v.DATA_MASK_100,(e,t)=>(Math.floor(e/2)+Math.floor(t/3)&1)==0)],[v.DATA_MASK_101,new tS(v.DATA_MASK_101,(e,t)=>e*t%6==0)],[v.DATA_MASK_110,new tS(v.DATA_MASK_110,(e,t)=>e*t%6<3)],[v.DATA_MASK_111,new tS(v.DATA_MASK_111,(e,t)=>(e+t+e*t%3&1)==0)]]);class t_{constructor(e){let t=e.getHeight();if(t<21||(3&t)!=1)throw new U;this.bitMatrix=e}readFormatInformation(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;let e=0;for(let t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let t=5;t>=0;t--)e=this.copyBit(8,t,e);let t=this.bitMatrix.getHeight(),n=0,r=t-7;for(let e=t-1;e>=r;e--)n=this.copyBit(8,e,n);for(let e=t-8;e<t;e++)n=this.copyBit(e,8,n);if(this.parsedFormatInfo=tw.decodeFormatInformation(e,n),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new U}readVersion(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;let e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return tC.getVersionForNumber(t);let n=0,r=e-11;for(let t=5;t>=0;t--)for(let i=e-9;i>=r;i--)n=this.copyBit(i,t,n);let i=tC.decodeVersionInformation(n);if(null!==i&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;n=0;for(let t=5;t>=0;t--)for(let i=e-9;i>=r;i--)n=this.copyBit(t,i,n);if(null!==(i=tC.decodeVersionInformation(n))&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;throw new U}copyBit(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1}readCodewords(){let e=this.readFormatInformation(),t=this.readVersion(),n=tS.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);let i=t.buildFunctionPattern(),s=!0,a=new Uint8Array(t.getTotalCodewords()),o=0,l=0,u=0;for(let e=r-1;e>0;e-=2){6===e&&e--;for(let t=0;t<r;t++){let n=s?r-1-t:t;for(let t=0;t<2;t++)i.get(e-t,n)||(u++,l<<=1,this.bitMatrix.get(e-t,n)&&(l|=1),8===u&&(a[o++]=l,u=0,l=0))}s=!s}if(o!==t.getTotalCodewords())throw new U;return a}remask(){if(null===this.parsedFormatInfo)return;let e=tS.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){let e=this.bitMatrix;for(let t=0,n=e.getWidth();t<n;t++)for(let n=t+1,r=e.getHeight();n<r;n++)e.get(t,n)!==e.get(n,t)&&(e.flip(n,t),e.flip(t,n))}}class tb{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,n){if(e.length!==t.getTotalCodewords())throw new N;let r=t.getECBlocksForLevel(n),i=0,s=r.getECBlocks();for(let e of s)i+=e.getCount();let a=Array(i),o=0;for(let e of s)for(let t=0;t<e.getCount();t++){let t=e.getDataCodewords(),n=r.getECCodewordsPerBlock()+t;a[o++]=new tb(t,new Uint8Array(n))}let l=a[0].codewords.length,u=a.length-1;for(;u>=0&&a[u].codewords.length!==l;)u--;u++;let c=l-r.getECCodewordsPerBlock(),h=0;for(let t=0;t<c;t++)for(let n=0;n<o;n++)a[n].codewords[t]=e[h++];for(let t=u;t<o;t++)a[t].codewords[c]=e[h++];let d=a[0].codewords.length;for(let t=c;t<d;t++)for(let n=0;n<o;n++){let r=n<u?t:t+1;a[n].codewords[r]=e[h++]}return a}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}(c=C||(C={}))[c.TERMINATOR=0]="TERMINATOR",c[c.NUMERIC=1]="NUMERIC",c[c.ALPHANUMERIC=2]="ALPHANUMERIC",c[c.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",c[c.BYTE=4]="BYTE",c[c.ECI=5]="ECI",c[c.KANJI=6]="KANJI",c[c.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",c[c.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",c[c.HANZI=9]="HANZI";class tI{constructor(e,t,n,r){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=r,tI.FOR_BITS.set(r,this),tI.FOR_VALUE.set(e,this)}static forBits(e){let t=tI.FOR_BITS.get(e);if(void 0===t)throw new N;return t}getCharacterCountBits(e){let t,n=e.getVersionNumber();return t=n<=9?0:n<=26?1:2,this.characterCountBitsForVersions[t]}getValue(){return this.value}getBits(){return this.bits}equals(e){return e instanceof tI&&this.value===e.value}toString(){return this.stringValue}}tI.FOR_BITS=new Map,tI.FOR_VALUE=new Map,tI.TERMINATOR=new tI(C.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),tI.NUMERIC=new tI(C.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),tI.ALPHANUMERIC=new tI(C.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),tI.STRUCTURED_APPEND=new tI(C.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),tI.BYTE=new tI(C.BYTE,"BYTE",Int32Array.from([8,16,16]),4),tI.ECI=new tI(C.ECI,"ECI",Int32Array.from([0,0,0]),7),tI.KANJI=new tI(C.KANJI,"KANJI",Int32Array.from([8,10,12]),8),tI.FNC1_FIRST_POSITION=new tI(C.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),tI.FNC1_SECOND_POSITION=new tI(C.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),tI.HANZI=new tI(C.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class tA{static decode(e,t,n,r){let i=new td(e),s=new W,a=[],o=-1,l=-1;try{let e,n=null,u=!1;do{if(4>i.available())e=tI.TERMINATOR;else{let t=i.readBits(4);e=tI.forBits(t)}switch(e){case tI.TERMINATOR:break;case tI.FNC1_FIRST_POSITION:case tI.FNC1_SECOND_POSITION:u=!0;break;case tI.STRUCTURED_APPEND:if(16>i.available())throw new U;o=i.readBits(8),l=i.readBits(8);break;case tI.ECI:let c=tA.parseECIValue(i);if(n=V.getCharacterSetECIByValue(c),null===n)throw new U;break;case tI.HANZI:let h=i.readBits(4),d=i.readBits(e.getCharacterCountBits(t));h===tA.GB2312_SUBSET&&tA.decodeHanziSegment(i,s,d);break;default:let f=i.readBits(e.getCharacterCountBits(t));switch(e){case tI.NUMERIC:tA.decodeNumericSegment(i,s,f);break;case tI.ALPHANUMERIC:tA.decodeAlphanumericSegment(i,s,f,u);break;case tI.BYTE:tA.decodeByteSegment(i,s,f,n,a,r);break;case tI.KANJI:tA.decodeKanjiSegment(i,s,f);break;default:throw new U}}}while(e!==tI.TERMINATOR)}catch(e){throw new U}return new es(e,s.toString(),0===a.length?null:a,null===n?null:n.toString(),o,l)}static decodeHanziSegment(e,t,n){if(13*n>e.available())throw new U;let r=new Uint8Array(2*n),i=0;for(;n>0;){let t=e.readBits(13),s=t/96<<8|t%96;s<959?s+=41377:s+=42657,r[i]=s>>8&255,r[i+1]=255&s,i+=2,n--}try{t.append(j.decode(r,H.GB2312))}catch(e){throw new U(e)}}static decodeKanjiSegment(e,t,n){if(13*n>e.available())throw new U;let r=new Uint8Array(2*n),i=0;for(;n>0;){let t=e.readBits(13),s=t/192<<8|t%192;s<7936?s+=33088:s+=49472,r[i]=s>>8,r[i+1]=s,i+=2,n--}try{t.append(j.decode(r,H.SHIFT_JIS))}catch(e){throw new U(e)}}static decodeByteSegment(e,t,n,r,i,s){let a;if(8*n>e.available())throw new U;let o=new Uint8Array(n);for(let t=0;t<n;t++)o[t]=e.readBits(8);a=null===r?H.guessEncoding(o,s):r.getName();try{t.append(j.decode(o,a))}catch(e){throw new U(e)}i.push(o)}static toAlphaNumericChar(e){if(e>=tA.ALPHANUMERIC_CHARS.length)throw new U;return tA.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,n,r){let i=t.length();for(;n>1;){if(11>e.available())throw new U;let r=e.readBits(11);t.append(tA.toAlphaNumericChar(Math.floor(r/45))),t.append(tA.toAlphaNumericChar(r%45)),n-=2}if(1===n){if(6>e.available())throw new U;t.append(tA.toAlphaNumericChar(e.readBits(6)))}if(r)for(let e=i;e<t.length();e++)"%"===t.charAt(e)&&(e<t.length()-1&&"%"===t.charAt(e+1)?t.deleteCharAt(e+1):t.setCharAt(e,"\x1d"))}static decodeNumericSegment(e,t,n){for(;n>=3;){if(10>e.available())throw new U;let r=e.readBits(10);if(r>=1e3)throw new U;t.append(tA.toAlphaNumericChar(Math.floor(r/100))),t.append(tA.toAlphaNumericChar(Math.floor(r/10)%10)),t.append(tA.toAlphaNumericChar(r%10)),n-=3}if(2===n){if(7>e.available())throw new U;let n=e.readBits(7);if(n>=100)throw new U;t.append(tA.toAlphaNumericChar(Math.floor(n/10))),t.append(tA.toAlphaNumericChar(n%10))}else if(1===n){if(4>e.available())throw new U;let n=e.readBits(4);if(n>=10)throw new U;t.append(tA.toAlphaNumericChar(n))}}static parseECIValue(e){let t=e.readBits(8);if((128&t)==0)return 127&t;if((192&t)==128)return(63&t)<<8|e.readBits(8);if((224&t)==192)return(31&t)<<16|e.readBits(16);throw new U}}tA.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",tA.GB2312_SUBSET=1;class tT{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||null===e||e.length<3)return;let t=e[0];e[0]=e[2],e[2]=t}}class tN{constructor(){this.rsDecoder=new ed(eu.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(G.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){let n=new t_(e),r=null;try{return this.decodeBitMatrixParser(n,t)}catch(e){r=e}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();let e=this.decodeBitMatrixParser(n,t);return e.setOther(new tT(!0)),e}catch(e){if(null!==r)throw r;throw e}}decodeBitMatrixParser(e,t){let n=e.readVersion(),r=e.readFormatInformation().getErrorCorrectionLevel(),i=e.readCodewords(),s=tb.getDataBlocks(i,n,r),a=0;for(let e of s)a+=e.getNumDataCodewords();let o=new Uint8Array(a),l=0;for(let e of s){let t=e.getCodewords(),n=e.getNumDataCodewords();this.correctErrors(t,n);for(let e=0;e<n;e++)o[l++]=t[e]}return tA.decode(o,n,r,t)}correctErrors(e,t){let n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(e){throw new D}for(let r=0;r<t;r++)e[r]=n[r]}}class tR extends em{constructor(e,t,n){super(e,t),this.estimatedModuleSize=n}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){let t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){let r=(this.getX()+t)/2;return new tR(r,(this.getY()+e)/2,(this.estimatedModuleSize+n)/2)}}class tD{constructor(e,t,n,r,i,s,a){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=i,this.moduleSize=s,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){let e=this.startX,t=this.height,n=e+this.width,r=this.startY+t/2,i=new Int32Array(3),s=this.image;for(let a=0;a<t;a++){let t=r+((1&a)==0?Math.floor((a+1)/2):-Math.floor((a+1)/2));i[0]=0,i[1]=0,i[2]=0;let o=e;for(;o<n&&!s.get(o,t);)o++;let l=0;for(;o<n;){if(s.get(o,t))if(1===l)i[1]++;else if(2===l){if(this.foundPatternCross(i)){let e=this.handlePossibleCenter(i,t,o);if(null!==e)return e}i[0]=i[2],i[1]=1,i[2]=0,l=1}else i[++l]++;else 1===l&&l++,i[l]++;o++}if(this.foundPatternCross(i)){let e=this.handlePossibleCenter(i,t,n);if(null!==e)return e}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new Y}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){let t=this.moduleSize,n=t/2;for(let r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0}crossCheckVertical(e,t,n,r){let i=this.image,s=i.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;let o=e;for(;o>=0&&i.get(t,o)&&a[1]<=n;)a[1]++,o--;if(o<0||a[1]>n)return NaN;for(;o>=0&&!i.get(t,o)&&a[0]<=n;)a[0]++,o--;if(a[0]>n)return NaN;for(o=e+1;o<s&&i.get(t,o)&&a[1]<=n;)a[1]++,o++;if(o===s||a[1]>n)return NaN;for(;o<s&&!i.get(t,o)&&a[2]<=n;)a[2]++,o++;return a[2]>n||5*Math.abs(a[0]+a[1]+a[2]-r)>=2*r?NaN:this.foundPatternCross(a)?tD.centerFromEnd(a,o):NaN}handlePossibleCenter(e,t,n){let r=e[0]+e[1]+e[2],i=tD.centerFromEnd(e,n),s=this.crossCheckVertical(t,i,2*e[1],r);if(!isNaN(s)){let t=(e[0]+e[1]+e[2])/3;for(let e of this.possibleCenters)if(e.aboutEquals(t,s,i))return e.combineEstimate(s,i,t);let n=new tR(i,s,t);this.possibleCenters.push(n),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(n)}return null}}class tO extends em{constructor(e,t,n,r){super(e,t),this.estimatedModuleSize=n,this.count=r,void 0===r&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){let t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){let r=this.count+1,i=(this.count*this.getX()+t)/r;return new tO(i,(this.count*this.getY()+e)/r,(this.count*this.estimatedModuleSize+n)/r,r)}}class tM{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class tk{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){let t=null!=e&&void 0!==e.get(F.TRY_HARDER),n=null!=e&&void 0!==e.get(F.PURE_BARCODE),r=this.image,i=r.getHeight(),s=r.getWidth(),a=Math.floor(3*i/(4*tk.MAX_MODULES));(a<tk.MIN_SKIP||t)&&(a=tk.MIN_SKIP);let o=!1,l=new Int32Array(5);for(let e=a-1;e<i&&!o;e+=a){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;let t=0;for(let i=0;i<s;i++)if(r.get(i,e))(1&t)==1&&t++,l[t]++;else if((1&t)==0)if(4===t)if(tk.foundPatternCross(l)){if(!0===this.handlePossibleCenter(l,e,i,n))if(a=2,!0===this.hasSkipped)o=this.haveMultiplyConfirmedCenters();else{let t=this.findRowSkip();t>l[2]&&(e+=t-l[2]-a,i=s-1)}else{l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,t=3;continue}t=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,t=3;else l[++t]++;else l[t]++;tk.foundPatternCross(l)&&!0===this.handlePossibleCenter(l,e,s,n)&&(a=l[0],this.hasSkipped&&(o=this.haveMultiplyConfirmedCenters()))}let u=this.selectBestPatterns();return em.orderBestPatterns(u),new tM(u)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let n=0;n<5;n++){let r=e[n];if(0===r)return!1;t+=r}if(t<7)return!1;let n=t/7,r=n/2;return Math.abs(n-e[0])<r&&Math.abs(n-e[1])<r&&Math.abs(3*n-e[2])<3*r&&Math.abs(n-e[3])<r&&Math.abs(n-e[4])<r}getCrossCheckStateCount(){let e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,n,r){let i=this.getCrossCheckStateCount(),s=0,a=this.image;for(;e>=s&&t>=s&&a.get(t-s,e-s);)i[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!a.get(t-s,e-s)&&i[1]<=n;)i[1]++,s++;if(e<s||t<s||i[1]>n)return!1;for(;e>=s&&t>=s&&a.get(t-s,e-s)&&i[0]<=n;)i[0]++,s++;if(i[0]>n)return!1;let o=a.getHeight(),l=a.getWidth();for(s=1;e+s<o&&t+s<l&&a.get(t+s,e+s);)i[2]++,s++;if(e+s>=o||t+s>=l)return!1;for(;e+s<o&&t+s<l&&!a.get(t+s,e+s)&&i[3]<n;)i[3]++,s++;if(e+s>=o||t+s>=l||i[3]>=n)return!1;for(;e+s<o&&t+s<l&&a.get(t+s,e+s)&&i[4]<n;)i[4]++,s++;return!(i[4]>=n)&&Math.abs(i[0]+i[1]+i[2]+i[3]+i[4]-r)<2*r&&tk.foundPatternCross(i)}crossCheckVertical(e,t,n,r){let i=this.image,s=i.getHeight(),a=this.getCrossCheckStateCount(),o=e;for(;o>=0&&i.get(t,o);)a[2]++,o--;if(o<0)return NaN;for(;o>=0&&!i.get(t,o)&&a[1]<=n;)a[1]++,o--;if(o<0||a[1]>n)return NaN;for(;o>=0&&i.get(t,o)&&a[0]<=n;)a[0]++,o--;if(a[0]>n)return NaN;for(o=e+1;o<s&&i.get(t,o);)a[2]++,o++;if(o===s)return NaN;for(;o<s&&!i.get(t,o)&&a[3]<n;)a[3]++,o++;if(o===s||a[3]>=n)return NaN;for(;o<s&&i.get(t,o)&&a[4]<n;)a[4]++,o++;return a[4]>=n||5*Math.abs(a[0]+a[1]+a[2]+a[3]+a[4]-r)>=2*r?NaN:tk.foundPatternCross(a)?tk.centerFromEnd(a,o):NaN}crossCheckHorizontal(e,t,n,r){let i=this.image,s=i.getWidth(),a=this.getCrossCheckStateCount(),o=e;for(;o>=0&&i.get(o,t);)a[2]++,o--;if(o<0)return NaN;for(;o>=0&&!i.get(o,t)&&a[1]<=n;)a[1]++,o--;if(o<0||a[1]>n)return NaN;for(;o>=0&&i.get(o,t)&&a[0]<=n;)a[0]++,o--;if(a[0]>n)return NaN;for(o=e+1;o<s&&i.get(o,t);)a[2]++,o++;if(o===s)return NaN;for(;o<s&&!i.get(o,t)&&a[3]<n;)a[3]++,o++;if(o===s||a[3]>=n)return NaN;for(;o<s&&i.get(o,t)&&a[4]<n;)a[4]++,o++;return a[4]>=n||5*Math.abs(a[0]+a[1]+a[2]+a[3]+a[4]-r)>=r?NaN:tk.foundPatternCross(a)?tk.centerFromEnd(a,o):NaN}handlePossibleCenter(e,t,n,r){let i=e[0]+e[1]+e[2]+e[3]+e[4],s=tk.centerFromEnd(e,n),a=this.crossCheckVertical(t,Math.floor(s),e[2],i);if(!isNaN(a)&&!isNaN(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(a),e[2],i))&&(!r||this.crossCheckDiagonal(Math.floor(a),Math.floor(s),e[2],i))){let e=i/7,t=!1,n=this.possibleCenters;for(let r=0,i=n.length;r<i;r++){let i=n[r];if(i.aboutEquals(e,a,s)){n[r]=i.combineEstimate(a,s,e),t=!0;break}}if(!t){let t=new tO(s,a,e);n.push(t),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(t)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let e=null;for(let t of this.possibleCenters)if(t.getCount()>=tk.CENTER_QUORUM)if(null!=e)return this.hasSkipped=!0,Math.floor((Math.abs(e.getX()-t.getX())-Math.abs(e.getY()-t.getY()))/2);else e=t;return 0}haveMultiplyConfirmedCenters(){let e=0,t=0,n=this.possibleCenters.length;for(let n of this.possibleCenters)n.getCount()>=tk.CENTER_QUORUM&&(e++,t+=n.getEstimatedModuleSize());if(e<3)return!1;let r=t/n,i=0;for(let e of this.possibleCenters)i+=Math.abs(e.getEstimatedModuleSize()-r);return i<=.05*t}selectBestPatterns(){let e,t=this.possibleCenters.length;if(t<3)throw new Y;let n=this.possibleCenters;if(t>3){let r=0,i=0;for(let e of this.possibleCenters){let t=e.getEstimatedModuleSize();r+=t,i+=t*t}e=r/t;let s=Math.sqrt(i/t-e*e);n.sort((t,n)=>{let r=Math.abs(n.getEstimatedModuleSize()-e),i=Math.abs(t.getEstimatedModuleSize()-e);return r<i?-1:+(r>i)});let a=Math.max(.2*e,s);for(let t=0;t<n.length&&n.length>3;t++)Math.abs(n[t].getEstimatedModuleSize()-e)>a&&(n.splice(t,1),t--)}if(n.length>3){let t=0;for(let e of n)t+=e.getEstimatedModuleSize();e=t/n.length,n.sort((t,n)=>{if(n.getCount()!==t.getCount())return n.getCount()-t.getCount();{let r=Math.abs(n.getEstimatedModuleSize()-e),i=Math.abs(t.getEstimatedModuleSize()-e);return r<i?1:r>i?-1:0}}),n.splice(3)}return[n[0],n[1],n[2]]}}tk.CENTER_QUORUM=2,tk.MIN_SKIP=3,tk.MAX_MODULES=57;class tP{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=null==e?null:e.get(F.NEED_RESULT_POINT_CALLBACK);let t=new tk(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(t)}processFinderPatternInfo(e){let t=e.getTopLeft(),n=e.getTopRight(),r=e.getBottomLeft(),i=this.calculateModuleSize(t,n,r);if(i<1)throw new Y("No pattern found in proccess finder.");let s=tP.computeDimension(t,n,r,i),a=tC.getProvisionalVersionForDimension(s),o=a.getDimensionForVersion()-7,l=null;if(a.getAlignmentPatternCenters().length>0){let e=n.getX()-t.getX()+r.getX(),s=n.getY()-t.getY()+r.getY(),a=1-3/o,u=Math.floor(t.getX()+a*(e-t.getX())),c=Math.floor(t.getY()+a*(s-t.getY()));for(let e=4;e<=16;e<<=1)try{l=this.findAlignmentInRegion(i,u,c,e);break}catch(e){if(!(e instanceof Y))throw e}}let u=tP.createTransform(t,n,r,l,s);return new ey(tP.sampleGrid(this.image,u,s),null===l?[r,t,n]:[r,t,n,l])}static createTransform(e,t,n,r,i){let s,a,o,l,u=i-3.5;return null!==r?(s=r.getX(),a=r.getY(),l=o=u-3):(s=t.getX()-e.getX()+n.getX(),a=t.getY()-e.getY()+n.getY(),o=u,l=u),eC.quadrilateralToQuadrilateral(3.5,3.5,u,3.5,o,l,3.5,u,e.getX(),e.getY(),t.getX(),t.getY(),s,a,n.getX(),n.getY())}static sampleGrid(e,t,n){return e_.getInstance().sampleGridWithTransform(e,n,n,t)}static computeDimension(e,t,n,r){let i=Math.floor((ep.round(em.distance(e,t)/r)+ep.round(em.distance(e,n)/r))/2)+7;switch(3&i){case 0:i++;break;case 2:i--;break;case 3:throw new Y("Dimensions could be not found.")}return i}calculateModuleSize(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2}calculateModuleSizeOneWay(e,t){let n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,n,r){let i=this.sizeOfBlackWhiteBlackRun(e,t,n,r),s=1,a=e-(n-e);a<0?(s=e/(e-a),a=0):a>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);let o=Math.floor(t-(r-t)*s);return s=1,o<0?(s=t/(t-o),o=0):o>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(o-t),o=this.image.getHeight()-1),a=Math.floor(e+(a-e)*s),(i+=this.sizeOfBlackWhiteBlackRun(e,t,a,o))-1}sizeOfBlackWhiteBlackRun(e,t,n,r){let i=Math.abs(r-t)>Math.abs(n-e);if(i){let i=e;e=t,t=i,i=n,n=r,r=i}let s=Math.abs(n-e),a=Math.abs(r-t),o=-s/2,l=e<n?1:-1,u=t<r?1:-1,c=0,h=n+l;for(let n=e,d=t;n!==h;n+=l){let l=i?d:n,h=i?n:d;if(1===c===this.image.get(l,h)){if(2===c)return ep.distance(n,d,e,t);c++}if((o+=a)>0){if(d===r)break;d+=u,o-=s}}return 2===c?ep.distance(n+l,r,e,t):NaN}findAlignmentInRegion(e,t,n,r){let i=Math.floor(r*e),s=Math.max(0,t-i),a=Math.min(this.image.getWidth()-1,t+i);if(a-s<3*e)throw new Y("Alignment top exceeds estimated module size.");let o=Math.max(0,n-i),l=Math.min(this.image.getHeight()-1,n+i);if(l-o<3*e)throw new Y("Alignment bottom exceeds estimated module size.");return new tD(this.image,s,o,a-s,l-o,e,this.resultPointCallback).find()}}class tx{constructor(){this.decoder=new tN}getDecoder(){return this.decoder}decode(e,t){let n,r;if(null!=t&&void 0!==t.get(F.PURE_BARCODE)){let i=tx.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(i,t),r=tx.NO_POINTS}else{let i=new tP(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(i.getBits(),t),r=i.getPoints()}n.getOther()instanceof tT&&n.getOther().applyMirroredCorrection(r);let i=new en(n.getText(),n.getRawBytes(),void 0,r,er.QR_CODE,void 0),s=n.getByteSegments();null!==s&&i.putMetadata(ei.BYTE_SEGMENTS,s);let a=n.getECLevel();return null!==a&&i.putMetadata(ei.ERROR_CORRECTION_LEVEL,a),n.hasStructuredAppend()&&(i.putMetadata(ei.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),i.putMetadata(ei.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),i}reset(){}static extractPureBits(e){let t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null===t||null===n)throw new Y;let r=this.moduleSize(t,e),i=t[1],s=n[1],a=t[0],o=n[0];if(a>=o||i>=s||s-i!=o-a&&(o=a+(s-i))>=e.getWidth())throw new Y;let l=Math.round((o-a+1)/r),u=Math.round((s-i+1)/r);if(l<=0||u<=0||u!==l)throw new Y;let c=Math.floor(r/2);i+=c;let h=(a+=c)+Math.floor((l-1)*r)-o;if(h>0){if(h>c)throw new Y;a-=h}let d=i+Math.floor((u-1)*r)-s;if(d>0){if(d>c)throw new Y;i-=d}let f=new G(l,u);for(let t=0;t<u;t++){let n=i+Math.floor(t*r);for(let i=0;i<l;i++)e.get(a+Math.floor(i*r),n)&&f.set(i,t)}return f}static moduleSize(e,t){let n=t.getHeight(),r=t.getWidth(),i=e[0],s=e[1],a=!0,o=0;for(;i<r&&s<n;){if(a!==t.get(i,s)){if(5==++o)break;a=!a}i++,s++}if(i===r||s===n)throw new Y;return(i-e[0])/7}}tx.NO_POINTS=[];class tL{PDF417Common(){}static getBitCountSum(e){return ep.sum(e)}static toIntArray(e){if(null==e||!e.length)return tL.EMPTY_INT_ARRAY;let t=new Int32Array(e.length),n=0;for(let r of e)t[n++]=r;return t}static getCodeword(e){let t=x.binarySearch(tL.SYMBOL_TABLE,262143&e);return t<0?-1:(tL.CODEWORD_TABLE[t]-1)%tL.NUMBER_OF_CODEWORDS}}tL.NUMBER_OF_CODEWORDS=929,tL.MAX_CODEWORDS_IN_BARCODE=tL.NUMBER_OF_CODEWORDS-1,tL.MIN_ROWS_IN_BARCODE=3,tL.MAX_ROWS_IN_BARCODE=90,tL.MODULES_IN_CODEWORD=17,tL.MODULES_IN_STOP_PATTERN=18,tL.BARS_IN_MODULE=8,tL.EMPTY_INT_ARRAY=new Int32Array([]),tL.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),tL.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class tB{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class tF{static detectMultiple(e,t,n){let r=e.getBlackMatrix(),i=tF.detect(n,r);return i.length||((r=r.clone()).rotate180(),i=tF.detect(n,r)),new tB(r,i)}static detect(e,t){let n=[],r=0,i=0,s=!1;for(;r<t.getHeight();){let a=tF.findVertices(t,r,i);if(null==a[0]&&null==a[3]){if(!s)break;for(let e of(s=!1,i=0,n))null!=e[1]&&(r=Math.trunc(Math.max(r,e[1].getY()))),null!=e[3]&&(r=Math.max(r,Math.trunc(e[3].getY())));r+=tF.ROW_STEP;continue}if(s=!0,n.push(a),!e)break;null!=a[2]?(i=Math.trunc(a[2].getX()),r=Math.trunc(a[2].getY())):(i=Math.trunc(a[4].getX()),r=Math.trunc(a[4].getY()))}return n}static findVertices(e,t,n){let r=e.getHeight(),i=e.getWidth(),s=Array(8);return tF.copyToResult(s,tF.findRowsWithPattern(e,r,i,t,n,tF.START_PATTERN),tF.INDEXES_START_PATTERN),null!=s[4]&&(n=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),tF.copyToResult(s,tF.findRowsWithPattern(e,r,i,t,n,tF.STOP_PATTERN),tF.INDEXES_STOP_PATTERN),s}static copyToResult(e,t,n){for(let r=0;r<n.length;r++)e[n[r]]=t[r]}static findRowsWithPattern(e,t,n,r,i,s){let a=[,,,,],o=!1,l=new Int32Array(s.length);for(;r<t;r+=tF.ROW_STEP){let t=tF.findGuardPattern(e,i,r,n,!1,s,l);if(null!=t){for(;r>0;){let a=tF.findGuardPattern(e,i,--r,n,!1,s,l);if(null!=a)t=a;else{r++;break}}a[0]=new em(t[0],r),a[1]=new em(t[1],r),o=!0;break}}let u=r+1;if(o){let r=0,i=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);for(;u<t;u++){let t=tF.findGuardPattern(e,i[0],u,n,!1,s,l);if(null!=t&&Math.abs(i[0]-t[0])<tF.MAX_PATTERN_DRIFT&&Math.abs(i[1]-t[1])<tF.MAX_PATTERN_DRIFT)i=t,r=0;else if(r>tF.SKIPPED_ROW_COUNT_MAX)break;else r++}u-=r+1,a[2]=new em(i[0],u),a[3]=new em(i[1],u)}return u-r<tF.BARCODE_MIN_HEIGHT&&x.fill(a,null),a}static findGuardPattern(e,t,n,r,i,s,a){x.fillWithin(a,0,a.length,0);let o=t,l=0;for(;e.get(o,n)&&o>0&&l++<tF.MAX_PIXEL_DRIFT;)o--;let u=o,c=0,h=s.length;for(let t=i;u<r;u++)if(e.get(u,n)!==t)a[c]++;else{if(c===h-1){if(tF.patternMatchVariance(a,s,tF.MAX_INDIVIDUAL_VARIANCE)<tF.MAX_AVG_VARIANCE)return new Int32Array([o,u]);o+=a[0]+a[1],M.arraycopy(a,2,a,0,c-1),a[c-1]=0,a[c]=0,c--}else c++;a[c]=1,t=!t}return c===h-1&&tF.patternMatchVariance(a,s,tF.MAX_INDIVIDUAL_VARIANCE)<tF.MAX_AVG_VARIANCE?new Int32Array([o,u-1]):null}static patternMatchVariance(e,t,n){let r=e.length,i=0,s=0;for(let n=0;n<r;n++)i+=e[n],s+=t[n];if(i<s)return 1/0;let a=i/s;n*=a;let o=0;for(let i=0;i<r;i++){let r=e[i],s=t[i]*a,l=r>s?r-s:s-r;if(l>n)return 1/0;o+=l}return o/i}}tF.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),tF.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),tF.MAX_AVG_VARIANCE=.42,tF.MAX_INDIVIDUAL_VARIANCE=.8,tF.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),tF.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),tF.MAX_PIXEL_DRIFT=3,tF.MAX_PATTERN_DRIFT=5,tF.SKIPPED_ROW_COUNT_MAX=25,tF.ROW_STEP=5,tF.BARCODE_MIN_HEIGHT=10;class tU{constructor(e,t){if(0===t.length)throw new N;this.field=e;let n=t.length;if(n>1&&0===t[0]){let e=1;for(;e<n&&0===t[e];)e++;e===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-e),M.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);if(1===e){let e=0;for(let t of this.coefficients)e=this.field.add(e,t);return e}let t=this.coefficients[0],n=this.coefficients.length;for(let r=1;r<n;r++)t=this.field.add(this.field.multiply(e,t),this.coefficients[r]);return t}add(e){if(!this.field.equals(e.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let e=t;t=n,n=e}let r=new Int32Array(n.length),i=n.length-t.length;M.arraycopy(n,0,r,0,i);for(let e=i;e<n.length;e++)r[e]=this.field.add(t[e-i],n[e]);return new tU(this.field,r)}subtract(e){if(!this.field.equals(e.field))throw new N("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof tU?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new tU(this.field,new Int32Array([0]));let t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,s=new Int32Array(n+i-1);for(let e=0;e<n;e++){let n=t[e];for(let t=0;t<i;t++)s[e+t]=this.field.add(s[e+t],this.field.multiply(n,r[t]))}return new tU(this.field,s)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new tU(this.field,t)}multiplyScalar(e){if(0===e)return new tU(this.field,new Int32Array([0]));if(1===e)return this;let t=this.coefficients.length,n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=this.field.multiply(this.coefficients[r],e);return new tU(this.field,n)}multiplyByMonomial(e,t){if(e<0)throw new N;if(0===t)return new tU(this.field,new Int32Array([0]));let n=this.coefficients.length,r=new Int32Array(n+e);for(let e=0;e<n;e++)r[e]=this.field.multiply(this.coefficients[e],t);return new tU(this.field,r)}toString(){let e=new W;for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);0!==n&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(0===t||1!==n)&&e.append(n),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class tV{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(0===e)throw new N;return this.logTable[e]}inverse(e){if(0===e)throw new el;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class tz extends tV{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let n=1;for(let r=0;r<e;r++)this.expTable[r]=n,n=n*t%e;for(let t=0;t<e-1;t++)this.logTable[this.expTable[t]]=t;this.zero=new tU(this,new Int32Array([0])),this.one=new tU(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new N;if(0===t)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new tU(this,n)}}tz.PDF417_GF=new tz(tL.NUMBER_OF_CODEWORDS,3);class tj{constructor(){this.field=tz.PDF417_GF}decode(e,t,n){let r=new tU(this.field,e),i=new Int32Array(t),s=!1;for(let e=t;e>0;e--){let n=r.evaluateAt(this.field.exp(e));i[t-e]=n,0!==n&&(s=!0)}if(!s)return 0;let a=this.field.getOne();if(null!=n)for(let t of n){let n=this.field.exp(e.length-1-t),r=new tU(this.field,new Int32Array([this.field.subtract(0,n),1]));a=a.multiply(r)}let o=new tU(this.field,i),l=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),o,t),u=l[0],c=l[1],h=this.findErrorLocations(u),d=this.findErrorMagnitudes(c,u,h);for(let t=0;t<h.length;t++){let n=e.length-1-this.field.log(h[t]);if(n<0)throw D.getChecksumInstance();e[n]=this.field.subtract(e[n],d[t])}return h.length}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let n=e;e=t,t=n}let r=e,i=t,s=this.field.getZero(),a=this.field.getOne();for(;i.getDegree()>=Math.round(n/2);){let e=r,t=s;if(r=i,s=a,r.isZero())throw D.getChecksumInstance();i=e;let n=this.field.getZero(),o=r.getCoefficient(r.getDegree()),l=this.field.inverse(o);for(;i.getDegree()>=r.getDegree()&&!i.isZero();){let e=i.getDegree()-r.getDegree(),t=this.field.multiply(i.getCoefficient(i.getDegree()),l);n=n.add(this.field.buildMonomial(e,t)),i=i.subtract(r.multiplyByMonomial(e,t))}a=n.multiply(s).subtract(t).negative()}let o=a.getCoefficient(0);if(0===o)throw D.getChecksumInstance();let l=this.field.inverse(o);return[a.multiply(l),i.multiply(l)]}findErrorLocations(e){let t=e.getDegree(),n=new Int32Array(t),r=0;for(let i=1;i<this.field.getSize()&&r<t;i++)0===e.evaluateAt(i)&&(n[r]=this.field.inverse(i),r++);if(r!==t)throw D.getChecksumInstance();return n}findErrorMagnitudes(e,t,n){let r=t.getDegree(),i=new Int32Array(r);for(let e=1;e<=r;e++)i[r-e]=this.field.multiply(e,t.getCoefficient(e));let s=new tU(this.field,i),a=n.length,o=new Int32Array(a);for(let t=0;t<a;t++){let r=this.field.inverse(n[t]),i=this.field.subtract(0,e.evaluateAt(r)),a=this.field.inverse(s.evaluateAt(r));o[t]=this.field.multiply(i,a)}return o}}class tH{constructor(e,t,n,r,i){e instanceof tH?this.constructor_2(e):this.constructor_1(e,t,n,r,i)}constructor_1(e,t,n,r,i){let s=null==t||null==n,a=null==r||null==i;if(s&&a)throw new Y;s?(t=new em(0,r.getY()),n=new em(0,i.getY())):a&&(r=new em(e.getWidth()-1,t.getY()),i=new em(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return null==e?t:null==t?e:new tH(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,n){let r=this.topLeft,i=this.bottomLeft,s=this.topRight,a=this.bottomRight;if(e>0){let t=n?this.topLeft:this.topRight,i=Math.trunc(t.getY()-e);i<0&&(i=0);let a=new em(t.getX(),i);n?r=a:s=a}if(t>0){let e=n?this.bottomLeft:this.bottomRight,r=Math.trunc(e.getY()+t);r>=this.image.getHeight()&&(r=this.image.getHeight()-1);let s=new em(e.getX(),r);n?i=s:a=s}return new tH(this.image,r,i,s,a)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class tW{constructor(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class tG{constructor(){this.buffer=""}static form(e,t){let n=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(e,r,i,s,a,o){let l;if("%%"===e)return"%";if(void 0===t[++n])return;e=s?parseInt(s.substr(1)):void 0;let u=a?parseInt(a.substr(1)):void 0;switch(o){case"s":l=t[n];break;case"c":l=t[n][0];break;case"f":l=parseFloat(t[n]).toFixed(e);break;case"p":l=parseFloat(t[n]).toPrecision(e);break;case"e":l=parseFloat(t[n]).toExponential(e);break;case"x":l=parseInt(t[n]).toString(u||16);break;case"d":l=parseFloat(parseInt(t[n],u||10).toPrecision(e)).toFixed(0)}l="object"==typeof l?JSON.stringify(l):(+l).toString(u);let c=parseInt(i),h=i&&i[0]+""=="0"?"0":" ";for(;l.length<c;)l=void 0!==r?l+h:h+l;return l})}format(e,...t){this.buffer+=tG.form(e,t)}toString(){return this.buffer}}class tY{constructor(e){this.boundingBox=new tH(e),this.codewords=Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(null!=t)return t;for(let n=1;n<tY.MAX_NEARBY_DISTANCE;n++){let r=this.imageRowToCodewordIndex(e)-n;if(r>=0&&null!=(t=this.codewords[r])||(r=this.imageRowToCodewordIndex(e)+n)<this.codewords.length&&null!=(t=this.codewords[r]))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){let e=new tG,t=0;for(let n of this.codewords){if(null==n){e.format("%3d:    |   %n",t++);continue}e.format("%3d: %3d|%3d%n",t++,n.getRowNumber(),n.getValue())}return e.toString()}}tY.MAX_NEARBY_DISTANCE=5;class tq{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=[];for(let[n,r]of this.values.entries()){let i={getKey:()=>n,getValue:()=>r};i.getValue()>e?(e=i.getValue(),(t=[]).push(i.getKey())):i.getValue()===e&&t.push(i.getKey())}return tL.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class tX extends tY{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())null!=e&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(r.getY())),a=this.imageRowToCodewordIndex(Math.trunc(i.getY())),o=-1,l=1,u=0;for(let n=s;n<a;n++){if(null==t[n])continue;let r=t[n],i=r.getRowNumber()-o;if(0===i)u++;else if(1===i)l=Math.max(l,u),u=1,o=r.getRowNumber();else if(i<0||r.getRowNumber()>=e.getRowCount()||i>n)t[n]=null;else{let e,s=(e=l>2?(l-2)*i:i)>=n;for(let r=1;r<=e&&!s;r++)s=null!=t[n-r];s?t[n]=null:(o=r.getRowNumber(),u=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(null==e)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let e of this.getCodewords())if(null!=e){let n=e.getRowNumber();if(n>=t.length)continue;t[n]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),s=this.imageRowToCodewordIndex(Math.trunc(r.getY())),a=this.getCodewords(),o=-1;for(let t=i;t<s;t++){if(null==a[t])continue;let n=a[t];n.setRowNumberAsRowIndicatorColumn();let r=n.getRowNumber()-o;0===r||(1===r?o=n.getRowNumber():n.getRowNumber()>=e.getRowCount()?a[t]=null:o=n.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new tq,n=new tq,r=new tq,i=new tq;for(let s of e){if(null==s)continue;s.setRowNumberAsRowIndicatorColumn();let e=s.getValue()%30,a=s.getRowNumber();switch(!this._isLeft&&(a+=2),a%3){case 0:n.setValue(3*e+1);break;case 1:i.setValue(e/3),r.setValue(e%3);break;case 2:t.setValue(e+1)}}if(0===t.getValue().length||0===n.getValue().length||0===r.getValue().length||0===i.getValue().length||t.getValue()[0]<1||n.getValue()[0]+r.getValue()[0]<tL.MIN_ROWS_IN_BARCODE||n.getValue()[0]+r.getValue()[0]>tL.MAX_ROWS_IN_BARCODE)return null;let s=new tW(t.getValue()[0],n.getValue()[0],r.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(e,s),s}removeIncorrectCodewords(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(null==e[n])continue;let i=r.getValue()%30,s=r.getRowNumber();if(s>t.getRowCount()){e[n]=null;continue}switch(!this._isLeft&&(s+=2),s%3){case 0:3*i+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:(Math.trunc(i/3)!==t.getErrorCorrectionLevel()||i%3!==t.getRowCountLowerPart())&&(e[n]=null);break;case 2:i+1!==t.getColumnCount()&&(e[n]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class t${constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){let e;this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=tL.MAX_CODEWORDS_IN_BARCODE;do e=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<e)return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(0===e)return 0;for(let e=1;e<this.barcodeColumnCount+1;e++){let t=this.detectionResultColumns[e].getCodewords();for(let n=0;n<t.length;n++)null!=t[n]&&(t[n].hasValidRowNumber()||this.adjustRowNumbers(e,n,t))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++)if(null!=e[n]&&null!=t[n]&&e[n].getRowNumber()===t[n].getRowNumber())for(let t=1;t<=this.barcodeColumnCount;t++){let r=this.detectionResultColumns[t].getCodewords()[n];null!=r&&(r.setRowNumber(e[n].getRowNumber()),r.hasValidRowNumber()||(this.detectionResultColumns[t].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let r=t[n].getRowNumber(),i=0;for(let t=this.barcodeColumnCount+1;t>0&&i<this.ADJUST_ROW_NUMBER_SKIP;t--){let s=this.detectionResultColumns[t].getCodewords()[n];null!=s&&(i=t$.adjustRowNumberIfValid(r,i,s),!s.hasValidRowNumber()&&e++)}}return e}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let n=0;n<t.length;n++){if(null==t[n])continue;let r=t[n].getRowNumber(),i=0;for(let t=1;t<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;t++){let s=this.detectionResultColumns[t].getCodewords()[n];null!=s&&(i=t$.adjustRowNumberIfValid(r,i,s),!s.hasValidRowNumber()&&e++)}}return e}static adjustRowNumberIfValid(e,t,n){return null==n||!n.hasValidRowNumber()&&(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,n){if(!this.detectionResultColumns[e-1])return;let r=n[t],i=this.detectionResultColumns[e-1].getCodewords(),s=i;null!=this.detectionResultColumns[e+1]&&(s=this.detectionResultColumns[e+1].getCodewords());let a=Array(14);for(let e of(a[2]=i[t],a[3]=s[t],t>0&&(a[0]=n[t-1],a[4]=i[t-1],a[5]=s[t-1]),t>1&&(a[8]=n[t-2],a[10]=i[t-2],a[11]=s[t-2]),t<n.length-1&&(a[1]=n[t+1],a[6]=i[t+1],a[7]=s[t+1]),t<n.length-2&&(a[9]=n[t+2],a[12]=i[t+2],a[13]=s[t+2]),a))if(t$.adjustRowNumber(r,e))return}static adjustRowNumber(e,t){return null!=t&&!!t.hasValidRowNumber()&&t.getBucket()===e.getBucket()&&(e.setRowNumber(t.getRowNumber()),!0)}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new tG;for(let n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(let e=0;e<this.barcodeColumnCount+2;e++){if(null==this.detectionResultColumns[e]){t.format("    |   ");continue}let r=this.detectionResultColumns[e].getCodewords()[n];if(null==r){t.format("    |   ");continue}t.format(" %3d|%3d",r.getRowNumber(),r.getValue())}t.format("%n")}return t.toString()}}class tQ{constructor(e,t,n,r){this.rowNumber=tQ.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(r)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==tQ.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}tQ.BARCODE_ROW_UNKNOWN=-1;class tK{static initialize(){for(let e=0;e<tL.SYMBOL_TABLE.length;e++){let t=tL.SYMBOL_TABLE[e],n=1&t;for(let r=0;r<tL.BARS_IN_MODULE;r++){let i=0;for(;(1&t)===n;)i+=1,t>>=1;n=1&t,tK.RATIOS_TABLE[e]||(tK.RATIOS_TABLE[e]=Array(tL.BARS_IN_MODULE)),tK.RATIOS_TABLE[e][tL.BARS_IN_MODULE-r-1]=Math.fround(i/tL.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=tK.getDecodedCodewordValue(tK.sampleBitCounts(e));return -1!==t?t:tK.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=ep.sum(e),n=new Int32Array(tL.BARS_IN_MODULE),r=0,i=0;for(let s=0;s<tL.MODULES_IN_CODEWORD;s++){let a=t/(2*tL.MODULES_IN_CODEWORD)+s*t/tL.MODULES_IN_CODEWORD;i+e[r]<=a&&(i+=e[r],r++),n[r]++}return n}static getDecodedCodewordValue(e){let t=tK.getBitValue(e);return -1===tL.getCodeword(t)?-1:t}static getBitValue(e){let t=0;for(let n=0;n<e.length;n++)for(let r=0;r<e[n];r++)t=t<<1|n%2==0;return Math.trunc(t)}static getClosestDecodedValue(e){let t=ep.sum(e),n=Array(tL.BARS_IN_MODULE);if(t>1)for(let r=0;r<n.length;r++)n[r]=Math.fround(e[r]/t);let r=eg.MAX_VALUE,i=-1;this.bSymbolTableReady||tK.initialize();for(let e=0;e<tK.RATIOS_TABLE.length;e++){let t=0,s=tK.RATIOS_TABLE[e];for(let e=0;e<tL.BARS_IN_MODULE;e++){let i=Math.fround(s[e]-n[e]);if((t+=Math.fround(i*i))>=r)break}t<r&&(r=t,i=tL.SYMBOL_TABLE[e])}return i}}tK.bSymbolTableReady=!1,tK.RATIOS_TABLE=Array(tL.SYMBOL_TABLE.length).map(e=>Array(tL.BARS_IN_MODULE));class tZ{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class tJ{static parseLong(e,t){return parseInt(e,t)}}class t1 extends A{}t1.kind="NullPointerException";class t0{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,n){if(null==e)throw new t1;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new k;if(0!==n)for(let r=0;r<n;r++)this.write(e[t+r])}flush(){}close(){}}class t2 extends A{}class t3 extends t0{constructor(e=32){if(super(),this.count=0,e<0)throw new N("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let t=this.buf.length<<1;if(t-e<0&&(t=e),t<0){if(e<0)throw new t2;t=L.MAX_VALUE}this.buf=x.copyOfUint8Array(this.buf,t)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new k;this.ensureCapacity(this.count+n),M.arraycopy(e,t,this.buf,this.count,n),this.count+=n}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return x.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?"string"==typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}function t4(){if("undefined"!=typeof window)return window.BigInt||null;if(void 0!==Q)return Q.BigInt||null;if("undefined"!=typeof self)return self.BigInt||null;throw Error("Can't search globals for BigInt!")}function t6(e){if(void 0===t&&(t=t4()),null===t)throw Error("BigInt is not supported!");return t(e)}(h=S||(S={}))[h.ALPHA=0]="ALPHA",h[h.LOWER=1]="LOWER",h[h.MIXED=2]="MIXED",h[h.PUNCT=3]="PUNCT",h[h.ALPHA_SHIFT=4]="ALPHA_SHIFT",h[h.PUNCT_SHIFT=5]="PUNCT_SHIFT";class t8{static decode(e,t){let n=new W(""),r=V.ISO8859_1;n.enableDecoding(r);let i=1,s=e[i++],a=new tZ;for(;i<e[0];){switch(s){case t8.TEXT_COMPACTION_MODE_LATCH:i=t8.textCompaction(e,i,n);break;case t8.BYTE_COMPACTION_MODE_LATCH:case t8.BYTE_COMPACTION_MODE_LATCH_6:i=t8.byteCompaction(s,e,r,i,n);break;case t8.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case t8.NUMERIC_COMPACTION_MODE_LATCH:i=t8.numericCompaction(e,i,n);break;case t8.ECI_CHARSET:V.getCharacterSetECIByValue(e[i++]);break;case t8.ECI_GENERAL_PURPOSE:i+=2;break;case t8.ECI_USER_DEFINED:i++;break;case t8.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=t8.decodeMacroBlock(e,i,a);break;case t8.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t8.MACRO_PDF417_TERMINATOR:throw new U;default:i--,i=t8.textCompaction(e,i,n)}if(i<e.length)s=e[i++];else throw U.getFormatInstance()}if(0===n.length())throw U.getFormatInstance();let o=new es(null,n.toString(),null,t);return o.setOther(a),o}static decodeMacroBlock(e,t,n){if(t+t8.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw U.getFormatInstance();let r=new Int32Array(t8.NUMBER_OF_SEQUENCE_CODEWORDS);for(let n=0;n<t8.NUMBER_OF_SEQUENCE_CODEWORDS;n++,t++)r[n]=e[t];n.setSegmentIndex(L.parseInt(t8.decodeBase900toBase10(r,t8.NUMBER_OF_SEQUENCE_CODEWORDS)));let i=new W;t=t8.textCompaction(e,t,i),n.setFileId(i.toString());let s=-1;for(e[t]===t8.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case t8.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++t]){case t8.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let r=new W;t=t8.textCompaction(e,t+1,r),n.setFileName(r.toString());break;case t8.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let i=new W;t=t8.textCompaction(e,t+1,i),n.setSender(i.toString());break;case t8.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let s=new W;t=t8.textCompaction(e,t+1,s),n.setAddressee(s.toString());break;case t8.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let a=new W;t=t8.numericCompaction(e,t+1,a),n.setSegmentCount(L.parseInt(a.toString()));break;case t8.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let o=new W;t=t8.numericCompaction(e,t+1,o),n.setTimestamp(tJ.parseLong(o.toString()));break;case t8.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let l=new W;t=t8.numericCompaction(e,t+1,l),n.setChecksum(L.parseInt(l.toString()));break;case t8.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let u=new W;t=t8.numericCompaction(e,t+1,u),n.setFileSize(tJ.parseLong(u.toString()));break;default:throw U.getFormatInstance()}break;case t8.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw U.getFormatInstance()}if(-1!==s){let r=t-s;n.isLastSegment()&&r--,n.setOptionalData(x.copyOfRange(e,s,s+r))}return t}static textCompaction(e,t,n){let r=new Int32Array((e[0]-t)*2),i=new Int32Array((e[0]-t)*2),s=0,a=!1;for(;t<e[0]&&!a;){let n=e[t++];if(n<t8.TEXT_COMPACTION_MODE_LATCH)r[s]=n/30,r[s+1]=n%30,s+=2;else switch(n){case t8.TEXT_COMPACTION_MODE_LATCH:r[s++]=t8.TEXT_COMPACTION_MODE_LATCH;break;case t8.BYTE_COMPACTION_MODE_LATCH:case t8.BYTE_COMPACTION_MODE_LATCH_6:case t8.NUMERIC_COMPACTION_MODE_LATCH:case t8.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t8.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t8.MACRO_PDF417_TERMINATOR:t--,a=!0;break;case t8.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r[s]=t8.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,n=e[t++],i[s]=n,s++}}return t8.decodeTextCompaction(r,i,s,n),t}static decodeTextCompaction(e,t,n,r){let i=S.ALPHA,s=S.ALPHA,a=0;for(;a<n;){let n=e[a],o="";switch(i){case S.ALPHA:if(n<26)o=String.fromCharCode(65+n);else switch(n){case 26:o=" ";break;case t8.LL:i=S.LOWER;break;case t8.ML:i=S.MIXED;break;case t8.PS:s=i,i=S.PUNCT_SHIFT;break;case t8.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a]);break;case t8.TEXT_COMPACTION_MODE_LATCH:i=S.ALPHA}break;case S.LOWER:if(n<26)o=String.fromCharCode(97+n);else switch(n){case 26:o=" ";break;case t8.AS:s=i,i=S.ALPHA_SHIFT;break;case t8.ML:i=S.MIXED;break;case t8.PS:s=i,i=S.PUNCT_SHIFT;break;case t8.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a]);break;case t8.TEXT_COMPACTION_MODE_LATCH:i=S.ALPHA}break;case S.MIXED:if(n<t8.PL)o=t8.MIXED_CHARS[n];else switch(n){case t8.PL:i=S.PUNCT;break;case 26:o=" ";break;case t8.LL:i=S.LOWER;break;case t8.AL:i=S.ALPHA;break;case t8.PS:s=i,i=S.PUNCT_SHIFT;break;case t8.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a]);break;case t8.TEXT_COMPACTION_MODE_LATCH:i=S.ALPHA}break;case S.PUNCT:if(n<t8.PAL)o=t8.PUNCT_CHARS[n];else switch(n){case t8.PAL:i=S.ALPHA;break;case t8.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a]);break;case t8.TEXT_COMPACTION_MODE_LATCH:i=S.ALPHA}break;case S.ALPHA_SHIFT:if(i=s,n<26)o=String.fromCharCode(65+n);else switch(n){case 26:o=" ";break;case t8.TEXT_COMPACTION_MODE_LATCH:i=S.ALPHA}break;case S.PUNCT_SHIFT:if(i=s,n<t8.PAL)o=t8.PUNCT_CHARS[n];else switch(n){case t8.PAL:i=S.ALPHA;break;case t8.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a]);break;case t8.TEXT_COMPACTION_MODE_LATCH:i=S.ALPHA}}""!==o&&r.append(o),a++}}static byteCompaction(e,t,n,r,i){let s=new t3,a=0,o=0,l=!1;switch(e){case t8.BYTE_COMPACTION_MODE_LATCH:let u=new Int32Array(6),c=t[r++];for(;r<t[0]&&!l;)switch(u[a++]=c,o=900*o+c,c=t[r++]){case t8.TEXT_COMPACTION_MODE_LATCH:case t8.BYTE_COMPACTION_MODE_LATCH:case t8.NUMERIC_COMPACTION_MODE_LATCH:case t8.BYTE_COMPACTION_MODE_LATCH_6:case t8.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t8.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t8.MACRO_PDF417_TERMINATOR:r--,l=!0;break;default:if(a%5==0&&a>0){for(let e=0;e<6;++e)s.write(Number(t6(o)>>t6(8*(5-e))));o=0,a=0}}r===t[0]&&c<t8.TEXT_COMPACTION_MODE_LATCH&&(u[a++]=c);for(let e=0;e<a;e++)s.write(u[e]);break;case t8.BYTE_COMPACTION_MODE_LATCH_6:for(;r<t[0]&&!l;){let e=t[r++];if(e<t8.TEXT_COMPACTION_MODE_LATCH)a++,o=900*o+e;else switch(e){case t8.TEXT_COMPACTION_MODE_LATCH:case t8.BYTE_COMPACTION_MODE_LATCH:case t8.NUMERIC_COMPACTION_MODE_LATCH:case t8.BYTE_COMPACTION_MODE_LATCH_6:case t8.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t8.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t8.MACRO_PDF417_TERMINATOR:r--,l=!0}if(a%5==0&&a>0){for(let e=0;e<6;++e)s.write(Number(t6(o)>>t6(8*(5-e))));o=0,a=0}}}return i.append(j.decode(s.toByteArray(),n)),r}static numericCompaction(e,t,n){let r=0,i=!1,s=new Int32Array(t8.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!i;){let a=e[t++];if(t===e[0]&&(i=!0),a<t8.TEXT_COMPACTION_MODE_LATCH)s[r]=a,r++;else switch(a){case t8.TEXT_COMPACTION_MODE_LATCH:case t8.BYTE_COMPACTION_MODE_LATCH:case t8.BYTE_COMPACTION_MODE_LATCH_6:case t8.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t8.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t8.MACRO_PDF417_TERMINATOR:t--,i=!0}(r%t8.MAX_NUMERIC_CODEWORDS==0||a===t8.NUMERIC_COMPACTION_MODE_LATCH||i)&&r>0&&(n.append(t8.decodeBase900toBase10(s,r)),r=0)}return t}static decodeBase900toBase10(e,t){let n=t6(0);for(let r=0;r<t;r++)n+=t8.EXP900[t-r-1]*t6(e[r]);let r=n.toString();if("1"!==r.charAt(0))throw new U;return r.substring(1)}}t8.TEXT_COMPACTION_MODE_LATCH=900,t8.BYTE_COMPACTION_MODE_LATCH=901,t8.NUMERIC_COMPACTION_MODE_LATCH=902,t8.BYTE_COMPACTION_MODE_LATCH_6=924,t8.ECI_USER_DEFINED=925,t8.ECI_GENERAL_PURPOSE=926,t8.ECI_CHARSET=927,t8.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t8.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t8.MACRO_PDF417_TERMINATOR=922,t8.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t8.MAX_NUMERIC_CODEWORDS=15,t8.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t8.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t8.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t8.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t8.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t8.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t8.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t8.PL=25,t8.LL=27,t8.AS=27,t8.ML=28,t8.AL=28,t8.PS=29,t8.PAL=29,t8.PUNCT_CHARS=";<>@[\\]_`~!\r	,:\n-.$/\"|*()?{}'",t8.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t8.EXP900=t4()?function(){let e=[];e[0]=t6(1);let t=t6(900);e[1]=t;for(let n=2;n<16;n++)e[n]=e[n-1]*t;return e}():[],t8.NUMBER_OF_SEQUENCE_CODEWORDS=2;class t5{constructor(){}static decode(e,t,n,r,i,s,a){let o,l=new tH(e,t,n,r,i),u=null,c=null;for(let n=!0;;n=!1){if(null!=t&&(u=t5.getRowIndicatorColumn(e,l,t,!0,s,a)),null!=r&&(c=t5.getRowIndicatorColumn(e,l,r,!1,s,a)),null==(o=t5.merge(u,c)))throw Y.getNotFoundInstance();let i=o.getBoundingBox();if(n&&null!=i&&(i.getMinY()<l.getMinY()||i.getMaxY()>l.getMaxY()))l=i;else break}o.setBoundingBox(l);let h=o.getBarcodeColumnCount()+1;o.setDetectionResultColumn(0,u),o.setDetectionResultColumn(h,c);let d=null!=u;for(let t=1;t<=h;t++){let n,r=d?t:h-t;if(void 0!==o.getDetectionResultColumn(r))continue;n=0===r||r===h?new tX(l,0===r):new tY(l),o.setDetectionResultColumn(r,n);let i=-1,u=-1;for(let t=l.getMinY();t<=l.getMaxY();t++){if((i=t5.getStartColumn(o,r,t,d))<0||i>l.getMaxX()){if(-1===u)continue;i=u}let c=t5.detectCodeword(e,l.getMinX(),l.getMaxX(),d,i,t,s,a);null!=c&&(n.setCodeword(t,c),u=i,s=Math.min(s,c.getWidth()),a=Math.max(a,c.getWidth()))}}return t5.createDecoderResult(o)}static merge(e,t){if(null==e&&null==t)return null;let n=t5.getBarcodeMetadata(e,t);return null==n?null:new t$(n,tH.merge(t5.adjustBoundingBox(e),t5.adjustBoundingBox(t)))}static adjustBoundingBox(e){if(null==e)return null;let t=e.getRowHeights();if(null==t)return null;let n=t5.getMax(t),r=0;for(let e of t)if(r+=n-e,e>0)break;let i=e.getCodewords();for(let e=0;r>0&&null==i[e];e++)r--;let s=0;for(let e=t.length-1;e>=0&&(s+=n-t[e],!(t[e]>0));e--);for(let e=i.length-1;s>0&&null==i[e];e--)s--;return e.getBoundingBox().addMissingRows(r,s,e.isLeft())}static getMax(e){let t=-1;for(let n of e)t=Math.max(t,n);return t}static getBarcodeMetadata(e,t){let n,r;return null==e||null==(n=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(r=t.getBarcodeMetadata())?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n}static getRowIndicatorColumn(e,t,n,r,i,s){let a=new tX(t,r);for(let o=0;o<2;o++){let l=0===o?1:-1,u=Math.trunc(Math.trunc(n.getX()));for(let o=Math.trunc(Math.trunc(n.getY()));o<=t.getMaxY()&&o>=t.getMinY();o+=l){let t=t5.detectCodeword(e,0,e.getWidth(),r,u,o,i,s);null!=t&&(a.setCodeword(o,t),u=r?t.getStartX():t.getEndX())}}return a}static adjustCodewordCount(e,t){let n=t[0][1],r=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t5.getNumberOfECCodeWords(e.getBarcodeECLevel());if(0===r.length){if(i<1||i>tL.MAX_CODEWORDS_IN_BARCODE)throw Y.getNotFoundInstance();n.setValue(i)}else r[0]!==i&&n.setValue(i)}static createDecoderResult(e){let t=t5.createBarcodeMatrix(e);t5.adjustCodewordCount(e,t);let n=[],r=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],s=[];for(let a=0;a<e.getBarcodeRowCount();a++)for(let o=0;o<e.getBarcodeColumnCount();o++){let l=t[a][o+1].getValue(),u=a*e.getBarcodeColumnCount()+o;0===l.length?n.push(u):1===l.length?r[u]=l[0]:(s.push(u),i.push(l))}let a=Array(i.length);for(let e=0;e<a.length;e++)a[e]=i[e];return t5.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),r,tL.toIntArray(n),tL.toIntArray(s),a)}static createDecoderResultFromAmbiguousValues(e,t,n,r,i){let s=new Int32Array(r.length),a=100;for(;a-- >0;){for(let e=0;e<s.length;e++)t[r[e]]=i[e][s[e]];try{return t5.decodeCodewords(t,e,n)}catch(e){if(!(e instanceof D))throw e}if(0===s.length)break;for(let e=0;e<s.length;e++)if(s[e]<i[e].length-1){s[e]++;break}else if(s[e]=0,e===s.length-1)throw D.getChecksumInstance()}throw D.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>Array(e.getBarcodeColumnCount()+2));for(let e=0;e<t.length;e++)for(let n=0;n<t[e].length;n++)t[e][n]=new tq;let n=0;for(let r of e.getDetectionResultColumns()){if(null!=r){for(let e of r.getCodewords())if(null!=e){let r=e.getRowNumber();if(r>=0){if(r>=t.length)continue;t[r][n].setValue(e.getValue())}}}n++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,n,r){let i=r?1:-1,s=null;if(t5.isValidBarcodeColumn(e,t-i)&&(s=e.getDetectionResultColumn(t-i).getCodeword(n)),null!=s)return r?s.getEndX():s.getStartX();if(null!=(s=e.getDetectionResultColumn(t).getCodewordNearby(n)))return r?s.getStartX():s.getEndX();if(t5.isValidBarcodeColumn(e,t-i)&&(s=e.getDetectionResultColumn(t-i).getCodewordNearby(n)),null!=s)return r?s.getEndX():s.getStartX();let a=0;for(;t5.isValidBarcodeColumn(e,t-i);){for(let n of(t-=i,e.getDetectionResultColumn(t).getCodewords()))if(null!=n)return(r?n.getEndX():n.getStartX())+i*a*(n.getEndX()-n.getStartX());a++}return r?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,n,r,i,s,a,o){let l;i=t5.adjustCodewordStartColumn(e,t,n,r,i,s);let u=t5.getModuleBitCount(e,t,n,r,i,s);if(null==u)return null;let c=ep.sum(u);if(r)l=i+c;else{for(let e=0;e<u.length/2;e++){let t=u[e];u[e]=u[u.length-1-e],u[u.length-1-e]=t}i=(l=i)-c}if(!t5.checkCodewordSkew(c,a,o))return null;let h=tK.getDecodedValue(u),d=tL.getCodeword(h);return -1===d?null:new tQ(i,l,t5.getCodewordBucketNumber(h),d)}static getModuleBitCount(e,t,n,r,i,s){let a=i,o=new Int32Array(8),l=0,u=r?1:-1,c=r;for(;(r?a<n:a>=t)&&l<o.length;)e.get(a,s)===c?(o[l]++,a+=u):(l++,c=!c);return l===o.length||a===(r?n:t)&&l===o.length-1?o:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,n,r,i,s){let a=i,o=r?-1:1;for(let l=0;l<2;l++){for(;(r?a>=t:a<n)&&r===e.get(a,s);){if(Math.abs(i-a)>t5.CODEWORD_SKEW_SIZE)return i;a+=o}o=-o,r=!r}return a}static checkCodewordSkew(e,t,n){return t-t5.CODEWORD_SKEW_SIZE<=e&&e<=n+t5.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,n){if(0===e.length)throw U.getFormatInstance();let r=1<<t+1,i=t5.correctErrors(e,n,r);t5.verifyCodewordCount(e,r);let s=t8.decode(e,""+t);return s.setErrorsCorrected(i),s.setErasures(n.length),s}static correctErrors(e,t,n){if(null!=t&&t.length>n/2+t5.MAX_ERRORS||n<0||n>t5.MAX_EC_CODEWORDS)throw D.getChecksumInstance();return t5.errorCorrection.decode(e,n,t)}static verifyCodewordCount(e,t){if(e.length<4)throw U.getFormatInstance();let n=e[0];if(n>e.length)throw U.getFormatInstance();if(0===n)if(t<e.length)e[0]=e.length-t;else throw U.getFormatInstance()}static getBitCountForCodeword(e){let t=new Int32Array(8),n=0,r=t.length-1;for(;!((1&e)!==n&&(n=1&e,--r<0));)t[r]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return t5.getCodewordBucketNumber(t5.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new tG;for(let n=0;n<e.length;n++){t.format("Row %2d: ",n);for(let r=0;r<e[n].length;r++){let i=e[n][r];0===i.getValue().length?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()}}t5.CODEWORD_SKEW_SIZE=2,t5.MAX_ERRORS=3,t5.MAX_EC_CODEWORDS=512,t5.errorCorrection=new tj;class t7{decode(e,t=null){let n=t7.decode(e,t,!1);if(null==n||0===n.length||null==n[0])throw Y.getNotFoundInstance();return n[0]}decodeMultiple(e,t=null){try{return t7.decode(e,t,!0)}catch(e){if(e instanceof U||e instanceof D)throw Y.getNotFoundInstance();throw e}}static decode(e,t,n){let r=[],i=tF.detectMultiple(e,t,n);for(let e of i.getPoints()){let t=t5.decode(i.getBits(),e[4],e[5],e[6],e[7],t7.getMinCodewordWidth(e),t7.getMaxCodewordWidth(e)),n=new en(t.getText(),t.getRawBytes(),void 0,e,er.PDF_417);n.putMetadata(ei.ERROR_CORRECTION_LEVEL,t.getECLevel());let s=t.getOther();null!=s&&n.putMetadata(ei.PDF417_EXTRA_METADATA,s),r.push(n)}return r.map(e=>e)}static getMaxWidth(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return null==e||null==t?L.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(t7.getMaxWidth(e[0],e[4]),t7.getMaxWidth(e[6],e[2])*tL.MODULES_IN_CODEWORD/tL.MODULES_IN_STOP_PATTERN),Math.max(t7.getMaxWidth(e[1],e[5]),t7.getMaxWidth(e[7],e[3])*tL.MODULES_IN_CODEWORD/tL.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(t7.getMinWidth(e[0],e[4]),t7.getMinWidth(e[6],e[2])*tL.MODULES_IN_CODEWORD/tL.MODULES_IN_STOP_PATTERN),Math.min(t7.getMinWidth(e[1],e[5]),t7.getMinWidth(e[7],e[3])*tL.MODULES_IN_CODEWORD/tL.MODULES_IN_STOP_PATTERN)))}reset(){}}class t9 extends A{}t9.kind="ReaderException";class ne{constructor(e,t){this.verbose=!0===e,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return(null===this.readers||void 0===this.readers)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;let t=null!=e&&!0===e.get(F.TRY_HARDER),n=null==e?null:e.get(F.POSSIBLE_FORMATS),r=[];if(null!=n){let i=n.some(e=>e===er.UPC_A||e===er.UPC_E||e===er.EAN_13||e===er.EAN_8||e===er.CODABAR||e===er.CODE_39||e===er.CODE_93||e===er.CODE_128||e===er.ITF||e===er.RSS_14||e===er.RSS_EXPANDED);i&&!t&&r.push(new ta(e,this.verbose)),n.includes(er.QR_CODE)&&r.push(new tx),n.includes(er.DATA_MATRIX)&&r.push(new tm),n.includes(er.AZTEC)&&r.push(new eA),n.includes(er.PDF_417)&&r.push(new t7),i&&t&&r.push(new ta(e,this.verbose))}0===r.length&&(t||r.push(new ta(e,this.verbose)),r.push(new tx),r.push(new tm),r.push(new eA),r.push(new t7),t&&r.push(new ta(e,this.verbose))),this.readers=r}reset(){if(null!==this.readers)for(let e of this.readers)e.reset()}decodeInternal(e){if(null===this.readers)throw new t9("No readers where selected, nothing can be read.");for(let t of this.readers)try{return t.decode(e,this.hints)}catch(e){if(e instanceof t9)continue}throw new Y("No MultiFormat Readers were able to detect the code.")}}(d=_||(_={}))[d.ERROR_CORRECTION=0]="ERROR_CORRECTION",d[d.CHARACTER_SET=1]="CHARACTER_SET",d[d.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",d[d.MIN_SIZE=3]="MIN_SIZE",d[d.MAX_SIZE=4]="MAX_SIZE",d[d.MARGIN=5]="MARGIN",d[d.PDF417_COMPACT=6]="PDF417_COMPACT",d[d.PDF417_COMPACTION=7]="PDF417_COMPACTION",d[d.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",d[d.AZTEC_LAYERS=9]="AZTEC_LAYERS",d[d.QR_VERSION=10]="QR_VERSION";var nt=_;class nn{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new eo(e,Int32Array.from([1])))}buildGenerator(e){let t=this.cachedGenerators;if(e>=t.length){let n=t[t.length-1],r=this.field;for(let i=t.length;i<=e;i++){let e=n.multiply(new eo(r,Int32Array.from([1,r.exp(i-1+r.getGeneratorBase())])));t.push(e),n=e}}return t[e]}encode(e,t){if(0===t)throw new N("No error correction bytes");let n=e.length-t;if(n<=0)throw new N("No data bytes provided");let r=this.buildGenerator(t),i=new Int32Array(n);M.arraycopy(e,0,i,0,n);let s=new eo(this.field,i),a=(s=s.multiplyByMonomial(t,1)).divide(r)[1].getCoefficients(),o=t-a.length;for(let t=0;t<o;t++)e[n+t]=0;M.arraycopy(a,0,e,n+o,a.length)}}class nr{constructor(){}static applyMaskPenaltyRule1(e){return nr.applyMaskPenaltyRule1Internal(e,!0)+nr.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0,n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let e=0;e<i-1;e++){let i=n[e];for(let s=0;s<r-1;s++){let r=i[s];r===i[s+1]&&r===n[e+1][s]&&r===n[e+1][s+1]&&t++}}return nr.N2*t}static applyMaskPenaltyRule3(e){let t=0,n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let e=0;e<i;e++)for(let s=0;s<r;s++){let a=n[e];s+6<r&&1===a[s]&&0===a[s+1]&&1===a[s+2]&&1===a[s+3]&&1===a[s+4]&&0===a[s+5]&&1===a[s+6]&&(nr.isWhiteHorizontal(a,s-4,s)||nr.isWhiteHorizontal(a,s+7,s+11))&&t++,e+6<i&&1===n[e][s]&&0===n[e+1][s]&&1===n[e+2][s]&&1===n[e+3][s]&&1===n[e+4][s]&&0===n[e+5][s]&&1===n[e+6][s]&&(nr.isWhiteVertical(n,s,e-4,e)||nr.isWhiteVertical(n,s,e+7,e+11))&&t++}return t*nr.N3}static isWhiteHorizontal(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(let r=t;r<n;r++)if(1===e[r])return!1;return!0}static isWhiteVertical(e,t,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(let i=n;i<r;i++)if(1===e[i][t])return!1;return!0}static applyMaskPenaltyRule4(e){let t=0,n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let e=0;e<i;e++){let i=n[e];for(let e=0;e<r;e++)1===i[e]&&t++}let s=e.getHeight()*e.getWidth();return Math.floor(10*Math.abs(2*t-s)/s)*nr.N4}static getDataMaskBit(e,t,n){let r,i;switch(e){case 0:r=n+t&1;break;case 1:r=1&n;break;case 2:r=t%3;break;case 3:r=(n+t)%3;break;case 4:r=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:r=(1&(i=n*t))+i%3;break;case 6:r=(1&(i=n*t))+i%3&1;break;case 7:r=(i=n*t)%3+(n+t&1)&1;break;default:throw new N("Invalid mask pattern: "+e)}return 0===r}static applyMaskPenaltyRule1Internal(e,t){let n=0,r=t?e.getHeight():e.getWidth(),i=t?e.getWidth():e.getHeight(),s=e.getArray();for(let e=0;e<r;e++){let r=0,a=-1;for(let o=0;o<i;o++){let i=t?s[e][o]:s[o][e];i===a?r++:(r>=5&&(n+=nr.N1+(r-5)),r=1,a=i)}r>=5&&(n+=nr.N1+(r-5))}return n}}nr.N1=3,nr.N2=3,nr.N3=40,nr.N4=10;class ni{constructor(e,t){this.width=e,this.height=t;let n=Array(t);for(let r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,n){this.bytes[t][e]=n}setBoolean(e,t,n){this.bytes[t][e]=+!!n}clear(e){for(let t of this.bytes)x.fill(t,e)}equals(e){if(!(e instanceof ni)||this.width!==e.width||this.height!==e.height)return!1;for(let t=0,n=this.height;t<n;++t){let n=this.bytes[t],r=e.bytes[t];for(let e=0,t=this.width;e<t;++e)if(n[e]!==r[e])return!1}return!0}toString(){let e=new W;for(let t=0,n=this.height;t<n;++t){let n=this.bytes[t];for(let t=0,r=this.width;t<r;++t)switch(n[t]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()}}class ns{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){let e=new W;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<ns.NUM_MASK_PATTERNS}}ns.NUM_MASK_PATTERNS=8;class na extends A{}na.kind="WriterException";class no{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,n,r,i){no.clearMatrix(i),no.embedBasicPatterns(n,i),no.embedTypeInfo(t,r,i),no.maybeEmbedVersionInfo(n,i),no.embedDataBits(e,r,i)}static embedBasicPatterns(e,t){no.embedPositionDetectionPatternsAndSeparators(t),no.embedDarkDotAtLeftBottomCorner(t),no.maybeEmbedPositionAdjustmentPatterns(e,t),no.embedTimingPatterns(t)}static embedTypeInfo(e,t,n){let r=new B;no.makeTypeInfoBits(e,t,r);for(let e=0,t=r.getSize();e<t;++e){let t=r.get(r.getSize()-1-e),i=no.TYPE_INFO_COORDINATES[e],s=i[0],a=i[1];if(n.setBoolean(s,a,t),e<8){let r=n.getWidth()-e-1;n.setBoolean(r,8,t)}else{let r=n.getHeight()-7+(e-8);n.setBoolean(8,r,t)}}}static maybeEmbedVersionInfo(e,t){if(7>e.getVersionNumber())return;let n=new B;no.makeVersionInfoBits(e,n);let r=17;for(let e=0;e<6;++e)for(let i=0;i<3;++i){let s=n.get(r);r--,t.setBoolean(e,t.getHeight()-11+i,s),t.setBoolean(t.getHeight()-11+i,e,s)}}static embedDataBits(e,t,n){let r=0,i=-1,s=n.getWidth()-1,a=n.getHeight()-1;for(;s>0;){for(6===s&&(s-=1);a>=0&&a<n.getHeight();){for(let i=0;i<2;++i){let o,l=s-i;no.isEmpty(n.get(l,a))&&(r<e.getSize()?(o=e.get(r),++r):o=!1,255!==t&&nr.getDataMaskBit(t,l,a)&&(o=!o),n.setBoolean(l,a,o))}a+=i}a+=i=-i,s-=2}if(r!==e.getSize())throw new na("Not all bits consumed: "+r+"/"+e.getSize())}static findMSBSet(e){return 32-L.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(0===t)throw new N("0 polynomial");let n=no.findMSBSet(t);for(e<<=n-1;no.findMSBSet(e)>=n;)e^=t<<no.findMSBSet(e)-n;return e}static makeTypeInfoBits(e,t,n){if(!ns.isValidMaskPattern(t))throw new na("Invalid mask pattern");let r=e.getBits()<<3|t;n.appendBits(r,5);let i=no.calculateBCHCode(r,no.TYPE_INFO_POLY);n.appendBits(i,10);let s=new B;if(s.appendBits(no.TYPE_INFO_MASK_PATTERN,15),n.xor(s),15!==n.getSize())throw new na("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);let n=no.calculateBCHCode(e.getVersionNumber(),no.VERSION_INFO_POLY);if(t.appendBits(n,12),18!==t.getSize())throw new na("should not happen but we got: "+t.getSize())}static isEmpty(e){return 255===e}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){let n=(t+1)%2;no.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),no.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}}static embedDarkDotAtLeftBottomCorner(e){if(0===e.get(8,e.getHeight()-8))throw new na;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,n){for(let r=0;r<8;++r){if(!no.isEmpty(n.get(e+r,t)))throw new na;n.setNumber(e+r,t,0)}}static embedVerticalSeparationPattern(e,t,n){for(let r=0;r<7;++r){if(!no.isEmpty(n.get(e,t+r)))throw new na;n.setNumber(e,t+r,0)}}static embedPositionAdjustmentPattern(e,t,n){for(let r=0;r<5;++r){let i=no.POSITION_ADJUSTMENT_PATTERN[r];for(let s=0;s<5;++s)n.setNumber(e+s,t+r,i[s])}}static embedPositionDetectionPattern(e,t,n){for(let r=0;r<7;++r){let i=no.POSITION_DETECTION_PATTERN[r];for(let s=0;s<7;++s)n.setNumber(e+s,t+r,i[s])}}static embedPositionDetectionPatternsAndSeparators(e){let t=no.POSITION_DETECTION_PATTERN[0].length;no.embedPositionDetectionPattern(0,0,e),no.embedPositionDetectionPattern(e.getWidth()-t,0,e),no.embedPositionDetectionPattern(0,e.getWidth()-t,e),no.embedHorizontalSeparationPattern(0,7,e),no.embedHorizontalSeparationPattern(e.getWidth()-8,7,e),no.embedHorizontalSeparationPattern(0,e.getWidth()-8,e),no.embedVerticalSeparationPattern(7,0,e),no.embedVerticalSeparationPattern(e.getHeight()-7-1,0,e),no.embedVerticalSeparationPattern(7,e.getHeight()-7,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(2>e.getVersionNumber())return;let n=e.getVersionNumber()-1,r=no.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let e=0,n=r.length;e!==n;e++){let i=r[e];if(i>=0)for(let e=0;e!==n;e++){let n=r[e];n>=0&&no.isEmpty(t.get(n,i))&&no.embedPositionAdjustmentPattern(n-2,i-2,t)}}}}no.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),no.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),no.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),no.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),no.VERSION_INFO_POLY=7973,no.TYPE_INFO_POLY=1335,no.TYPE_INFO_MASK_PATTERN=21522;class nl{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class nu{constructor(){}static calculateMaskPenalty(e){return nr.applyMaskPenaltyRule1(e)+nr.applyMaskPenaltyRule2(e)+nr.applyMaskPenaltyRule3(e)+nr.applyMaskPenaltyRule4(e)}static encode(e,t,n=null){let r,i=nu.DEFAULT_BYTE_MODE_ENCODING,s=null!==n&&void 0!==n.get(nt.CHARACTER_SET);s&&(i=n.get(nt.CHARACTER_SET).toString());let a=this.chooseMode(e,i),o=new B;if(a===tI.BYTE&&(s||nu.DEFAULT_BYTE_MODE_ENCODING!==i)){let e=V.getCharacterSetECIByName(i);void 0!==e&&this.appendECI(e,o)}this.appendModeInfo(a,o);let l=new B;if(this.appendBytes(e,a,l,i),null!==n&&void 0!==n.get(nt.QR_VERSION)){let e=Number.parseInt(n.get(nt.QR_VERSION).toString(),10);r=tC.getVersionForNumber(e);let i=this.calculateBitsNeeded(a,o,l,r);if(!this.willFit(i,r,t))throw new na("Data too big for requested version")}else r=this.recommendVersion(t,a,o,l);let u=new B;u.appendBitArray(o);let c=a===tI.BYTE?l.getSizeInBytes():e.length;this.appendLengthInfo(c,r,a,u),u.appendBitArray(l);let h=r.getECBlocksForLevel(t),d=r.getTotalCodewords()-h.getTotalECCodewords();this.terminateBits(d,u);let f=this.interleaveWithECBytes(u,r.getTotalCodewords(),d,h.getNumBlocks()),p=new ns;p.setECLevel(t),p.setMode(a),p.setVersion(r);let g=r.getDimensionForVersion(),m=new ni(g,g),y=this.chooseMaskPattern(f,t,r,m);return p.setMaskPattern(y),no.buildMatrix(f,t,r,y,m),p.setMatrix(m),p}static recommendVersion(e,t,n,r){let i=this.calculateBitsNeeded(t,n,r,tC.getVersionForNumber(1)),s=this.chooseVersion(i,e),a=this.calculateBitsNeeded(t,n,r,s);return this.chooseVersion(a,e)}static calculateBitsNeeded(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()}static getAlphanumericCode(e){return e<nu.ALPHANUMERIC_TABLE.length?nu.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,t=null){if(V.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return tI.KANJI;let n=!1,r=!1;for(let t=0,i=e.length;t<i;++t){let i=e.charAt(t);if(nu.isDigit(i))n=!0;else{if(-1===this.getAlphanumericCode(i.charCodeAt(0)))return tI.BYTE;r=!0}}return r?tI.ALPHANUMERIC:n?tI.NUMERIC:tI.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=j.encode(e,V.SJIS)}catch(e){return!1}let n=t.length;if(n%2!=0)return!1;for(let e=0;e<n;e+=2){let n=255&t[e];if((n<129||n>159)&&(n<224||n>235))return!1}return!0}static chooseMaskPattern(e,t,n,r){let i=Number.MAX_SAFE_INTEGER,s=-1;for(let a=0;a<ns.NUM_MASK_PATTERNS;a++){no.buildMatrix(e,t,n,a,r);let o=this.calculateMaskPenalty(r);o<i&&(i=o,s=a)}return s}static chooseVersion(e,t){for(let n=1;n<=40;n++){let r=tC.getVersionForNumber(n);if(nu.willFit(e,r,t))return r}throw new na("Data too big")}static willFit(e,t,n){let r=t.getTotalCodewords();return r-t.getECBlocksForLevel(n).getTotalECCodewords()>=(e+7)/8}static terminateBits(e,t){let n=8*e;if(t.getSize()>n)throw new na("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(let e=0;e<4&&t.getSize()<n;++e)t.appendBit(!1);let r=7&t.getSize();if(r>0)for(let e=r;e<8;e++)t.appendBit(!1);let i=e-t.getSizeInBytes();for(let e=0;e<i;++e)t.appendBits((1&e)==0?236:17,8);if(t.getSize()!==n)throw new na("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,n,r,i,s){if(r>=n)throw new na("Block ID too large");let a=e%n,o=n-a,l=Math.floor(e/n),u=Math.floor(t/n),c=u+1,h=l-u,d=l+1-c;if(h!==d)throw new na("EC bytes mismatch");if(n!==o+a)throw new na("RS blocks mismatch");if(e!==(u+h)*o+(c+d)*a)throw new na("Total bytes mismatch");r<o?(i[0]=u,s[0]=h):(i[0]=c,s[0]=d)}static interleaveWithECBytes(e,t,n,r){if(e.getSizeInBytes()!==n)throw new na("Number of bits and data bytes does not match");let i=0,s=0,a=0,o=[];for(let l=0;l<r;++l){let u=new Int32Array(1),c=new Int32Array(1);nu.getNumDataBytesAndNumECBytesForBlockID(t,n,r,l,u,c);let h=u[0],d=new Uint8Array(h);e.toBytes(8*i,d,0,h);let f=nu.generateECBytes(d,c[0]);o.push(new nl(d,f)),s=Math.max(s,h),a=Math.max(a,f.length),i+=u[0]}if(n!==i)throw new na("Data bytes does not match offset");let l=new B;for(let e=0;e<s;++e)for(let t of o){let n=t.getDataBytes();e<n.length&&l.appendBits(n[e],8)}for(let e=0;e<a;++e)for(let t of o){let n=t.getErrorCorrectionBytes();e<n.length&&l.appendBits(n[e],8)}if(t!==l.getSizeInBytes())throw new na("Interleaving error: "+t+" and "+l.getSizeInBytes()+" differ.");return l}static generateECBytes(e,t){let n=e.length,r=new Int32Array(n+t);for(let t=0;t<n;t++)r[t]=255&e[t];new nn(eu.QR_CODE_FIELD_256).encode(r,t);let i=new Uint8Array(t);for(let e=0;e<t;e++)i[e]=r[n+e];return i}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,n,r){let i=n.getCharacterCountBits(t);if(e>=1<<i)throw new na(e+" is bigger than "+((1<<i)-1));r.appendBits(e,i)}static appendBytes(e,t,n,r){switch(t){case tI.NUMERIC:nu.appendNumericBytes(e,n);break;case tI.ALPHANUMERIC:nu.appendAlphanumericBytes(e,n);break;case tI.BYTE:nu.append8BitBytes(e,n,r);break;case tI.KANJI:nu.appendKanjiBytes(e,n);break;default:throw new na("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){let t=nu.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){let n=e.length,r=0;for(;r<n;){let i=nu.getDigit(e.charAt(r));if(r+2<n){let n=nu.getDigit(e.charAt(r+1)),s=nu.getDigit(e.charAt(r+2));t.appendBits(100*i+10*n+s,10),r+=3}else if(r+1<n){let n=nu.getDigit(e.charAt(r+1));t.appendBits(10*i+n,7),r+=2}else t.appendBits(i,4),r++}}static appendAlphanumericBytes(e,t){let n=e.length,r=0;for(;r<n;){let i=nu.getAlphanumericCode(e.charCodeAt(r));if(-1===i)throw new na;if(r+1<n){let n=nu.getAlphanumericCode(e.charCodeAt(r+1));if(-1===n)throw new na;t.appendBits(45*i+n,11),r+=2}else t.appendBits(i,6),r++}}static append8BitBytes(e,t,n){let r;try{r=j.encode(e,n)}catch(e){throw new na(e)}for(let e=0,n=r.length;e!==n;e++){let n=r[e];t.appendBits(n,8)}}static appendKanjiBytes(e,t){let n;try{n=j.encode(e,V.SJIS)}catch(e){throw new na(e)}let r=n.length;for(let e=0;e<r;e+=2){let r=(255&n[e])<<8|255&n[e+1],i=-1;if(r>=33088&&r<=40956?i=r-33088:r>=57408&&r<=60351&&(i=r-49472),-1===i)throw new na("Invalid byte sequence");let s=(i>>8)*192+(255&i);t.appendBits(s,13)}}static appendECI(e,t){t.appendBits(tI.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}nu.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),nu.DEFAULT_BYTE_MODE_ENCODING=V.UTF8.getName();class nc{write(e,t,n,r=null){if(0===e.length)throw new N("Found empty contents");if(t<0||n<0)throw new N("Requested dimensions are too small: "+t+"x"+n);let i=ty.L,s=nc.QUIET_ZONE_SIZE;null!==r&&(void 0!==r.get(nt.ERROR_CORRECTION)&&(i=ty.fromString(r.get(nt.ERROR_CORRECTION).toString())),void 0!==r.get(nt.MARGIN)&&(s=Number.parseInt(r.get(nt.MARGIN).toString(),10)));let a=nu.encode(e,i,r);return this.renderResult(a,t,n,s)}writeToDom(e,t,n,r,i=null){"string"==typeof e&&(e=document.querySelector(e));let s=this.write(t,n,r,i);e&&e.appendChild(s)}renderResult(e,t,n,r){let i=e.getMatrix();if(null===i)throw new eh;let s=i.getWidth(),a=i.getHeight(),o=s+2*r,l=a+2*r,u=Math.max(t,o),c=Math.max(n,l),h=Math.min(Math.floor(u/o),Math.floor(c/l)),d=Math.floor((u-s*h)/2),f=Math.floor((c-a*h)/2),p=this.createSVGElement(u,c);for(let e=0,t=f;e<a;e++,t+=h)for(let n=0,r=d;n<s;n++,r+=h)if(1===i.get(n,e)){let e=this.createSvgRectElement(r,t,h,h);p.appendChild(e)}return p}createSVGElement(e,t){let n=document.createElementNS(nc.SVG_NS,"svg");return n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width",t.toString()),n}createSvgRectElement(e,t,n,r){let i=document.createElementNS(nc.SVG_NS,"rect");return i.setAttributeNS(null,"x",e.toString()),i.setAttributeNS(null,"y",t.toString()),i.setAttributeNS(null,"height",n.toString()),i.setAttributeNS(null,"width",r.toString()),i.setAttributeNS(null,"fill","#000000"),i}}nc.QUIET_ZONE_SIZE=4,nc.SVG_NS="http://www.w3.org/2000/svg";class nh{encode(e,t,n,r,i){if(0===e.length)throw new N("Found empty contents");if(t!==er.QR_CODE)throw new N("Can only encode QR_CODE, but got "+t);if(n<0||r<0)throw new N(`Requested dimensions are too small: ${n}x${r}`);let s=ty.L,a=nh.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(nt.ERROR_CORRECTION)&&(s=ty.fromString(i.get(nt.ERROR_CORRECTION).toString())),void 0!==i.get(nt.MARGIN)&&(a=Number.parseInt(i.get(nt.MARGIN).toString(),10)));let o=nu.encode(e,s,i);return nh.renderResult(o,n,r,a)}static renderResult(e,t,n,r){let i=e.getMatrix();if(null===i)throw new eh;let s=i.getWidth(),a=i.getHeight(),o=s+2*r,l=a+2*r,u=Math.max(t,o),c=Math.max(n,l),h=Math.min(Math.floor(u/o),Math.floor(c/l)),d=Math.floor((u-s*h)/2),f=Math.floor((c-a*h)/2),p=new G(u,c);for(let e=0,t=f;e<a;e++,t+=h)for(let n=0,r=d;n<s;n++,r+=h)1===i.get(n,e)&&p.setRegion(r,t,h,h);return p}}nh.QUIET_ZONE_SIZE=4;class nd extends ${constructor(e,t,n,r,i,s,a,o){if(super(s,a),this.yuvData=e,this.dataWidth=t,this.dataHeight=n,this.left=r,this.top=i,r+s>t||i+a>n)throw new N("Crop rectangle does not fit within image data.");o&&this.reverseHorizontal(s,a)}getRow(e,t){if(e<0||e>=this.getHeight())throw new N("Requested row is outside the image: "+e);let n=this.getWidth();(null==t||t.length<n)&&(t=new Uint8ClampedArray(n));let r=(e+this.top)*this.dataWidth+this.left;return M.arraycopy(this.yuvData,r,t,0,n),t}getMatrix(){let e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;let n=e*t,r=new Uint8ClampedArray(n),i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return M.arraycopy(this.yuvData,i,r,0,n),r;for(let n=0;n<t;n++){let t=n*e;M.arraycopy(this.yuvData,i,r,t,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new nd(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,n,r,!1)}renderThumbnail(){let e=this.getWidth()/nd.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/nd.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(e*t),r=this.yuvData,i=this.top*this.dataWidth+this.left;for(let s=0;s<t;s++){let t=s*e;for(let s=0;s<e;s++){let e=255&r[i+s*nd.THUMBNAIL_SCALE_FACTOR];n[t+s]=0xff000000|65793*e}i+=this.dataWidth*nd.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/nd.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/nd.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){let n=this.yuvData;for(let r=0,i=this.top*this.dataWidth+this.left;r<t;r++,i+=this.dataWidth){let t=i+e/2;for(let r=i,s=i+e-1;r<t;r++,s--){let e=n[r];n[r]=n[s],n[s]=e}}}invert(){return new K(this)}}nd.THUMBNAIL_SCALE_FACTOR=2;class nf extends ${constructor(e,t,n,r,i,s,a){if(super(t,n),this.dataWidth=r,this.dataHeight=i,this.left=s,this.top=a,4===e.BYTES_PER_ELEMENT){let r=t*n,i=new Uint8ClampedArray(r);for(let t=0;t<r;t++){let n=e[t],r=n>>16&255,s=n>>7&510,a=255&n;i[t]=(r+s+a)/4&255}this.luminances=i}else this.luminances=e;if(void 0===r&&(this.dataWidth=t),void 0===i&&(this.dataHeight=n),void 0===s&&(this.left=0),void 0===a&&(this.top=0),this.left+t>this.dataWidth||this.top+n>this.dataHeight)throw new N("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new N("Requested row is outside the image: "+e);let n=this.getWidth();(null==t||t.length<n)&&(t=new Uint8ClampedArray(n));let r=(e+this.top)*this.dataWidth+this.left;return M.arraycopy(this.luminances,r,t,0,n),t}getMatrix(){let e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;let n=e*t,r=new Uint8ClampedArray(n),i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return M.arraycopy(this.luminances,i,r,0,n),r;for(let n=0;n<t;n++){let t=n*e;M.arraycopy(this.luminances,i,r,t,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new nf(this.luminances,n,r,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new K(this)}}class np extends V{static forName(e){return this.getCharacterSetECIByName(e)}}class ng{}ng.ISO_8859_1=V.ISO8859_1;class nm{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class ny{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class nw{constructor(e){this.previous=e}getPrevious(){return this.previous}}class nE extends nw{constructor(e,t,n){super(e),this.value=t,this.bitCount=n}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new nE(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new nE(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+L.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class nv extends nE{constructor(e,t,n){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=n}appendTo(e,t){for(let n=0;n<this.binaryShiftByteCount;n++)(0===n||31===n&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):0===n?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)}addBinaryShift(e,t){return new nv(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function nC(e,t,n){return new nE(e,t,n)}let nS=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],n_=new nE(null,0,0),nb=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])],nI=function(e){for(let t of e)x.fill(t,-1);return e[0][4]=0,e[1][4]=0,e[1][0]=28,e[3][4]=0,e[2][4]=0,e[2][0]=15,e}(x.createInt32Array(6,6));class nA{constructor(e,t,n,r){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=r}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let n=this.bitCount,r=this.token;if(e!==this.mode){let t=nb[this.mode][e];r=nC(r,65535&t,t>>16),n+=t>>16}let i=2===e?4:5;return new nA(r=nC(r,t,i),e,0,n+i)}shiftAndAppend(e,t){let n=this.token,r=2===this.mode?4:5;return n=nC(n,nI[this.mode][e],r),new nA(n=nC(n,t,5),this.mode,0,this.bitCount+r+5)}addBinaryShiftChar(e){let t=this.token,n=this.mode,r=this.bitCount;if(4===this.mode||2===this.mode){let e=nb[n][0];t=nC(t,65535&e,e>>16),r+=e>>16,n=0}let i=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,s=new nA(t,n,this.binaryShiftByteCount+1,r+i);return 2078===s.binaryShiftByteCount&&(s=s.endBinaryShift(e+1)),s}endBinaryShift(e){if(0===this.binaryShiftByteCount)return this;let t=this.token;return new nA(t=new nv(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(nb[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=nA.calculateBinaryShiftCost(e)-nA.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let n=this.endBinaryShift(e.length).token;null!==n;n=n.getPrevious())t.unshift(n);let n=new B;for(let r of t)r.appendTo(n,e);return n}toString(){return H.format("%s bits=%d bytes=%d",nS[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:10*(e.binaryShiftByteCount>0)}}nA.INITIAL_STATE=new nA(n_,0,0,0);let nT=function(e){let t=H.getCharCode(" "),n=H.getCharCode("."),r=H.getCharCode(",");e[0][t]=1;let i=H.getCharCode("Z"),s=H.getCharCode("A");for(let t=s;t<=i;t++)e[0][t]=t-s+2;e[1][t]=1;let a=H.getCharCode("z"),o=H.getCharCode("a");for(let t=o;t<=a;t++)e[1][t]=t-o+2;e[2][t]=1;let l=H.getCharCode("9"),u=H.getCharCode("0");for(let t=u;t<=l;t++)e[2][t]=t-u+2;e[2][r]=12,e[2][n]=13;let c=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","	","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~",""];for(let t=0;t<c.length;t++)e[3][H.getCharCode(c[t])]=t;let h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let t=0;t<h.length;t++)H.getCharCode(h[t])>0&&(e[4][H.getCharCode(h[t])]=t);return e}(x.createInt32Array(5,256));class nN{constructor(e){this.text=e}encode(){let e=H.getCharCode(" "),t=H.getCharCode("\n"),n=ny.singletonList(nA.INITIAL_STATE);for(let r=0;r<this.text.length;r++){let i,s=r+1<this.text.length?this.text[r+1]:0;switch(this.text[r]){case H.getCharCode("\r"):i=2*(s===t);break;case H.getCharCode("."):i=3*(s===e);break;case H.getCharCode(","):i=4*(s===e);break;case H.getCharCode(":"):i=5*(s===e);break;default:i=0}i>0?(n=nN.updateStateListForPair(n,r,i),r++):n=this.updateStateListForChar(n,r)}return ny.min(n,(e,t)=>e.getBitCount()-t.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){let n=[];for(let r of e)this.updateStateForChar(r,t,n);return nN.simplifyStates(n)}updateStateForChar(e,t,n){let r=255&this.text[t],i=nT[e.getMode()][r]>0,s=null;for(let a=0;a<=4;a++){let o=nT[a][r];if(o>0){if(null==s&&(s=e.endBinaryShift(t)),!i||a===e.getMode()||2===a){let e=s.latchAndAppend(a,o);n.push(e)}if(!i&&nI[e.getMode()][a]>=0){let e=s.shiftAndAppend(a,o);n.push(e)}}}if(e.getBinaryShiftByteCount()>0||0===nT[e.getMode()][r]){let r=e.addBinaryShiftChar(t);n.push(r)}}static updateStateListForPair(e,t,n){let r=[];for(let i of e)this.updateStateForPair(i,t,n,r);return this.simplifyStates(r)}static updateStateForPair(e,t,n,r){let i=e.endBinaryShift(t);if(r.push(i.latchAndAppend(4,n)),4!==e.getMode()&&r.push(i.shiftAndAppend(4,n)),3===n||4===n){let e=i.latchAndAppend(2,16-n).latchAndAppend(2,1);r.push(e)}if(e.getBinaryShiftByteCount()>0){let n=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);r.push(n)}}static simplifyStates(e){let t=[];for(let n of e){let e=!0;for(let r of t){if(r.isBetterThanOrEqualTo(n)){e=!1;break}n.isBetterThanOrEqualTo(r)&&(t=t.filter(e=>e!==r))}e&&t.push(n)}return t}}class nR{constructor(){}static encodeBytes(e){return nR.encode(e,nR.DEFAULT_EC_PERCENT,nR.DEFAULT_AZTEC_LAYERS)}static encode(e,t,n){let r,i,s,a,o,l,u=new nN(e).encode(),c=L.truncDivision(u.getSize()*t,100)+11,h=u.getSize()+c;if(n!==nR.DEFAULT_AZTEC_LAYERS){if(r=n<0,(i=Math.abs(n))>(r?nR.MAX_NB_BITS_COMPACT:nR.MAX_NB_BITS))throw new N(H.format("Illegal value %s for layers",n));let e=(s=nR.totalBitsInLayer(i,r))-s%(a=nR.WORD_SIZE[i]);if((o=nR.stuffBits(u,a)).getSize()+c>e||r&&o.getSize()>64*a)throw new N("Data to large for user specified layer")}else{a=0,o=null;for(let e=0;;e++){if(e>nR.MAX_NB_BITS)throw new N("Data too large for an Aztec code");if(i=(r=e<=3)?e+1:e,h>(s=nR.totalBitsInLayer(i,r)))continue;(null==o||a!==nR.WORD_SIZE[i])&&(a=nR.WORD_SIZE[i],o=nR.stuffBits(u,a));let t=s-s%a;if(!(r&&o.getSize()>64*a)&&o.getSize()+c<=t)break}}let d=nR.generateCheckWords(o,s,a),f=o.getSize()/a,p=nR.generateModeMessage(r,i,f),g=(r?11:14)+4*i,m=new Int32Array(g);if(r){l=g;for(let e=0;e<m.length;e++)m[e]=e}else{l=g+1+2*L.truncDivision(L.truncDivision(g,2)-1,15);let e=L.truncDivision(g,2),t=L.truncDivision(l,2);for(let n=0;n<e;n++){let r=n+L.truncDivision(n,15);m[e-n-1]=t-r-1,m[e+n]=t+r+1}}let y=new G(l);for(let e=0,t=0;e<i;e++){let n=(i-e)*4+(r?9:12);for(let r=0;r<n;r++){let i=2*r;for(let s=0;s<2;s++)d.get(t+i+s)&&y.set(m[2*e+s],m[2*e+r]),d.get(t+2*n+i+s)&&y.set(m[2*e+r],m[g-1-2*e-s]),d.get(t+4*n+i+s)&&y.set(m[g-1-2*e-s],m[g-1-2*e-r]),d.get(t+6*n+i+s)&&y.set(m[g-1-2*e-r],m[2*e+s])}t+=8*n}if(nR.drawModeMessage(y,r,l,p),r)nR.drawBullsEye(y,L.truncDivision(l,2),5);else{nR.drawBullsEye(y,L.truncDivision(l,2),7);for(let e=0,t=0;e<L.truncDivision(g,2)-1;e+=15,t+=16)for(let e=1&L.truncDivision(l,2);e<l;e+=2)y.set(L.truncDivision(l,2)-t,e),y.set(L.truncDivision(l,2)+t,e),y.set(e,L.truncDivision(l,2)-t),y.set(e,L.truncDivision(l,2)+t)}let w=new nm;return w.setCompact(r),w.setSize(l),w.setLayers(i),w.setCodeWords(f),w.setMatrix(y),w}static drawBullsEye(e,t,n){for(let r=0;r<n;r+=2)for(let n=t-r;n<=t+r;n++)e.set(n,t-r),e.set(n,t+r),e.set(t-r,n),e.set(t+r,n);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)}static generateModeMessage(e,t,n){let r=new B;return e?(r.appendBits(t-1,2),r.appendBits(n-1,6),r=nR.generateCheckWords(r,28,4)):(r.appendBits(t-1,5),r.appendBits(n-1,11),r=nR.generateCheckWords(r,40,4)),r}static drawModeMessage(e,t,n,r){let i=L.truncDivision(n,2);if(t)for(let t=0;t<7;t++){let n=i-3+t;r.get(t)&&e.set(n,i-5),r.get(t+7)&&e.set(i+5,n),r.get(20-t)&&e.set(n,i+5),r.get(27-t)&&e.set(i-5,n)}else for(let t=0;t<10;t++){let n=i-5+t+L.truncDivision(t,5);r.get(t)&&e.set(n,i-7),r.get(t+10)&&e.set(i+7,n),r.get(29-t)&&e.set(n,i+7),r.get(39-t)&&e.set(i-7,n)}}static generateCheckWords(e,t,n){let r=e.getSize()/n,i=new nn(nR.getGF(n)),s=L.truncDivision(t,n),a=nR.bitsToWords(e,n,s);i.encode(a,s-r);let o=t%n,l=new B;for(let e of(l.appendBits(0,o),Array.from(a)))l.appendBits(e,n);return l}static bitsToWords(e,t,n){let r,i,s=new Int32Array(n);for(r=0,i=e.getSize()/t;r<i;r++){let n=0;for(let i=0;i<t;i++)n|=e.get(r*t+i)?1<<t-i-1:0;s[r]=n}return s}static getGF(e){switch(e){case 4:return eu.AZTEC_PARAM;case 6:return eu.AZTEC_DATA_6;case 8:return eu.AZTEC_DATA_8;case 10:return eu.AZTEC_DATA_10;case 12:return eu.AZTEC_DATA_12;default:throw new N("Unsupported word size "+e)}}static stuffBits(e,t){let n=new B,r=e.getSize(),i=(1<<t)-2;for(let s=0;s<r;s+=t){let a=0;for(let n=0;n<t;n++)(s+n>=r||e.get(s+n))&&(a|=1<<t-1-n);(a&i)===i?(n.appendBits(a&i,t),s--):(a&i)==0?(n.appendBits(1|a,t),s--):n.appendBits(a,t)}return n}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}nR.DEFAULT_EC_PERCENT=33,nR.DEFAULT_AZTEC_LAYERS=0,nR.MAX_NB_BITS=32,nR.MAX_NB_BITS_COMPACT=4,nR.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class nD{encode(e,t,n,r){return this.encodeWithHints(e,t,n,r,null)}encodeWithHints(e,t,n,r,i){let s=ng.ISO_8859_1,a=nR.DEFAULT_EC_PERCENT,o=nR.DEFAULT_AZTEC_LAYERS;return null!=i&&(i.has(nt.CHARACTER_SET)&&(s=np.forName(i.get(nt.CHARACTER_SET).toString())),i.has(nt.ERROR_CORRECTION)&&(a=L.parseInt(i.get(nt.ERROR_CORRECTION).toString())),i.has(nt.AZTEC_LAYERS)&&(o=L.parseInt(i.get(nt.AZTEC_LAYERS).toString()))),nD.encodeLayers(e,t,n,r,s,a,o)}static encodeLayers(e,t,n,r,i,s,a){if(t!==er.AZTEC)throw new N("Can only encode AZTEC, but got "+t);let o=nR.encode(H.getBytes(e,i),s,a);return nD.renderResult(o,n,r)}static renderResult(e,t,n){let r=e.getMatrix();if(null==r)throw new eh;let i=r.getWidth(),s=r.getHeight(),a=Math.max(t,i),o=Math.max(n,s),l=Math.min(a/i,o/s),u=(a-i*l)/2,c=(o-s*l)/2,h=new G(a,o);for(let e=0,t=c;e<s;e++,t+=l)for(let n=0,s=u;n<i;n++,s+=l)r.get(n,e)&&h.setRegion(s,t,l,l);return h}}e.AbstractExpandedDecoder=eJ,e.ArgumentException=T,e.ArithmeticException=el,e.AztecCode=nm,e.AztecCodeReader=eA,e.AztecCodeWriter=nD,e.AztecDecoder=ef,e.AztecDetector=eI,e.AztecDetectorResult=ew,e.AztecEncoder=nR,e.AztecHighLevelEncoder=nN,e.AztecPoint=eb,e.BarcodeFormat=er,e.Binarizer=O,e.BinaryBitmap=R,e.BitArray=B,e.BitMatrix=G,e.BitSource=td,e.BrowserAztecCodeReader=class extends et{constructor(e=500){super(new eA,e)}},e.BrowserBarcodeReader=class extends et{constructor(e=500,t){super(new ta(t),e,t)}},e.BrowserCodeReader=et,e.BrowserDatamatrixCodeReader=class extends et{constructor(e=500){super(new tm,e)}},e.BrowserMultiFormatReader=class extends et{constructor(e=null,t=500){let n=new ne;n.setHints(e),super(n,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}},e.BrowserPDF417Reader=class extends et{constructor(e=500){super(new t7,e)}},e.BrowserQRCodeReader=class extends et{constructor(e=500){super(new tx,e)}},e.BrowserQRCodeSvgWriter=nc,e.CharacterSetECI=V,e.ChecksumException=D,e.Code128Reader=eN,e.Code39Reader=eR,e.DataMatrixDecodedBitStreamParser=tf,e.DataMatrixReader=tm,e.DecodeHintType=F,e.DecoderResult=es,e.DefaultGridSampler=eS,e.DetectorResult=ey,e.EAN13Reader=eL,e.EncodeHintType=nt,e.Exception=A,e.FormatException=U,e.GenericGF=eu,e.GenericGFPoly=eo,e.GlobalHistogramBinarizer=q,e.GridSampler=ev,e.GridSamplerInstance=e_,e.HTMLCanvasElementLuminanceSource=Z,e.HybridBinarizer=X,e.ITFReader=eD,e.IllegalArgumentException=N,e.IllegalStateException=eh,e.InvertedLuminanceSource=K,e.LuminanceSource=$,e.MathUtils=ep,e.MultiFormatOneDReader=ta,e.MultiFormatReader=ne,e.MultiFormatWriter=class{encode(e,t,n,r,i){let s;if(t===er.QR_CODE)s=new nh;else throw new N("No encoder available for format "+t);return s.encode(e,t,n,r,i)}},e.NotFoundException=Y,e.OneDReader=eT,e.PDF417DecodedBitStreamParser=t8,e.PDF417DecoderErrorCorrection=tj,e.PDF417Reader=t7,e.PDF417ResultMetadata=tZ,e.PerspectiveTransform=eC,e.PlanarYUVLuminanceSource=nd,e.QRCodeByteMatrix=ni,e.QRCodeDataMask=tS,e.QRCodeDecodedBitStreamParser=tA,e.QRCodeDecoderErrorCorrectionLevel=ty,e.QRCodeDecoderFormatInformation=tw,e.QRCodeEncoder=nu,e.QRCodeEncoderQRCode=ns,e.QRCodeMaskUtil=nr,e.QRCodeMatrixUtil=no,e.QRCodeMode=tI,e.QRCodeReader=tx,e.QRCodeVersion=tC,e.QRCodeWriter=nh,e.RGBLuminanceSource=nf,e.RSS14Reader=ts,e.RSSExpandedReader=tr,e.ReaderException=t9,e.ReedSolomonDecoder=ed,e.ReedSolomonEncoder=nn,e.ReedSolomonException=ec,e.Result=en,e.ResultMetadataType=ei,e.ResultPoint=em,e.StringUtils=H,e.UnsupportedOperationException=z,e.VideoInputDevice=J,e.WhiteRectangleDetector=eE,e.WriterException=na,e.ZXingArrays=x,e.ZXingCharset=np,e.ZXingInteger=L,e.ZXingStandardCharsets=ng,e.ZXingStringBuilder=W,e.ZXingStringEncoding=j,e.ZXingSystem=M,e.createAbstractExpandedDecoder=te,Object.defineProperty(e,"__esModule",{value:!0})})(dw);var dE=function(){function e(e,t,n){if(this.formatMap=new Map([[W.QR_CODE,dw.BarcodeFormat.QR_CODE],[W.AZTEC,dw.BarcodeFormat.AZTEC],[W.CODABAR,dw.BarcodeFormat.CODABAR],[W.CODE_39,dw.BarcodeFormat.CODE_39],[W.CODE_93,dw.BarcodeFormat.CODE_93],[W.CODE_128,dw.BarcodeFormat.CODE_128],[W.DATA_MATRIX,dw.BarcodeFormat.DATA_MATRIX],[W.MAXICODE,dw.BarcodeFormat.MAXICODE],[W.ITF,dw.BarcodeFormat.ITF],[W.EAN_13,dw.BarcodeFormat.EAN_13],[W.EAN_8,dw.BarcodeFormat.EAN_8],[W.PDF_417,dw.BarcodeFormat.PDF_417],[W.RSS_14,dw.BarcodeFormat.RSS_14],[W.RSS_EXPANDED,dw.BarcodeFormat.RSS_EXPANDED],[W.UPC_A,dw.BarcodeFormat.UPC_A],[W.UPC_E,dw.BarcodeFormat.UPC_E],[W.UPC_EAN_EXTENSION,dw.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!dw)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=n;var r=this.createZXingFormats(e),i=new Map;i.set(dw.DecodeHintType.POSSIBLE_FORMATS,r),i.set(dw.DecodeHintType.TRY_HARDER,!1),this.hints=i}return e.prototype.decodeAsync=function(e){var t=this;return new Promise(function(n,r){try{n(t.decode(e))}catch(e){r(e)}})},e.prototype.decode=function(e){var t=new dw.MultiFormatReader(this.verbose,this.hints),n=new dw.HTMLCanvasElementLuminanceSource(e),r=new dw.BinaryBitmap(new dw.HybridBinarizer(n)),i=t.decode(r);return{text:i.text,format:du.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,r){e.set(t,n)}),e},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createZXingFormats=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];this.formatMap.has(r)?t.push(this.formatMap.get(r)):this.logger.logError("".concat(r," is not supported by")+"ZXingHtml5QrcodeShim")}return t},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),dv=function(e,t){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){var u=[o,l];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},dC=function(){function e(t,n,r){if(this.formatMap=new Map([[W.QR_CODE,"qr_code"],[W.AZTEC,"aztec"],[W.CODABAR,"codabar"],[W.CODE_39,"code_39"],[W.CODE_93,"code_93"],[W.CODE_128,"code_128"],[W.DATA_MATRIX,"data_matrix"],[W.ITF,"itf"],[W.EAN_13,"ean_13"],[W.EAN_8,"ean_8"],[W.PDF_417,"pdf417"],[W.UPC_A,"upc_a"],[W.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){return"BarcodeDetector"in window&&(new BarcodeDetector({formats:["qr_code"]}),!0)},e.prototype.decodeAsync=function(e){var t,n,r,i;return t=this,n=void 0,r=void 0,i=function(){var t,n;return dv(this,function(r){switch(r.label){case 0:return[4,this.detector.detect(e)];case 1:if(!(t=r.sent())||0===t.length)throw"No barcode or QR code detected.";return[2,{text:(n=this.selectLargestBarcode(t)).rawValue,format:du.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})},new(r||(r=Promise))(function(e,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(t){var n;t.done?e(t.value):((n=t.value)instanceof r?n:new r(function(e){e(n)})).then(a,o)}l((i=i.apply(t,n||[])).next())})},e.prototype.selectLargestBarcode=function(e){for(var t=null,n=0,r=0;r<e.length;r++){var i=e[r],s=i.boundingBox.width*i.boundingBox.height;s>n&&(n=s,t=i)}if(!t)throw"No largest barcode found";return t},e.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];this.formatMap.has(r)?t.push(this.formatMap.get(r)):this.logger.warn("".concat(r," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,r){e.set(t,n)}),e},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),dS=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})},d_=function(e,t){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){var u=[o,l];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},db=function(){function e(e,t,n,r){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,t&&dC.isSupported()?(this.primaryDecoder=new dC(e,n,r),this.secondaryDecoder=new dE(e,n,r)):this.primaryDecoder=new dE(e,n,r)}return e.prototype.decodeAsync=function(e){return dS(this,void 0,void 0,function(){var t;return d_(this,function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(e){return dS(this,void 0,void 0,function(){var t,n;return d_(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,r.sent()];case 3:if(n=r.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,n=this.executionResults;t<n.length;t++)e+=n[t];var r=e/this.executionResults.length;console.log("".concat(r," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),dI=(y=function(e,t){return(y=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}y(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),dA=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})},dT=function(e,t){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){var u=[o,l];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},dN=function(){function e(e,t){this.name=e,this.track=t}return e.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},e.prototype.apply=function(e){var t={};return t[this.name]=e,this.track.applyConstraints({advanced:[t]})},e.prototype.value=function(){var e=this.track.getSettings();return this.name in e?e[this.name]:null},e}(),dR=function(e){function t(t){return e.call(this,"zoom",t)||this}return dI(t,e),t}(function(e){function t(t,n){return e.call(this,t,n)||this}return dI(t,e),t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(e){var t={};return t[this.name]=e,this.track.applyConstraints({advanced:[t]})},t.prototype.getCapabilities=function(){this.failIfNotSupported();var e=this.track.getCapabilities()[this.name];return{min:e.min,max:e.max,step:e.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw Error("".concat(this.name," capability not supported"))},t}(dN)),dD=function(e){function t(t){return e.call(this,"torch",t)||this}return dI(t,e),t}(dN),dO=function(){function e(e){this.track=e}return e.prototype.zoomFeature=function(){return new dR(this.track)},e.prototype.torchFeature=function(){return new dD(this.track)},e}(),dM=function(){function e(e,t,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return e.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},e.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var n=e.surface.clientWidth,r=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,r),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,i){return dA(this,void 0,void 0,function(){var s,a;return dT(this,function(o){switch(o.label){case 0:if(s=new e(t,n,i),!r.aspectRatio)return[3,2];return a={aspectRatio:r.aspectRatio},[4,s.getFirstTrackOrFail().applyConstraints(a)];case 1:o.sent(),o.label=2;case 2:return s.setupSurface(),[2,s]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(e){this.failIfClosed();var t=this,n=function(){setTimeout(e,200),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(e){return dA(this,void 0,void 0,function(){return dT(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,n){var r=e.mediaStream.getVideoTracks().length,i=0;e.mediaStream.getVideoTracks().forEach(function(n){e.mediaStream.removeTrack(n),n.stop(),++i>=r&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},e.prototype.getCapabilities=function(){return new dO(this.getFirstTrackOrFail())},e}(),dk=function(){function e(e){this.mediaStream=e}return e.prototype.render=function(e,t,n){return dA(this,void 0,void 0,function(){return dT(this,function(r){return[2,dM.create(e,this.mediaStream,t,n)]})})},e.create=function(t){return dA(this,void 0,void 0,function(){var n;return dT(this,function(r){switch(r.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return[2,new e(r.sent())]}})})},e}(),dP=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})},dx=function(e,t){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){var u=[o,l];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},dL=function(){function e(){}return e.failIfNotSupported=function(){return dP(this,void 0,void 0,function(){return dx(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(e){return dP(this,void 0,void 0,function(){return dx(this,function(t){return[2,dk.create(e)]})})},e}(),dB=function(e,t){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){var u=[o,l];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},dF=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=dp.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=dp.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var e=location.host.split(":")[0];return"127.0.0.1"===e||"localhost"===e},e.getCamerasFromMediaDevices=function(){var e,t,n,r;return e=this,t=void 0,n=void 0,r=function(){var e,t,n,r,i,s,a;return dB(this,function(o){switch(o.label){case 0:return e=function(e){for(var t=e.getVideoTracks(),n=0;n<t.length;n++){var r=t[n];r.enabled=!1,r.stop(),e.removeTrack(r)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=o.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=0,n=o.sent(),r=[],s=n;i<s.length;i++)"videoinput"===(a=s[i]).kind&&r.push({id:a.deviceId,label:a.label});return e(t),[2,r]}})},new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){MediaStreamTrack.getSources(function(t){for(var n=[],r=0;r<t.length;r++){var i=t[r];"video"===i.kind&&n.push({id:i.id,label:i.label})}e(n)})})},e}();(w=X||(X={}))[w.UNKNOWN=0]="UNKNOWN",w[w.NOT_STARTED=1]="NOT_STARTED",w[w.SCANNING=2]="SCANNING",w[w.PAUSED=3]="PAUSED";var dU=function(){function e(){this.state=X.NOT_STARTED,this.onGoingTransactionNewState=X.UNKNOWN}return e.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},e.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===X.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=X.UNKNOWN,this.directTransition(e)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===X.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=X.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==X.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(e){switch(this.state){case X.UNKNOWN:throw"Transition from unknown is not allowed";case X.NOT_STARTED:this.failIfNewStateIs(e,[X.PAUSED]);case X.SCANNING:case X.PAUSED:}},e.prototype.failIfNewStateIs=function(e,t){for(var n=0;n<t.length;n++)if(e===t[n])throw"Cannot transition from ".concat(this.state," to ").concat(e)},e}(),dV=function(){function e(e){this.stateManager=e}return e.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},e.prototype.directTransition=function(e){this.stateManager.directTransition(e)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===X.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==X.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===X.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===X.PAUSED},e}(),dz=function(){function e(){}return e.create=function(){return new dV(new dU)},e}(),dj=(E=function(e,t){return(E=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}E(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),dH=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return dj(t,e),t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(dl),dW=function(){function e(e,t){this.logger=t,this.fps=dH.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=!0===e.disableFlip,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=dH.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?dy.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!df(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),dG=function(){function e(e,t){var n;if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1,"boolean"==typeof t?this.verbose=!0===t:t&&(n=t,this.verbose=!0===n.verbose,n.experimentalFeatures),this.logger=new dd(this.verbose),this.qrcode=new db(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=dz.create()}return e.prototype.start=function(e,t,n,r){var i,s=this;if(!e)throw"cameraIdOrConfig is required";if(!n||"function"!=typeof n)throw"qrCodeSuccessCallback is required and should be a function.";i=r||(this.verbose?this.logger.log:function(){});var a=dW.create(t,this.logger);this.clearElement();var o=!1;a.videoConstraints&&(a.isMediaStreamConstraintsValid()?o=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var l=o,u=document.getElementById(this.elementId);u.clientWidth?u.clientWidth:dH.DEFAULT_WIDTH,u.style.position="relative",this.shouldScan=!0,this.element=u;var c=this,h=this.stateManagerProxy.startTransition(X.SCANNING);return new Promise(function(t,r){var o=l?a.videoConstraints:c.createVideoConstraints(e);if(!o){h.cancel(),r("videoConstraints should be defined");return}var u={};(!l||a.aspectRatio)&&(u.aspectRatio=a.aspectRatio);var d={onRenderSurfaceReady:function(e,t){c.setupUi(e,t,a),c.isScanning=!0,c.foreverScan(a,n,i)}};dL.failIfNotSupported().then(function(e){e.create(o).then(function(e){return e.render(s.element,u,d).then(function(e){c.renderedCamera=e,h.execute(),t(null)}).catch(function(e){h.cancel(),r(e)})}).catch(function(e){h.cancel(),r(dp.errorGettingUserMedia(e))})}).catch(function(e){h.cancel(),r(dp.cameraStreamingNotSupported())})})},e.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(X.PAUSED),this.showPausedState(),(df(e)||!0!==e)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(X.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused())return void t();this.renderedCamera.resume(function(){t()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(X.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(e.element){var t=document.getElementById(dH.SHADED_REGION_ELEMENT_ID);t&&e.element.removeChild(t)}},r=this;return this.renderedCamera.close().then(function(){return r.renderedCamera=null,r.element&&(r.element.removeChild(r.canvasElement),r.canvasElement=null),n(),r.qrRegion&&(r.qrRegion=null),r.context&&(r.context=null),t.execute(),r.hidePausedState(),r.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(e){return e.decodedText})},e.prototype.scanFileV2=function(e,t){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(df(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(r,i){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var s=new Image;s.onload=function(){var e=s.width,a=s.height,o=document.getElementById(n.elementId),l=o.clientWidth?o.clientWidth:dH.DEFAULT_WIDTH,u=Math.max(o.clientHeight?o.clientHeight:a,dH.FILE_SCAN_MIN_HEIGHT),c=n.computeCanvasDrawConfig(e,a,l,u);if(t){var h=n.createCanvasElement(l,u,"qr-canvas-visible");h.style.display="inline-block",o.appendChild(h);var d=h.getContext("2d");if(!d)throw"Unable to get 2d context from canvas";d.canvas.width=l,d.canvas.height=u,d.drawImage(s,0,0,e,a,c.x,c.y,c.width,c.height)}var f=dH.FILE_SCAN_HIDDEN_CANVAS_PADDING,p=Math.max(s.width,c.width),g=Math.max(s.height,c.height),m=p+2*f,y=g+2*f,w=n.createCanvasElement(m,y);o.appendChild(w);var E=w.getContext("2d");if(!E)throw"Unable to get 2d context from canvas";E.canvas.width=m,E.canvas.height=y,E.drawImage(s,0,0,e,a,f,f,p,g);try{n.qrcode.decodeRobustlyAsync(w).then(function(e){r(dc.createFromQrcodeResult(e))}).catch(i)}catch(e){i("QR code parse error, error = ".concat(e))}},s.onerror=i,s.onabort=i,s.onstalled=i,s.onsuspend=i,s.src=URL.createObjectURL(e)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return dF.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(e){if(e){if(!dy.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},e.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(e){var t=[W.QR_CODE,W.AZTEC,W.CODABAR,W.CODE_39,W.CODE_93,W.CODE_128,W.DATA_MATRIX,W.MAXICODE,W.ITF,W.EAN_13,W.EAN_8,W.PDF_417,W.RSS_14,W.RSS_EXPANDED,W.UPC_A,W.UPC_E,W.UPC_EAN_EXTENSION];if(!e||"boolean"==typeof e||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===e.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],r=0,i=e.formatsToSupport;r<i.length;r++){var s=i[r];Object.values(W).includes(s)?n.push(s):this.logger.warn("Invalid format: ".concat(s," passed in config, ignoring."))}if(0===n.length)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(e){if(df(e))return!0;if(!df(e.useBarCodeDetectorIfSupported))return!1!==e.useBarCodeDetectorIfSupported;if(df(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return!!df(t.useBarCodeDetectorIfSupported)||!1!==t.useBarCodeDetectorIfSupported},e.prototype.validateQrboxSize=function(e,t,n){var r,i=n.qrbox;this.validateQrboxConfig(i);var s=this.toQrdimensions(e,t,i),a=function(e){if(e<dH.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(dH.MIN_QR_BOX_SIZE,"px.")};a(s.width),a(s.height),(r=s.width)>e&&(this.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),r=e),s.width=r},e.prototype.validateQrboxConfig=function(e){if("number"!=typeof e&&"function"!=typeof e&&(void 0===e.width||void 0===e.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(e,t,n){if("number"==typeof n)return{width:n,height:n};if("function"==typeof n)try{return n(e,t)}catch(e){throw Error("qrbox config was passed as a function but it failed with unknown error"+e)}return n},e.prototype.setupUi=function(e,t,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,n);var r=df(n.qrbox)?{width:e,height:t}:n.qrbox;this.validateQrboxConfig(r);var i=this.toQrdimensions(e,t,r);i.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var s=n.isShadedBoxEnabled()&&i.height<=t,a=s?this.getShadedRegionBounds(e,t,i):{x:0,y:0,width:e,height:t},o=this.createCanvasElement(a.width,a.height),l=o.getContext("2d",{willReadFrequently:!0});l.canvas.width=a.width,l.canvas.height=a.height,this.element.append(o),s&&this.possiblyInsertShadingElement(this.element,e,t,i),this.createScannerPausedUiElement(this.element),this.qrRegion=a,this.context=l,this.canvasElement=o},e.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=dp.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},e.prototype.scanContext=function(e,t){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(t){return e(t.text,dc.createFromQrcodeResult(t)),n.possiblyUpdateShaders(!0),!0}).catch(function(e){n.possiblyUpdateShaders(!1);var r=dp.codeParseError(e);return t(r,dh.createFrom(r)),!1})},e.prototype.foreverScan=function(e,t,n){var r=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),s=i.videoWidth/i.clientWidth,a=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var o=this.qrRegion.width*s,l=this.qrRegion.height*a,u=this.qrRegion.x*s,c=this.qrRegion.y*a;this.context.drawImage(i,u,c,o,l,0,0,this.qrRegion.width,this.qrRegion.height);var h=function(){r.foreverScanTimeout=setTimeout(function(){r.foreverScan(e,t,n)},r.getTimeoutFps(e.fps))};this.scanContext(t,n).then(function(i){i||!0===e.disableFlip?h():(r.context.translate(r.context.canvas.width,0),r.context.scale(-1,1),r.scanContext(t,n).finally(function(){h()}))}).catch(function(e){r.logger.logError("Error happend while scanning context",e),h()})}},e.prototype.createVideoConstraints=function(e){if("string"==typeof e)return{deviceId:{exact:e}};if("object"==typeof e){var t="facingMode",n="deviceId",r={user:!0,environment:!0},i="exact",s=function(e){if(e in r)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(e,"'")},a=Object.keys(e);if(1!==a.length)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(a.length," keys");var o=Object.keys(e)[0];if(o!==t&&o!==n)throw"Only '".concat(t,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(o===t){var l=e.facingMode;if("string"==typeof l){if(s(l))return{facingMode:l}}else if("object"==typeof l)if(i in l){if(s(l["".concat(i)]))return{facingMode:{exact:l["".concat(i)]}}}else throw"'facingMode' should be string or object with"+" ".concat(i," as key.");else{var u=typeof l;throw"Invalid type of 'facingMode' = ".concat(u)}}else{var c=e.deviceId;if("string"==typeof c)return{deviceId:c};if("object"==typeof c)if(i in c)return{deviceId:{exact:c["".concat(i)]}};else throw"'deviceId' should be string or object with"+" ".concat(i," as key.");var h=typeof c;throw"Invalid type of 'deviceId' = ".concat(h)}}var d=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(d)},e.prototype.computeCanvasDrawConfig=function(e,t,n,r){if(e<=n&&t<=r)return{x:(n-e)/2,y:(r-t)/2,width:e,height:t};var i=e,s=t;return e>n&&(t=n/e*t,e=n),t>r&&(e=r/t*e,t=r),this.logger.log("Image downsampled from "+"".concat(i,"X").concat(s)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,n,r)},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},e.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?dH.BORDER_SHADER_MATCH_COLOR:dH.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(e,t,n){var r=document.createElement("canvas");return r.style.width="".concat(e,"px"),r.style.height="".concat(t,"px"),r.style.display="none",r.id=df(n)?"qr-canvas":n,r},e.prototype.getShadedRegionBounds=function(e,t,n){if(n.width>e||n.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(t-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(e,t,n,r){if(!(t-r.width<1)&&!(n-r.height<1)){var i=document.createElement("div");i.style.position="absolute";var s=(t-r.width)/2,a=(n-r.height)/2;i.style.borderLeft="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(dH.SHADED_REGION_ELEMENT_ID),t-r.width<11||n-r.height<11?this.hasBorderShaders=!1:(this.insertShaderBorders(i,40,5,-5,null,0,!0),this.insertShaderBorders(i,40,5,-5,null,0,!1),this.insertShaderBorders(i,40,5,null,-5,0,!0),this.insertShaderBorders(i,40,5,null,-5,0,!1),this.insertShaderBorders(i,5,45,-5,null,-5,!0),this.insertShaderBorders(i,5,45,null,-5,-5,!0),this.insertShaderBorders(i,5,45,-5,null,-5,!1),this.insertShaderBorders(i,5,45,null,-5,-5,!1),this.hasBorderShaders=!0),e.append(i)}},e.prototype.insertShaderBorders=function(e,t,n,r,i,s,a){var o=document.createElement("div");o.style.position="absolute",o.style.backgroundColor=dH.BORDER_SHADER_DEFAULT_COLOR,o.style.width="".concat(t,"px"),o.style.height="".concat(n,"px"),null!==r&&(o.style.top="".concat(r,"px")),null!==i&&(o.style.bottom="".concat(i,"px")),a?o.style.left="".concat(s,"px"):o.style.right="".concat(s,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(o),e.appendChild(o)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(e){return 1e3/e},e}(),dY="data:image/svg+xml;base64,",dq=dY+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",dX=dY+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",d$=dY+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",dQ=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),dK=function(){function e(){this.data=dQ.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},e.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=dQ.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),dZ=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=dm.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var n=document.createElement("br"),r=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(r);var i=document.createElement("a");i.innerText=dm.reportIssues(),i.href="https://github.com/mebjas/html5-qrcode/issues",i.target="new",i.style.color="white",this.infoDiv.appendChild(i),e.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),dJ=function(){function e(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=d$,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(e){return t.onHoverIn()},this.infoIcon.onmouseout=function(e){return t.onHoverOut()},this.infoIcon.onclick=function(e){return t.onClick()},e.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=d$,this.infoIcon.style.opacity="0.6")},e}(),d1=function(){function e(){var e=this;this.infoDiv=new dZ,this.infoIcon=new dJ(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return e.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},e}(),d0=function(e,t){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){var u=[o,l];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},d2=function(){function e(){}return e.hasPermissions=function(){var e,t,n,r;return e=this,t=void 0,n=void 0,r=function(){var e,t,n;return d0(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=0,t=r.sent();e<t.length;e++)if("videoinput"===(n=t[e]).kind&&n.label)return[2,!0];return[2,!1]}})},new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})},e}(),d3=function(){function e(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var r=n[t];if(e.isCameraScanType(r))return!0}return!1},e.isCameraScanType=function(e){return e===Y.SCAN_TYPE_CAMERA},e.isFileScanType=function(e){return e===Y.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(e){if(!e||0===e.length)return dl.DEFAULT_SUPPORTED_SCAN_TYPE;var t=dl.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var n=0;n<e.length;n++){var r=e[n];if(!dl.DEFAULT_SUPPORTED_SCAN_TYPE.includes(r))throw"Unsupported scan type ".concat(r)}return e},e}(),d4=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),d6=function(){function e(){}return e.createElement=function(e,t){var n=document.createElement(e);return n.id=t,n.classList.add(d4.ALL_ELEMENT_CLASS),"button"===e&&n.setAttribute("type","button"),n},e}(),d8=function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function a(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((r=r.apply(e,t||[])).next())})},d5=function(e,t){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){var u=[o,l];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){a=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(6===u[0]&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},d7=function(){function e(e,t,n){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=n}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return d8(this,void 0,void 0,function(){var e,t;return d5(this,function(n){switch(n.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=n.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?dg.torchOffButton():dg.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},e.prototype.propagateFailure=function(e,t){var n=e?dg.torchOnFailedMessage():dg.torchOffFailedMessage();t&&(n+="; Error = "+t),this.onTorchActionFailureCallback(n)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),d9=function(){function e(e,t){this.onTorchActionFailureCallback=t,this.torchButton=d6.createElement("button",d4.TORCH_BUTTON_ID),this.torchController=new d7(e,this,t)}return e.prototype.render=function(e,t){var n=this;this.torchButton.innerText=dg.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var r=this;this.torchButton.addEventListener("click",function(e){return d8(n,void 0,void 0,function(){return d5(this,function(e){switch(e.label){case 0:return[4,r.torchController.flipState()];case 1:return e.sent(),r.torchController.isTorchEnabled()?(r.torchButton.classList.remove(d4.TORCH_BUTTON_CLASS_TORCH_OFF),r.torchButton.classList.add(d4.TORCH_BUTTON_CLASS_TORCH_ON)):(r.torchButton.classList.remove(d4.TORCH_BUTTON_CLASS_TORCH_ON),r.torchButton.classList.add(d4.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(e){this.torchController=new d7(e,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(e){this.torchButton.innerText=e},e.prototype.reset=function(){this.torchButton.innerText=dg.torchOnButton(),this.torchController.reset()},e.create=function(t,n,r,i){var s=new e(n,i);return s.render(t,r),s},e}(),fe=function(){function e(e,t,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var r=document.createElement("label");r.setAttribute("for",this.getFileScanInputId()),r.style.display="inline-block",this.fileBasedScanRegion.appendChild(r),this.fileSelectionButton=d6.createElement("button",d4.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(e){r.click()}),r.append(this.fileSelectionButton),this.fileScanInput=d6.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",r.appendChild(this.fileScanInput);var i=this;this.fileScanInput.addEventListener("change",function(e){if(null!=e&&null!=e.target){var t=e.target;if(!t.files||0!==t.files.length){var r=t.files[0],s=r.name;i.setImageNameToButton(s),n(r)}}});var s=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(s),this.fileBasedScanRegion.addEventListener("dragenter",function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(e){e.stopPropagation(),e.preventDefault(),i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder();var t=e.dataTransfer;if(t){var r=t.files;if(!r||0===r.length)return;for(var a=!1,o=0;o<r.length;++o){var l=r.item(o);if(l){var u=/image.*/;if(l.type.match(u)){a=!0;var c=l.name;i.setImageNameToButton(c),n(l),s.innerText=dg.dragAndDropMessage();break}}}a||(s.innerText=dg.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=dg.dragAndDropMessage(),e.style.fontWeight="400",e},e.prototype.setImageNameToButton=function(e){if(e.length>20){var t=e.substring(0,8),n=e.length,r=e.substring(n-8,n);e="".concat(t,"....").concat(r)}var i=dg.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=i},e.prototype.setInitialValueToButton=function(){var e=dg.fileSelectionChooseImage()+" - "+dg.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,r){return new e(t,n,r)},e}(),ft=function(){function e(e){this.selectElement=d6.createElement("select",d4.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return e.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var n=this.cameras.length;if(0===n)throw Error("No cameras found");if(1===n)t.style.display="none";else{var r=dg.selectCamera();t.innerText="".concat(r," (").concat(this.cameras.length,")  ")}for(var i=1,s=0,a=this.cameras;s<a.length;s++){var o=a[s],l=o.id,u=null==o.label?l:o.label;u&&""!==u||(u=[dg.anonymousCameraPrefix(),i++].join(" "));var c=document.createElement("option");c.value=l,c.innerText=u,this.options.push(c),this.selectElement.appendChild(c)}t.appendChild(this.selectElement),e.appendChild(t)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return!0===this.selectElement.disabled},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(e){for(var t=0,n=this.options;t<n.length;t++)if(n[t].value===e)return!0;return!1},e.prototype.setValue=function(e){if(!this.hasValue(e))throw Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},e.prototype.hasSingleItem=function(){return 1===this.cameras.length},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var r=new e(n);return r.render(t),r},e}(),fn=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=d6.createElement("input",d4.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=dg.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.rangeText.style.marginRight="10px";var r=this;this.rangeInput.addEventListener("input",function(){return r.onValueChange()}),this.rangeInput.addEventListener("change",function(){return r.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var e=dg.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(e,t,n,r){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=r.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var r=new e;return r.render(t,n),r},e}();(v=$||($={}))[v.STATUS_DEFAULT=0]="STATUS_DEFAULT",v[v.STATUS_SUCCESS=1]="STATUS_SUCCESS",v[v.STATUS_WARNING=2]="STATUS_WARNING",v[v.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION";var fr=function(){function e(e,t,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=!0===n,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new d3(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new dd(this.verbose),this.persistedDataManager=new dK,!0!==t.rememberLastUsedCamera&&this.persistedDataManager.reset()}return e.prototype.render=function(e,t){var n,r,i=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(t,n){if(e)e(t,n);else{if(i.lastMatchFound===t)return;i.lastMatchFound=t,i.setHeaderMessage(dg.lastMatch(t),$.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(e,n){t&&t(e,n)};var s=document.getElementById(this.elementId);if(!s)throw"HTML Element with id=".concat(this.elementId," not found");s.innerHTML="",this.createBasicLayout(s),this.html5Qrcode=new dG(this.getScanRegionId(),(n=this.config,r=this.verbose,{formatsToSupport:n.formatsToSupport,useBarCodeDetectorIfSupported:n.useBarCodeDetectorIfSupported,experimentalFeatures:n.experimentalFeatures,verbose:r}))},e.prototype.pause=function(e){(df(e)||!0!==e)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var e=this,t=function(){var t=document.getElementById(e.elementId);t&&(t.innerHTML="",e.resetBasicLayout(t))};return this.html5Qrcode?new Promise(function(n,r){if(!e.html5Qrcode)return void n();e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(r){if(!e.html5Qrcode)return void n();e.html5Qrcode.clear(),t(),n()}).catch(function(t){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",t),r(t)}):(e.html5Qrcode.clear(),t(),n())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(e){return e?(e.fps||(e.fps=dl.SCAN_DEFAULT_FPS),!dl.DEFAULT_REMEMBER_LAST_CAMERA_USED!==e.rememberLastUsedCamera&&(e.rememberLastUsedCamera=dl.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=dl.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:dl.SCAN_DEFAULT_FPS,rememberLastUsedCamera:dl.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:dl.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div");t.id=this.getScanRegionId(),t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),d3.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var n=document.createElement("div");n.id=this.getDashboardId(),n.style.width="100%",e.appendChild(n),this.setupInitialDashboard(n)},e.prototype.resetBasicLayout=function(e){e.style.border="none"},e.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t),new d1().renderInto(t);var n=document.createElement("div");n.id=this.getHeaderMessageContainerId(),n.style.display="none",n.style.textAlign="center",n.style.fontSize="14px",n.style.padding="2px 10px",n.style.margin="4px",n.style.borderTop="1px solid #f6f6f6",t.appendChild(n)},e.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},e.prototype.createCameraListUi=function(e,t,n){var r=this;r.showHideScanTypeSwapLink(!1),r.setHeaderMessage(dg.cameraPermissionRequesting());var i=function(){n||r.createPermissionButton(e,t)};dG.getCameras().then(function(n){r.persistedDataManager.setHasPermission(!0),r.showHideScanTypeSwapLink(!0),r.resetHeaderMessage(),n&&n.length>0?(e.removeChild(t),r.renderCameraSelection(n)):(r.setHeaderMessage(dg.noCameraFound(),$.STATUS_WARNING),i())}).catch(function(e){r.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:i(),r.setHeaderMessage(e,$.STATUS_WARNING),r.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(e,t){var n=this,r=d6.createElement("button",this.getCameraPermissionButtonId());r.innerText=dg.cameraPermissionTitle(),r.addEventListener("click",function(){r.disabled=!0,n.createCameraListUi(e,t,r)}),t.appendChild(r)},e.prototype.createPermissionsUi=function(e,t){var n=this;if(d3.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions())return void d2.hasPermissions().then(function(r){r?n.createCameraListUi(e,t):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t))}).catch(function(r){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t)});this.createPermissionButton(e,t)},e.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=d3.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(n);var r=document.createElement("div");r.style.textAlign="center",n.appendChild(r),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,r),this.renderFileScanUi(t)},e.prototype.renderFileScanUi=function(e){var t=d3.isFileScanType(this.currentScanType),n=this;this.fileSelectionUi=fe.create(e,t,function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";d3.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(dg.loadingImage()),n.html5Qrcode.scanFileV2(e,!0).then(function(e){n.resetHeaderMessage(),n.qrCodeSuccessCallback(e.decodedText,e)}).catch(function(e){n.setHeaderMessage(e,$.STATUS_WARNING),n.qrCodeErrorCallback(e,dh.createFrom(e))}))})},e.prototype.renderCameraSelection=function(e){var t,n=this,r=this,i=document.getElementById(this.getDashboardSectionCameraScanRegionId());i.style.textAlign="center";var s=fn.create(i,!1),a=function(e){var t=e.zoomFeature();if(t.isSupported()){s.setOnCameraZoomValueChangeCallback(function(e){t.apply(e)});var r,i,a,o=1;n.config.defaultZoomValueIfSupported&&(o=n.config.defaultZoomValueIfSupported),r=o,i=t.min(),o=r>(a=t.max())?a:r<i?i:r,s.setValues(t.min(),t.max(),o,t.step()),s.show()}},o=ft.create(i,e),l=document.createElement("span"),u=d6.createElement("button",d4.CAMERA_START_BUTTON_ID);u.innerText=dg.scanButtonStartScanningText(),l.appendChild(u);var c=d6.createElement("button",d4.CAMERA_STOP_BUTTON_ID);c.innerText=dg.scanButtonStopScanningText(),c.style.display="none",c.disabled=!0,l.appendChild(c);var h=function(e){if(!e.torchFeature().isSupported()){t&&t.hide();return}t?t.updateTorchCapability(e.torchFeature()):t=d9.create(l,e.torchFeature(),{display:"none",marginLeft:"5px"},function(e){r.setHeaderMessage(e,$.STATUS_WARNING)}),t.show()};i.appendChild(l);var d=function(e){e||(u.style.display="none"),u.innerText=dg.scanButtonStartScanningText(),u.style.opacity="1",u.disabled=!1,e&&(u.style.display="inline-block")};if(u.addEventListener("click",function(e){u.innerText=dg.scanButtonScanningStarting(),o.disable(),u.disabled=!0,u.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var t,i=o.getValue();r.persistedDataManager.setLastUsedCameraId(i),r.html5Qrcode.start(i,{fps:(t=r.config).fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints},r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(e){c.disabled=!1,c.style.display="inline-block",d(!1);var t=r.html5Qrcode.getRunningTrackCameraCapabilities();!0===n.config.showTorchButtonIfSupported&&h(t),!0===n.config.showZoomSliderIfSupported&&a(t)}).catch(function(e){r.showHideScanTypeSwapLink(!0),o.enable(),d(!0),r.setHeaderMessage(e,$.STATUS_WARNING)})}),o.hasSingleItem()&&u.click(),c.addEventListener("click",function(e){if(!r.html5Qrcode)throw"html5Qrcode not defined";c.disabled=!0,r.html5Qrcode.stop().then(function(e){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),o.enable(),u.disabled=!1,c.style.display="none",u.style.display="inline-block",t&&(t.reset(),t.hide()),s.removeOnCameraZoomValueChangeCallback(),s.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(e){c.disabled=!1,r.setHeaderMessage(e,$.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var f=r.persistedDataManager.getLastUsedCameraId();o.hasValue(f)?(o.setValue(f),u.click()):r.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var e=this,t=dg.textIfCameraScanSelected(),n=dg.textIfFileScanSelected(),r=document.getElementById(this.getDashboardSectionId()),i=document.createElement("div");i.style.textAlign="center";var s=d6.createElement("span",this.getDashboardSectionSwapLinkId());s.style.textDecoration="underline",s.style.cursor="pointer",s.innerText=d3.isCameraScanType(this.currentScanType)?t:n,s.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,d3.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),s.innerText=n,e.currentScanType=Y.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),s.innerText=t,e.currentScanType=Y.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),i.appendChild(s),r.appendChild(i)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;if(this.persistedDataManager.hasCameraPermissions())return void d2.hasPermissions().then(function(n){if(n){var r=document.getElementById(t.getCameraPermissionButtonId());if(!r)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";r.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(e){t.persistedDataManager.setHasPermission(!1)})},e.prototype.resetHeaderMessage=function(){document.getElementById(this.getHeaderMessageContainerId()).style.display="none"},e.prototype.setHeaderMessage=function(e,t){t||(t=$.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=e,n.style.display="block",t){case $.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case $.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case $.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)"}},e.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(!0!==e&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){t.innerHTML="<br>",t.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=dq,this.cameraScanImage.alt=dg.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage){t.innerHTML="<br>",t.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=dX,this.fileScanImage.alt=dg.fileScanAltText()},e.prototype.clearScanRegion=function(){document.getElementById(this.getScanRegionId()).innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return d4.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return d4.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();function fi(){let{addToCart:e}=(0,en.useContext)(e0),t=(0,en.useRef)(null),n=(0,en.useRef)(!1);return(0,en.useEffect)(()=>{let r=new fr("reader",{fps:10,qrbox:{width:300,height:100},rememberLastUsedCamera:!0,supportedScanTypes:[Y.SCAN_TYPE_CAMERA]}),i=async t=>{if(n.current)return;n.current=!0;let r=t.trim();console.log("Scanned barcode:",r);try{let t=hm(h7,"products",r),n=await h3(t);if(n.exists()){let t=n.data();e(t.name,Number(t.price)),await function(e,t){let n=hl(e.firestore,hv),r=hm(e),i=hZ(e.converter,t);return h6(n,[hk(hM(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,o9.exists(!1))]).then(()=>r)}(hg(h7,"scans"),{productId:r,productName:t.name,price:Number(t.price),timestamp:ao.now(),userId:h5.currentUser?.uid||"guest"}),alert(`\u{2705} Product added: ${t.name} \u{2013} \u{20B9}${t.price}`)}else alert(`\u{274C} Product not found in database for: ${r}`)}catch(e){alert("❌ Error scanning the product."),console.error(e)}setTimeout(()=>{n.current=!1},1500)};return r.render(i,e=>{console.warn("Scanning error:",e)}),t.current=r,()=>{r.clear().catch(e=>console.error("Failed to clear scanner",e))}},[e]),(0,et.jsxs)("div",{className:"home",children:[(0,et.jsx)("h2",{children:"\uD83D\uDCF7 Scan Your Product"}),(0,et.jsx)("div",{id:"reader",style:{width:"100%"}})]})}function fs(){let[e,t]=(0,en.useState)([]);return(0,en.useEffect)(()=>{(async()=>{try{let e=function(e,t,...n){let r=[];for(let i of(t instanceof hW&&r.push(t),function(e){let t=e.filter(e=>e instanceof hq).length,n=e.filter(e=>e instanceof hY).length;if(t>1||t>0&&n>0)throw new s0(s1.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r=r.concat(n)),r))e=i._apply(e);return e}(hg(h7,"scans"),function(e,t,n){let r=hH("where",e);return hY._create(r,"==",n)}("userId",0,h5.currentUser.uid)),n=(await function(e){e=hl(e,hd);let t=hl(e.firestore,hv),n=hC(t),r=new h4(t);return function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new s0(s1.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query),(function(e,t,n={}){let r=new s2;return e.asyncQueue.enqueueAndForget(async()=>(function(e,t,n,r,i){let s=new c4({next:n=>{s.xu(),t.enqueueAndForget(()=>cC(e,a)),n.fromCache&&"server"===r.source?i.reject(new s0(s1.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new cI(n,s,{includeMetadataChanges:!0,Qa:!0});return cv(e,a)})(await ht(e),e.asyncQueue,t,n,r)),r.promise})(n,e._query).then(n=>new h2(t,r,e,n))}(e)).docs.map(e=>e.data());t(n)}catch(e){console.error("❌ Error fetching cart items:",e)}})()},[]),(0,et.jsxs)("div",{className:"home",children:[(0,et.jsx)("h1",{className:"title",children:"\uD83D\uDED2 Your Smart Cart"}),0===e.length?(0,et.jsx)("p",{children:"No items scanned yet."}):(0,et.jsx)("ul",{className:"cart-list",children:e.map((e,t)=>(0,et.jsxs)("li",{className:"cart-item",children:[(0,et.jsx)("strong",{children:e.productName})," - ₹",e.price,(0,et.jsx)("br",{}),(0,et.jsxs)("small",{children:["\uD83D\uDD52 ",new Date(e.timestamp?.seconds*1e3).toLocaleString()]})]},t))})]})}var en=(J("acw62"),J("acw62"));function fa(){let{cartItems:e,clearCart:t}=(0,en.useContext)(e0),n=e.reduce((e,t)=>e+(t.price||0)*(t.quantity||1),0);return(0,et.jsxs)("div",{className:"home",children:[(0,et.jsx)("h1",{className:"title",children:"\uD83D\uDCB3 Payment"}),(0,et.jsxs)("p",{children:["Total Items: ",e.length]}),(0,et.jsxs)("p",{children:["Total Amount: ₹",n]}),(0,et.jsx)("button",{className:"btn",onClick:()=>{if(0===e.length)return void alert("Cart is empty. Add items before paying.");let r=`upi://pay?pa=byteblaze@upi&pn=ByteBlaze&am=${n}&cu=INR&tn=CartIQ+Smart+Checkout`;window.location.href=r,setTimeout(()=>{t()},5e3)},children:"Pay Now via UPI"})]})}function fo(){let{user:e}=(0,en.useContext)(e0);return(0,et.jsx)(eK,{children:(0,et.jsxs)(eY,{children:[(0,et.jsx)(eW,{path:"/login",element:(0,et.jsx)(h9,{})}),e?(0,et.jsxs)(et.Fragment,{children:[(0,et.jsx)(eW,{path:"/dashboard",element:(0,et.jsx)(dn,{})}),(0,et.jsx)(eW,{path:"/home",element:(0,et.jsx)(ds,{})}),(0,et.jsx)(eW,{path:"/scan",element:(0,et.jsx)(fi,{})}),(0,et.jsx)(eW,{path:"/cart",element:(0,et.jsx)(fs,{})}),(0,et.jsx)(eW,{path:"/payment",element:(0,et.jsx)(fa,{})}),(0,et.jsx)(eW,{path:"/payment-history",element:(0,et.jsx)(dr,{})}),(0,et.jsx)(eW,{path:"/profile",element:(0,et.jsx)(di,{})}),(0,et.jsx)(eW,{path:"/",element:(0,et.jsx)(eH,{to:"/dashboard"})})]}):(0,et.jsx)(eW,{path:"*",element:(0,et.jsx)(eH,{to:"/login"})})]})})}J("acw62");!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),((C=J("iWoMt"))&&C.__esModule?C.default:C).createRoot(document.getElementById("root")).render((0,et.jsx)(function(){return(0,et.jsxs)(e2,{children:[" ",(0,et.jsx)(fo,{})]})},{}));
//# sourceMappingURL=byteblaze-frontend.73f503da.js.map
